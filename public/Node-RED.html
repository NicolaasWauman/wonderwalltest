<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"><style id="ace-tomorrow">.ace-tomorrow .ace_gutter {background: #f6f6f6;color: #4D4D4C}.ace-tomorrow .ace_print-margin {width: 1px;background: #f6f6f6}.ace-tomorrow {background-color: #FFFFFF;color: #4D4D4C}.ace-tomorrow .ace_cursor {color: #AEAFAD}.ace-tomorrow .ace_marker-layer .ace_selection {background: #D6D6D6}.ace-tomorrow.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #FFFFFF;}.ace-tomorrow .ace_marker-layer .ace_step {background: rgb(255, 255, 0)}.ace-tomorrow .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #D1D1D1}.ace-tomorrow .ace_marker-layer .ace_active-line {background: #EFEFEF}.ace-tomorrow .ace_gutter-active-line {background-color : #dcdcdc}.ace-tomorrow .ace_marker-layer .ace_selected-word {border: 1px solid #D6D6D6}.ace-tomorrow .ace_invisible {color: #D1D1D1}.ace-tomorrow .ace_keyword,.ace-tomorrow .ace_meta,.ace-tomorrow .ace_storage,.ace-tomorrow .ace_storage.ace_type,.ace-tomorrow .ace_support.ace_type {color: #8959A8}.ace-tomorrow .ace_keyword.ace_operator {color: #3E999F}.ace-tomorrow .ace_constant.ace_character,.ace-tomorrow .ace_constant.ace_language,.ace-tomorrow .ace_constant.ace_numeric,.ace-tomorrow .ace_keyword.ace_other.ace_unit,.ace-tomorrow .ace_support.ace_constant,.ace-tomorrow .ace_variable.ace_parameter {color: #F5871F}.ace-tomorrow .ace_constant.ace_other {color: #666969}.ace-tomorrow .ace_invalid {color: #FFFFFF;background-color: #C82829}.ace-tomorrow .ace_invalid.ace_deprecated {color: #FFFFFF;background-color: #8959A8}.ace-tomorrow .ace_fold {background-color: #4271AE;border-color: #4D4D4C}.ace-tomorrow .ace_entity.ace_name.ace_function,.ace-tomorrow .ace_support.ace_function,.ace-tomorrow .ace_variable {color: #4271AE}.ace-tomorrow .ace_support.ace_class,.ace-tomorrow .ace_support.ace_type {color: #C99E00}.ace-tomorrow .ace_heading,.ace-tomorrow .ace_markup.ace_heading,.ace-tomorrow .ace_string {color: #718C00}.ace-tomorrow .ace_entity.ace_name.ace_tag,.ace-tomorrow .ace_entity.ace_other.ace_attribute-name,.ace-tomorrow .ace_meta.ace_tag,.ace-tomorrow .ace_string.ace_regexp,.ace-tomorrow .ace_variable {color: #C82829}.ace-tomorrow .ace_comment {color: #8E908C}.ace-tomorrow .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bdu3f/BwAlfgctduB85QAAAABJRU5ErkJggg==) right repeat-y}
/*# sourceURL=ace/css/ace-tomorrow */</style><style id="autocompletion.css">.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {    background-color: #3a674e;}.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);    position: absolute;    z-index: 2;}.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {    border: 1px solid rgba(109, 150, 13, 0.8);    background: rgba(58, 103, 78, 0.62);}.ace_completion-meta {    opacity: 0.5;    margin: 0.9em;}.ace_completion-message {    color: blue;}.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #2d69c7;}.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{    color: #93ca12;}.ace_editor.ace_autocomplete {    width: 300px;    z-index: 200000;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;    background: #fefefe;    color: #111;}.ace_dark.ace_editor.ace_autocomplete {    border: 1px #484747 solid;    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);    line-height: 1.4;    background: #25282c;    color: #c1c1c1;}
/*# sourceURL=ace/css/autocompletion.css */</style><style>.ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}</style><style>    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }</style><style id="ace-tm">.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}
/*# sourceURL=ace/css/ace-tm */</style><style id="ace_editor.css">.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_editor {position: relative;overflow: hidden;padding: 0;font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;box-sizing: border-box;min-width: 100%;contain: style size layout;font-variant-ligatures: no-common-ligatures;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: '';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;contain: style size layout;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {position: absolute;top: 0;left: 0;right: 0;padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {contain: strict;position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;contain: strict;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: transparent;color: inherit;z-index: 1000;opacity: 1;}.ace_composition_placeholder { color: transparent }.ace_composition_marker { border-bottom: 1px solid;position: absolute;border-radius: 0;margin-top: 1px;}[ace_nocontext=true] {transform: none!important;filter: none!important;clip-path: none!important;mask : none!important;contain: none!important;perspective: none!important;mix-blend-mode: initial!important;z-index: auto;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;height: 1000000px;contain: style size layout;}.ace_text-layer {font: inherit !important;position: absolute;height: 1000000px;width: 1000000px;contain: style size layout;}.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {contain: style size layout;position: absolute;top: 0;left: 0;right: 0;}.ace_hidpi .ace_text-layer,.ace_hidpi .ace_gutter-layer,.ace_hidpi .ace_content,.ace_hidpi .ace_gutter {contain: strict;will-change: transform;}.ace_hidpi .ace_text-layer > .ace_line, .ace_hidpi .ace_text-layer > .ace_line_group {contain: strict;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {opacity: 0;}.ace_smooth-blinking .ace_cursor {transition: opacity 0.18s;}.ace_animate-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: step-end;animation-name: blink-ace-animate;animation-iteration-count: infinite;}.ace_animate-blinking.ace_smooth-blinking .ace_cursor {animation-duration: 1000ms;animation-timing-function: ease-in-out;animation-name: blink-ace-animate-smooth;}@keyframes blink-ace-animate {from, to { opacity: 1; }60% { opacity: 0; }}@keyframes blink-ace-animate-smooth {from, to { opacity: 1; }45% { opacity: 1; }60% { opacity: 0; }85% { opacity: 0; }}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_error_bracket {position: absolute;border-bottom: 1px solid #DE5555;border-radius: 0;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;box-sizing: border-box;}.ace_line .ace_fold {box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_inline_button {border: 1px solid lightgray;display: inline-block;margin: -1px 8px;padding: 0 5px;pointer-events: auto;cursor: pointer;}.ace_inline_button:hover {border-color: gray;background: rgba(200,200,200,0.2);display: inline-block;pointer-events: auto;}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_mobile-menu {position: absolute;line-height: 1.5;border-radius: 4px;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;background: white;box-shadow: 1px 3px 2px grey;border: 1px solid #dcdcdc;color: black;}.ace_dark > .ace_mobile-menu {background: #333;color: #ccc;box-shadow: 1px 3px 2px grey;border: 1px solid #444;}.ace_mobile-button {padding: 2px;cursor: pointer;overflow: hidden;}.ace_mobile-button:hover {background-color: #eee;opacity:1;}.ace_mobile-button:active {background-color: #ddd;}.ace_placeholder {font-family: arial;transform: scale(0.9);transform-origin: left;white-space: pre;opacity: 0.7;margin: 0 10px;}
/*# sourceURL=ace/css/ace_editor.css */</style>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<title>Node-RED</title>
<link rel="icon" type="image/png" href="http://localhost:1880/favicon.ico">
<link rel="mask-icon" href="http://localhost:1880/red/images/node-red-icon-black.svg" color="#8f0000">
<link rel="stylesheet" href="Node-RED_files/jquery-ui.min.css">
<link rel="stylesheet" href="Node-RED_files/font-awesome.min.css">
<link rel="stylesheet" href="Node-RED_files/style.min.css">
<script src="Node-RED_files/theme-tomorrow.js"></script><script src="Node-RED_files/mode-markdown.js"></script><script src="Node-RED_files/markdown.js"></script><script src="Node-RED_files/mode-nrjavascript.js"></script><script src="Node-RED_files/javascript.js"></script></head>
<body spellcheck="false" style="">
<div id="red-ui-editor" class="red-ui-editor"><div id="red-ui-header"><span class="red-ui-header-logo"><img src="Node-RED_files/node-red.svg"><span>Node-RED</span></span><ul class="red-ui-header-toolbar hide" style="display: block;"><li><span class="red-ui-deploy-button-group button-group"><a id="red-ui-header-button-deploy" class="red-ui-deploy-button disabled" href="#"><span class="red-ui-deploy-button-content" style="opacity: 1;"><img id="red-ui-header-button-deploy-icon" src="Node-RED_files/deploy-full-o.svg"> <span>Deploy</span></span><span class="red-ui-deploy-button-spinner hide" style="display: none;"><img src="Node-RED_files/spin.svg"></span></a><a id="red-ui-header-button-deploy-options" class="red-ui-deploy-button" href="#"><i class="fa fa-caret-down"></i></a><ul class="red-ui-menu red-ui-menu-dropdown pull-right" id="red-ui-header-button-deploy-options-submenu" style="display: none;"><li><a id="deploymenu-item-full" tabindex="-1" href="#" class="active"><i class="fa fa-square pull-left"></i><i class="fa fa-check-square pull-left"></i><img src="Node-RED_files/deploy-full.svg"> <span class="red-ui-menu-label-container"><span class="red-ui-menu-label">Full</span><span class="red-ui-menu-sublabel">Deploys everything in the workspace</span></span></a></li><li><a id="deploymenu-item-flow" tabindex="-1" href="#"><i class="fa fa-square pull-left"></i><i class="fa fa-check-square pull-left"></i><img src="Node-RED_files/deploy-flows.svg"> <span class="red-ui-menu-label-container"><span class="red-ui-menu-label">Modified Flows</span><span class="red-ui-menu-sublabel">Only deploys flows that contain changed nodes</span></span></a></li><li><a id="deploymenu-item-node" tabindex="-1" href="#"><i class="fa fa-square pull-left"></i><i class="fa fa-check-square pull-left"></i><img src="Node-RED_files/deploy-nodes.svg"> <span class="red-ui-menu-label-container"><span class="red-ui-menu-label">Modified Nodes</span><span class="red-ui-menu-sublabel">Only deploys nodes that have changed</span></span></a></li><li class="red-ui-menu-divider"></li><li><a id="deploymenu-item-reload" tabindex="-1" href="#"><img src="Node-RED_files/deploy-reload.svg"> <span class="red-ui-menu-label-container"><span class="red-ui-menu-label">Restart Flows</span><span class="red-ui-menu-sublabel">Restarts the current deployed flows</span></span></a></li></ul></span></li><li style="display: none;"><a class="button" href="#"><i class="fa fa-warning"></i></a></li><li><a id="red-ui-header-button-sidemenu" class="button" href="#"><i class="fa fa-bars"></i></a><ul class="red-ui-menu red-ui-menu-dropdown pull-right" id="red-ui-header-button-sidemenu-submenu" style="display: none;"><li class="red-ui-menu-dropdown-submenu pull-left"><a id="menu-item-projects-menu" tabindex="-1" href="#"><span class="red-ui-menu-label">Projects</span></a><ul id="menu-item-projects-menu-submenu" class="red-ui-menu-dropdown"><li><a id="menu-item-projects-new" tabindex="-1" href="#"><span class="red-ui-menu-label">New</span></a></li><li><a id="menu-item-projects-open" tabindex="-1" href="#"><span class="red-ui-menu-label">Open</span></a></li><li><a id="menu-item-projects-settings" tabindex="-1" href="#"><span class="red-ui-menu-label">Project Settings</span></a></li></ul></li><li class="red-ui-menu-dropdown-submenu pull-left"><a id="menu-item-view-menu" tabindex="-1" href="#"><span class="red-ui-menu-label">View</span></a><ul id="menu-item-view-menu-submenu" class="red-ui-menu-dropdown"><li><a id="menu-item-palette" tabindex="-1" href="#" class="active"><i class="fa fa-square pull-left"></i><i class="fa fa-check-square pull-left"></i><span class="red-ui-menu-label">Show palette</span></a></li><li><a id="menu-item-sidebar" tabindex="-1" href="#" class="active"><i class="fa fa-square pull-left"></i><i class="fa fa-check-square pull-left"></i><span class="red-ui-menu-label">Show sidebar</span></a></li><li><a id="menu-item-event-log" tabindex="-1" href="#"><span class="red-ui-menu-label">Event log</span></a></li><li><a id="menu-item-action-list" tabindex="-1" href="#"><span class="red-ui-menu-label">Action list</span></a></li><li class="red-ui-menu-divider"></li><li class="red-ui-menu-group-sidebar-tabs"><a id="menu-item-view-menu-dashboard" tabindex="-1" href="#"><span class="red-ui-menu-label">Dashboard</span></a></li><li class="red-ui-menu-group-sidebar-tabs"><a id="menu-item-view-menu-debug" tabindex="-1" href="#"><span class="red-ui-menu-label">Debug messages</span></a></li></ul></li><li class="red-ui-menu-divider"></li><li><a id="menu-item-import" tabindex="-1" href="#"><span class="red-ui-menu-label">Import</span></a></li><li><a id="menu-item-export" tabindex="-1" href="#"><span class="red-ui-menu-label">Export</span></a></li><li class="red-ui-menu-divider"></li><li><a id="menu-item-search" tabindex="-1" href="#"><span class="red-ui-menu-label">Search flows</span></a></li><li class="red-ui-menu-divider"></li><li><a id="menu-item-config-nodes" tabindex="-1" href="#"><span class="red-ui-menu-label">Configuration nodes</span></a></li><li class="red-ui-menu-dropdown-submenu pull-left"><a id="menu-item-workspace" tabindex="-1" href="#"><span class="red-ui-menu-label">Flows</span></a><ul id="menu-item-workspace-submenu" class="red-ui-menu-dropdown"><li><a id="menu-item-workspace-add" tabindex="-1" href="#"><span class="red-ui-menu-label">Add</span></a></li><li><a id="menu-item-workspace-edit" tabindex="-1" href="#"><span class="red-ui-menu-label">Rename</span></a></li><li class=""><a id="menu-item-workspace-delete" tabindex="-1" href="#"><span class="red-ui-menu-label">Delete</span></a></li></ul></li><li class="red-ui-menu-dropdown-submenu pull-left"><a id="menu-item-subflow" tabindex="-1" href="#"><span class="red-ui-menu-label">Subflows</span></a><ul id="menu-item-subflow-submenu" class="red-ui-menu-dropdown"><li><a id="menu-item-subflow-create" tabindex="-1" href="#"><span class="red-ui-menu-label">Create Subflow</span></a></li><li class=""><a id="menu-item-subflow-convert" tabindex="-1" href="#"><span class="red-ui-menu-label">Selection to Subflow</span></a></li></ul></li><li class="red-ui-menu-dropdown-submenu pull-left"><a id="menu-item-group" tabindex="-1" href="#"><span class="red-ui-menu-label">Groups</span></a><ul id="menu-item-group-submenu" class="red-ui-menu-dropdown"><li class=""><a id="menu-item-group-group" tabindex="-1" href="#"><span class="red-ui-menu-label">Group selection</span></a></li><li class="disabled"><a id="menu-item-group-ungroup" tabindex="-1" href="#"><span class="red-ui-menu-label">Ungroup selection</span></a></li><li class="red-ui-menu-divider"></li><li class="disabled"><a id="menu-item-group-merge" tabindex="-1" href="#"><span class="red-ui-menu-label">Merge selection</span></a></li><li class="disabled"><a id="menu-item-group-remove" tabindex="-1" href="#"><span class="red-ui-menu-label">Remove from group</span></a></li></ul></li><li class="red-ui-menu-divider"></li><li><a id="menu-item-edit-palette" tabindex="-1" href="#"><span class="red-ui-menu-label">Manage palette</span></a></li><li class="red-ui-menu-divider"></li><li><a id="menu-item-user-settings" tabindex="-1" href="#"><span class="red-ui-menu-label">Settings</span></a></li><li class="red-ui-menu-divider"></li><li><a id="menu-item-keyboard-shortcuts" tabindex="-1" href="#"><span class="red-ui-menu-label">Keyboard shortcuts</span></a></li><li><a id="menu-item-help" tabindex="-1" href="http://nodered.org/docs" target="_blank"><span class="red-ui-menu-label">Node-RED website</span></a></li><li><a id="menu-item-node-red-version" tabindex="-1" href="#"><span class="red-ui-menu-label">v1.3.4</span></a></li></ul></li></ul><div id="red-ui-header-shade" class="hide" style="display: block;"></div></div><div id="red-ui-main-container" class="hide" style="display: block;"><div id="red-ui-workspace"><div class="red-ui-tabs red-ui-tabs-add red-ui-tabs-search red-ui-tabs-scrollable" style=""><div class="red-ui-tabs-scroll-container"><ul id="red-ui-workspace-tabs" style="width: 1229px;" class=""><li class="red-ui-tab ui-draggable ui-draggable-handle" id="red-ui-tab-cd55794b-d22868" style="width: 298.25px;"><a href="#cd55794b.d22868" class="red-ui-tab-label" title="Schoolfotografie"><span class="red-ui-workspace-disabled-icon"><i class="fa fa-ban"></i> </span><span class="red-ui-text-bidi-aware" dir="">Schoolfotografie</span></a><span class="red-ui-tabs-badges"><i class="red-ui-tabs-badge-changed fa fa-circle"></i><i class="red-ui-tabs-badge-selected fa fa-check-circle"></i></span></li><li class="red-ui-tab ui-draggable ui-draggable-handle" id="red-ui-tab-e4762531-a573f8" style="width: 298.25px;"><a href="#e4762531.a573f8" class="red-ui-tab-label" title="fotoposter work Flow "><span class="red-ui-workspace-disabled-icon"><i class="fa fa-ban"></i> </span><span class="red-ui-text-bidi-aware" dir="">fotoposter work Flow </span></a><span class="red-ui-tabs-badges"><i class="red-ui-tabs-badge-changed fa fa-circle"></i><i class="red-ui-tabs-badge-selected fa fa-check-circle"></i></span></li><li class="red-ui-tab ui-draggable ui-draggable-handle active" id="red-ui-tab-8ee901f-547468" style="width: 298.25px;"><a href="#8ee901f.547468" class="red-ui-tab-label" title="Klanten DataBase"><span class="red-ui-workspace-disabled-icon"><i class="fa fa-ban"></i> </span><span class="red-ui-text-bidi-aware" dir="">Klanten DataBase</span></a><span class="red-ui-tabs-badges"><i class="red-ui-tabs-badge-changed fa fa-circle"></i><i class="red-ui-tabs-badge-selected fa fa-check-circle"></i></span></li><li class="red-ui-tab ui-draggable ui-draggable-handle" id="red-ui-tab-1684f509-066b83" style="width: 298.25px;"><a href="#1684f509.066b83" class="red-ui-tab-label" title="pictime"><span class="red-ui-workspace-disabled-icon"><i class="fa fa-ban"></i> </span><span class="red-ui-text-bidi-aware" dir="">pictime</span></a><span class="red-ui-tabs-badges"><i class="red-ui-tabs-badge-changed fa fa-circle"></i><i class="red-ui-tabs-badge-selected fa fa-check-circle"></i></span></li></ul></div><div class="red-ui-tab-button red-ui-tabs-add"><a href="#"><i class="fa fa-plus"></i></a></div><div class="red-ui-tab-button red-ui-tabs-search"><a href="#"><i class="fa fa-list-ul"></i></a></div><div class="red-ui-tab-button red-ui-tab-scroll red-ui-tab-scroll-left"><a href="#" style="display:none;"><i class="fa fa-caret-left"></i></a></div><div class="red-ui-tab-button red-ui-tab-scroll red-ui-tab-scroll-right"><a href="#" style="display:none;"><i class="fa fa-caret-right"></i></a></div></div><div id="red-ui-workspace-tabs-shade" class="hide"></div><div id="red-ui-workspace-chart" tabindex="1" style="margin-top: 0px;" class="ui-droppable"><svg width="5000" height="5000" pointer-events="all" style="cursor: crosshair; touch-action: none;"><g><g class="red-ui-workspace-chart-event-layer" transform="scale(1)"><rect class="red-ui-workspace-chart-background" width="5000" height="5000"></rect><g class="red-ui-workspace-chart-grid" style="visibility: visible;"><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="0" y2="0"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="20" y2="20"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="40" y2="40"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="60" y2="60"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="80" y2="80"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="100" y2="100"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="120" y2="120"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="140" y2="140"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="160" y2="160"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="180" y2="180"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="200" y2="200"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="220" y2="220"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="240" y2="240"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="260" y2="260"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="280" y2="280"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="300" y2="300"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="320" y2="320"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="340" y2="340"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="360" y2="360"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="380" y2="380"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="400" y2="400"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="420" y2="420"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="440" y2="440"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="460" y2="460"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="480" y2="480"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="500" y2="500"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="520" y2="520"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="540" y2="540"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="560" y2="560"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="580" y2="580"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="600" y2="600"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="620" y2="620"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="640" y2="640"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="660" y2="660"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="680" y2="680"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="700" y2="700"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="720" y2="720"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="740" y2="740"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="760" y2="760"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="780" y2="780"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="800" y2="800"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="820" y2="820"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="840" y2="840"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="860" y2="860"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="880" y2="880"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="900" y2="900"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="920" y2="920"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="940" y2="940"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="960" y2="960"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="980" y2="980"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1000" y2="1000"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1020" y2="1020"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1040" y2="1040"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1060" y2="1060"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1080" y2="1080"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1100" y2="1100"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1120" y2="1120"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1140" y2="1140"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1160" y2="1160"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1180" y2="1180"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1200" y2="1200"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1220" y2="1220"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1240" y2="1240"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1260" y2="1260"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1280" y2="1280"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1300" y2="1300"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1320" y2="1320"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1340" y2="1340"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1360" y2="1360"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1380" y2="1380"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1400" y2="1400"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1420" y2="1420"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1440" y2="1440"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1460" y2="1460"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1480" y2="1480"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1500" y2="1500"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1520" y2="1520"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1540" y2="1540"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1560" y2="1560"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1580" y2="1580"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1600" y2="1600"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1620" y2="1620"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1640" y2="1640"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1660" y2="1660"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1680" y2="1680"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1700" y2="1700"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1720" y2="1720"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1740" y2="1740"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1760" y2="1760"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1780" y2="1780"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1800" y2="1800"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1820" y2="1820"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1840" y2="1840"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1860" y2="1860"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1880" y2="1880"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1900" y2="1900"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1920" y2="1920"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1940" y2="1940"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1960" y2="1960"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="1980" y2="1980"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2000" y2="2000"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2020" y2="2020"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2040" y2="2040"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2060" y2="2060"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2080" y2="2080"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2100" y2="2100"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2120" y2="2120"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2140" y2="2140"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2160" y2="2160"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2180" y2="2180"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2200" y2="2200"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2220" y2="2220"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2240" y2="2240"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2260" y2="2260"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2280" y2="2280"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2300" y2="2300"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2320" y2="2320"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2340" y2="2340"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2360" y2="2360"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2380" y2="2380"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2400" y2="2400"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2420" y2="2420"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2440" y2="2440"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2460" y2="2460"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2480" y2="2480"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2500" y2="2500"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2520" y2="2520"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2540" y2="2540"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2560" y2="2560"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2580" y2="2580"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2600" y2="2600"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2620" y2="2620"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2640" y2="2640"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2660" y2="2660"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2680" y2="2680"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2700" y2="2700"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2720" y2="2720"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2740" y2="2740"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2760" y2="2760"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2780" y2="2780"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2800" y2="2800"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2820" y2="2820"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2840" y2="2840"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2860" y2="2860"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2880" y2="2880"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2900" y2="2900"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2920" y2="2920"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2940" y2="2940"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2960" y2="2960"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="2980" y2="2980"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3000" y2="3000"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3020" y2="3020"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3040" y2="3040"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3060" y2="3060"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3080" y2="3080"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3100" y2="3100"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3120" y2="3120"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3140" y2="3140"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3160" y2="3160"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3180" y2="3180"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3200" y2="3200"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3220" y2="3220"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3240" y2="3240"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3260" y2="3260"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3280" y2="3280"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3300" y2="3300"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3320" y2="3320"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3340" y2="3340"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3360" y2="3360"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3380" y2="3380"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3400" y2="3400"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3420" y2="3420"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3440" y2="3440"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3460" y2="3460"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3480" y2="3480"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3500" y2="3500"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3520" y2="3520"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3540" y2="3540"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3560" y2="3560"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3580" y2="3580"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3600" y2="3600"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3620" y2="3620"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3640" y2="3640"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3660" y2="3660"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3680" y2="3680"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3700" y2="3700"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3720" y2="3720"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3740" y2="3740"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3760" y2="3760"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3780" y2="3780"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3800" y2="3800"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3820" y2="3820"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3840" y2="3840"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3860" y2="3860"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3880" y2="3880"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3900" y2="3900"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3920" y2="3920"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3940" y2="3940"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3960" y2="3960"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="3980" y2="3980"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4000" y2="4000"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4020" y2="4020"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4040" y2="4040"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4060" y2="4060"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4080" y2="4080"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4100" y2="4100"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4120" y2="4120"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4140" y2="4140"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4160" y2="4160"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4180" y2="4180"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4200" y2="4200"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4220" y2="4220"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4240" y2="4240"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4260" y2="4260"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4280" y2="4280"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4300" y2="4300"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4320" y2="4320"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4340" y2="4340"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4360" y2="4360"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4380" y2="4380"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4400" y2="4400"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4420" y2="4420"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4440" y2="4440"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4460" y2="4460"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4480" y2="4480"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4500" y2="4500"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4520" y2="4520"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4540" y2="4540"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4560" y2="4560"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4580" y2="4580"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4600" y2="4600"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4620" y2="4620"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4640" y2="4640"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4660" y2="4660"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4680" y2="4680"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4700" y2="4700"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4720" y2="4720"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4740" y2="4740"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4760" y2="4760"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4780" y2="4780"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4800" y2="4800"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4820" y2="4820"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4840" y2="4840"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4860" y2="4860"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4880" y2="4880"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4900" y2="4900"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4920" y2="4920"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4940" y2="4940"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4960" y2="4960"></line><line class="red-ui-workspace-chart-grid-h" x1="0" x2="5000" y1="4980" y2="4980"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="0" x2="0"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="20" x2="20"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="40" x2="40"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="60" x2="60"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="80" x2="80"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="100" x2="100"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="120" x2="120"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="140" x2="140"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="160" x2="160"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="180" x2="180"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="200" x2="200"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="220" x2="220"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="240" x2="240"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="260" x2="260"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="280" x2="280"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="300" x2="300"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="320" x2="320"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="340" x2="340"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="360" x2="360"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="380" x2="380"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="400" x2="400"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="420" x2="420"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="440" x2="440"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="460" x2="460"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="480" x2="480"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="500" x2="500"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="520" x2="520"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="540" x2="540"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="560" x2="560"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="580" x2="580"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="600" x2="600"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="620" x2="620"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="640" x2="640"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="660" x2="660"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="680" x2="680"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="700" x2="700"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="720" x2="720"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="740" x2="740"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="760" x2="760"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="780" x2="780"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="800" x2="800"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="820" x2="820"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="840" x2="840"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="860" x2="860"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="880" x2="880"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="900" x2="900"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="920" x2="920"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="940" x2="940"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="960" x2="960"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="980" x2="980"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1000" x2="1000"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1020" x2="1020"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1040" x2="1040"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1060" x2="1060"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1080" x2="1080"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1100" x2="1100"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1120" x2="1120"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1140" x2="1140"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1160" x2="1160"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1180" x2="1180"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1200" x2="1200"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1220" x2="1220"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1240" x2="1240"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1260" x2="1260"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1280" x2="1280"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1300" x2="1300"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1320" x2="1320"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1340" x2="1340"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1360" x2="1360"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1380" x2="1380"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1400" x2="1400"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1420" x2="1420"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1440" x2="1440"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1460" x2="1460"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1480" x2="1480"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1500" x2="1500"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1520" x2="1520"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1540" x2="1540"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1560" x2="1560"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1580" x2="1580"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1600" x2="1600"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1620" x2="1620"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1640" x2="1640"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1660" x2="1660"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1680" x2="1680"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1700" x2="1700"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1720" x2="1720"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1740" x2="1740"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1760" x2="1760"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1780" x2="1780"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1800" x2="1800"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1820" x2="1820"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1840" x2="1840"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1860" x2="1860"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1880" x2="1880"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1900" x2="1900"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1920" x2="1920"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1940" x2="1940"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1960" x2="1960"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="1980" x2="1980"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2000" x2="2000"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2020" x2="2020"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2040" x2="2040"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2060" x2="2060"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2080" x2="2080"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2100" x2="2100"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2120" x2="2120"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2140" x2="2140"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2160" x2="2160"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2180" x2="2180"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2200" x2="2200"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2220" x2="2220"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2240" x2="2240"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2260" x2="2260"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2280" x2="2280"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2300" x2="2300"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2320" x2="2320"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2340" x2="2340"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2360" x2="2360"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2380" x2="2380"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2400" x2="2400"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2420" x2="2420"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2440" x2="2440"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2460" x2="2460"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2480" x2="2480"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2500" x2="2500"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2520" x2="2520"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2540" x2="2540"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2560" x2="2560"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2580" x2="2580"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2600" x2="2600"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2620" x2="2620"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2640" x2="2640"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2660" x2="2660"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2680" x2="2680"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2700" x2="2700"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2720" x2="2720"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2740" x2="2740"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2760" x2="2760"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2780" x2="2780"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2800" x2="2800"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2820" x2="2820"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2840" x2="2840"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2860" x2="2860"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2880" x2="2880"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2900" x2="2900"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2920" x2="2920"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2940" x2="2940"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2960" x2="2960"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="2980" x2="2980"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3000" x2="3000"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3020" x2="3020"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3040" x2="3040"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3060" x2="3060"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3080" x2="3080"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3100" x2="3100"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3120" x2="3120"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3140" x2="3140"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3160" x2="3160"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3180" x2="3180"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3200" x2="3200"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3220" x2="3220"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3240" x2="3240"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3260" x2="3260"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3280" x2="3280"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3300" x2="3300"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3320" x2="3320"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3340" x2="3340"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3360" x2="3360"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3380" x2="3380"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3400" x2="3400"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3420" x2="3420"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3440" x2="3440"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3460" x2="3460"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3480" x2="3480"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3500" x2="3500"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3520" x2="3520"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3540" x2="3540"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3560" x2="3560"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3580" x2="3580"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3600" x2="3600"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3620" x2="3620"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3640" x2="3640"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3660" x2="3660"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3680" x2="3680"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3700" x2="3700"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3720" x2="3720"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3740" x2="3740"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3760" x2="3760"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3780" x2="3780"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3800" x2="3800"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3820" x2="3820"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3840" x2="3840"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3860" x2="3860"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3880" x2="3880"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3900" x2="3900"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3920" x2="3920"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3940" x2="3940"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3960" x2="3960"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="3980" x2="3980"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4000" x2="4000"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4020" x2="4020"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4040" x2="4040"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4060" x2="4060"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4080" x2="4080"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4100" x2="4100"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4120" x2="4120"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4140" x2="4140"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4160" x2="4160"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4180" x2="4180"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4200" x2="4200"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4220" x2="4220"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4240" x2="4240"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4260" x2="4260"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4280" x2="4280"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4300" x2="4300"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4320" x2="4320"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4340" x2="4340"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4360" x2="4360"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4380" x2="4380"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4400" x2="4400"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4420" x2="4420"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4440" x2="4440"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4460" x2="4460"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4480" x2="4480"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4500" x2="4500"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4520" x2="4520"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4540" x2="4540"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4560" x2="4560"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4580" x2="4580"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4600" x2="4600"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4620" x2="4620"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4640" x2="4640"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4660" x2="4660"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4680" x2="4680"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4700" x2="4700"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4720" x2="4720"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4740" x2="4740"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4760" x2="4760"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4780" x2="4780"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4800" x2="4800"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4820" x2="4820"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4840" x2="4840"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4860" x2="4860"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4880" x2="4880"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4900" x2="4900"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4920" x2="4920"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4940" x2="4940"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4960" x2="4960"></line><line class="red-ui-workspace-chart-grid-v" y1="0" y2="5000" x1="4980" x2="4980"></line></g><g></g><g></g><g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 340 240 C 415 240 1025 240 1100 240"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 340 240 C 415 240 1025 240 1100 240"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 340 240 C 415 240 1025 240 1100 240"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 280 1480 280"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 280 1480 280"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 280 1480 280"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 320 1480 320"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 320 1480 320"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 320 1480 320"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 360 1480 360"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 360 1480 360"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 360 1480 360"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 400 1480 400"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 400 1480 400"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 400 1480 400"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 440 1480 440"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 440 1480 440"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 440 1480 440"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 480 1480 480"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 480 1480 480"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 480 1480 480"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 520 1480 520"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 520 1480 520"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 520 1480 520"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 560 1480 560"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 560 1480 560"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 560 1480 560"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 600 1480 600"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 600 1480 600"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 600 1480 600"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 640 1480 640"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 640 1480 640"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 640 1480 640"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 680 1480 680"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 680 1480 680"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 680 1480 680"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 720 1480 720"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 720 1480 720"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 720 1480 720"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 760 1480 760"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 760 1480 760"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 760 1480 760"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 800 1480 800"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 800 1480 800"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 800 1480 800"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 240 1480 240"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 240 C 1375 240 1405 240 1480 240"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 240 C 1375 240 1405 240 1480 240"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 240 1480 240"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 240 1480 240"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 240 1480 240"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 280 1480 280"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 280 1480 280"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 280 1480 280"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 320 1480 320"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 320 1480 320"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 320 1480 320"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 360 1480 360"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 360 1480 360"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 360 1480 360"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 400 1480 400"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 400 1480 400"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 400 1480 400"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 440 1480 440"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 440 1480 440"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 440 1480 440"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 480 1480 480"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 480 1480 480"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 480 1480 480"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 520 1480 520"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 520 1480 520"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 520 1480 520"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 560 1480 560"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 560 1480 560"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 560 1480 560"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 600 1480 600"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 600 1480 600"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 600 1480 600"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 640 1480 640"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 640 1480 640"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 640 1480 640"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 680 1480 680"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 680 1480 680"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 680 1480 680"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 720 1480 720"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 720 1480 720"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 720 1480 720"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 760 1480 760"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 760 1480 760"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 760 1480 760"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 800 1480 800"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1375 300 1405 800 1480 800"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1375 300 1405 800 1480 800"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1300 300 C 1320 300 1340 307.5 1340 315 S 1340 330 720 360 S 100 397.5 100 405 S 120 420 140 420"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1300 300 C 1320 300 1340 307.5 1340 315 S 1340 330 720 360 S 100 397.5 100 405 S 120 420 140 420"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1300 300 C 1320 300 1340 307.5 1340 315 S 1340 330 720 360 S 100 397.5 100 405 S 120 420 140 420"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 340 300 C 415 300 1025 300 1100 300"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 340 300 C 415 300 1025 300 1100 300"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 340 300 C 415 300 1025 300 1100 300"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 580 420 C 610 420 590 420 620 420"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 580 420 C 610 420 590 420 620 420"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 580 420 C 610 420 590 420 620 420"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 280 420 C 355 420 305 420 380 420"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 280 420 C 355 420 305 420 380 420"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 280 420 C 355 420 305 420 380 420"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 740 420 C 755 420 745 420 760 420"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 740 420 C 755 420 745 420 760 420"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 740 420 C 755 420 745 420 760 420"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 320 560 C 395 560 425 560 500 560"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 320 560 C 395 560 425 560 500 560"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 320 560 C 395 560 425 560 500 560"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 720 560 C 765 560 735 560 780 560"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 720 560 C 765 560 735 560 780 560"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 720 560 C 765 560 735 560 780 560"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1060 560 C 1090 560 1070 560 1100 560"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1060 560 C 1090 560 1070 560 1100 560"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 1060 560 C 1090 560 1070 560 1100 560"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 900 560 C 945 560 915 560 960 560"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 900 560 C 945 560 915 560 960 560"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 900 560 C 945 560 915 560 960 560"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 1240 560 C 1260 560 1280 560 1280 545 S 1280 530 1170 430 S 1060 330 1060 315 S 1080 300 1100 300"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 1240 560 C 1260 560 1280 560 1280 545 S 1280 530 1170 430 S 1060 330 1060 315 S 1080 300 1100 300"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 1240 560 C 1260 560 1280 560 1280 545 S 1280 530 1170 430 S 1060 330 1060 315 S 1080 300 1100 300"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 320 560 C 395 560 1085 700 1160 700"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 320 560 C 395 560 1085 700 1160 700"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 320 560 C 395 560 1085 700 1160 700"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 370 160 C 392.5 160 377.5 160 400 160"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 370 160 C 392.5 160 377.5 160 400 160"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 370 160 C 392.5 160 377.5 160 400 160"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 620 160 C 695 160 1085 700 1160 700"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 620 160 C 695 160 1085 700 1160 700"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 620 160 C 695 160 1085 700 1160 700"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 620 160 C 650 160 630 160 660 160"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 620 160 C 650 160 630 160 660 160"></path><path class="red-ui-flow-link-line red-ui-flow-link-path" d="M 620 160 C 650 160 630 160 660 160"></path></g><g class="red-ui-flow-link"><path class="red-ui-flow-link-background red-ui-flow-link-path" d="M 780 160 C 802.5 160 787.5 160 810 160"></path><path class="red-ui-flow-link-outline red-ui-flow-link-path" d="M 780 160 C 802.5 160 787.5 160 810 160"></path><path class="red-ui-flow-link-line red-ui-flow-link-path red-ui-flow-subflow-link" d="M 780 160 C 802.5 160 787.5 160 810 160"></path></g></g><g></g><g><g class="red-ui-flow-node red-ui-flow-node-group" id="6765f743.949d58" transform="translate(140,225)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(176, 223, 227)" width="200" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_form.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">SEND TO DATABASE</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(190, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(190, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(195,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="cf028b6b.c65ea" transform="translate(1100,225)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#68B368" width="200" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red/mongodb.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">DB Klanten insertOne</text></g><g class="red-ui-flow-node-status-group" style="display: inline;" transform="translate(3,33)"><rect class="red-ui-flow-node-status red-ui-flow-node-status-dot-yellow" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3" style="display: inline;"></rect><text class="red-ui-flow-node-status-label" x="20" y="10">53, success: 53, error: 0</text></g><g class="red-ui-flow-node-changed hide" transform="translate(190, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(190, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(195,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="96718d2.b64b67" transform="translate(1480,225)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(70,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(62,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">naam</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(90, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(90, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="8db0b33d.f87ae8" transform="translate(1480,265)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(90,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(82,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">voornaam</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(110, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(110, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="1f652f05.d4a969" transform="translate(1480,305)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(70,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(62,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">email</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(90, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(90, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="334fdf3b.38801" transform="translate(1480,345)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="140" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(110,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(102,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">straatnaam</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(130, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(130, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="95593543.aa46d" transform="translate(1480,385)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(70,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(62,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">huisnr</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(90, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(90, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="6f7d5697.3265f" transform="translate(1480,425)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(70,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(62,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">stad</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(90, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(90, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="2c9b19f8.32e2e6" transform="translate(1480,465)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(90,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(82,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">telefoon</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(110, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(110, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="3a9b7d53.0488a2" transform="translate(1480,505)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="140" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(110,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(102,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">bedrijfsnaam</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(130, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(130, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="32aae1d5.a5e80e" transform="translate(1480,545)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(70,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(62,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">btw</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(90, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(90, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="1e020c5f.25d9cc" transform="translate(1480,585)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(90,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(82,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">account</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(110, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(110, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="8ab7b31d.4d0738" transform="translate(1480,625)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="140" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(110,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(102,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">bestellingen</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(130, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(130, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="48b8091.660abf8" transform="translate(1480,665)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(90,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(82,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">jaaromzet</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(110, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(110, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="c823e1d1.55bf68" transform="translate(1480,705)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="140" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(110,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(102,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">totaalomzet</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(130, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(130, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="4110d003.aaedc8" transform="translate(1480,745)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(70,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(62,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">job</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(90, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(90, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="d882e193.41e1f8" transform="translate(1480,785)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(119, 198, 204)" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(70,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(62,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">extra</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(90, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(90, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="94ce6701.a0253" transform="translate(1160,685)"><g transform="translate(94,2)" class="red-ui-flow-node-button" style="display: inherit;"><rect class="red-ui-flow-node-button-background" rx="5" ry="5" width="32" height="26" fill-opacity="1"></rect><rect class="red-ui-flow-node-button-button" x="11" y="4" rx="4" ry="4" width="16" height="18" fill="#87a980" fill-opacity="1"></rect></g><rect class="red-ui-flow-node" rx="5" ry="5" fill="#87a980" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(70,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red/debug.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(62,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">msg</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(90, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(90, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="5cdf30fc.3b9a18" transform="translate(1100,285)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#68B368" width="200" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red/mongodb.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">DB Klanten findOne</text></g><g class="red-ui-flow-node-status-group" style="display: inline;" transform="translate(3,33)"><rect class="red-ui-flow-node-status red-ui-flow-node-status-dot-yellow" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3" style="display: inline;"></rect><text class="red-ui-flow-node-status-label" x="20" y="10">5, success: 5, error: 0</text></g><g class="red-ui-flow-node-changed hide" transform="translate(190, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(190, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(195,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="8f103303.60bf1" transform="translate(80,285)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(176, 223, 227)" width="260" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_form.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">GET INFO FROM DATABASE</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(250, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(250, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(255,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="752bc5a0.524d24" transform="translate(380,405)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="rgb(176, 223, 227)" width="200" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_form.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">UPDATE DATABASE</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(190, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(190, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(195,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="c59f3f4.f03a34" transform="translate(760,405)"><rect class="red-ui-flow-node" rx="5" ry="5" fill="#68B368" width="260" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red/mongodb.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">DB Klanten findOneAndUpdate</text></g><g class="red-ui-flow-node-status-group" style="display: inline;" transform="translate(3,33)"><rect class="red-ui-flow-node-status red-ui-flow-node-status-dot-yellow" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3" style="display: inline;"></rect><text class="red-ui-flow-node-status-label" x="20" y="10">2, success: 0, error: 2</text></g><g class="red-ui-flow-node-changed hide" transform="translate(250, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(250, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(255,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="13baa4e1.7264ab" transform="translate(140,405)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#fdd0a2" width="140" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red/function.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">store in flow</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(130, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(130, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(135,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="bfd5a1bd.673f08" transform="translate(620,405)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#fdd0a2" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red/function.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">function</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(110, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(110, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(115,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="abbb344d.ce02f" transform="translate(160,545)"><rect class="red-ui-flow-node" rx="5" ry="5" fill="rgb(176, 223, 227)" width="160" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_button.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">Get All Names</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(150, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(150, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(155,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="aa0cf334.be209" transform="translate(500,545)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#68B368" width="220" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red/mongodb.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">DB Klanten find.toArray</text></g><g class="red-ui-flow-node-status-group" style="display: inline;" transform="translate(3,33)"><rect class="red-ui-flow-node-status red-ui-flow-node-status-dot-yellow" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3" style="display: inline;"></rect><text class="red-ui-flow-node-status-label" x="20" y="10">1, success: 1, error: 0</text></g><g class="red-ui-flow-node-changed hide" transform="translate(210, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(210, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(215,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="9242564.d73a528" transform="translate(960,545)"><rect class="red-ui-flow-node" rx="5" ry="5" fill="rgb( 63, 173, 181)" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-node-ui-list/icon.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">list</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(90, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(90, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(95,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="a3f7cf1a.e5ce18" transform="translate(780,545)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#fdd0a2" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red/function.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">function</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(110, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(110, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(115,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="eccc3f8e.45b2c8" transform="translate(1100,545)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#fdd0a2" width="140" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red/function.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label node_label_italic" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">Make query</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(130, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(130, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(135,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="48445f0.d81f1a" transform="translate(230,145)"><rect class="red-ui-flow-node" rx="5" ry="5" fill="rgb(176, 223, 227)" width="140" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_button.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">How many</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(130, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(130, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(135,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="fe79f9dd.e7e608" transform="translate(810,145)"><rect class="red-ui-flow-node" rx="5" ry="5" fill="rgb(119, 198, 204)" width="100" height="30"></rect><g class="red-ui-flow-node-icon-group red-ui-flow-node-icon-group-right" x="0" y="0" style="pointer-events: none;" transform="translate(70,0)"><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red-dashboard/ui_text.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 0 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label red-ui-flow-node-label-right" transform="translate(62,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">Count:</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(90, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(90, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group" id="b6fdde4a.5bc948" transform="translate(400,145)"><rect class="red-ui-flow-node " rx="5" ry="5" fill="#68B368" width="220" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red/mongodb.png" class="red-ui-flow-node-icon" x="5" width="20" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">DB Klanten find.toArray</text></g><g class="red-ui-flow-node-status-group" style="display: inline;" transform="translate(3,33)"><rect class="red-ui-flow-node-status red-ui-flow-node-status-dot-yellow" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3" style="display: inline;"></rect><text class="red-ui-flow-node-status-label" x="20" y="10">1, success: 1, error: 0</text></g><g class="red-ui-flow-node-changed hide" transform="translate(210, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(210, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(215,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g><g class="red-ui-flow-node red-ui-flow-node-group red-ui-flow-node-selected" id="90437d41.b8685" transform="translate(660,145)"><rect class="red-ui-flow-node" rx="5" ry="5" fill="#fdd0a2" width="120" height="30"></rect><g class="red-ui-flow-node-icon-group" x="0" y="0" style="pointer-events: none;" transform=""><rect x="0" y="0" class="red-ui-flow-node-icon-shade" width="30" height="30"></rect><image style="" xlink:href="icons/node-red/function.svg" class="red-ui-flow-node-icon" x="0" width="30" height="30" y="0"></image><path d="M 30 1 l 0 28" class="red-ui-flow-node-icon-shade-border"></path></g><g class="red-ui-flow-node-label" transform="translate(38,16)"><text class="red-ui-flow-node-label-text" x="0" y="0">function</text></g><g class="red-ui-flow-node-status-group" style="display: none;"><rect class="red-ui-flow-node-status" x="6" y="1" width="9" height="9" rx="2" ry="2" stroke-width="3"></rect><text class="red-ui-flow-node-status-label" x="20" y="10"></text></g><g class="red-ui-flow-node-changed hide" transform="translate(110, -2)"><circle r="5"></circle></g><g class="red-ui-flow-node-error hide" transform="translate(110, -2)"><path d="M -5,4 l 10,0 -5,-8 z"></path></g><g class="red-ui-flow-port-input" transform="translate(-5,10)"><rect class="red-ui-flow-port" rx="3" ry="3" width="10" height="10"></rect></g><g class="red-ui-flow-port-output" transform="translate(115,10)"><rect rx="3" ry="3" width="10" height="10" class="red-ui-flow-port"></rect></g></g></g></g></g></svg></div><div id="red-ui-workspace-toolbar" style="display: none;"></div><div id="red-ui-workspace-footer" class="red-ui-component-footer"><span class="red-ui-statusbar-bucket red-ui-statusbar-bucket-left"></span><span class="red-ui-statusbar-bucket red-ui-statusbar-bucket-right"><span class="red-ui-statusbar-widget"><button class="red-ui-footer-button-toggle single" id="red-ui-view-navigate"><i class="fa fa-map-o"></i></button></span><span class="red-ui-statusbar-widget"><span class="button-group"><button class="red-ui-footer-button" id="red-ui-view-zoom-out"><i class="fa fa-minus"></i></button><button class="red-ui-footer-button" id="red-ui-view-zoom-zero"><i class="fa fa-circle-o"></i></button><button class="red-ui-footer-button" id="red-ui-view-zoom-in"><i class="fa fa-plus"></i></button></span></span></span></div><div id="red-ui-editor-shade" class="hide" style="display: block;"></div><div style="position: absolute; bottom: 25px; right: 0px; z-index: 1; display: none;"><svg width="200" height="200" pointer-events="all" id="red-ui-navigator-canvas"><rect x="0" y="0" width="200" height="200" style="fill: none; stroke: none;"></rect><rect class="red-ui-navigator-border" x="0" y="0" width="53.8" height="33.48"></rect><g></g></svg></div></div><div id="red-ui-editor-stack"><div class="red-ui-tray ui-draggable" style="width: 640.2px; right: 0px; transition: right 0.25s ease 0s;"><div class="red-ui-tray-header editor-tray-header"><div class="red-ui-tray-titlebar"><ul class="red-ui-tray-breadcrumbs"><li>Edit function node</li></ul></div><div class="red-ui-tray-toolbar"><button class="ui-button ui-corner-all ui-widget leftButton" id="node-dialog-delete">Delete</button><button class="ui-button ui-corner-all ui-widget" id="node-dialog-cancel">Cancel</button><button class="ui-button ui-corner-all ui-widget primary" id="node-dialog-ok">Done</button></div></div><div class="red-ui-tray-body-wrapper" style="overflow: hidden;"><div class="red-ui-tray-body editor-tray-body" style="min-width: 600.2px; height: 778.2px;"><div class="red-ui-tabs red-ui-tabs-collapsible"><div><ul><li class="red-ui-tab red-ui-tab-pinned active" id="red-ui-tab-editor-tab-properties" style="width: 528px;"><a href="#editor-tab-properties" class="red-ui-tab-label" title="Properties"><i class="red-ui-tab-icon fa fa-cog"></i><span class="red-ui-text-bidi-aware" dir="">Properties</span></a><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab red-ui-tab-pinned" id="red-ui-tab-editor-tab-description" style="width: 528px;"><a href="#editor-tab-description" class="red-ui-tab-label" title="Description"><i class="red-ui-tab-icon fa fa-file-text-o"></i><span class="red-ui-text-bidi-aware" dir="">Description</span></a><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab red-ui-tab-pinned" id="red-ui-tab-editor-tab-appearance" style="width: 528px;"><a href="#editor-tab-appearance" class="red-ui-tab-label" title="Appearance"><i class="red-ui-tab-icon fa fa-object-group"></i><span class="red-ui-text-bidi-aware" dir="">Appearance</span></a><span class="red-ui-tabs-badges"></span></li></ul></div><div class="red-ui-tab-link-buttons"><a href="#editor-tab-properties" class="red-ui-tab-link-button active selected" id="red-ui-tab-editor-tab-properties-link-button"><i class="fa fa-cog"></i></a><a href="#editor-tab-description" class="red-ui-tab-link-button" id="red-ui-tab-editor-tab-description-link-button"><i class="fa fa-file-text-o"></i></a><a href="#editor-tab-appearance" class="red-ui-tab-link-button" id="red-ui-tab-editor-tab-appearance-link-button"><i class="fa fa-object-group"></i></a></div></div><div><div class="red-ui-tray-content" style="height: 728px;"><form id="dialog-form" class="form-horizontal" autocomplete="off" style="height: 688px;"><span style="position: absolute; top: -2000px;"><input id="red-ui-trap-user" type="text" autocomplete="off"></span><span style="position: absolute; top: -2000px;"><input id="red-ui-trap-username" type="text" autocomplete="off"></span><span style="position: absolute; top: -2000px;"><input id="red-ui-trap-password" type="password" autocomplete="off"></span>
    <style>
        .func-tabs-row {
            margin-bottom: 0;
        }
        #node-input-libs-container-row .red-ui-editableList-container {
            padding: 0px;
        }
        #node-input-libs-container-row .red-ui-editableList-container li {
            padding:5px;
        }
        #node-input-libs-container-row .red-ui-editableList-item-remove {
            right: 5px;
        }
        .node-libs-entry {
            display: flex;
        }
        .node-libs-entry .node-input-libs-var, .node-libs-entry .red-ui-typedInput-container {
            flex-grow: 1;
        }
        .node-libs-entry > code,.node-libs-entry > span  {
            line-height: 30px;
        }
        .node-libs-entry > input[type=text] {
            border-radius: 0;
            border-left: none;
            border-top: none;
            border-right: none;
            padding-top: 2px;
            padding-bottom: 2px;
            margin-top: 4px;
            margin-bottom: 2px;
            height: 26px;
        }

        .node-libs-entry > span > i {
            display: none;
        }
        .node-libs-entry > span.input-error > i {
            display: inline;
        }

    </style>
    <input type="hidden" id="node-input-func" autocomplete="off" value="const object = msg.payload;
const count = Object.keys(array).length();
return msg;" dir="">
    <input type="hidden" id="node-input-noerr" autocomplete="off" value="0" dir="" class="input-error">
    <input type="hidden" id="node-input-finalize" autocomplete="off" value="" dir="">
    <input type="hidden" id="node-input-initialize" autocomplete="off" value="" dir="">

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name">Name</span></label>
        <div style="display: inline-block; width: calc(100% - 105px)"><input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name" autocomplete="off" dir="" style="width: calc(100% - 52px);" placeholder="Name"><div style="margin-left:5px; display: inline-block;position: relative;"><a id="node-input-function-lookup" class="red-ui-button"><i class="fa fa-book"></i> <i class="fa fa-caret-down"></i></a><ul class="red-ui-menu red-ui-menu-dropdown pull-right" id="node-input-function-lookup-submenu"><li><a id="node-input-function-menu-open-library" tabindex="-1" href="#"><span class="red-ui-menu-label">Open Library...</span></a></li><li><a id="node-input-function-menu-save-library" tabindex="-1" href="#"><span class="red-ui-menu-label">Save to Library...</span></a></li></ul></div></div>
    </div>


    <div class="form-row func-tabs-row">
        <div class="red-ui-tabs"><div><ul style="min-width: 600px; margin-bottom: 20px;" id="func-tabs"><li class="red-ui-tab" id="red-ui-tab-func-tab-config" style="width: 23.5%;"><a href="#func-tab-config" class="red-ui-tab-label" title="Setup"><i class="red-ui-tab-icon fa fa-cog"></i><span class="red-ui-text-bidi-aware" dir="">Setup</span></a><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab" id="red-ui-tab-func-tab-init" style="width: 23.5%;"><a href="#func-tab-init" class="red-ui-tab-label" title="On Start"><span class="red-ui-text-bidi-aware" dir="">On Start</span></a><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab active" id="red-ui-tab-func-tab-body" style="width: 23.5%;"><a href="#func-tab-body" class="red-ui-tab-label" title="On Message"><span class="red-ui-text-bidi-aware" dir="">On Message</span></a><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab" id="red-ui-tab-func-tab-finalize" style="width: 23.5%;"><a href="#func-tab-finalize" class="red-ui-tab-label" title="On Stop"><span class="red-ui-text-bidi-aware" dir="">On Stop</span></a><span class="red-ui-tabs-badges"></span></li></ul></div></div>
    </div>
    <div id="func-tabs-content" style="min-height: calc(100% - 95px);">

        <div id="func-tab-config" style="display: none;">
            <div class="form-row">
                <label for="node-input-outputs"><i class="fa fa-random"></i> <span data-i18n="node-red:function.label.outputs">Outputs</span></label>
                <span class="ui-spinner ui-corner-all ui-widget ui-widget-content"><input id="node-input-outputs" style="width: 60px;" value="1" autocomplete="off" dir="" aria-valuemin="0" aria-valuenow="1" class="ui-spinner-input" role="spinbutton"><a tabindex="-1" aria-hidden="true" class="ui-button ui-widget ui-spinner-button ui-spinner-up ui-corner-tr ui-button-icon-only" role="button"><span class="ui-button-icon ui-icon ui-icon-triangle-1-n"></span><span class="ui-button-icon-space"> </span></a><a tabindex="-1" aria-hidden="true" class="ui-button ui-widget ui-spinner-button ui-spinner-down ui-corner-br ui-button-icon-only" role="button"><span class="ui-button-icon ui-icon ui-icon-triangle-1-s"></span><span class="ui-button-icon-space"> </span></a></span>
            </div>

            <div class="form-row node-input-libs-row hide" style="margin-bottom: 0px;">
                <label><i class="fa fa-cubes"></i> <span data-i18n="node-red:function.label.modules">Modules</span></label>
            </div>
            <div class="form-row node-input-libs-row hide" id="node-input-libs-container-row">
                <ol id="node-input-libs-container" style="height: 503px;"></ol>
            </div>
        </div>

        <div id="func-tab-init" style="display:none">
            <div class="form-row node-text-editor-row" style="position:relative">
                <div style="height: 595px; min-height: 150px;" class="node-text-editor" id="node-input-init-editor"><div></div><div class="red-ui-editor-text-container ace_editor ace_hidpi ace-tomorrow"><textarea class="ace_text-input" autocorrect="off" autocapitalize="none" spellcheck="false" style="opacity: 0; font-size: 1px;" wrap="off"></textarea><div class="ace_gutter" aria-hidden="true"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="height: 1000000px;"></div></div><div class="ace_scroller" style="line-height: 0px;"><div class="ace_content"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 4px; visibility: visible;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="height: 1000000px; margin: 0px 4px;"></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px;"><div class="ace_scrollbar-inner" style="width: 20px;">&nbsp;</div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px;"><div class="ace_scrollbar-inner" style="height: 20px;">&nbsp;</div></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div></div>
                <div style="position: absolute; right:0; bottom: calc(100% - 20px); z-Index: 10;"><button id="node-init-expand-js" class="red-ui-button red-ui-button-small"><i class="fa fa-expand"></i></button></div>
            </div>
        </div>

        <div id="func-tab-body" style="">
            <div class="form-row node-text-editor-row" style="position:relative">
                <div style="height: 595px; min-height: 150px;" class="node-text-editor" id="node-input-func-editor"><div></div><div class="red-ui-editor-text-container ace_editor ace_hidpi ace-tomorrow ace_focus"><textarea class="ace_text-input" autocorrect="off" autocapitalize="none" spellcheck="false" style="opacity: 0; font-size: 1px; height: 1px; width: 1px; transform: translate(214px, 51px);" wrap="off">msg.payload = count;

</textarea><div class="ace_gutter" aria-hidden="true" style="left: 0px; width: 42px;"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="height: 1000000px; transform: translate(0px); width: 42px;"><div class="ace_gutter-cell " style="height: 17px; top: 0px;">1<span style="display: none;"></span></div><div class="ace_gutter-cell " style="height: 17px; top: 17px;">2<span style="display: none;"></span></div><div class="ace_gutter-cell ace_gutter-active-line " style="height: 17px; top: 34px;">3<span style="display: none;"></span></div><div class="ace_gutter-cell " style="height: 17px; top: 51px;">4<span style="display: none;"></span></div></div></div><div class="ace_scroller" style="line-height: 17px; left: 41.4336px; right: 0px; bottom: 0px;"><div class="ace_content" style="transform: translate(0px); width: 556.566px; height: 629px;"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 679px; visibility: visible;"></div></div><div class="ace_layer ace_marker-layer"><div style="height: 17px; top: 34px; left: 0px; right: 0px;" class="ace_active-line"></div></div><div class="ace_layer ace_text-layer" style="height: 1000000px; margin: 0px 4px; transform: translate(0px);"><div style="height: 17px; top: 0px;" class="ace_line"><span class="ace_storage ace_type">const</span> <span class="ace_identifier">object</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">msg</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">payload</span><span class="ace_punctuation ace_operator">;</span></div><div style="height: 17px; top: 17px;" class="ace_line"><span class="ace_storage ace_type">const</span> <span class="ace_identifier">count</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_variable ace_language">Object</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">keys</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">array</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_constant">length</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span><span class="ace_punctuation ace_operator">;</span></div><div style="height: 17px; top: 34px;" class="ace_line"><span class="ace_identifier">msg</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">payload</span> <span class="ace_keyword ace_operator">=</span> <span class="ace_identifier">count</span><span class="ace_punctuation ace_operator">;</span></div><div style="height: 17px; top: 51px;" class="ace_line"><span class="ace_keyword">return</span> <span class="ace_identifier">msg</span><span class="ace_punctuation ace_operator">;</span></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_animate-blinking"><div class="ace_cursor" style="animation-duration: 1000ms; display: block; transform: translate(173px, 34px); width: 8px; height: 17px;"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px; bottom: 0px;"><div class="ace_scrollbar-inner" style="width: 20px; height: 68px;">&nbsp;</div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px; left: 41.4336px; right: 0px;"><div class="ace_scrollbar-inner" style="height: 20px; width: 556.566px;">&nbsp;</div></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font-style: inherit; font-variant: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; font-size-adjust: inherit; font-kerning: inherit; font-optical-sizing: inherit; font-language-override: inherit; font-feature-settings: inherit; font-variation-settings: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div></div>
                <div style="position: absolute; right:0; bottom: calc(100% - 20px); z-Index: 10;"><button id="node-function-expand-js" class="red-ui-button red-ui-button-small"><i class="fa fa-expand"></i></button></div>
            </div>
        </div>

        <div id="func-tab-finalize" style="display:none">
            <div class="form-row node-text-editor-row" style="position:relative">
                <div style="height: 595px; min-height: 150px;" class="node-text-editor" id="node-input-finalize-editor"><div></div><div class="red-ui-editor-text-container ace_editor ace_hidpi ace-tomorrow"><textarea class="ace_text-input" autocorrect="off" autocapitalize="none" spellcheck="false" style="opacity: 0; font-size: 1px;" wrap="off"></textarea><div class="ace_gutter" aria-hidden="true"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="height: 1000000px;"></div></div><div class="ace_scroller" style="line-height: 0px;"><div class="ace_content"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 4px; visibility: visible;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="height: 1000000px; margin: 0px 4px;"></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px;"><div class="ace_scrollbar-inner" style="width: 20px;">&nbsp;</div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px;"><div class="ace_scrollbar-inner" style="height: 20px;">&nbsp;</div></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div></div>
                <div style="position: absolute; right:0; bottom: calc(100% - 20px); z-Index: 10;"><button id="node-finalize-expand-js" class="red-ui-button red-ui-button-small"><i class="fa fa-expand"></i></button></div>
            </div>
        </div>

    </div>
</form></div><div class="red-ui-tray-content" style="display: none; height: 728px;"><form class="dialog-form form-horizontal" autocomplete="off" style="height: 688px;"><div></div><div class="form-row node-text-editor-row" style="position:relative; padding-top: 4px; height: 100%"><div style="height: 100%" class="node-text-editor" id="node-info-input-info-editor"><div><div style="margin-bottom: 5px"><span class="button-group"><button type="button" class="red-ui-button" data-style="h1" style="font-size:1.1em; font-weight: bold">h1</button><button type="button" class="red-ui-button" data-style="h2" style="font-size:1.0em; font-weight: bold">h2</button><button type="button" class="red-ui-button" data-style="h3" style="font-size:0.9em; font-weight: bold">h3</button></span><span class="button-group"><button type="button" class="red-ui-button" data-style="b"><i class="fa fa-bold"></i></button><button type="button" class="red-ui-button" data-style="i"><i class="fa fa-italic"></i></button><button type="button" class="red-ui-button" data-style="code"><i class="fa fa-code"></i></button></span><span class="button-group"><button type="button" class="red-ui-button" data-style="ol"><i class="fa fa-list-ol"></i></button><button type="button" class="red-ui-button" data-style="ul"><i class="fa fa-list-ul"></i></button><button type="button" class="red-ui-button" data-style="bq"><i class="fa fa-quote-left"></i></button><button type="button" class="red-ui-button" data-style="hr"><i class="fa fa-minus"></i></button><button type="button" class="red-ui-button" data-style="link"><i class="fa fa-link"></i></button></span><button type="button" class="red-ui-button" style="float: right;"><i class="fa fa-expand"></i></button></div></div><div class="red-ui-editor-text-container ace_editor ace_hidpi ace-tomorrow red-ui-editor-text-container-toolbar"><textarea class="ace_text-input" autocorrect="off" autocapitalize="none" spellcheck="false" style="opacity: 0; font-size: 1px;" wrap="off"></textarea><div class="ace_gutter" aria-hidden="true"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="height: 1000000px;"></div></div><div class="ace_scroller" style="line-height: 0px;"><div class="ace_content"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 4px; visibility: visible;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="height: 1000000px; margin: 0px 4px;"></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px;"><div class="ace_scrollbar-inner" style="width: 20px;">&nbsp;</div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px;"><div class="ace_scrollbar-inner" style="height: 20px;">&nbsp;</div></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div><button type="button" class="red-ui-editor-text-help red-ui-button red-ui-button-small"><i class="fa fa-question"></i></button></div></div></form></div><div class="red-ui-tray-content" style="display: none; height: 728px;"><form class="dialog-form form-horizontal" autocomplete="off" style="height: 688px;"><div class="form-row"><label for="node-input-show-label-btn" data-i18n="editor.label">Label</label><span style="margin-right: 2px;"><input type="checkbox" id="node-input-show-label" style="display: none;" checked="checked"><button type="button" class="red-ui-toggleButton red-ui-button toggle single selected"><i class="fa fa-check-square-o"></i><span>Show</span></button></span></div><div class="form-row"><label data-i18n="editor.settingIcon">Icon</label><button type="button" class="red-ui-button red-ui-editor-node-appearance-button"><i class="fa fa-caret-down"></i><div class="red-ui-search-result-node" style="background-color: rgb(253, 208, 162); border-color: rgb(203, 158, 112);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div></div></button><input type="hidden" id="red-ui-editor-node-icon" value=""></div><div class="form-row"><span data-i18n="editor.portLabels">Port labels</span></div><div class="form-row"><span style="margin-left: 50px;" data-i18n="editor.labelInputs">Inputs</span><div id="red-ui-editor-node-label-form-inputs"><div class="red-ui-editor-node-label-form-row"><label for="red-ui-editor-node-label-form-input-0">1.</label><input type="text" id="red-ui-editor-node-label-form-input-0" placeholder="none"><button type="button" class="red-ui-button red-ui-button-small"><i class="fa fa-times"></i></button></div></div></div><div class="form-row"><span style="margin-left: 50px;" data-i18n="editor.labelOutputs">Outputs</span><div id="red-ui-editor-node-label-form-outputs"><div class="red-ui-editor-node-label-form-row"><label for="red-ui-editor-node-label-form-output-0">1.</label><input type="text" id="red-ui-editor-node-label-form-output-0" placeholder="none"><button type="button" class="red-ui-button red-ui-button-small"><i class="fa fa-times"></i></button></div></div></div></form></div></div></div></div><div class="red-ui-tray-footer"><div class="red-ui-tray-footer-left"><input id="node-input-node-disabled" type="checkbox" style="display: none;"><button type="button" class="red-ui-toggleButton red-ui-button toggle single selected" style="width: 84px;"><i class="fa fa-circle-thin"></i><span>Enabled</span></button></div></div><div class="red-ui-tray-resize-handle ui-draggable-handle"></div></div></div><div id="red-ui-palette"><img src="Node-RED_files/spin.svg" class="red-ui-palette-spinner hide" style="display: none;"><div id="red-ui-palette-search" class="red-ui-palette-search"><div class="red-ui-searchBox-container"><i class="fa fa-search"></i><form class="red-ui-searchBox-form"><input type="text" data-i18n="[placeholder]palette.filter" class="red-ui-searchBox-input" placeholder="filter nodes"></form><a class="red-ui-searchBox-clear" href="#"><i class="fa fa-times"></i></a><span class="red-ui-searchBox-resultCount hide"></span></div></div><div id="red-ui-palette-container" class="red-ui-palette-scroll"><div id="red-ui-palette-container-subflows" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-subflows" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>subflows</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-subflows"><div id="red-ui-palette-subflows"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="subflow:d3cfa1f6.4aa078" style="background-color: rgb(221, 170, 153); height: 28px;" data-palette-label="Subflow 3"><div class="red-ui-palette-label" dir="">Subflow   3</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/subflow.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/subflow.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-subflows-input"></div><div id="red-ui-palette-subflows-output"></div><div id="red-ui-palette-subflows-function"></div></div></div><div id="red-ui-palette-container-common" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-common" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>common</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-common"><div id="red-ui-palette-common"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="inject" style="background-color: rgb(166, 187, 207); height: 28px;" data-palette-label="inject"><div class="red-ui-palette-label" dir="">inject</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/inject.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/inject.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="debug" style="background-color: rgb(135, 169, 128); height: 28px;" data-palette-label="debug"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">debug</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/debug.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/debug.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="complete" style="background-color: rgb(192, 237, 192); height: 28px;" data-palette-label="complete"><div class="red-ui-palette-label" dir="">complete</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/alert.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/alert.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="catch" style="background-color: rgb(228, 145, 145); height: 28px;" data-palette-label="catch"><div class="red-ui-palette-label" dir="">catch</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/alert.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/alert.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="status" style="background-color: rgb(148, 193, 208); height: 28px;" data-palette-label="status"><div class="red-ui-palette-label" dir="">status</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/status.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/status.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="link in" style="background-color: rgb(221, 221, 221); height: 28px;" data-palette-label="link in"><div class="red-ui-palette-label" dir="">link   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/link-out.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-out.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="link out" style="background-color: rgb(221, 221, 221); height: 28px;" data-palette-label="link out"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">link   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/link-out.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-out.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="comment" style="background-color: rgb(255, 255, 255); height: 28px;" data-palette-label="comment"><div class="red-ui-palette-label" dir="">comment</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/comment.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/comment.svg&quot;);"></div></div></div></div><div id="red-ui-palette-common-input"></div><div id="red-ui-palette-common-output"></div><div id="red-ui-palette-common-function"></div></div></div><div id="red-ui-palette-container-function" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-function" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>function</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-function"><div id="red-ui-palette-function"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="function" style="background-color: rgb(253, 208, 162); height: 28px;" data-palette-label="function"><div class="red-ui-palette-label" dir="">function</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/function.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="switch" style="background-color: rgb(226, 217, 110); height: 28px;" data-palette-label="switch"><div class="red-ui-palette-label" dir="">switch</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/switch.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/switch.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="change" style="background-color: rgb(226, 217, 110); height: 28px;" data-palette-label="change"><div class="red-ui-palette-label" dir="">change</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/swap.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/swap.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="range" style="background-color: rgb(226, 217, 110); height: 28px;" data-palette-label="range"><div class="red-ui-palette-label" dir="">range</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/range.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/range.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="template" style="background-color: rgb(243, 181, 103); height: 28px;" data-palette-label="template"><div class="red-ui-palette-label" dir="">template</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/template.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/template.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="delay" style="background-color: rgb(230, 224, 248); height: 28px;" data-palette-label="delay"><div class="red-ui-palette-label" dir="">delay</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/timer.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/timer.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="trigger" style="background-color: rgb(230, 224, 248); height: 28px;" data-palette-label="trigger"><div class="red-ui-palette-label" dir="">trigger</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/trigger.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/trigger.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="exec" style="background-color: darksalmon; height: 28px;" data-palette-label="exec"><div class="red-ui-palette-label" dir="">exec</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/cog.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="button-events" style="background-color: rgb(233, 150, 122); height: 48px;" data-palette-label="button-events"><div class="red-ui-palette-label" dir="">button -<br>events</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-barcode"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-barcode"></i></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="countdown" style="background-color: rgb(255, 170, 170); height: 28px;" data-palette-label="countdown"><div class="red-ui-palette-label" dir="">countdown</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-countdown-2/stopwatch.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-countdown-2/stopwatch.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="filter" style="background-color: rgb(166, 187, 207); height: 28px;" data-palette-label="filter"><div class="red-ui-palette-label" dir="">filter</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/function.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="func-exec" style="background-color: rgb(255, 204, 102); height: 28px;" data-palette-label="func-exec"><div class="red-ui-palette-label" dir="">func - exec</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/function.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="npm" style="background-color: rgb(203, 56, 55); height: 28px;" data-palette-label="npm"><div class="red-ui-palette-label" dir="">npm</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-npm/npm.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-npm/npm.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="require" style="background-color: rgb(27, 130, 241); height: 28px;" data-palette-label="require"><div class="red-ui-palette-label" dir="">require</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file-out.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file-out.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="rbe" style="background-color: rgb(226, 217, 110); height: 28px;" data-palette-label="rbe"><div class="red-ui-palette-label" dir="">rbe</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-node-rbe/rbe.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-node-rbe/rbe.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-function-input"></div><div id="red-ui-palette-function-output"></div><div id="red-ui-palette-function-function"></div></div></div><div id="red-ui-palette-container-network" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-network" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>network</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-network"><div id="red-ui-palette-network"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="mqtt in" style="background-color: rgb(216, 191, 216); height: 28px;" data-palette-label="mqtt in"><div class="red-ui-palette-label" dir="">mqtt   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/bridge.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="mqtt out" style="background-color: rgb(216, 191, 216); height: 28px;" data-palette-label="mqtt out"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">mqtt   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/bridge.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="http in" style="background-color: rgb(231, 231, 174); height: 28px;" data-palette-label="http in"><div class="red-ui-palette-label" dir="">http   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="http response" style="background-color: rgb(231, 231, 174); height: 28px;" data-palette-label="http response"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">http   response</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="http request" style="background-color: rgb(231, 231, 174); height: 28px;" data-palette-label="http request"><div class="red-ui-palette-label" dir="">http   request</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="websocket in" style="background-color: rgb(215, 215, 160); height: 28px;" data-palette-label="websocket in"><div class="red-ui-palette-label" dir="">websocket   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="websocket out" style="background-color: rgb(215, 215, 160); height: 48px;" data-palette-label="websocket out"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">websocket  <br>out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/white-globe.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="tcp in" style="background-color: rgb(192, 192, 192); height: 28px;" data-palette-label="tcp in"><div class="red-ui-palette-label" dir="">tcp   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/bridge-dash.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="tcp out" style="background-color: rgb(192, 192, 192); height: 28px;" data-palette-label="tcp out"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">tcp   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/bridge-dash.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="tcp request" style="background-color: rgb(192, 192, 192); height: 28px;" data-palette-label="tcp request"><div class="red-ui-palette-label" dir="">tcp   request</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/bridge-dash.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="udp in" style="background-color: rgb(192, 192, 192); height: 28px;" data-palette-label="udp in"><div class="red-ui-palette-label" dir="">udp   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/bridge-dash.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="udp out" style="background-color: rgb(192, 192, 192); height: 28px;" data-palette-label="udp out"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">udp   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/bridge-dash.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-network-input"></div><div id="red-ui-palette-network-output"></div><div id="red-ui-palette-network-function"></div></div></div><div id="red-ui-palette-container-input" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-input" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>input</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-input"><div id="red-ui-palette-input"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="form_io in" style="background-color: rgb(192, 237, 192); height: 28px;" data-palette-label="form_io in"><div class="red-ui-palette-label" dir="">form_io   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/inject.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/inject.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div></div><div id="red-ui-palette-input-input"></div><div id="red-ui-palette-input-output"></div><div id="red-ui-palette-input-function"></div></div></div><div id="red-ui-palette-container-output" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-output" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>output</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-output"><div id="red-ui-palette-output"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="play audio" style="background-color: rgb(218, 175, 247); height: 28px;" data-palette-label="play audio"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">play   audio</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/feed.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/feed.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-output-input"></div><div id="red-ui-palette-output-output"></div><div id="red-ui-palette-output-function"></div></div></div><div id="red-ui-palette-container-sequence" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-sequence" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>sequence</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-sequence"><div id="red-ui-palette-sequence"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="split" style="background-color: rgb(226, 217, 110); height: 28px;" data-palette-label="split"><div class="red-ui-palette-label" dir="">split</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/split.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/split.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="join" style="background-color: rgb(226, 217, 110); height: 28px;" data-palette-label="join"><div class="red-ui-palette-label" dir="">join</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/join.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/join.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="sort" style="background-color: rgb(226, 217, 110); height: 28px;" data-palette-label="sort"><div class="red-ui-palette-label" dir="">sort</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/sort.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/sort.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="batch" style="background-color: rgb(226, 217, 110); height: 28px;" data-palette-label="batch"><div class="red-ui-palette-label" dir="">batch</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/batch.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/batch.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-sequence-input"></div><div id="red-ui-palette-sequence-output"></div><div id="red-ui-palette-sequence-function"></div></div></div><div id="red-ui-palette-container-parser" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-parser" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>parser</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-parser"><div id="red-ui-palette-parser"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="csv" style="background-color: rgb(222, 189, 92); height: 28px;" data-palette-label="csv"><div class="red-ui-palette-label" dir="">csv</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/parser-csv.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-csv.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="html" style="background-color: rgb(222, 189, 92); height: 28px;" data-palette-label="html"><div class="red-ui-palette-label" dir="">html</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/parser-html.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-html.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="json" style="background-color: rgb(222, 189, 92); height: 28px;" data-palette-label="json"><div class="red-ui-palette-label" dir="">json</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/parser-json.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-json.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="xml" style="background-color: rgb(222, 189, 92); height: 28px;" data-palette-label="xml"><div class="red-ui-palette-label" dir="">xml</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/parser-xml.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-xml.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="yaml" style="background-color: rgb(222, 189, 92); height: 28px;" data-palette-label="yaml"><div class="red-ui-palette-label" dir="">yaml</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/parser-yaml.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-yaml.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-parser-input"></div><div id="red-ui-palette-parser-output"></div><div id="red-ui-palette-parser-function"></div></div></div><div id="red-ui-palette-container-storage" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-storage" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>storage</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-storage"><div id="red-ui-palette-storage"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="file" style="background-color: burlywood; height: 28px;" data-palette-label="file"><div class="red-ui-palette-label" dir="">file</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file-out.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file-out.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="file in" style="background-color: burlywood; height: 28px;" data-palette-label="file in"><div class="red-ui-palette-label" dir="">file   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file-in.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file-in.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="watch" style="background-color: burlywood; height: 28px;" data-palette-label="watch"><div class="red-ui-palette-label" dir="">watch</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/watch.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/watch.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-copy-move" style="background-color: rgb(218, 196, 180); height: 28px;" data-palette-label="fs copy/move"><div class="red-ui-palette-label" dir="">fs   copy/move</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-filesystem/fs-copy.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-filesystem/fs-copy.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-remove" style="background-color: rgb(218, 196, 180); height: 28px;" data-palette-label="fs remove"><div class="red-ui-palette-label" dir="">fs   remove</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-filesystem/fs-remove.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-filesystem/fs-remove.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-mkdir" style="background-color: rgb(218, 196, 180); height: 28px;" data-palette-label="fs mkdir"><div class="red-ui-palette-label" dir="">fs   mkdir</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-filesystem/fs-mkdir.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-filesystem/fs-mkdir.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-list" style="background-color: rgb(218, 196, 180); height: 28px;" data-palette-label="fs list"><div class="red-ui-palette-label" dir="">fs   list</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-filesystem/fs-list.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-filesystem/fs-list.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-stats" style="background-color: rgb(218, 196, 180); height: 28px;" data-palette-label="fs stats"><div class="red-ui-palette-label" dir="">fs   stats</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-filesystem/fs-stats.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-filesystem/fs-stats.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-access" style="background-color: rgb(218, 196, 180); height: 28px;" data-palette-label="fs access"><div class="red-ui-palette-label" dir="">fs   access</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-filesystem/fs-access.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-filesystem/fs-access.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-ops-move" style="background-color: rgb(118, 116, 50); height: 48px;" data-palette-label="fs-ops-move"><div class="red-ui-palette-label" dir="">fs - ops -<br>move</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 19px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-ops-copy" style="background-color: rgb(118, 116, 50); height: 48px;" data-palette-label="fs-ops-copy"><div class="red-ui-palette-label" dir="">fs - ops -<br>copy</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 19px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-ops-delete" style="background-color: rgb(118, 116, 50); height: 48px;" data-palette-label="fs-ops-delete"><div class="red-ui-palette-label" dir="">fs - ops -<br>delete</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 19px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-ops-access" style="background-color: rgb(118, 116, 50); height: 48px;" data-palette-label="fs-ops-access"><div class="red-ui-palette-label" dir="">fs - ops -<br>access</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 19px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-ops-size" style="background-color: rgb(118, 116, 50); height: 28px;" data-palette-label="fs-ops-size"><div class="red-ui-palette-label" dir="">fs - ops - size</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-ops-stats" style="background-color: rgb(118, 116, 50); height: 48px;" data-palette-label="fs-ops-stats"><div class="red-ui-palette-label" dir="">fs - ops -<br>stats</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 19px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-ops-link" style="background-color: rgb(118, 116, 50); height: 28px;" data-palette-label="fs-ops-link"><div class="red-ui-palette-label" dir="">fs - ops - link</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-ops-type" style="background-color: rgb(118, 116, 50); height: 28px;" data-palette-label="fs-ops-type"><div class="red-ui-palette-label" dir="">fs - ops - type</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-ops-dir" style="background-color: rgb(118, 116, 50); height: 28px;" data-palette-label="fs-ops-dir"><div class="red-ui-palette-label" dir="">fs - ops - dir</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/db.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/db.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-ops-mkdir" style="background-color: rgb(118, 116, 50); height: 48px;" data-palette-label="fs-ops-mkdir"><div class="red-ui-palette-label" dir="">fs - ops -<br>mkdir</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 19px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="fs-ops-mktmpdir" style="background-color: rgb(118, 116, 50); height: 48px;" data-palette-label="fs-ops-mktmpdir"><div class="red-ui-palette-label" dir="">fs - ops -<br>mktmpdir</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/file.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 19px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div></div><div id="red-ui-palette-storage-input"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="influxdb in" style="background-color: rgb(218, 196, 180); height: 28px;" data-palette-label="influxdb in"><div class="red-ui-palette-label" dir="">influxdb   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-influxdb/influxdb.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-influxdb/influxdb.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="mongodb3 in" style="background-color: rgb(104, 179, 104); height: 28px;" data-palette-label="mongodb3 in"><div class="red-ui-palette-label" dir="">mongodb3   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/mongodb.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/mongodb.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="mongodb in" style="background-color: rgb(218, 196, 180); height: 28px;" data-palette-label="mongodb in"><div class="red-ui-palette-label" dir="">mongodb   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/mongodb.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/mongodb.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-storage-output"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="formio save" style="background-color: rgb(192, 237, 192); height: 28px;" data-palette-label="formio save"><div class="red-ui-palette-label" dir="">formio   save</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/arrow-in.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/arrow-in.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="formio get" style="background-color: rgb(192, 237, 192); height: 28px;" data-palette-label="formio get"><div class="red-ui-palette-label" dir="">formio   get</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/db.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/db.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="influxdb out" style="background-color: rgb(218, 196, 180); height: 28px;" data-palette-label="influxdb out"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">influxdb   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red-contrib-influxdb/influxdb.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-influxdb/influxdb.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="influxdb batch" style="background-color: rgb(218, 196, 180); height: 28px;" data-palette-label="influx batch"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">influx   batch</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red-contrib-influxdb/influxdb.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-influxdb/influxdb.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="mongodb out" style="background-color: rgb(218, 196, 180); height: 28px;" data-palette-label="mongodb out"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">mongodb   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/mongodb.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/mongodb.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-storage-function"></div></div></div><div id="red-ui-palette-container-analysis" class="red-ui-palette-category hide"><div id="red-ui-palette-header-analysis" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>analysis</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-analysis"><div id="red-ui-palette-analysis"></div><div id="red-ui-palette-analysis-input"></div><div id="red-ui-palette-analysis-output"></div><div id="red-ui-palette-analysis-function"></div></div></div><div id="red-ui-palette-container-social" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-social" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>social</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-social"><div id="red-ui-palette-social"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="e-mail mta" style="background-color: rgb(199, 233, 192); height: 28px;" data-palette-label="email MTA"><div class="red-ui-palette-label" dir="">email   MTA</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/envelope.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/envelope.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div></div><div id="red-ui-palette-social-input"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="e-mail in" style="background-color: rgb(199, 233, 192); height: 28px;" data-palette-label="email"><div class="red-ui-palette-label" dir="">email</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/envelope.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/envelope.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div></div><div id="red-ui-palette-social-output"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="e-mail" style="background-color: rgb(199, 233, 192); height: 28px;" data-palette-label="email"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">email</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/envelope.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/envelope.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-social-function"></div></div></div><div id="red-ui-palette-container-advanced" class="red-ui-palette-category hide"><div id="red-ui-palette-header-advanced" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>advanced</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-advanced"><div id="red-ui-palette-advanced"></div><div id="red-ui-palette-advanced-input"></div><div id="red-ui-palette-advanced-output"></div><div id="red-ui-palette-advanced-function"></div></div></div><div id="red-ui-palette-container-formbird" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-formbird" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>formbird</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-formbird"><div id="red-ui-palette-formbird"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="crud" style="background-color: rgb(231, 231, 174); height: 28px;" data-palette-label="crud"><div class="red-ui-palette-label" dir="">crud</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/@formbird/nodes/formbird-bird.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/@formbird/nodes/formbird-bird.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="search" style="background-color: rgb(231, 231, 174); height: 28px;" data-palette-label="search"><div class="red-ui-palette-label" dir="">search</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/@formbird/nodes/formbird-bird.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/@formbird/nodes/formbird-bird.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="websocket" style="background-color: rgb(231, 231, 174); height: 28px;" data-palette-label="websocket"><div class="red-ui-palette-label" dir="">websocket</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/@formbird/nodes/formbird-bird.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/@formbird/nodes/formbird-bird.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="redis set" style="background-color: rgb(231, 231, 174); height: 28px;" data-palette-label="redis set"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">redis   set</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/@formbird/nodes/formbird-bird.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/@formbird/nodes/formbird-bird.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="redis get" style="background-color: rgb(231, 231, 174); height: 28px;" data-palette-label="redis get"><div class="red-ui-palette-label" dir="">redis   get</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/@formbird/nodes/formbird-bird.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/@formbird/nodes/formbird-bird.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="bulk upload" style="background-color: rgb(231, 231, 174); height: 28px;" data-palette-label="bulk upload"><div class="red-ui-palette-label" dir="">bulk   upload</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/@formbird/nodes/formbird-bird.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/@formbird/nodes/formbird-bird.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-formbird-input"></div><div id="red-ui-palette-formbird-output"></div><div id="red-ui-palette-formbird-function"></div></div></div><div id="red-ui-palette-container-Raspberry_Pi" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-Raspberry_Pi" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>Raspberry Pi</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-Raspberry_Pi"><div id="red-ui-palette-Raspberry_Pi"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ds18b20" style="background-color: rgb(199, 233, 192); height: 28px;" data-palette-label="ds18b20"><div class="red-ui-palette-label" dir="">ds18b20</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-ds18b20/thermometer.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-ds18b20/thermometer.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="rpi-ds18b20" style="background-color: rgb(198, 219, 239); height: 28px;" data-palette-label="rpi-ds18b20"><div class="red-ui-palette-label" dir="">rpi - ds18b20</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-ds18b20-sensor/ds18b20.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-ds18b20-sensor/ds18b20.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="rpi-gpio in" style="background-color: rgb(198, 219, 239); height: 28px;" data-palette-label="rpi-gpio in"><div class="red-ui-palette-label" dir="">rpi - gpio   in</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/rpi.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="rpi-gpio out" style="background-color: rgb(198, 219, 239); height: 28px;" data-palette-label="rpi-gpio out"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">rpi - gpio   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/rpi.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="rpi-mouse" style="background-color: rgb(198, 219, 239); height: 28px;" data-palette-label="rpi-mouse"><div class="red-ui-palette-label" dir="">rpi - mouse</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/rpi.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="rpi-keyboard" style="background-color: rgb(198, 219, 239); height: 28px;" data-palette-label="rpi-keyboard"><div class="red-ui-palette-label" dir="">rpi - keyboard</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/rpi.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div></div></div><div id="red-ui-palette-Raspberry_Pi-input"></div><div id="red-ui-palette-Raspberry_Pi-output"></div><div id="red-ui-palette-Raspberry_Pi-function"></div></div></div><div id="red-ui-palette-container-image_tools" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-image_tools" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>image tools</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-image_tools"><div id="red-ui-palette-image_tools"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="jimp-image" style="background-color: rgb(255, 170, 170); height: 28px;" data-palette-label="image"><div class="red-ui-palette-label" dir="">image</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-image-tools/image.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-image-tools/image.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="Barcode Decoder" style="background-color: rgb(255, 170, 170); height: 48px;" data-palette-label="Barcode Decoder"><div class="red-ui-palette-label" dir="">Barcode  <br>Decoder</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-barcode"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-barcode"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 19px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="Barcode Generator" style="background-color: rgb(255, 170, 170); height: 48px;" data-palette-label="Barcode Generator"><div class="red-ui-palette-label" dir="">Barcode  <br>Generator</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-barcode"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-barcode"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 19px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="image viewer" style="background-color: rgb(255, 170, 170); height: 28px;" data-palette-label="viewer"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">viewer</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/watch.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/watch.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-image_tools-input"></div><div id="red-ui-palette-image_tools-output"></div><div id="red-ui-palette-image_tools-function"></div></div></div><div id="red-ui-palette-container-Maps" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-Maps" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>Maps</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-Maps"><div id="red-ui-palette-Maps"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="maps" style="background-color: rgb(222, 189, 92); height: 28px;" data-palette-label="maps"><div class="red-ui-palette-label" dir="">maps</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-maps/map.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-maps/map.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-Maps-input"></div><div id="red-ui-palette-Maps-output"></div><div id="red-ui-palette-Maps-function"></div></div></div><div id="red-ui-palette-container-formats" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-formats" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>formats</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-formats"><div id="red-ui-palette-formats"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="moment" style="background-color: rgb(230, 224, 248); height: 48px;" data-palette-label="Date/Time Formatter"><div class="red-ui-palette-label" dir="">Date/Time  <br>Formatter</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/timer.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/timer.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 19px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="humanizer" style="background-color: rgb(230, 224, 248); height: 28px;" data-palette-label="humanizer"><div class="red-ui-palette-label" dir="">humanizer</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/timer.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/timer.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-formats-input"></div><div id="red-ui-palette-formats-output"></div><div id="red-ui-palette-formats-function"></div></div></div><div id="red-ui-palette-container-Spreadsheet" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-Spreadsheet" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>Spreadsheet</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-Spreadsheet"><div id="red-ui-palette-Spreadsheet"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="book" style="background-color: rgb(222, 189, 92); height: 28px;" data-palette-label="book"><div class="red-ui-palette-label" dir="">book</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-file-excel-o"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-file-excel-o"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="sheet" style="background-color: rgb(222, 189, 92); height: 28px;" data-palette-label="sheet"><div class="red-ui-palette-label" dir="">sheet</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-table"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-table"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="cell" style="background-color: rgb(222, 189, 92); height: 28px;" data-palette-label="cell"><div class="red-ui-palette-label" dir="">cell</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-square-o"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-square-o"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="sheet-to-json" style="background-color: rgb(222, 189, 92); height: 48px;" data-palette-label="sheet-to-json"><div class="red-ui-palette-label" dir="">sheet - to -<br>json</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-sign-out"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-sign-out"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 19px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 19px;"></div></div></div><div id="red-ui-palette-Spreadsheet-input"></div><div id="red-ui-palette-Spreadsheet-output"></div><div id="red-ui-palette-Spreadsheet-function"></div></div></div><div id="red-ui-palette-container-dashboard" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-dashboard" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>dashboard</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-dashboard"><div id="red-ui-palette-dashboard"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_media" style="background-color: rgb(63, 173, 181); height: 28px;" data-palette-label="media"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">media</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red-contrib-ui-media/ui_image.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-ui-media/ui_image.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_button" style="background-color: rgb(176, 223, 227); height: 28px;" data-palette-label="button"><div class="red-ui-palette-label" dir="">button</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_button.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_button.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_dropdown" style="background-color: rgb(176, 223, 227); height: 28px;" data-palette-label="dropdown"><div class="red-ui-palette-label" dir="">dropdown</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_dropdown.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_dropdown.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_switch" style="background-color: rgb(176, 223, 227); height: 28px;" data-palette-label="switch"><div class="red-ui-palette-label" dir="">switch</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_switch.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_switch.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_slider" style="background-color: rgb(176, 223, 227); height: 28px;" data-palette-label="slider"><div class="red-ui-palette-label" dir="">slider</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_slider.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_slider.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_numeric" style="background-color: rgb(176, 223, 227); height: 28px;" data-palette-label="numeric"><div class="red-ui-palette-label" dir="">numeric</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_numeric.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_numeric.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_text_input" style="background-color: rgb(176, 223, 227); height: 28px;" data-palette-label="text input"><div class="red-ui-palette-label" dir="">text   input</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_text.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_text.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_date_picker" style="background-color: rgb(176, 223, 227); height: 28px;" data-palette-label="date picker"><div class="red-ui-palette-label" dir="">date   picker</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_date_picker.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_date_picker.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_colour_picker" style="background-color: rgb(176, 223, 227); height: 28px;" data-palette-label="colour picker"><div class="red-ui-palette-label" dir="">colour   picker</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_colour_picker.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_colour_picker.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_form" style="background-color: rgb(176, 223, 227); height: 28px;" data-palette-label="form"><div class="red-ui-palette-label" dir="">form</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_form.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_form.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_text" style="background-color: rgb(119, 198, 204); height: 28px;" data-palette-label="text"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">text</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red-dashboard/ui_text.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_text.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_gauge" style="background-color: rgb(119, 198, 204); height: 28px;" data-palette-label="gauge"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">gauge</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red-dashboard/ui_gauge.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_gauge.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_chart" style="background-color: rgb(119, 198, 204); height: 28px;" data-palette-label="chart"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">chart</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red-dashboard/ui_chart.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_chart.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_audio" style="background-color: rgb(119, 198, 204); height: 28px;" data-palette-label="audio out"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">audio   out</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/feed.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/feed.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_toast" style="background-color: rgb(119, 198, 204); height: 28px;" data-palette-label="notification"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">notification</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red-dashboard/ui_toast.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_toast.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_ui_control" style="background-color: rgb(63, 173, 181); height: 28px;" data-palette-label="ui control"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">ui   control</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/arrow-in.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/arrow-in.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_template" style="background-color: rgb(63, 173, 181); height: 28px;" data-palette-label="template"><div class="red-ui-palette-label" dir="">template</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-dashboard/ui_template.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_template.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="ui_list" style="background-color: rgb(63, 173, 181); height: 28px;" data-palette-label="list"><div class="red-ui-palette-label" dir="">list</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-node-ui-list/icon.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-node-ui-list/icon.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-dashboard-input"></div><div id="red-ui-palette-dashboard-output"></div><div id="red-ui-palette-dashboard-function"></div></div></div><div id="red-ui-palette-container-uibuilder" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-uibuilder" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>uibuilder</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-uibuilder"><div id="red-ui-palette-uibuilder"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="uibuilder" style="background-color: rgb(230, 224, 248); height: 28px;" data-palette-label="uibuilder"><div class="red-ui-palette-label" dir="">uibuilder</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-uibuilder/ui_template.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-uibuilder/ui_template.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="uib-sender" style="background-color: rgb(230, 224, 248); height: 28px;" data-palette-label="uib-sender"><div class="red-ui-palette-label red-ui-palette-label-right" dir="">uib - sender</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right" data-palette-icon="icons/node-red/link-out.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-out.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="uib-cache" style="background-color: rgb(246, 224, 248); height: 28px;" data-palette-label="uib-cache"><div class="red-ui-palette-label" dir="">uib - cache</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/parser-json.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-json.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-uibuilder-input"></div><div id="red-ui-palette-uibuilder-output"></div><div id="red-ui-palette-uibuilder-function"></div></div></div><div id="red-ui-palette-container-_data" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-_data" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span> data</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-_data"><div id="red-ui-palette-_data"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="google-spreadsheet" style="background-color: rgb(188, 228, 208); height: 28px;" data-palette-label="Sheets"><div class="red-ui-palette-label" dir="">Sheets</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red-contrib-viseo-google-spreadsheet/sheets.png"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-viseo-google-spreadsheet/sheets.png&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-_data-input"></div><div id="red-ui-palette-_data-output"></div><div id="red-ui-palette-_data-function"></div></div></div><div id="red-ui-palette-container-image" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-image" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>image</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-image"><div id="red-ui-palette-image"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="write-exif" style="background-color: rgb(204, 153, 255); height: 28px;" data-palette-label="write-exif"><div class="red-ui-palette-label" dir="">write - exif</div><div class="red-ui-palette-icon-container" data-palette-icon="font-awesome/fa-address-card"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-address-card"></i></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-image-input"></div><div id="red-ui-palette-image-output"></div><div id="red-ui-palette-image-function"></div></div></div><div id="red-ui-palette-container-utility" class="red-ui-palette-category hide red-ui-palette-open" style="display: block;"><div id="red-ui-palette-header-utility" class="red-ui-palette-header"><i class="expanded fa fa-angle-down"></i><span>utility</span></div><div class="red-ui-palette-content" id="red-ui-palette-base-category-utility"><div id="red-ui-palette-utility"><div class="red-ui-palette-node ui-draggable ui-draggable-handle" data-palette-type="exif" style="background-color: rgb(241, 194, 240); height: 28px;" data-palette-label="exif"><div class="red-ui-palette-label" dir="">exif</div><div class="red-ui-palette-icon-container" data-palette-icon="icons/node-red/watch.svg"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/watch.svg&quot;);"></div></div><div class="red-ui-palette-port red-ui-palette-port-output" style="top: 9px;"></div><div class="red-ui-palette-port red-ui-palette-port-input" style="top: 9px;"></div></div></div><div id="red-ui-palette-utility-input"></div><div id="red-ui-palette-utility-output"></div><div id="red-ui-palette-utility-function"></div></div></div></div><div class="red-ui-component-footer"><span class="button-group"><button type="button" class="red-ui-footer-button"><i class="fa fa-angle-double-up"></i></button><button type="button" class="red-ui-footer-button"><i class="fa fa-angle-double-down"></i></button></span></div><div id="red-ui-palette-shade" class="hide" style="display: block;"></div><div class="red-ui-sidebar-control-left" style="display: none;"><i class="fa fa-chevron-left"></i></div></div><div id="red-ui-sidebar"><div class="red-ui-tabs red-ui-tabs-collapsible"><div><ul id="red-ui-sidebar-tabs"><li class="red-ui-tab red-ui-tab-pinned" id="red-ui-tab-info" style="width: 99px;"><a href="#info" class="red-ui-tab-label" title="info"><i class="red-ui-tab-icon fa fa-info"></i><span class="red-ui-text-bidi-aware" dir="">info</span></a><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab red-ui-tab-pinned" id="red-ui-tab-help" style="width: 99px;"><a href="#help" class="red-ui-tab-label" title="help"><i class="red-ui-tab-icon fa fa-book"></i><span class="red-ui-text-bidi-aware" dir="">help</span></a><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab red-ui-tab-pinned" id="red-ui-tab-version-control" style="width: 99px;"><a href="#version-control" class="red-ui-tab-label" title="history"><i class="red-ui-tab-icon fa fa-code-fork"></i><span class="red-ui-text-bidi-aware" dir="">history</span></a><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab red-ui-tab-pinned active" id="red-ui-tab-debug" style="width: 99px;"><a href="#debug" class="red-ui-tab-label" title="debug"><i class="red-ui-tab-icon fa fa-bug"></i><span class="red-ui-text-bidi-aware" dir="">debug</span></a><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab red-ui-tab-pinned" id="red-ui-tab-config" style="width: 99px;"><a href="#config" class="red-ui-tab-label" title="config"><i class="red-ui-tab-icon fa fa-cog"></i><span class="red-ui-text-bidi-aware" dir="">config</span></a><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab red-ui-tab-pinned" id="red-ui-tab-context" style="width: 99px;"><a href="#context" class="red-ui-tab-label" title="context"><i class="red-ui-tab-icon fa fa-database"></i><span class="red-ui-text-bidi-aware" dir="">context</span></a><span class="red-ui-tabs-badges"></span></li><li class="red-ui-tab red-ui-tab-pinned" id="red-ui-tab-dashboard" style="width: 99px;"><a href="#dashboard" class="red-ui-tab-label" title="dashboard"><i class="red-ui-tab-icon fa fa-bar-chart"></i><span class="red-ui-text-bidi-aware" dir="">dashboard</span></a><span class="red-ui-tabs-badges"></span></li></ul></div><div class="red-ui-tab-link-buttons"><a href="#info" class="red-ui-tab-link-button red-ui-tab-link-button-pinned ui-draggable ui-draggable-handle" id="red-ui-tab-info-link-button" style="position: relative;"><i class="fa fa-info"></i></a><a href="#help" class="red-ui-tab-link-button red-ui-tab-link-button-pinned ui-draggable ui-draggable-handle" id="red-ui-tab-help-link-button" style="position: relative;"><i class="fa fa-book"></i></a><a href="#version-control" class="red-ui-tab-link-button red-ui-tab-link-button-pinned ui-draggable ui-draggable-handle" id="red-ui-tab-version-control-link-button" style="position: relative;"><i class="fa fa-code-fork"></i></a><a href="#debug" class="red-ui-tab-link-button red-ui-tab-link-button-pinned ui-draggable ui-draggable-handle active selected" id="red-ui-tab-debug-link-button" style="position: relative;"><i class="fa fa-bug"></i></a><a href="#dashboard" class="red-ui-tab-link-button red-ui-tab-link-button-pinned ui-draggable ui-draggable-handle" id="red-ui-tab-dashboard-link-button" style="position: relative;"><i class="fa fa-bar-chart"></i></a><a href="#config" class="red-ui-tab-link-button ui-draggable ui-draggable-handle" id="red-ui-tab-config-link-button" style="position: relative; display: none;"><i class="fa fa-cog"></i></a><a href="#context" class="red-ui-tab-link-button ui-draggable ui-draggable-handle" id="red-ui-tab-context-link-button" style="position: relative; display: none;"><i class="fa fa-database"></i></a><a href="#" class="red-ui-tab-link-button-menu"><i class="fa fa-caret-down"></i></a></div></div><div id="red-ui-sidebar-content"><div style="height: 100%; display: none;"><div class="red-ui-sidebar-info"><div class="red-ui-sidebar-info-stack red-ui-panels" style="height: 837px;"><div style="overflow: hidden; height: 497.4px;" class="red-ui-panel"><div class="red-ui-info-outline" style="height: 100%;"><div class="red-ui-sidebar-header red-ui-info-toolbar"><div class="red-ui-searchBox-container red-ui-searchBox-compact red-ui-searchBox-has-options"><i class="fa fa-search"></i><form class="red-ui-searchBox-form"><input type="text" data-i18n="[placeholder]menu.label.search" class="red-ui-searchBox-input" placeholder="Search flows"></form><a class="red-ui-searchBox-clear" href="#"><i class="fa fa-times"></i></a><a class="red-ui-searchBox-opts" href="#"><i class="fa fa-caret-down"></i></a><span class="red-ui-searchBox-resultCount hide"></span></div></div><div class="red-ui-treeList-label red-ui-info-outline-project" style=""><span class="red-ui-treeList-icon"><i class="fa fa-archive"></i></span><span><div class="red-ui-info-outline-item red-ui-info-outline-item-flow" style="width: calc(100% - 40px);"><div class="red-ui-search-result-description red-ui-info-outline-item-label">fotoposter</div><div class="red-ui-info-outline-item-controls"><button class="red-ui-button red-ui-button-small" style="position:absolute;right:5px;top: 3px;"><i class="fa fa-ellipsis-h"></i></button></div></div></span></div><div style="width: 100%;" class="red-ui-treeList" tabindex="0"><div class="red-ui-treeList-container"><div class="red-ui-editableList" style="inset: 0px; position: absolute;"><div style="inset: 0px; position: absolute; overflow-y: scroll;" class="red-ui-editableList-border red-ui-editableList-container"><ol class="red-ui-treeList-list red-ui-editableList-list" style="position: static; inset: auto; min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content expanded"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 0px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">Flows</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 22px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="red-ui-icons red-ui-icons-flow"></i></span><div class="red-ui-info-outline-item red-ui-info-outline-item-flow" style="width: calc(100% - 62px);"><div class="red-ui-search-result-description red-ui-info-outline-item-label">Schoolfotografie</div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 22px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="red-ui-icons red-ui-icons-flow"></i></span><div class="red-ui-info-outline-item red-ui-info-outline-item-flow" style="width: calc(100% - 62px);"><div class="red-ui-search-result-description red-ui-info-outline-item-label">fotoposter work Flow </div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 22px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="red-ui-icons red-ui-icons-flow"></i></span><div class="red-ui-info-outline-item red-ui-info-outline-item-flow" style="width: calc(100% - 62px);"><div class="red-ui-search-result-description red-ui-info-outline-item-label">Klanten DataBase</div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 22px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="red-ui-icons red-ui-icons-flow"></i></span><div class="red-ui-info-outline-item red-ui-info-outline-item-flow" style="width: calc(100% - 62px);"><div class="red-ui-search-result-description red-ui-info-outline-item-label">pictime</div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 0px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">Subflows</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 22px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><div class="red-ui-info-outline-item" style="width: calc(100% - 42px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 170, 153); border-color: rgb(171, 120, 103);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/subflow.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">Subflow 3</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">0</button><div class="red-ui-info-outline-item-control-spacer"></div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 0px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">Global Configuration Nodes</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">ui_tab</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">SchoolGraph 2000</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">6</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">SYNC</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">1</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">Organizer</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">4</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">PicTime</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">1</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">database fotoposter</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">4</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">WorkFlow fotoposter</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">3</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">Import school</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">1</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">Raspi Cam</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">1</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">ui_base</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">Node-RED Dashboard</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">0</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">ui_group</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[SchoolGraph 2000] Dashboard</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">3</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[SchoolGraph 2000] Klassen</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">2</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[SchoolGraph 2000] Leerlingen</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">2</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[SchoolGraph 2000] Scholen</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">1</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[SchoolGraph 2000] SHOOT</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">10</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[SchoolGraph 2000] STORE</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">6</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[SYNC] SYNC</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">3</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[Organizer] Choose</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">2</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[PicTime] Group 1</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">0</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[database fotoposter] INPUT</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">1</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[database fotoposter] database output part 1</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">15</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[database fotoposter] Lijst</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">4</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[database fotoposter] Change Database</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">2</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[WorkFlow fotoposter] ORDERS</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">4</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[WorkFlow fotoposter] Group 2</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">1</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[WorkFlow fotoposter] DELETING</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">3</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[Organizer] Store selection</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">2</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[Organizer] Organize shoot</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">4</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[Import school] IMPORT SCHOOL</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">1</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[Organizer] SyncPic</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">0</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">[unassigned] Snapshot</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">0</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">google-service-account</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">schoolproject</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">10</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">mongodb</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 196, 180);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">db@localhost</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">0</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 196, 180);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">localhost:27017@localhost:27017</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">0</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">mongodb3</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(104, 179, 104); border-color: rgb(54, 129, 54);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">klasfoto1</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">0</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span class="red-ui-info-outline-gutter" style="position: absolute;"><button type="button" class="red-ui-info-outline-item-control-reveal red-ui-button red-ui-button-small"><i class="fa fa-search"></i></button></span><span style="display: inline-block; width: 42px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 62px);"><div class="red-ui-search-result-node" style="background-color: rgb(104, 179, 104); border-color: rgb(54, 129, 54);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">DB</div></div><div class="red-ui-info-outline-item-controls red-ui-info-outline-item-hover-controls"><button type="button" class="red-ui-info-outline-item-control-users red-ui-button red-ui-button-small">18</button><button type="button" class="red-ui-info-outline-item-control-disable red-ui-button red-ui-button-small"><i class="fa fa-circle-thin"></i><i class="fa fa-ban"></i></button></div></div></div></div></li></ol></div></div></div></li></ol></div></div></div></li></ol></div></div></div></div></div></div><div class="red-ui-panels-separator ui-draggable ui-draggable-handle" style="position: relative;"></div><div style="overflow: hidden; height: 100%; display: flex; flex-direction: column;" class="red-ui-panel"><div class="red-ui-palette-header red-ui-info-header" style="flex: 0 0 auto;"><span><div class="red-ui-search-result-node" style="background-color: rgb(253, 208, 162); border-color: rgb(203, 158, 112);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div></div></span><span>function: 90437d41.b8685</span><button class="red-ui-button red-ui-button-small" style="position: absolute; top: 12px; right: 32px;"><i class="fa fa-book"></i></button><button class="red-ui-button red-ui-button-small" style="position: absolute; top: 12px; right: 8px;"><i class="fa fa-search"></i></button></div><div style="flex: 1 1 auto; overflow-y: scroll;"><table class="red-ui-info-table"><tbody><tr class="red-ui-help-info-row"><td>Node</td><td><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"90437d41.b8685"</span></span></span></span></td></tr><tr class="red-ui-help-info-row"><td>Type</td><td>function</td></tr><tr class="red-ui-help-property-expand blank"><td colspan="2"><a href="#" class="node-info-property-header"><span class="red-ui-help-property-more">show more</span><span class="red-ui-help-property-less">show less</span> <i class="fa fa-caret-down"></i></a></td></tr><tr class="red-ui-help-info-property-row hide"><td>Module</td><td>node-red</td></tr><tr class="red-ui-help-info-property-row hide"><td>func</td><td><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"const object = msg.payload;const count = Object.keys(array).length();return msg;"</span></span></span></span></td></tr><tr class="red-ui-help-info-property-row hide"><td>outputs</td><td><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-number red-ui-debug-msg-type-number-toggle">1</span></span></span></span></td></tr><tr class="red-ui-help-info-property-row hide"><td>noerr</td><td><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-number red-ui-debug-msg-type-number-toggle">0</span></span></span></span></td></tr><tr class="red-ui-help-info-property-row hide"><td>initialize</td><td><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">""</span></span></span></span></td></tr><tr class="red-ui-help-info-property-row hide"><td>finalize</td><td><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">""</span></span></span></span></td></tr><tr class="red-ui-help-info-property-row hide"><td>libs</td><td><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level collapsed"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-object-header"><span>[ </span><span class="red-ui-debug-msg-type-meta">empty</span><span> ]</span></span></span></span></span></td></tr></tbody></table><div style="padding: 0px 6px 6px;"><div class="red-ui-help"><span class="red-ui-text-bidi-aware" dir=""></span></div></div></div></div></div><div class="red-ui-help-tips" style=""><div class="red-ui-help-tip"></div><div class="red-ui-help-tips-buttons"><a href="#" class="red-ui-footer-button"><i class="fa fa-refresh"></i></a><a href="#" class="red-ui-footer-button"><i class="fa fa-times"></i></a></div></div></div></div><div style="height: 100%; display: none;"><div class="red-ui-sidebar-info"><div class="red-ui-sidebar-header red-ui-info-toolbar"><span class="button-group"><a id="red-ui-sidebar-help-show-toc" class="red-ui-button red-ui-button-small selected" href="#"><i class="fa fa-list-ul"></i></a></span><div class="red-ui-searchBox-container red-ui-searchBox-compact"><i class="fa fa-search"></i><form class="red-ui-searchBox-form"><input type="text" data-i18n="[placeholder]sidebar.help.search" class="red-ui-searchBox-input" placeholder="Search help"></form><a class="red-ui-searchBox-clear" href="#"><i class="fa fa-times"></i></a><span class="red-ui-searchBox-resultCount hide"></span></div></div><div class="red-ui-sidebar-help-stack red-ui-panels" style="height: 798px;"><div class="red-ui-sidebar-help-toc red-ui-panel" style="height: 237px;"><div style="width: 100%;" class="red-ui-treeList" tabindex="0"><div class="red-ui-treeList-container"><div class="red-ui-editableList" style="inset: 0px; position: absolute;"><div style="inset: 0px; position: absolute; overflow-y: scroll;" class="red-ui-editableList-border red-ui-editableList-container"><ol class="red-ui-treeList-list red-ui-editableList-list" style="position: static; inset: auto; min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content expanded"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 0px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">Node Help</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-label-text">Subflows</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 170, 153); border-color: rgb(171, 120, 103);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/subflow.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">Subflow 3</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">@formbird/nodes</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(231, 231, 174);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/@formbird/nodes/formbird-bird.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">crud</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(231, 231, 174);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/@formbird/nodes/formbird-bird.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">redis get</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(231, 231, 174);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/@formbird/nodes/formbird-bird.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">redis set</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">formio-red</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(192, 237, 192); border-color: rgb(142, 187, 142);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/inject.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">form_io in</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(192, 237, 192); border-color: rgb(142, 187, 142);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">formio</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(192, 237, 192); border-color: rgb(142, 187, 142);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/db.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">formio get</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(192, 237, 192); border-color: rgb(142, 187, 142);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/arrow-in.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">formio save</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content expanded"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/batch.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">batch</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(228, 145, 145); border-color: rgb(178, 95, 95);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/alert.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">catch</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/swap.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">change</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(255, 255, 255); border-color: rgb(205, 205, 205);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/comment.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">comment</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(192, 237, 192); border-color: rgb(142, 187, 142);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/alert.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">complete</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-csv.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">csv</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(135, 169, 128); border-color: rgb(85, 119, 78);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/debug.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">debug</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(230, 224, 248); border-color: rgb(180, 174, 198);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/timer.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">delay</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: darksalmon;"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">exec</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: burlywood;"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file-out.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">file</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: burlywood;"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file-in.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">file in</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label selected"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(253, 208, 162); border-color: rgb(203, 158, 112);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">function</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-html.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">html</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(231, 231, 174);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">http in</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">http proxy</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(231, 231, 174);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">http request</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(231, 231, 174);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">http response</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(166, 187, 207); border-color: rgb(116, 137, 157);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/inject.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">inject</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/join.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">join</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-json.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">json</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-out.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">link in</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-out.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">link out</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(216, 191, 216); border-color: rgb(166, 141, 166);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">mqtt in</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(216, 191, 216); border-color: rgb(166, 141, 166);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">mqtt out</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">mqtt-broker</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/range.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">range</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/sort.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">sort</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/split.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">split</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(148, 193, 208); border-color: rgb(98, 143, 158);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/status.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">status</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/switch.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">switch</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(192, 192, 192);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">tcp in</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(192, 192, 192);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">tcp out</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(192, 192, 192);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">tcp request</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(243, 181, 103);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/template.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">template</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">tls-config</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(230, 224, 248); border-color: rgb(180, 174, 198);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/trigger.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">trigger</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(192, 192, 192);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">udp in</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(192, 192, 192);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/bridge-dash.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">udp out</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(255, 240, 240); border-color: rgb(205, 190, 190);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/alert.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">unknown</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: burlywood;"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/watch.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">watch</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(215, 215, 160);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">websocket in</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(215, 215, 160);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/white-globe.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">websocket out</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">websocket-client</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">websocket-listener</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-xml.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">xml</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-yaml.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">yaml</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-button-events</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(233, 150, 122); border-color: rgb(183, 100, 72);"><div class="red-ui-palette-icon-container"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-barcode"></i></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">button-events</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-countdown-2</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(255, 170, 170); border-color: rgb(205, 120, 120);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-countdown-2/stopwatch.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">countdown</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-ds18b20</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(199, 233, 192); border-color: rgb(149, 183, 142);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-ds18b20/thermometer.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ds18b20</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-ds18b20-sensor</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(198, 219, 239); border-color: rgb(148, 169, 189);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-ds18b20-sensor/ds18b20.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">rpi-ds18b20</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-filesystem</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 196, 180); border-color: rgb(168, 146, 130);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-filesystem/fs-access.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-access</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 196, 180); border-color: rgb(168, 146, 130);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-filesystem/fs-copy.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-copy-move</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 196, 180); border-color: rgb(168, 146, 130);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-filesystem/fs-list.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-list</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 196, 180); border-color: rgb(168, 146, 130);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-filesystem/fs-mkdir.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-mkdir</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 196, 180); border-color: rgb(168, 146, 130);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-filesystem/fs-remove.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-remove</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 196, 180); border-color: rgb(168, 146, 130);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-filesystem/fs-stats.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-stats</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-filter</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(166, 187, 207); border-color: rgb(116, 137, 157);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">filter</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-fs-ops</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(118, 116, 50); border-color: rgb(68, 66, 0);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-ops-access</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(118, 116, 50); border-color: rgb(68, 66, 0);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-ops-copy</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(118, 116, 50); border-color: rgb(68, 66, 0);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-ops-delete</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(118, 116, 50); border-color: rgb(68, 66, 0);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/db.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-ops-dir</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(118, 116, 50); border-color: rgb(68, 66, 0);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-ops-link</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(118, 116, 50); border-color: rgb(68, 66, 0);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-ops-mkdir</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(118, 116, 50); border-color: rgb(68, 66, 0);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-ops-mktmpdir</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(118, 116, 50); border-color: rgb(68, 66, 0);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-ops-move</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(118, 116, 50); border-color: rgb(68, 66, 0);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-ops-size</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(118, 116, 50); border-color: rgb(68, 66, 0);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-ops-stats</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(118, 116, 50); border-color: rgb(68, 66, 0);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">fs-ops-type</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-func-exec</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(255, 204, 102); border-color: rgb(205, 154, 52);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/function.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">func-exec</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-image-tools</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(255, 170, 170); border-color: rgb(205, 120, 120);"><div class="red-ui-palette-icon-container"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-barcode"></i></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">Barcode Decoder</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(255, 170, 170); border-color: rgb(205, 120, 120);"><div class="red-ui-palette-icon-container"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-barcode"></i></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">Barcode Generator</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(255, 170, 170); border-color: rgb(205, 120, 120);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-image-tools/image.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">jimp-image</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-influxdb</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 196, 180);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-influxdb/influxdb.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">influxdb batch</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 196, 180);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-influxdb/influxdb.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">influxdb in</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 196, 180);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-influxdb/influxdb.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">influxdb out</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-maps</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-maps/map.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">maps</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-moment</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(230, 224, 248); border-color: rgb(180, 174, 198);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/timer.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">humanizer</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(230, 224, 248); border-color: rgb(180, 174, 198);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/timer.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">moment</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content expanded"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-mongodb3</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(104, 179, 104); border-color: rgb(54, 129, 54);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/mongodb.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">mongodb3 in</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-npm</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(203, 56, 55); border-color: rgb(153, 6, 5);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-npm/npm.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">npm</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-play-audio</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 175, 247); border-color: rgb(168, 125, 197);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/feed.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">play audio</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-require</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(27, 130, 241); border-color: rgb(0, 80, 191);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/file-out.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">require</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-spreadsheet-in</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon-container"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-file-excel-o"></i></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">book</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon-container"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-square-o"></i></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">cell</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon-container"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-table"></i></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">sheet</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(222, 189, 92); border-color: rgb(172, 139, 42);"><div class="red-ui-palette-icon-container"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-sign-out"></i></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">sheet-to-json</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-ui-media</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(63, 173, 181);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-ui-media/ui_image.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_media</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-uibuilder</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(246, 224, 248); border-color: rgb(196, 174, 198);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/parser-json.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">uib-cache</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(230, 224, 248); border-color: rgb(180, 174, 198);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/link-out.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">uib-sender</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(230, 224, 248); border-color: rgb(180, 174, 198);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-uibuilder/ui_template.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">uibuilder</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-viseo-google-authentication</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">google-api-key</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">google-service-account</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-viseo-google-spreadsheet</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(188, 228, 208); border-color: rgb(138, 178, 158);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-contrib-viseo-google-spreadsheet/sheets.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">google-spreadsheet</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-contrib-writeexif</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(204, 153, 255); border-color: rgb(154, 103, 205);"><div class="red-ui-palette-icon-container"><i class="red-ui-palette-icon-fa fa fa-fw fa-lg fa-address-card"></i></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">write-exif</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content expanded"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-dashboard</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/feed.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_audio</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_base</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_button.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_button</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_chart.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_chart</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_colour_picker.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_colour_picker</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_date_picker.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_date_picker</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_dropdown.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_dropdown</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_form.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_form</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_gauge.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_gauge</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_group</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(63, 173, 181);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_link</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_numeric.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_numeric</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_slider.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_slider</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(212, 240, 248); border-color: rgb(162, 190, 198);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_spacer</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_switch.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_switch</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(221, 221, 221); border-color: rgb(171, 171, 171);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_tab</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(63, 173, 181);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_template.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_template</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_text.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_text</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(176, 223, 227);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_text.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_text_input</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(119, 198, 204);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-dashboard/ui_toast.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_toast</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(63, 173, 181);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/arrow-in.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_ui_control</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-node-email</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(199, 233, 192); border-color: rgb(149, 183, 142);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/envelope.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">e-mail</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(199, 233, 192); border-color: rgb(149, 183, 142);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/envelope.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">e-mail in</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(199, 233, 192); border-color: rgb(149, 183, 142);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/envelope.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">e-mail mta</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-node-exif</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(241, 194, 240); border-color: rgb(191, 144, 190);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/watch.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">exif</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-node-mongodb</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 196, 180);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/cog.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">mongodb</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 196, 180);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/mongodb.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">mongodb in</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(218, 196, 180);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/mongodb.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">mongodb out</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-node-pi-gpio</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(198, 219, 239); border-color: rgb(148, 169, 189);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">rpi-gpio in</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(198, 219, 239); border-color: rgb(148, 169, 189);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">rpi-gpio out</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(198, 219, 239); border-color: rgb(148, 169, 189);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">rpi-keyboard</div></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(198, 219, 239); border-color: rgb(148, 169, 189);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red/rpi.svg&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">rpi-mouse</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-node-rbe</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(226, 217, 110); border-color: rgb(176, 167, 60);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-node-rbe/rbe.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">rbe</div></div></div></div></div></li></ol></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 20px;"></span><span class="red-ui-treeList-icon"><i class="fa fa-angle-right"></i></span><span class="red-ui-treeList-icon"><i class="fa fa-cube"></i></span><span class="red-ui-treeList-label-text">node-red-node-ui-list</span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="red-ui-treeList-list red-ui-editableList-list" style="height: auto; display: none;"><li><div class="red-ui-editableList-item-content"><div class="red-ui-treeList-label"><span style="display: inline-block; width: 40px;"></span><span class="red-ui-treeList-icon"></span><div class="red-ui-info-outline-item" style="width: calc(100% - 60px);"><div class="red-ui-search-result-node" style="background-color: rgb(63, 173, 181);"><div class="red-ui-palette-icon-container"><div class="red-ui-palette-icon" style="background-image: url(&quot;icons/node-red-node-ui-list/icon.png&quot;);"></div></div></div><div class="red-ui-search-result-description"><div class="red-ui-search-result-node-label red-ui-info-outline-item-label">ui_list</div></div></div></div></div></li></ol></div></div></div></li></ol></div></div></div></li></ol></div></div></div></div></div><div class="red-ui-panels-separator ui-draggable ui-draggable-handle" style="position: relative;"></div><div style="overflow-y: scroll;" class="red-ui-panel"><div class="red-ui-help" style="padding: 6px;"><h1 class="red-ui-help-title">function</h1><div class="red-ui-help"><span class="red-ui-text-bidi-aware" dir="">
    <p>A JavaScript function to run against the messages being received by the node.</p>
    <p>The messages are passed in as a JavaScript object called <code>msg</code>.</p>
    <p>By convention it will have a <code>msg.payload</code> property containing
       the body of the message.</p>
    <p>The function is expected to return a message object (or multiple message objects), but can choose
       to return nothing in order to halt a flow.</p>
    <p>The <b>Setup</b> tab contains code that will be run whenever the node is started.
        The <b>Close</b> tab contains code that will be run when the node is stopped.</p>
    <p>If an promise object is returned from the setup code, input message processing starts after its completion.</p>
    <h3><a class="red-ui-help-info-header expanded" href="#"><i class="fa fa-angle-right"></i>Details</a></h3>
    <p>See the <a target="_blank" href="http://nodered.org/docs/writing-functions.html">online documentation</a>
    for more information on writing functions.</p>
    <h4>Sending messages</h4>
    <p>The function can either return the messages it wants to pass on to the next nodes
    in the flow, or can call <code>node.send(messages)</code>.</p>
    <p>It can return/send:</p>
    <ul>
      <li>a single message object - passed to nodes connected to the first output</li>
      <li>an array of message objects - passed to nodes connected to the corresponding outputs</li>
    </ul>
    <p>Note: The setup code is executed during the initialization of nodes. Therefore, if <code>node.send</code> is called in the setup tab, subsequent nodes may not be able to receive the message.</p>
    <p>If any element of the array is itself an array of messages, multiple
          messages are sent to the corresponding output.</p>
    <p>If null is returned, either by itself or as an element of the array, no
          message is passed on.</p>
    <h4>Logging and Error Handling</h4>
    <p>To log any information, or report an error, the following functions are available:</p>
      <ul>
          <li><code>node.log("Log message")</code></li>
          <li><code>node.warn("Warning")</code></li>
          <li><code>node.error("Error")</code></li>
      </ul>
    <p></p>
    <p>The Catch node can also be used to handle errors. To invoke a Catch node,
    pass <code>msg</code> as a second argument to <code>node.error</code>:</p>
    <pre>node.error("Error",msg);</pre>
    <h4>Accessing Node Information</h4>
    <p>The following properties are available to access information about the node:</p>
    <ul>
        <li><code>node.id</code> - id of the node</li>
        <li><code>node.name</code> - name of the node</li>
        <li><code>node.outputCount</code> - number of node outputs</li>
    </ul>
    <h4>Using environment variables</h4>
    <p>Environment variables can be accessed using <code>env.get("MY_ENV_VAR")</code>.</p>
</span></div></div></div></div></div></div><div style="height: 100%; display: none;"><div class="red-ui-sidebar-node-config" id="red-ui-sidebar-node-config" tabindex="0"><div class="red-ui-sidebar-header"><span class="button-group"><a class="red-ui-sidebar-header-button-toggle selected" id="red-ui-sidebar-config-filter-all" href="#"><span data-i18n="sidebar.config.filterAll">all</span></a><a class="red-ui-sidebar-header-button-toggle" id="red-ui-sidebar-config-filter-unused" href="#"><span data-i18n="sidebar.config.filterUnused">unused</span></a> </span></div><div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-global"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down expanded"></i><span class="red-ui-palette-node-config-label" data-i18n="sidebar.config.global">On all flows</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style=""><li class="red-ui-palette-node-config-type">google-service-account</li><li class="red-ui-palette-node_id_740d6b4f-ab7894"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">schoolproject</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">10</a></div></div></li><li class="red-ui-palette-node-config-type">mongodb</li><li class="red-ui-palette-node_id_caf94d2b-2c3698"><div class="red-ui-palette-node-config red-ui-palette-node red-ui-palette-node-config-unused"><div class="red-ui-palette-label">db@localhost</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right">0</div></div></li><li class="red-ui-palette-node_id_f53c7a94-415278"><div class="red-ui-palette-node-config red-ui-palette-node red-ui-palette-node-config-unused"><div class="red-ui-palette-label">localhost:27017@localhost:27017</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right">0</div></div></li><li class="red-ui-palette-node-config-type">mongodb3</li><li class="red-ui-palette-node_id_d0da1e41-da5ac"><div class="red-ui-palette-node-config red-ui-palette-node red-ui-palette-node-config-unused"><div class="red-ui-palette-label">klasfoto1</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right">0</div></div></li><li class="red-ui-palette-node_id_7b163364-9970f4"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">DB</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">19</a></div></div></li><li class="red-ui-palette-node-config-type">ui_base</li><li class="red-ui-palette-node_id_596f8951-b0ea7"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">Node-RED Dashboard</div></div></li><li class="red-ui-palette-node-config-type">ui_group</li><li class="red-ui-palette-node_id_537fedb2-98a2d4"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[SchoolGraph 2000] Dashboard</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">3</a></div></div></li><li class="red-ui-palette-node_id_563ac69c-e7e75"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[SchoolGraph 2000] Klassen</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">2</a></div></div></li><li class="red-ui-palette-node_id_ed614b47-ca9b18"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[SchoolGraph 2000] Leerlingen</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">2</a></div></div></li><li class="red-ui-palette-node_id_4b2c0218-c41c54"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[SchoolGraph 2000] Scholen</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">1</a></div></div></li><li class="red-ui-palette-node_id_a874c6fd-06ff38"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[SchoolGraph 2000] SHOOT</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">10</a></div></div></li><li class="red-ui-palette-node_id_5aa2d225-1cbb4c"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[SchoolGraph 2000] STORE</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">6</a></div></div></li><li class="red-ui-palette-node_id_bb1b2a75-d9f258"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[SYNC] SYNC</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">3</a></div></div></li><li class="red-ui-palette-node_id_9a8c0911-a1ef78"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[Organizer] Choose</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">2</a></div></div></li><li class="red-ui-palette-node_id_12c6183d-6edd78"><div class="red-ui-palette-node-config red-ui-palette-node red-ui-palette-node-config-unused"><div class="red-ui-palette-label">[PicTime] Group 1</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right">0</div></div></li><li class="red-ui-palette-node_id_61c56cd-0e58814"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[database fotoposter] INPUT</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">1</a></div></div></li><li class="red-ui-palette-node_id_7f3b916-23329f"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[database fotoposter] database output part 1</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">15</a></div></div></li><li class="red-ui-palette-node_id_64e7ca33-693114"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[database fotoposter] Lijst</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">4</a></div></div></li><li class="red-ui-palette-node_id_3c118995-5cc616"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[database fotoposter] Change Database</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">2</a></div></div></li><li class="red-ui-palette-node_id_c3bc6778-7cc6b"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[WorkFlow fotoposter] ORDERS</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">4</a></div></div></li><li class="red-ui-palette-node_id_3a44d775-d58a28"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[WorkFlow fotoposter] Group 2</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">1</a></div></div></li><li class="red-ui-palette-node_id_c2b0c1a8-af43b"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[WorkFlow fotoposter] DELETING</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">3</a></div></div></li><li class="red-ui-palette-node_id_133ead54-627ddb"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[Organizer] Store selection</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">2</a></div></div></li><li class="red-ui-palette-node_id_a325dee2-cdfca"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[Organizer] Organize shoot</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">4</a></div></div></li><li class="red-ui-palette-node_id_3d9f466b-162f12"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">[Import school] IMPORT SCHOOL</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">1</a></div></div></li><li class="red-ui-palette-node_id_84444d2d-22c25"><div class="red-ui-palette-node-config red-ui-palette-node red-ui-palette-node-config-unused"><div class="red-ui-palette-label">[Organizer] SyncPic</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right">0</div></div></li><li class="red-ui-palette-node_id_eb23a053-4aa63"><div class="red-ui-palette-node-config red-ui-palette-node red-ui-palette-node-config-unused"><div class="red-ui-palette-label">[Raspi Cam] Snapshot</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right">0</div></div></li><li class="red-ui-palette-node-config-type">ui_tab</li><li class="red-ui-palette-node_id_f2cff505-d3426"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">SchoolGraph 2000</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">6</a></div></div></li><li class="red-ui-palette-node_id_f2e93dd5-c5ac3"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">SYNC</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">1</a></div></div></li><li class="red-ui-palette-node_id_406fcce7-3b6154"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">Organizer</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">4</a></div></div></li><li class="red-ui-palette-node_id_bce487c9-3c55b"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">PicTime</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">1</a></div></div></li><li class="red-ui-palette-node_id_e83db3b5-066688"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">database fotoposter</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">4</a></div></div></li><li class="red-ui-palette-node_id_83afccf1-49f41"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">WorkFlow fotoposter</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">3</a></div></div></li><li class="red-ui-palette-node_id_48c9c6d5-337a1"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">Import school</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">1</a></div></div></li><li class="red-ui-palette-node_id_75252f1b-e6fdd"><div class="red-ui-palette-node-config red-ui-palette-node"><div class="red-ui-palette-label">Raspi Cam</div><div class="red-ui-palette-icon-container red-ui-palette-icon-container-right"><a href="#">1</a></div></div></li></ul></div></div><div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-cd55794b-d22868"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down"></i><span class="red-ui-palette-node-config-label">Schoolfotografie</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style="display: none;"><li class="red-ui-palette-node-config-none" data-i18n="sidebar.config.none">none</li></ul></div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-e4762531-a573f8"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down"></i><span class="red-ui-palette-node-config-label">fotoposter work Flow </span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style="display: none;"><li class="red-ui-palette-node-config-none" data-i18n="sidebar.config.none">none</li></ul></div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-8ee901f-547468"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down"></i><span class="red-ui-palette-node-config-label">Klanten DataBase</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style="display: none;"><li class="red-ui-palette-node-config-none" data-i18n="sidebar.config.none">none</li></ul></div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-1684f509-066b83"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down"></i><span class="red-ui-palette-node-config-label">pictime</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style="display: none;"><li class="red-ui-palette-node-config-none" data-i18n="sidebar.config.none">none</li></ul></div></div><div><div class="red-ui-palette-category red-ui-sidebar-config-category" id="red-ui-sidebar-config-category-d3cfa1f6-4aa078"><div class="red-ui-sidebar-config-tray-header red-ui-palette-header"><i class="fa fa-angle-down"></i><span class="red-ui-palette-node-config-label">Subflow 3</span><span class="red-ui-sidebar-node-config-filter-info" style="display: none;"></span></div><ul class="red-ui-palette-content red-ui-sidebar-node-config-list" style="display: none;"><li class="red-ui-palette-node-config-none" data-i18n="sidebar.config.none">none</li></ul></div></div></div><div class="red-ui-sidebar-shade hide" style="display: block;"></div></div><div style="height: 100%; display: none;"><div style="position: relative; height: 100%;"><div class="red-ui-sidebar-context-stack red-ui-stack"><div class="red-ui-palette-category expanded"><div class="red-ui-palette-header"><i class="fa fa-angle-down expanded"></i><span>Node</span><div style="float: right"><input type="checkbox" style="display: none;"><button type="button" class="red-ui-toggleButton red-ui-sidebar-header-button red-ui-button-small toggle single"><i class="fa fa-square-o"></i></button><button class="red-ui-button red-ui-button-small" style="margin-left: 5px"><i class="fa fa-refresh"></i></button></div></div><div style="position: relative;"><div style="height: 100%;"><div class="red-ui-sidebar-context-updated">&nbsp;</div><table class="red-ui-info-table"><tbody><tr class="red-ui-help-info-row red-ui-search-empty blank" colspan="2"><td data-i18n="sidebar.context.refresh">refresh to load</td></tr></tbody></table></div></div></div><div class="red-ui-palette-category expanded"><div class="red-ui-palette-header"><i class="fa fa-angle-down expanded"></i><span>Flow</span><div style="float: right"><input type="checkbox" style="display: none;"><button type="button" class="red-ui-toggleButton red-ui-sidebar-header-button red-ui-button-small toggle single"><i class="fa fa-square-o"></i></button><button class="red-ui-button red-ui-button-small" style="margin-left: 5px"><i class="fa fa-refresh"></i></button></div></div><div style="position: relative;"><div style="height: 100%;"><div class="red-ui-sidebar-context-updated">&nbsp;</div><table class="red-ui-info-table"><tbody><tr class="red-ui-help-info-row red-ui-search-empty blank" colspan="2"><td data-i18n="sidebar.context.refresh">refresh to load</td></tr></tbody></table></div></div></div><div class="red-ui-palette-category expanded"><div class="red-ui-palette-header"><i class="fa fa-angle-down expanded"></i><span>Global</span><div style="float: right"><button class="red-ui-button red-ui-button-small"><i class="fa fa-refresh"></i></button></div></div><div style="position: relative;"><div style="height: 100%;"><div class="red-ui-sidebar-context-updated">&nbsp;</div><table class="red-ui-info-table"><tbody><tr class="red-ui-help-info-row red-ui-search-empty blank" colspan="2"><td data-i18n="sidebar.context.refresh">refresh to load</td></tr></tbody></table></div></div></div></div></div></div><div style="height: 100%; display: none;"><div class="red-ui-sidebar-vc"><div class="red-ui-sidebar-vc-stack red-ui-stack"><div class="red-ui-palette-category expanded"><div class="red-ui-palette-header"><i class="fa fa-angle-down expanded"></i><span>Local Changes</span><div style="float: right"><button class="red-ui-button red-ui-button-small"><i class="fa fa-refresh"></i></button></div></div><div style="position: relative; height: 0px;"><div style="height: 100%;"><div class="red-ui-sidebar-vc-change-container"><div class="red-ui-sidebar-vc-change-header">Local files<button class="red-ui-button red-ui-button-small" style="position: absolute; right: 5px; top: 5px;"><i class="fa fa-plus"></i> all</button></div><div class="red-ui-editableList" style="inset: 30px 0px 0px; position: absolute;"><div style="inset: 0px; position: absolute; overflow-y: scroll;" class="red-ui-editableList-border red-ui-editableList-container"><ol style="position: static; inset: auto; min-height: 0px; height: auto;" class="red-ui-editableList-list"><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-changed"><i class="fa fa-square"></i><a href="#"><span><span>flow_cred.json</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-changed"><i class="fa fa-square"></i><a href="#"><span><span>flow.json</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-changed"><i class="fa fa-square"></i><a href="#"><span><span>README.md</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/.config/sioMiddleware.js-template</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/.config/sioMsgOut.js-template</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/.config/sioUse.js-template</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/.config/uibMiddleware.js-template</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/common/images/node-blue.ico</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/localhost:3000/.eslintrc.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/localhost:3000/package.json</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/localhost:3000/README.md</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/localhost:3000/src/index.css</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/localhost:3000/src/index.html</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/localhost:3000/src/index.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/.bin/loose-envify</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/.package-lock.json</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/js-tokens/CHANGELOG.md</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/js-tokens/index.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/js-tokens/LICENSE</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/js-tokens/package.json</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/js-tokens/README.md</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/loose-envify/cli.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/loose-envify/custom.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/loose-envify/index.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/loose-envify/LICENSE</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/loose-envify/loose-envify.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/loose-envify/package.json</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/loose-envify/README.md</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/loose-envify/replace.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/cjs/react-jsx-dev-runtime.development.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/cjs/react-jsx-dev-runtime.production.min.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/cjs/react-jsx-dev-runtime.profiling.min.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/cjs/react-jsx-runtime.development.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/cjs/react-jsx-runtime.production.min.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/cjs/react-jsx-runtime.profiling.min.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/cjs/react.development.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/cjs/react.production.min.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/cjs/react.shared-subset.development.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/cjs/react.shared-subset.production.min.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/index.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/jsx-dev-runtime.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/jsx-runtime.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/LICENSE</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/package.json</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/react.shared-subset.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/README.md</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/umd/react.development.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/umd/react.production.min.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/node_modules/react/umd/react.profiling.min.js</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/package-lock.json</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry"><div class="red-ui-diff-state-unchanged"><i class="fa fa-question-circle-o"></i><a href="#" class="disabled"><span><span>uibuilder/package.json</span></span></a></div><div class="red-ui-sidebar-vc-change-entry-tools"><span class="button-group" style="margin-right: 5px;"><button class="red-ui-button red-ui-button-small" style="display: none;"><i class="fa fa-reply"></i></button></span><span class="button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-plus"></i></button></span></div></div></li></ol></div></div></div><div class="red-ui-sidebar-vc-change-container" style="display: none;"><div class="red-ui-sidebar-vc-change-header">Unmerged changes<div style="position: absolute; right: 5px; top: 5px;"><button class="red-ui-button red-ui-button-small" style="margin-right: 5px;">abort merge</button></div></div><div class="red-ui-editableList" style="inset: 30px 0px 0px; position: absolute;"><div style="inset: 0px; position: absolute; overflow-y: scroll;" class="red-ui-editableList-border red-ui-editableList-container"><ol style="position: static; inset: auto; min-height: 0px; height: auto;" class="red-ui-editableList-list"><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry red-ui-help-info-none"><div style="display: inline-block; max-width: 300px; text-align: left;">All conflicts resolved. Commit the changes to complete the merge.<div style="float: right; margin: 5px; height: 50px;"><button class="red-ui-button red-ui-button-small">commit</button></div></div></div></li></ol></div></div></div><div class="red-ui-sidebar-vc-change-container"><div class="red-ui-sidebar-vc-change-header">Changes to commit<div style="position: absolute; right: 5px; top: 5px;"><button class="red-ui-button red-ui-button-small" style="margin-right: 5px;" disabled="disabled">commit</button><button class="red-ui-button red-ui-button-small" disabled="disabled"><i class="fa fa-minus"></i> all</button></div></div><div class="red-ui-editableList" style="inset: 30px 0px 0px; position: absolute;"><div style="inset: 0px; position: absolute; overflow-y: scroll;" class="red-ui-editableList-border red-ui-editableList-container"><ol style="position: static; inset: auto; min-height: 0px; height: auto;" class="red-ui-editableList-list"><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-change-entry red-ui-help-info-none"><div>None</div></div></li></ol></div></div></div><div class="red-ui-sidebar-vc-slide-box red-ui-sidebar-vc-slide-box-bottom" style="display: none;"><textarea placeholder="Enter your commit message"></textarea><div class="red-ui-sidebar-vc-slide-box-toolbar button-group"><button class="red-ui-button">Cancel</button><button class="red-ui-button">Commit</button></div></div></div></div></div><div class="red-ui-palette-category"><div class="red-ui-palette-header"><i class="fa fa-angle-down"></i><span>Commit History</span><div style="float: right"><button class="red-ui-button red-ui-button-small"><i class="fa fa-refresh"></i></button></div></div><div style="position: relative; height: 0px; display: none;"><div><div class="red-ui-sidebar-vc-change-header" style="text-align: right;"><button class="red-ui-button red-ui-button-small"><i class="fa fa-code-fork"></i> Branch: <span id="red-ui-sidebar-vc-local-branch">master</span></button><button class="red-ui-button red-ui-button-small" style="margin-left: 10px; display: none;" id="red-ui-sidebar-vc-repo-status-button"><span id="red-ui-sidebar-vc-repo-status-stats"><i class="fa fa-long-arrow-up"></i> <span id="red-ui-sidebar-vc-commits-ahead"></span> <i class="fa fa-long-arrow-down"></i> <span id="red-ui-sidebar-vc-commits-behind"></span></span><span id="red-ui-sidebar-vc-repo-status-auth-issue"><i class="fa fa-warning"></i></span></button></div><div class="red-ui-editableList" style="inset: 30px 0px 0px; position: absolute;"><div style="inset: 0px; position: absolute; overflow-y: scroll;" class="red-ui-editableList-border red-ui-editableList-container"><ol style="position: static; inset: auto; min-height: 0px; height: auto;" class="red-ui-editableList-list"><li><div class="red-ui-editableList-item-content red-ui-sidebar-vc-commit-entry red-ui-sidebar-vc-commit-head"><div><div class="red-ui-sidebar-vc-commit-subject">Create project</div><div class="red-ui-sidebar-vc-commit-refs"><span class="red-ui-sidebar-vc-commit-ref">master</span></div><div class="red-ui-sidebar-vc-commit-sha">b6f4d7d</div><div class="red-ui-sidebar-vc-commit-date">3/31/2022</div></div></div></li></ol></div></div><div class="red-ui-shade" style="z-index: 3; top: 30px; display: none;"></div><div class="red-ui-sidebar-vc-slide-box red-ui-sidebar-vc-slide-box-top" style="top: 30px; display: none;"><div class="red-ui-sidebar-vc-slide-box-header">Change local branch</div><div class="red-ui-projects-branch-list"><div class="red-ui-searchBox-container"><i class="fa fa-search"></i><form class="red-ui-searchBox-form"><input type="text" placeholder="Find or create a branch" class="red-ui-searchBox-input"></form><a class="red-ui-searchBox-clear" href="#"><i class="fa fa-times"></i></a><span class="red-ui-searchBox-resultCount hide"></span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="overflow-y: scroll; height: 130px;"><ol style="height: auto; min-height: 0px;" class="red-ui-editableList-list"></ol></div></div></div></div><div class="red-ui-sidebar-vc-slide-box red-ui-sidebar-vc-slide-box-top" style="top: 30px; display: none;"><div class="red-ui-sidebar-vc-slide-box-header">Manage remote branch</div><div style="margin-bottom: 5px;"><button id="red-ui-sidebar-vc-repo-branch" class="red-ui-sidebar-vc-repo-action red-ui-button"><i class="fa fa-code-fork"></i> Remote: <span id="red-ui-sidebar-vc-remote-branch">None</span></button><div style="height: 0px; overflow: hidden; transition: height 0.2s ease-in-out 0s; display: none;"><div class="red-ui-projects-branch-list"><div class="red-ui-searchBox-container"><i class="fa fa-search"></i><form class="red-ui-searchBox-form"><input type="text" placeholder="Find or create a remote branch" class="red-ui-searchBox-input"></form><a class="red-ui-searchBox-clear" href="#"><i class="fa fa-times"></i></a><span class="red-ui-searchBox-resultCount hide"></span></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="overflow-y: scroll; height: 130px;"><ol style="height: auto; min-height: 0px;" class="red-ui-editableList-list"></ol></div></div></div></div></div><div id="red-ui-sidebar-vc-repo-toolbar-message" class="red-ui-sidebar-vc-slide-box-header" style="min-height: 100px;"></div><div id="red-ui-sidebar-vc-repo-toolbar-error-message" class="red-ui-sidebar-vc-slide-box-header" style="min-height: 100px; display: none;"><div style="margin-top: 10px;"><i class="fa fa-warning"></i> Unable to access remote repository</div><div style="margin: 10px 30px; text-align: center"><button class="red-ui-button" style="width: 80%;"><i class="fa fa-refresh"></i> Retry</button></div></div><div class="red-ui-sidebar-vc-slide-box-header" style="height: 20px;"><label id="red-ui-sidebar-vc-repo-toolbar-set-upstream-row" for="red-ui-sidebar-vc-repo-toolbar-set-upstream" class="hide"><input type="checkbox" id="red-ui-sidebar-vc-repo-toolbar-set-upstream"> Set as upstream branch</label></div><div style="margin-bottom: 5px;"><button id="red-ui-sidebar-vc-repo-push" class="red-ui-sidebar-vc-repo-sub-action red-ui-button"><i class="fa fa-long-arrow-up"></i> <span data-i18n="sidebar.project.versionControl.push">push</span></button><button id="red-ui-sidebar-vc-repo-pull" class="red-ui-sidebar-vc-repo-sub-action red-ui-button"><i class="fa fa-long-arrow-down"></i> <span data-i18n="sidebar.project.versionControl.pull">pull</span></button></div></div></div></div></div></div><div class="red-ui-shade red-ui-sidebar-vc-shade" style="display: none;"></div></div><div class="red-ui-sidebar-shade hide" style="display: block;"></div></div><div style="height: 100%;"><div style="position: relative; height: 100%;"><div class="red-ui-sidebar-header"><span class="button-group"><a id="red-ui-sidebar-debug-filter" class="red-ui-sidebar-header-button" href="#"><i class="fa fa-filter"></i> <span>all nodes</span></a></span><span class="button-group"><a id="red-ui-sidebar-debug-clear" class="red-ui-sidebar-header-button" href="#"><i class="fa fa-trash"></i></a></span><div class="red-ui-debug-filter-box hide"><div class="red-ui-debug-filter-row"><span class="button-group"><a class="red-ui-sidebar-header-button-toggle red-ui-sidebar-debug-filter-option selected" id="red-ui-sidebar-debug-filterAll" href="#"><span data-i18n="node-red:debug.sidebar.filterAll">all nodes</span></a><a class="red-ui-sidebar-header-button-toggle red-ui-sidebar-debug-filter-option" id="red-ui-sidebar-debug-filterSelected" href="#"><span data-i18n="node-red:debug.sidebar.filterSelected">selected nodes</span></a><a class="red-ui-sidebar-header-button-toggle red-ui-sidebar-debug-filter-option" id="red-ui-sidebar-debug-filterCurrent" href="#"><span data-i18n="node-red:debug.sidebar.filterCurrent">current flow</span></a> </span></div><div class="red-ui-debug-filter-row hide" id="red-ui-sidebar-debug-filter-node-list-row"><div class="red-ui-editableList red-ui-nodeList"><div class="red-ui-editableList-border"><div class="red-ui-editableList-header"><span data-i18n="node-red:debug.sidebar.debugNodes">Debug nodes</span><span><span class="red-ui-checkboxSet"><input type="checkbox" checked="checked"><span class="red-ui-checkboxSet-option hide" style="display: none;"><i class="fa fa-square-o"></i></span><span class="red-ui-checkboxSet-option hide" style="display: inline;"><i class="fa fa-check-square-o"></i></span><span class="red-ui-checkboxSet-option hide" style="display: none;"><i class="fa fa-minus-square-o"></i></span></span></span></div><div class="red-ui-editableList-container" style="min-height: 250px; max-height: 250px; overflow-y: scroll;"><ol style="text-align: left; min-height: 0px; max-height: 250px; height: auto;" class="red-ui-editableList-list"><li class="red-ui-editableList-section-header"><div class="red-ui-editableList-item-content"><div id="debug-filter-node-list-node-cd55794b_d22868" class="expandable expanded"><i class="fa fa-angle-right"></i><span>Schoolfotografie</span><span class="meta"><span class="red-ui-checkboxSet"><input type="checkbox" checked="checked"><span class="red-ui-checkboxSet-option hide" style="display: none;"><i class="fa fa-square-o"></i></span><span class="red-ui-checkboxSet-option hide" style="display: inline;"><i class="fa fa-check-square-o"></i></span><span class="red-ui-checkboxSet-option hide" style="display: none;"><i class="fa fa-minus-square-o"></i></span></span></span></div></div></li><li><div class="red-ui-editableList-item-content"><div id="debug-filter-node-list-node-6a3551b6_bf0e2"><span style="margin-left: 20px">msg</span><span class="meta"><span class="red-ui-checkboxSet"><input type="checkbox" checked="checked"><span class="red-ui-checkboxSet-option hide"><i class="fa fa-square-o"></i></span><span class="red-ui-checkboxSet-option hide" style="display: inline;"><i class="fa fa-check-square-o"></i></span><span class="red-ui-checkboxSet-option hide"><i class="fa fa-minus-square-o"></i></span></span></span></div></div></li><li><div class="red-ui-editableList-item-content"><div id="debug-filter-node-list-node-79905b52_4997dc"><span style="margin-left: 20px">msg</span><span class="meta"><span class="red-ui-checkboxSet"><input type="checkbox" checked="checked"><span class="red-ui-checkboxSet-option hide"><i class="fa fa-square-o"></i></span><span class="red-ui-checkboxSet-option hide" style="display: inline;"><i class="fa fa-check-square-o"></i></span><span class="red-ui-checkboxSet-option hide"><i class="fa fa-minus-square-o"></i></span></span></span></div></div></li><li><div class="red-ui-editableList-item-content"><div id="debug-filter-node-list-node-f345d13_bd5feb"><span style="margin-left: 20px">msg.payload</span><span class="meta"><span class="red-ui-checkboxSet"><input type="checkbox" checked="checked"><span class="red-ui-checkboxSet-option hide"><i class="fa fa-square-o"></i></span><span class="red-ui-checkboxSet-option hide" style="display: inline;"><i class="fa fa-check-square-o"></i></span><span class="red-ui-checkboxSet-option hide"><i class="fa fa-minus-square-o"></i></span></span></span></div></div></li><li class="red-ui-editableList-section-header"><div class="red-ui-editableList-item-content"><div id="debug-filter-node-list-node-e4762531_a573f8" class="expandable expanded"><i class="fa fa-angle-right"></i><span>fotoposter work Flow </span><span class="meta"><span class="red-ui-checkboxSet"><input type="checkbox" checked="checked"><span class="red-ui-checkboxSet-option hide" style="display: none;"><i class="fa fa-square-o"></i></span><span class="red-ui-checkboxSet-option hide" style="display: inline;"><i class="fa fa-check-square-o"></i></span><span class="red-ui-checkboxSet-option hide" style="display: none;"><i class="fa fa-minus-square-o"></i></span></span></span></div></div></li><li><div class="red-ui-editableList-item-content"><div id="debug-filter-node-list-node-18ca637a_5019a5"><span style="margin-left: 20px">msg</span><span class="meta"><span class="red-ui-checkboxSet"><input type="checkbox" checked="checked"><span class="red-ui-checkboxSet-option hide"><i class="fa fa-square-o"></i></span><span class="red-ui-checkboxSet-option hide" style="display: inline;"><i class="fa fa-check-square-o"></i></span><span class="red-ui-checkboxSet-option hide"><i class="fa fa-minus-square-o"></i></span></span></span></div></div></li><li><div class="red-ui-editableList-item-content"><div id="debug-filter-node-list-node-104267a8_e52bd8"><span style="margin-left: 20px">msg</span><span class="meta"><span class="red-ui-checkboxSet"><input type="checkbox" checked="checked"><span class="red-ui-checkboxSet-option hide"><i class="fa fa-square-o"></i></span><span class="red-ui-checkboxSet-option hide" style="display: inline;"><i class="fa fa-check-square-o"></i></span><span class="red-ui-checkboxSet-option hide"><i class="fa fa-minus-square-o"></i></span></span></span></div></div></li><li class="red-ui-editableList-section-header"><div class="red-ui-editableList-item-content"><div id="debug-filter-node-list-node-8ee901f_547468" class="expandable expanded"><i class="fa fa-angle-right"></i><span>Klanten DataBase</span><span class="meta"><span class="red-ui-checkboxSet"><input type="checkbox" checked="checked"><span class="red-ui-checkboxSet-option hide" style="display: none;"><i class="fa fa-square-o"></i></span><span class="red-ui-checkboxSet-option hide" style="display: inline;"><i class="fa fa-check-square-o"></i></span><span class="red-ui-checkboxSet-option hide" style="display: none;"><i class="fa fa-minus-square-o"></i></span></span></span></div></div></li><li><div class="red-ui-editableList-item-content"><div id="debug-filter-node-list-node-94ce6701_a0253"><span style="margin-left: 20px">msg</span><span class="meta"><span class="red-ui-checkboxSet"><input type="checkbox" checked="checked"><span class="red-ui-checkboxSet-option hide"><i class="fa fa-square-o"></i></span><span class="red-ui-checkboxSet-option hide" style="display: inline;"><i class="fa fa-check-square-o"></i></span><span class="red-ui-checkboxSet-option hide"><i class="fa fa-minus-square-o"></i></span></span></span></div></div></li></ol></div></div></div></div></div></div><div class="red-ui-debug-content red-ui-debug-content-list"><div class="red-ui-debug-msg red-ui-debug-msg-node-94ce6701_a0253 red-ui-debug-msg-flow-8ee901f_547468"><div class="red-ui-debug-msg-meta"><span class="red-ui-debug-msg-date">11/1/2022, 2:18:58 PM</span><a href="#" class="red-ui-debug-msg-name">node: 94ce6701.a0253</a><span class="red-ui-debug-msg-tools button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-caret-down"></i></button></span><span class="red-ui-debug-msg-topic">msg : Object</span></div><span class="red-ui-debug-msg-payload"><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level built"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span></span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-object-header"><span>{ </span><span class="red-ui-debug-msg-object-key">payload</span><span>: </span><span class="red-ui-debug-msg-object-value red-ui-debug-msg-type-meta">object</span><span>, </span><span class="red-ui-debug-msg-object-key">event</span><span>: </span><span class="red-ui-debug-msg-object-value red-ui-debug-msg-type-meta">object</span><span>, </span><span class="red-ui-debug-msg-object-key">socketid</span><span>: </span><span class="red-ui-debug-msg-object-value red-ui-debug-msg-type-string">"vAD8MPtsJaOsHGtBAAAF"</span><span>, </span><span class="red-ui-debug-msg-object-key">_msgid</span><span>: </span><span class="red-ui-debug-msg-object-value red-ui-debug-msg-type-string">"8f9e2982.eef1d8"</span><span> }</span></span></span><span class="red-ui-debug-msg-type-meta red-ui-debug-msg-object-type-header">object</span></span><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element built collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">payload</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">0</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">1</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">2</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">3</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">4</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">5</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">6</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">7</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">8</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">9</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">10</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">11</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">12</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">13</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">14</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">15</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">16</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">17</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">18</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">19</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">20</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">21</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">22</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">23</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">24</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">25</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">26</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">27</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">28</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">29</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">30</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">31</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">32</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">33</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">34</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">35</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">36</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">37</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">38</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">39</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">40</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">41</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">42</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">43</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">44</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">45</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">46</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">47</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">48</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">49</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">50</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">51</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">52</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">53</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">54</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">55</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">56</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">57</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">58</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">59</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">60</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">61</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">62</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">63</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">64</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">65</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">66</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">67</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">68</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">69</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">70</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">71</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">72</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">73</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">74</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">75</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">76</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">77</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">78</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">79</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">80</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">81</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element collapsed"><span class="red-ui-debug-msg-row red-ui-debug-msg-expandable"><i class="fa fa-caret-right red-ui-debug-msg-object-handle"></i><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">event</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-meta">object</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">socketid</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"vAD8MPtsJaOsHGtBAAAF"</span></span></span></span></div><div class="red-ui-debug-msg-object-entry collapsed"><span class="red-ui-debug-msg-element"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-terminal"></i></button><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span><button class="red-ui-button red-ui-button-small red-ui-debug-msg-tools-pin"><i class="fa fa-map-pin"></i></button></span><span class="red-ui-debug-msg-object-key">_msgid</span><span>: </span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"8f9e2982.eef1d8"</span></span></span></span></div></span></span></div><div class="red-ui-debug-msg red-ui-debug-msg-level-20 red-ui-debug-msg-node-90437d41_b8685 red-ui-debug-msg-flow-8ee901f_547468"><div class="red-ui-debug-msg-meta"><span class="red-ui-debug-msg-date">11/1/2022, 2:18:58 PM</span><a href="#" class="red-ui-debug-msg-name">node: 90437d41.b8685</a><span class="red-ui-debug-msg-topic">function : (error)</span></div><span class="red-ui-debug-msg-payload"><span class="red-ui-debug-msg-element red-ui-debug-msg-top-level"><span class="red-ui-debug-msg-row"><span class="red-ui-debug-msg-tools"><span class="red-ui-debug-msg-tools-copy button-group"><button class="red-ui-button red-ui-button-small"><i class="fa fa-clipboard"></i></button></span></span><span class="red-ui-debug-msg-object-value"><span class="red-ui-debug-msg-type-string red-ui-debug-msg-object-header">"TypeError: array.length is not a function"</span></span></span></span></span></div></div><div class="red-ui-debug-content  red-ui-debug-content-table hide"></div></div></div><div style="height: 100%; display: none;"><div style="position: relative; height: 100%;"><div class="nr-db-sb"><form class="dialog-form"><div class="red-ui-tabs"><ul id="dashboard-tabs-list"><li class="red-ui-tab active" style="width:70px;"><a class="red-ui-tab-label" title="Layout"><span>Layout</span></a></li><li class="red-ui-tab" style="width:70px;"><a class="red-ui-tab-label" title="Site" style="width:60px;"><span>Site</span></a></li><li class="red-ui-tab hidden" style="width:70px;"><a class="red-ui-tab-label" title="Theme" style="width:80px;"><span>Theme</span></a></li><li class="red-ui-tab" style="width:70px;"><a class="red-ui-tab-label" title="Angular" style="width:80px;"><span>Angular</span></a></li><span id="dash-link-button" class="editor-button" style="position:absolute; right:0px;"><i class="fa fa-external-link"></i></span></ul></div><div id="dashboard-layout" style="height:calc(100% - 48px)"><div class="form-row" style="position:relative"><label><b>Tabs &amp; Links</b></label><div class="nr-db-sb-list-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-angle-double-up"></i></a><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-angle-double-down"></i></a><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> tab</a><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> link</a></div><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="overflow-y: scroll;"><ol class="nr-db-sb-tab-list red-ui-editableList-list ui-sortable" style="min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content nr-db-sb-tab-list-item"><div class="nr-db-sb-list-header nr-db-sb-tab-list-header"><i class="nr-db-sb-list-handle nr-db-sb-tab-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron"></i><i class="nr-db-sb-icon nr-db-sb-tab-icon fa fa-object-group"></i><span class="nr-db-sb-title">Import school</span><div class="nr-db-sb-list-header-button-group" id="48c9c6d5.337a1"><a href="#" class="nr-db-sb-tab-add-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> group</a><a href="#" class="nr-db-sb-tab-edit-button editor-button  editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a><a href="#" class="nr-db-sb-tab-edit-layout-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> layout</a></div></div><div class="nr-db-sb-group-list-container"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="min-height: 10px; max-height: none;"><ol class="nr-db-sb-group-list red-ui-editableList-list ui-sortable" style="min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style=""></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">IMPORT SCHOOL</span><div class="nr-db-sb-list-header-button-group" id="3d9f466b.162f12"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container" style=""><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Download</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content nr-db-sb-tab-list-item"><div class="nr-db-sb-list-header nr-db-sb-tab-list-header"><i class="nr-db-sb-list-handle nr-db-sb-tab-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron"></i><i class="nr-db-sb-icon nr-db-sb-tab-icon fa fa-object-group"></i><span class="nr-db-sb-title">SYNC</span><div class="nr-db-sb-list-header-button-group" id="f2e93dd5.c5ac3"><a href="#" class="nr-db-sb-tab-add-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> group</a><a href="#" class="nr-db-sb-tab-edit-button editor-button  editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a><a href="#" class="nr-db-sb-tab-edit-layout-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> layout</a></div></div><div class="nr-db-sb-group-list-container"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="min-height: 10px; max-height: none;"><ol class="nr-db-sb-group-list red-ui-editableList-list ui-sortable" style="min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">SYNC</span><div class="nr-db-sb-list-header-button-group" id="bb1b2a75.d9f258"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">SYNC CAMERA</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Countdown</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Timestamp</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content nr-db-sb-tab-list-item"><div class="nr-db-sb-list-header nr-db-sb-tab-list-header"><i class="nr-db-sb-list-handle nr-db-sb-tab-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron"></i><i class="nr-db-sb-icon nr-db-sb-tab-icon fa fa-object-group"></i><span class="nr-db-sb-title">SchoolGraph 2000</span><div class="nr-db-sb-list-header-button-group" id="f2cff505.d3426"><a href="#" class="nr-db-sb-tab-add-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> group</a><a href="#" class="nr-db-sb-tab-edit-button editor-button  editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a><a href="#" class="nr-db-sb-tab-edit-layout-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> layout</a></div></div><div class="nr-db-sb-group-list-container"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="min-height: 10px; max-height: none;"><ol class="nr-db-sb-group-list red-ui-editableList-list ui-sortable" style="min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">Dashboard</span><div class="nr-db-sb-list-header-button-group" id="537fedb2.98a2d4"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Zoek op klas</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Get all schools</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">RESET ALL</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">Scholen</span><div class="nr-db-sb-list-header-button-group" id="4b2c0218.c41c54"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Scholen lijst</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">Klassen</span><div class="nr-db-sb-list-header-button-group" id="563ac69c.e7e75"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">geselecteerde school</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Klassen lijst</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">Leerlingen</span><div class="nr-db-sb-list-header-button-group" id="ed614b47.ca9b18"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">geselecteerde klas</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Leerlingen lijst</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">SHOOT</span><div class="nr-db-sb-list-header-button-group" id="a874c6fd.06ff38"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">reset kids</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">KIND 1</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Start shoot kind 1</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Stop shoot kind 1</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">KIND 2</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Start shoot kind 2</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Stop shoot kind 2</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">KIND 3</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Start shoot kind 3</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Stop shoot kind 3</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">STORE</span><div class="nr-db-sb-list-header-button-group" id="5aa2d225.1cbb4c"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Recording</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Record lijst</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Store current shoot in DATABASE</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Storing sign</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Create shoot-folders</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Create folders</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content nr-db-sb-tab-list-item"><div class="nr-db-sb-list-header nr-db-sb-tab-list-header"><i class="nr-db-sb-list-handle nr-db-sb-tab-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron"></i><i class="nr-db-sb-icon nr-db-sb-tab-icon fa fa-object-group"></i><span class="nr-db-sb-title">Raspi Cam</span><div class="nr-db-sb-list-header-button-group" id="75252f1b.e6fdd"><a href="#" class="nr-db-sb-tab-add-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> group</a><a href="#" class="nr-db-sb-tab-edit-button editor-button  editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a><a href="#" class="nr-db-sb-tab-edit-layout-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> layout</a></div></div><div class="nr-db-sb-group-list-container"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="min-height: 10px; max-height: none;"><ol class="nr-db-sb-group-list red-ui-editableList-list ui-sortable" style="min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">Snapshot</span><div class="nr-db-sb-list-header-button-group" id="eb23a053.4aa63"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"></ol></div></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content nr-db-sb-tab-list-item"><div class="nr-db-sb-list-header nr-db-sb-tab-list-header"><i class="nr-db-sb-list-handle nr-db-sb-tab-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron"></i><i class="nr-db-sb-icon nr-db-sb-tab-icon fa fa-object-group"></i><span class="nr-db-sb-title">Organizer</span><div class="nr-db-sb-list-header-button-group" id="406fcce7.3b6154"><a href="#" class="nr-db-sb-tab-add-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> group</a><a href="#" class="nr-db-sb-tab-edit-button editor-button  editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a><a href="#" class="nr-db-sb-tab-edit-layout-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> layout</a></div></div><div class="nr-db-sb-group-list-container"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="min-height: 10px; max-height: none;"><ol class="nr-db-sb-group-list red-ui-editableList-list ui-sortable" style="min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">Choose</span><div class="nr-db-sb-list-header-button-group" id="9a8c0911.a1ef78"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Get all shoots from database</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">list</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">Store selection</span><div class="nr-db-sb-list-header-button-group" id="133ead54.627ddb"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Create shoot-folders to schoolshoots</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Create shoot-folders form</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">Organize shoot</span><div class="nr-db-sb-list-header-button-group" id="a325dee2.cdfca"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">!!Put all pictures of the shoot in the dropzone!!</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Get All "schoolshoot" Folders</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">list</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Choose a folder to organize all pictures</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">SyncPic</span><div class="nr-db-sb-list-header-button-group" id="84444d2d.22c25"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"></ol></div></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content nr-db-sb-tab-list-item"><div class="nr-db-sb-list-header nr-db-sb-tab-list-header"><i class="nr-db-sb-list-handle nr-db-sb-tab-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron"></i><i class="nr-db-sb-icon nr-db-sb-tab-icon fa fa-object-group"></i><span class="nr-db-sb-title">PicTime</span><div class="nr-db-sb-list-header-button-group" id="bce487c9.3c55b"><a href="#" class="nr-db-sb-tab-add-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> group</a><a href="#" class="nr-db-sb-tab-edit-button editor-button  editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a><a href="#" class="nr-db-sb-tab-edit-layout-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> layout</a></div></div><div class="nr-db-sb-group-list-container"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="min-height: 10px; max-height: none;"><ol class="nr-db-sb-group-list red-ui-editableList-list ui-sortable" style="min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">Group 1</span><div class="nr-db-sb-list-header-button-group" id="12c6183d.6edd78"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"></ol></div></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content nr-db-sb-tab-list-item"><div class="nr-db-sb-list-header nr-db-sb-tab-list-header"><i class="nr-db-sb-list-handle nr-db-sb-tab-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron"></i><i class="nr-db-sb-icon nr-db-sb-tab-icon fa fa-object-group"></i><span class="nr-db-sb-title">WorkFlow fotoposter</span><div class="nr-db-sb-list-header-button-group" id="83afccf1.49f41"><a href="#" class="nr-db-sb-tab-add-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> group</a><a href="#" class="nr-db-sb-tab-edit-button editor-button  editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a><a href="#" class="nr-db-sb-tab-edit-layout-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> layout</a></div></div><div class="nr-db-sb-group-list-container"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="min-height: 10px; max-height: none;"><ol class="nr-db-sb-group-list red-ui-editableList-list ui-sortable" style="min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">ORDERS</span><div class="nr-db-sb-list-header-button-group" id="c3bc6778.7cc6b"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Get all orders</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">WorkList</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">audio out</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">PAPERS</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">Group 2</span><div class="nr-db-sb-list-header-button-group" id="3a44d775.d58a28"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">WorkList</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">DELETING</span><div class="nr-db-sb-list-header-button-group" id="c2b0c1a8.af43b"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">order:</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Delete selected order</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Delete ALL orders</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content nr-db-sb-tab-list-item"><div class="nr-db-sb-list-header nr-db-sb-tab-list-header"><i class="nr-db-sb-list-handle nr-db-sb-tab-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron"></i><i class="nr-db-sb-icon nr-db-sb-tab-icon fa fa-object-group"></i><span class="nr-db-sb-title">database fotoposter</span><div class="nr-db-sb-list-header-button-group" id="e83db3b5.066688"><a href="#" class="nr-db-sb-tab-add-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> group</a><a href="#" class="nr-db-sb-tab-edit-button editor-button  editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a><a href="#" class="nr-db-sb-tab-edit-layout-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> layout</a></div></div><div class="nr-db-sb-group-list-container"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="min-height: 10px; max-height: none;"><ol class="nr-db-sb-group-list red-ui-editableList-list ui-sortable" style="min-height: 0px; height: auto;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">INPUT</span><div class="nr-db-sb-list-header-button-group" id="61c56cd.0e58814"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">SEND TO DATABASE</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">database output part 1</span><div class="nr-db-sb-list-header-button-group" id="7f3b916.23329f"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">voornaam</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">naam</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">email</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">straatnaam</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">huisnr</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">stad</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">telefoon</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">bedrijfsnaam</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">btw</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">job</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">totaalomzet</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">bestellingen</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">jaaromzet</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">extra</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">account</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li style="position: relative; top: 0px; left: 0px;" class=""><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style=""></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">Lijst</span><div class="nr-db-sb-list-header-button-group" id="64e7ca33.693114"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container" style=""><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Get All Names</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">list</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">How many</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">Count:</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-group-list-header"><i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i><i class="fa fa-angle-down nr-db-sb-list-chevron" style="transform: rotate(-90deg);"></i><i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i><span class="nr-db-sb-title">Change Database</span><div class="nr-db-sb-list-header-button-group" id="3c118995.5cc616"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> spacer</a><a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div><div class="nr-db-sb-widget-list-container nr-db-sb-collapsed" style="display: none;"><div class="red-ui-editableList"><div class="red-ui-editableList-border red-ui-editableList-container" style="max-height: none;"><ol class="nr-db-sb-widget-list red-ui-editableList-list ui-sortable" style="height: auto; min-height: 5px;"><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">GET INFO FROM DATABASE</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li><li><div class="red-ui-editableList-item-content"><div class="nr-db-sb-list-header nr-db-sb-widget-list-header"><i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i><i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i><span class="nr-db-sb-title">UPDATE DATABASE</span><div class="nr-db-sb-list-header-button-group"><a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> edit</a></div></div></div></li></ol></div></div></div></div></li></ol></div></div></div></div></li></ol></div></div></div><div class="form-row" style="display: none;"><span><i class="fa fa-info-circle"></i> There <span id="nr-db-missing-group-count"></span> not in a group. Click <a id="nr-db-add-missing-groups" href="#">here</a> to create the missing groups</span></div></div><div id="dashboard-site" style="display:none;"><div class="form-row compact"><div><b>Title</b></div><input type="text" id="nr-db-field-title" style="width: 100%;" value="Node-RED Dashboard"></div><div class="form-row compact"><div><b>Options</b></div><select id="nr-db-field-hideToolbar" style="width: 100%;"><option value="false" selected="selected">Show the title bar</option><option value="true">Hide the title bar</option></select></div><div class="form-row compact"><select id="nr-db-field-lockMenu" style="width: 100%;"><option value="false" selected="selected">Click to show side menu</option><option value="true">Always show side menu</option><option value="icon">Always show icons only</option></select></div><div class="form-row compact"><select id="nr-db-field-allowSwipe" style="width: 100%;"><option value="false" selected="selected">No swipe between tabs</option><option value="true">Allow swipe between tabs</option><option value="mouse">Allow swipe (+mouse) between tabs</option><option value="menu">Swipe to open/close menu</option></select></div><div class="form-row compact"><select id="nr-db-field-allowTempTheme" style="width: 100%;"><option value="true">Node-RED theme everywhere</option><option value="false">Use Angular theme in ui_template</option><option value="none" selected="selected">Angular theme everywhere</option></select></div><div class="form-row"><div style="width: 80%; display: inline-block;"><b>Date Format</b></div><div style="display: inline-block; margin-right: 6px; float: right;"><a href="https://momentjs.com/docs/#/displaying/format/" target="_new"><i class="fa fa-info-circle" style="color:grey;"></i></a></div><input type="text" id="nr-db-field-dateFormat" style="width: 100%;" value="DD/MM/YYYY"></div><div class="form-row"><span style="width:45%; display:inline-block"><b>Sizes</b></span><span style="width:25%; display:inline-block; font-size:smaller">Horizontal</span><span style="width:20%; display:inline-block; font-size:smaller">Vertical</span><i id="sizes-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 1;"></i><br>1x1 Widget Size<span style="width:45%; display:inline-block">1x1 Widget Size</span><input type="number" name="sx" min="24" id="nr-db-field-sx" style="width: 20%;" value="48"><span style="width:5%; display:inline-block"> </span><input type="number" name="sy" min="24" id="nr-db-field-sy" style="width: 20%;" value="48"><br>Widget Spacing<span style="width:45%; display:inline-block">Widget Spacing</span><input type="number" name="cx" min="0" id="nr-db-field-cx" style="width: 20%;" value="6"><span style="width:5%; display:inline-block"> </span><input type="number" name="cy" min="0" id="nr-db-field-cy" style="width: 20%;" value="6"><br>Group Padding<span style="width:45%; display:inline-block">Group Padding</span><input type="number" name="px" min="0" id="nr-db-field-px" style="width: 20%;" value="0"><span style="width:5%; display:inline-block"> </span><input type="number" name="py" min="0" id="nr-db-field-py" style="width: 20%;" value="0"><br>Group Spacing<span style="width:45%; display:inline-block">Group Spacing</span><input type="number" name="gx" min="0" id="nr-db-field-gx" style="width: 20%;" value="6"><span style="width:5%; display:inline-block"> </span><input type="number" name="gy" min="0" id="nr-db-field-gy" style="width: 20%;" value="6"></div></div><div id="dashboard-theme" style="display:none;"><div class="form-row"><label class="nr-db-theme-label">Style</label><select id="nr-db-field-theme" style="width: 100%;"><option value="theme-light" selected="selected">Light (default)</option><option value="theme-dark">Dark</option><option value="theme-custom">Custom</option></select></div><div id="custom-theme-library-container" style="display: none;"><label class="nr-db-theme-label">Custom Profile</label><input type="text" id="ui-sidebar-name" style="vertical-align: top; width: calc(100% - 52px);" placeholder="profile name (not blank)" value="Untitled Theme 1"><div style="margin-left:5px; display: inline-block;position: relative;"><a id="node-input-theme-lookup" class="red-ui-button"><i class="fa fa-book"></i> <i class="fa fa-caret-down"></i></a><ul class="red-ui-menu red-ui-menu-dropdown pull-right" id="node-input-theme-lookup-submenu"><li><a id="node-input-theme-menu-open-library" tabindex="-1" href="#"><span class="red-ui-menu-label">Open Library...</span></a></li><li><a id="node-input-theme-menu-save-library" tabindex="-1" href="#"><span class="red-ui-menu-label">Save to Library...</span></a></li></ul></div><input type="hidden" id="nr-db-field-format"><div style="display:none;" class="node-text-editor" id="nr-db-field-format-editor"><div></div><div class="red-ui-editor-text-container ace_editor ace_hidpi ace-tomorrow"><textarea class="ace_text-input" autocorrect="off" autocapitalize="none" spellcheck="false" style="opacity: 0; font-size: 1px;" wrap="off"></textarea><div class="ace_gutter" aria-hidden="true"><div class="ace_layer ace_gutter-layer ace_folding-enabled" style="height: 1000000px;"></div></div><div class="ace_scroller" style="line-height: 0px;"><div class="ace_content"><div class="ace_layer ace_print-margin-layer"><div class="ace_print-margin" style="left: 4px; visibility: visible;"></div></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_text-layer" style="height: 1000000px; margin: 0px 4px;"></div><div class="ace_layer ace_marker-layer"></div><div class="ace_layer ace_cursor-layer ace_hidden-cursors"><div class="ace_cursor"></div></div></div></div><div class="ace_scrollbar ace_scrollbar-v" style="display: none; width: 20px;"><div class="ace_scrollbar-inner" style="width: 20px;">&nbsp;</div></div><div class="ace_scrollbar ace_scrollbar-h" style="display: none; height: 20px;"><div class="ace_scrollbar-inner" style="height: 20px;">&nbsp;</div></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: hidden;"><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: visible;"></div><div style="height: auto; width: auto; top: 0px; left: 0px; visibility: hidden; position: absolute; white-space: pre; font: inherit; overflow: visible;">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</div></div></div></div></div><div id="base-theme-settings"><div class="form-row"><label class="nr-db-theme-label">Base Settings</label><ul id="base-settings-ul" class="red-ui-dashboard-theme-styles"><li class="red-ui-dashboard-theme-item"><span>Colour</span><span class="nr-db-color-pick-container"><input id="base-color" class="nr-db-field-themeColor" type="color" value="#0094ce" style="background-color: rgb(0, 148, 206); color: rgb(238, 238, 238);"></span><i id="base-color-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 1;"></i></li><li class="red-ui-dashboard-theme-item"><span>Font</span><select id="nr-db-field-font"><option value="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif" style="font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif" selected="selected">System Font (default)</option><option value="Arial,Arial,Helvetica,sans-serif" style="font-family:Arial,Arial,Helvetica,sans-serif">Arial</option><option value="Arial Black,Arial Black,Gadget,sans-serif" style="font-family:Arial Black,Arial Black,Gadget,sans-serif">Arial Black</option><option value="Arial Narrow,Nimbus Sans L,sans-serif" style="font-family:Arial Narrow,Nimbus Sans L,sans-serif">Arial Narrow</option><option value="Century Gothic,CenturyGothic,AppleGothic,sans-serif" style="font-family:Century Gothic,CenturyGothic,AppleGothic,sans-serif">Century Gothic</option><option value="Copperplate,Copperplate Gothic Light,fantasy" style="font-family:Copperplate,Copperplate Gothic Light,fantasy;">Copperplate</option><option value="Courier,monospace" style="font-family:Courier,monospace;">Courier</option><option value="Georgia,Georgia,serif" style="font-family:Georgia,Georgia,serif">Georgia</option><option value="Gill Sans,Geneva,sans-serif" style="font-family:Gill Sans,Geneva,sans-serif;">Gill Sans</option><option value="Impact,Impact,Charcoal,sans-serif" style="font-family:Impact,Impact,Charcoal,sans-serif">Impact</option><option value="Lucida Sans Typewriter,Lucida Console,Monaco,monospace" style="font-family:Lucida Console,Monaco,monospace">Lucida Console</option><option value="Lucida Sans Unicode,Lucida Grande,sans-serif" style="font-family:Lucida Sans Unicode,Lucida Grande,sans-serif">Lucida Sans</option><option value="Palatino Linotype,Palatino,Book Antiqua,serif" style="font-family:Palatino Linotype,Palatino,Book Antiqua,serif">Palatino Linotype</option><option value="Tahoma,Geneva,sans-serif" style="font-family:Tahoma,Geneva,sans-serif">Tahoma</option><option value="Times New Roman,Times,serif" style="font-family:Times New Roman,Times,serif">Times New Roman</option><option value="Trebuchet MS,Helvetica,sans-serif" style="font-family:Trebuchet MS,Helvetica,sans-serif">Trebuchet MS</option><option value="Verdana,Verdana,Geneva,sans-serif" style="font-family:Verdana,Verdana,Geneva,sans-serif">Verdana</option></select></li></ul></div></div><div id="custom-theme-settings" style="display: none;"><div class="form-row"><label class="nr-db-theme-label">Page Settings</label></div><ul class="red-ui-dashboard-theme-styles"><li class="red-ui-dashboard-theme-item"><span>Title Bar Background</span><span class="nr-db-color-pick-container"><input id="page-titlebar-backgroundColor" class="nr-db-field-themeColor" type="color" value="#0094ce" style="background-color: rgb(0, 148, 206); color: rgb(238, 238, 238);"></span><i id="page-titlebar-backgroundColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li><li class="red-ui-dashboard-theme-item"><span>Page Background</span><span class="nr-db-color-pick-container"><input id="page-backgroundColor" class="nr-db-field-themeColor" type="color" value="#fafafa" style="background-color: rgb(250, 250, 250); color: rgb(17, 17, 17);"></span><i id="page-backgroundColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li><li class="red-ui-dashboard-theme-item"><span>Side Bar Background</span><span class="nr-db-color-pick-container"><input id="page-sidebar-backgroundColor" class="nr-db-field-themeColor" type="color" value="#ffffff" style="background-color: rgb(255, 255, 255); color: rgb(17, 17, 17);"></span><i id="page-sidebar-backgroundColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li></ul><div class="form-row"><label class="nr-db-theme-label">Group Settings</label></div><ul class="red-ui-dashboard-theme-styles"><li class="red-ui-dashboard-theme-item"><span>Group Text</span><span class="nr-db-color-pick-container"><input id="group-textColor" class="nr-db-field-themeColor" type="color" value="#1bbfff" style="background-color: rgb(27, 191, 255); color: rgb(17, 17, 17);"></span><i id="group-textColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li><li class="red-ui-dashboard-theme-item"><span>Group Border</span><span class="nr-db-color-pick-container"><input id="group-borderColor" class="nr-db-field-themeColor" type="color" value="#ffffff" style="background-color: rgb(255, 255, 255); color: rgb(17, 17, 17);"></span><i id="group-borderColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li><li class="red-ui-dashboard-theme-item"><span>Group Background</span><span class="nr-db-color-pick-container"><input id="group-backgroundColor" class="nr-db-field-themeColor" type="color" value="#ffffff" style="background-color: rgb(255, 255, 255); color: rgb(17, 17, 17);"></span><i id="group-backgroundColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li></ul><div class="form-row"><label class="nr-db-theme-label">Widget Settings</label></div><ul class="red-ui-dashboard-theme-styles"><li class="red-ui-dashboard-theme-item"><span>Widget Text</span><span class="nr-db-color-pick-container"><input id="widget-textColor" class="nr-db-field-themeColor" type="color" value="#111111" style="background-color: rgb(17, 17, 17); color: rgb(238, 238, 238);"></span><i id="widget-textColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li><li class="red-ui-dashboard-theme-item"><span>Widget Colour</span><span class="nr-db-color-pick-container"><input id="widget-backgroundColor" class="nr-db-field-themeColor" type="color" value="#0094ce" style="background-color: rgb(0, 148, 206); color: rgb(238, 238, 238);"></span><i id="widget-backgroundColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li><li class="red-ui-dashboard-theme-item"><span>Widget Background</span><span class="nr-db-color-pick-container"><input id="widget-borderColor" class="nr-db-field-themeColor" type="color" value="#ffffff" style="background-color: rgb(255, 255, 255); color: rgb(17, 17, 17);"></span><i id="widget-borderColor-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 0.2;"></i></li></ul></div></div><div id="dashboard-angular" style="display:none;"><div class="form-row"><span style="width:45%; display:inline-block"><b>Primary</b></span><i id="ang-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 1;"></i><select id="nr-db-field-angPrimary" style="width: 100%;"><option value="red">red</option><option value="pink">pink</option><option value="purple">purple</option><option value="deep-purple">deep-purple</option><option value="indigo" selected="selected">indigo</option><option value="blue">blue</option><option value="light-blue">light-blue</option><option value="cyan">cyan</option><option value="teal">teal</option><option value="green">green</option><option value="light-green">light-green</option><option value="lime">lime</option><option value="yellow">yellow</option><option value="amber">amber</option><option value="orange">orange</option><option value="deep-orange">deep-orange</option><option value="brown">brown</option><option value="grey">grey</option><option value="blue-grey">blue-grey</option></select></div><div class="form-row"><span style="width:45%; display:inline-block"><b>Accents</b></span><i id="ang-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 1;"></i><select id="nr-db-field-angAccents" style="width: 100%;"><option value="red">red</option><option value="pink">pink</option><option value="purple">purple</option><option value="deep-purple">deep-purple</option><option value="indigo">indigo</option><option value="blue" selected="selected">blue</option><option value="light-blue">light-blue</option><option value="cyan">cyan</option><option value="teal">teal</option><option value="green">green</option><option value="light-green">light-green</option><option value="lime">lime</option><option value="yellow">yellow</option><option value="amber">amber</option><option value="orange">orange</option><option value="deep-orange">deep-orange</option><option value="brown">brown</option><option value="grey">grey</option><option value="blue-grey">blue-grey</option></select></div><div class="form-row"><span style="width:45%; display:inline-block"><b>Warnings</b></span><i id="ang-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 1;"></i><select id="nr-db-field-angWarn" style="width: 100%;"><option value="red" selected="selected">red</option><option value="pink">pink</option><option value="purple">purple</option><option value="deep-purple">deep-purple</option><option value="indigo">indigo</option><option value="blue">blue</option><option value="light-blue">light-blue</option><option value="cyan">cyan</option><option value="teal">teal</option><option value="green">green</option><option value="light-green">light-green</option><option value="lime">lime</option><option value="yellow">yellow</option><option value="amber">amber</option><option value="orange">orange</option><option value="deep-orange">deep-orange</option><option value="brown">brown</option><option value="grey">grey</option><option value="blue-grey">blue-grey</option></select></div><div class="form-row"><span style="width:45%; display:inline-block"><b>Background</b></span><i id="ang-reset" class="fa fa-undo nr-db-resetIcon" style="opacity: 1;"></i><select id="nr-db-field-angBackground" style="width: 100%;"><option value="red">red</option><option value="pink">pink</option><option value="purple">purple</option><option value="deep-purple">deep-purple</option><option value="indigo">indigo</option><option value="blue">blue</option><option value="light-blue">light-blue</option><option value="cyan">cyan</option><option value="teal">teal</option><option value="green">green</option><option value="light-green">light-green</option><option value="lime">lime</option><option value="yellow">yellow</option><option value="amber">amber</option><option value="orange">orange</option><option value="deep-orange">deep-orange</option><option value="brown">brown</option><option value="grey" selected="selected">grey</option><option value="blue-grey">blue-grey</option></select></div><div class="form-row"><span style="width:45%; display:inline-block"><b>Light / Dark</b></span><select id="nr-db-field-angLook" style="width: 100%;"><option value="light" selected="selected">Light (default)</option><option value="dark">Dark</option></select></div></div></form></div></div><div class="red-ui-sidebar-shade hide" style="display: block;"></div></div></div><div id="red-ui-sidebar-footer" class="red-ui-component-footer"><div style="display: none;"><a class="red-ui-footer-button" id="red-ui-sidebar-config-collapse-all" href="#"><i class="fa fa-angle-double-up"></i></a> <a class="red-ui-footer-button" id="red-ui-sidebar-config-expand-all" href="#"><i class="fa fa-angle-double-down"></i></a></div><div style="display: none;"></div><div style=""><span class="button-group"><a id="red-ui-sidebar-debug-open" class="red-ui-footer-button" href="#"><i class="fa fa-desktop"></i></a></span> </div></div><div id="red-ui-sidebar-shade" class="hide" style="display: none;"></div></div><div id="red-ui-sidebar-separator" class="ui-draggable ui-draggable-handle"><div class="red-ui-sidebar-control-right" style="display: none;"><i class="fa fa-chevron-right" <="" div=""></i></div></div><div id="red-ui-loading-progress" style="display: none;"><div><div class="red-ui-loading-bar-label"></div><div class="red-ui-loading-bar"><span style="width: 0%;"></span></div></div></div></div><div id="red-ui-editor-plugin-configs"><div></div></div><div id="red-ui-editor-node-configs"><script type="text/x-red" data-template-name="_eventLog"><div class="form-row node-text-editor-row"><div style="height: 100%;min-height: 150px;" class="node-text-editor" id="red-ui-event-log-editor"></div></div></script><script type="text/x-red" data-template-name="subflow"><div class="form-row"><label for="node-input-name" data-i18n="[append]editor:common.label.name"><i class="fa fa-tag"></i> </label><input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name"></div><div id="subflow-input-ui"></div></script><script type="text/x-red" data-template-name="subflow-template"><div class="form-row"><label for="subflow-input-name" data-i18n="[append]common.label.name"><i class="fa fa-tag"></i>  </label><input type="text" id="subflow-input-name" data-i18n="[placeholder]common.label.name"></div><div class="form-row"><ul style="margin-bottom: 20px;" id="subflow-env-tabs"></ul></div><div id="subflow-env-tabs-content"><div id="subflow-env-tab-edit"><div class="form-row node-input-env-container-row" id="subflow-input-edit-ui"><ol class="red-ui-editor-subflow-env-list" id="node-input-env-container"></ol><div class="node-input-env-locales-row"><i class="fa fa-language"></i> <select id="subflow-input-env-locale"></select></div></div></div><div id="subflow-env-tab-preview"><div id="subflow-input-ui"/></div></div></script><script type="text/x-red" data-template-name="group"><div class="form-row"><label for="node-input-name" data-i18n="[append]editor:common.label.name"><i class="fa fa-tag"></i> </label><input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name"></div><div class="form-row" id="node-input-row-style-stroke"><label data-i18n="editor:common.label.style"></label><label style="width: 70px;margin-right:10px" for="node-input-style-stroke" data-i18n="editor:common.label.line"></label></div><div class="form-row" style="padding-left: 100px;" id="node-input-row-style-fill"><label style="width: 70px;margin-right: 10px "  for="node-input-style-fill" data-i18n="editor:common.label.fill"></label></div><div class="form-row"><label for="node-input-style-label" data-i18n="editor:common.label.label"></label><input type="checkbox" id="node-input-style-label"/></div><div class="form-row" id="node-input-row-style-label-options"><div style="margin-left: 100px; display: inline-block"><div class="form-row"><span style="display: inline-block; min-width: 140px"  id="node-input-row-style-label-color"><label style="width: 70px;margin-right: 10px" for="node-input-style-fill" data-i18n="editor:common.label.color"></label></span></div><div class="form-row"><span style="display: inline-block; min-width: 140px;" id="node-input-row-style-label-position"><label style="width: 70px;margin-right: 10px " for="node-input-style-label-position" data-i18n="editor:common.label.position"></label></span></div></div></div></script><div><!-- --- [red-module:node-red/inject] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="inject">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>

    <div class="form-row node-input-property-container-row">
        <ol id="node-input-property-container"></ol>
    </div>

    <div class="form-row" id="node-once">
        <label for="node-input-once">&nbsp;</label>
        <input type="checkbox" id="node-input-once" style="display:inline-block; width:15px; vertical-align:baseline;">
        <span data-i18n="inject.onstart"></span>&nbsp;
        <input type="text" id="node-input-onceDelay" placeholder="0.1" style="width:45px; height:28px;">&nbsp;
        <span data-i18n="inject.onceDelay"></span>
    </div>

    <div class="form-row">
        <label for=""><i class="fa fa-repeat"></i> <span data-i18n="inject.label.repeat"></span></label>
        <select id="inject-time-type-select">
            <option value="none" data-i18n="inject.none"></option>
            <option value="interval" data-i18n="inject.interval"></option>
            <option value="interval-time" data-i18n="inject.interval-time"></option>
            <option value="time" data-i18n="inject.time"></option>
        </select>
        <input type="hidden" id="node-input-repeat">
        <input type="hidden" id="node-input-crontab">
    </div>

    <div class="form-row inject-time-row hidden" id="inject-time-row-interval">
        <span data-i18n="inject.every"></span>
        <input id="inject-time-interval-count" class="inject-time-count" value="1"></input>
        <select style="width:100px" id="inject-time-interval-units">
            <option value="s" data-i18n="inject.seconds"></option>
            <option value="m" data-i18n="inject.minutes"></option>
            <option value="h" data-i18n="inject.hours"></option>
        </select><br/>
    </div>

    <div class="form-row inject-time-row hidden" id="inject-time-row-interval-time">
        <span data-i18n="inject.every"></span> <select style="width:90px; margin-left:20px;" id="inject-time-interval-time-units" class="inject-time-int-count" value="1">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="10">10</option>
            <option value="12">12</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="30">30</option>
            <option value="0">60</option>
        </select> <span data-i18n="inject.minutes"></span><br/>
        <span data-i18n="inject.between"></span> <select id="inject-time-interval-time-start" class="inject-time-times"></select>
        <span data-i18n="inject.and"></span> <select id="inject-time-interval-time-end" class="inject-time-times"></select><br/>
        <div id="inject-time-interval-time-days" class="inject-time-days" style="margin-top:5px">
            <div style="display:inline-block; vertical-align:top; margin-right:5px;" data-i18n="inject.on">on</div>
            <div style="display:inline-block;">
                <div>
                    <label><input type='checkbox' checked value='1'/> <span data-i18n="inject.days.0"></span></label>
                    <label><input type='checkbox' checked value='2'/> <span data-i18n="inject.days.1"></span></label>
                    <label><input type='checkbox' checked value='3'/> <span data-i18n="inject.days.2"></span></label>
                </div>
                <div>
                    <label><input type='checkbox' checked value='4'/> <span data-i18n="inject.days.3"></span></label>
                    <label><input type='checkbox' checked value='5'/> <span data-i18n="inject.days.4"></span></label>
                    <label><input type='checkbox' checked value='6'/> <span data-i18n="inject.days.5"></span></label>
                </div>
                <div>
                    <label><input type='checkbox' checked value='0'/> <span data-i18n="inject.days.6"></span></label>
                </div>
            </div>
        </div>
    </div>

    <div class="form-row inject-time-row hidden" id="inject-time-row-time">
        <span data-i18n="inject.at"></span> <input type="text" id="inject-time-time" value="12:00"></input><br/>
        <div id="inject-time-time-days" class="inject-time-days">
            <div style="display:inline-block; vertical-align:top; margin-right:5px;" data-i18n="inject.on"></div>
            <div style="display:inline-block;">
                <div>
                    <label><input type='checkbox' checked value='1'/> <span data-i18n="inject.days.0"></span></label>
                    <label><input type='checkbox' checked value='2'/> <span data-i18n="inject.days.1"></span></label>
                    <label><input type='checkbox' checked value='3'/> <span data-i18n="inject.days.2"></span></label>
                </div>
                <div>
                    <label><input type='checkbox' checked value='4'/> <span data-i18n="inject.days.3"></span></label>
                    <label><input type='checkbox' checked value='5'/> <span data-i18n="inject.days.4"></span></label>
                    <label><input type='checkbox' checked value='6'/> <span data-i18n="inject.days.5"></span></label>
                </div>
                <div>
                    <label><input type='checkbox' checked value='0'/> <span data-i18n="inject.days.6"></span></label>
                </div>
            </div>
        </div>
    </div>

</script>
<style>
    .inject-time-row {
        padding-left: 110px;
    }
    .inject-time-row select {
        margin: 3px 0;
    }
    .inject-time-days label {
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        vertical-align: baseline;
        width: 100px;
    }
    .inject-time-days input {
        width: auto !important;
        vertical-align: baseline !important;
    }
    .inject-time-times {
        width: 90px !important;
    }
    #inject-time-time {
        width: 75px;
        margin-left: 8px;
        margin-bottom: 8px;
    }
    .inject-time-count {
        width: 40px !important;
    }
</style>

<script type="text/javascript">
(function() {

    function resizeDialog(size) {
        size = size || { height: $(".red-ui-tray-content form").height() }
        var rows = $("#dialog-form>div:not(.node-input-property-container-row):visible");
        var height = size.height;
        for (var i=0; i<rows.length; i++) {
            height -= $(rows[i]).outerHeight(true);
        }
        var editorRow = $("#dialog-form>div.node-input-property-container-row");
        height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
        height += 16;
        $("#node-input-property-container").editableList('height',height);
    }

    RED.nodes.registerType('inject',{
        category: 'common',
        color:"#a6bbcf",
        defaults: {
            name: {value:""},
            props:{value:[{p:"payload"},{p:"topic",vt:"str"}], validate:function(v) {
                    if (!v || v.length === 0) { return true }
                    for (var i=0;i<v.length;i++) {
                        if (/msg|flow|global/.test(v[i].vt)) {
                            if (!RED.utils.validatePropertyExpression(v[i].v)) {
                                return false;
                            }
                        } else if (v[i].vt === "jsonata") {
                            try{jsonata(v[i].v);}catch(e){return false;}
                        } else if ([i].vt === "json") {
                            try{JSON.parse(v[i].v);}catch(e){return false;}
                        }
                    }
                    return true;
                }
            },
            repeat: {value:"", validate:function(v) { return ((v === "") || (RED.validators.number(v) && (v >= 0) && (v <= 2147483))) }},
            crontab: {value:""},
            once: {value:false},
            onceDelay: {value:0.1},
            topic: {value:""},
            payload: {value:"", validate: RED.validators.typedInput("payloadType")},
            payloadType: {value:"date"},
        },
        icon: "inject.svg",
        inputs:0,
        outputs:1,
        outputLabels: function(index) {
            var lab = '';

            // if only payload and topic - display payload type
            // if only one property - show it's type
            // if more than one property (other than payload and topic) - show "x properties" where x is the number of properties.
            // this.props will not be an array for legacy inject nodes until they are re-deployed
            //
            var props = this.props;
            if (!Array.isArray(props)) {
                props = [
                    { p:"payload", v: this.payload, vt: this.payloadType },
                    { p:"topic", v: this.topic, vt: "str" }
                ]
            }
            if (props) {
                for (var i=0,l=props.length; i<l; i++) {
                    if (i > 0) lab += "\n";
                    if (i === 5) {
                        lab += "... +"+(props.length-5);
                        break;
                    }
                    lab += props[i].p+": ";

                    var propType = props[i].p === "payload"? this.payloadType : props[i].vt;
                    if (propType === "json") {
                        try {
                            var parsedProp = JSON.parse(props[i].p === "payload"? this.payload : props[i].v);
                            propType = typeof parsedProp;
                            if (propType === "object" && Array.isArray(parsedProp)) {
                                propType = "Array";
                            }
                        } catch(e) {
                            propType = "invalid";
                        }
                    }
                    lab += this._("inject.label."+propType);
                }
            }
            return lab;
        },
        label: function() {
            var suffix = "";
            // if fire once then add small indication
            if (this.once) {
                suffix = " ";
            }
            // but replace with repeat one if set to repeat
            if ((this.repeat && this.repeat != 0) || this.crontab) {
                suffix = " ";
            }
            if (this.name) {
                return this.name+suffix;
            }

            var payload = this.payload || "";
            var payloadType = this.payloadType || "str";
            var topic = this.topic || "";

            if (payloadType === "string" ||
                    payloadType === "str" ||
                    payloadType === "num" ||
                    payloadType === "bool" ||
                    payloadType === "json") {
                if ((topic !== "") && ((topic.length + payload.length) <= 32)) {
                    return topic + ":" + payload+suffix;
                } else if (payload.length > 0 && payload.length < 24) {
                    return payload+suffix;
                } else {
                    return this._("inject.inject")+suffix;
                }
            } else if (payloadType === 'date' || payloadType === 'bin' || payloadType === 'env') {
                if ((topic !== "") && (topic.length <= 16)) {
                    return topic + ":" + this._('inject.label.'+payloadType)+suffix;
                } else {
                    return this._('inject.label.'+payloadType)+suffix;
                }
            } else if (payloadType === 'flow' || payloadType === 'global') {
                var key = RED.utils.parseContextKey(payload);
                return payloadType+"."+key.key+suffix;
            } else {
                return this._("inject.inject")+suffix;
            }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            if (this.payloadType == null) {
                if (this.payload == "") {
                    this.payloadType = "date";
                } else {
                    this.payloadType = "str";
                }
            } else if (this.payloadType === 'string' || this.payloadType === 'none') {
                this.payloadType = "str";
            }

            $("#inject-time-type-select").on("change", function() {
                $("#node-input-crontab").val('');
                var id = $("#inject-time-type-select").val();
                $(".inject-time-row").hide();
                $("#inject-time-row-"+id).show();
                if ((id == "none") || (id == "interval") || (id == "interval-time")) {
                    $("#node-once").show();
                }
                else {
                    $("#node-once").hide();
                    $("#node-input-once").prop('checked', false);
                }

                // Scroll down
                var scrollDiv = $("#dialog-form").parent();
                scrollDiv.scrollTop(scrollDiv.prop('scrollHeight'));
                resizeDialog();
            });

            $("#node-input-once").on("change", function() {
                $("#node-input-onceDelay").attr('disabled', !$("#node-input-once").prop('checked'));
            })

            $(".inject-time-times").each(function() {
                for (var i=0; i<24; i++) {
                    var l = (i<10?"0":"")+i+":00";
                    $(this).append($("<option></option>").val(i).text(l));
                }
            });
            $("<option></option>").val(24).text("00:00").appendTo("#inject-time-interval-time-end");
            $("#inject-time-interval-time-start").on("change", function() {
                var start = Number($("#inject-time-interval-time-start").val());
                var end = Number($("#inject-time-interval-time-end").val());
                $("#inject-time-interval-time-end option").remove();
                for (var i=start+1; i<25; i++) {
                    var l = (i<10?"0":"")+i+":00";
                    if (i==24) {
                        l = "00:00";
                    }
                    var opt = $("<option></option>").val(i).text(l).appendTo("#inject-time-interval-time-end");
                    if (i === end) {
                        opt.attr("selected","selected");
                    }
                }
            });

            $(".inject-time-count").spinner({
                //max:60,
                min:1
            });

            var repeattype = "none";
            if (this.repeat != "" && this.repeat != 0) {
                repeattype = "interval";
                var r = "s";
                var c = this.repeat;
                if (this.repeat % 60 === 0) { r = "m"; c = c/60; }
                if (this.repeat % 1440 === 0) { r = "h"; c = c/60; }
                $("#inject-time-interval-count").val(c);
                $("#inject-time-interval-units").val(r);
                $("#inject-time-interval-days").prop("disabled","disabled");
            } else if (this.crontab) {
                var cronparts = this.crontab.split(" ");
                var days = cronparts[4];
                if (!isNaN(cronparts[0]) && !isNaN(cronparts[1])) {
                    repeattype = "time";
                    // Fixed time
                    var time = cronparts[1]+":"+cronparts[0];
                    $("#inject-time-time").val(time);
                    $("#inject-time-type-select").val("s");
                    if (days == "*") {
                        $("#inject-time-time-days input[type=checkbox]").prop("checked",true);
                    } else {
                        $("#inject-time-time-days input[type=checkbox]").removeAttr("checked");
                        days.split(",").forEach(function(v) {
                            $("#inject-time-time-days [value=" + v + "]").prop("checked", true);
                        });
                    }
                } else {
                    repeattype = "interval-time";
                    // interval - time period
                    var minutes = cronparts[0].slice(2);
                    if (minutes === "") { minutes = "0"; }
                    $("#inject-time-interval-time-units").val(minutes);
                    if (days == "*") {
                        $("#inject-time-interval-time-days input[type=checkbox]").prop("checked",true);
                    } else {
                        $("#inject-time-interval-time-days input[type=checkbox]").removeAttr("checked");
                        days.split(",").forEach(function(v) {
                            $("#inject-time-interval-time-days [value=" + v + "]").prop("checked", true);
                        });
                    }
                    var time = cronparts[1];
                    var timeparts = time.split(",");
                    var start;
                    var end;
                    if (timeparts.length == 1) {
                        // 0 or 0-10
                        var hours = timeparts[0].split("-");
                        if (hours.length == 1) {
                            if (hours[0] === "") {
                                start = "0";
                                end = "0";
                            }
                            else {
                                start = hours[0];
                                end = Number(hours[0])+1;
                            }
                        } else {
                            start = hours[0];
                            end = Number(hours[1])+1;
                        }
                    } else {
                        // 23,0 or 17-23,0-10 or 23,0-2 or 17-23,0
                        var startparts = timeparts[0].split("-");
                        start = startparts[0];

                        var endparts = timeparts[1].split("-");
                        if (endparts.length == 1) {
                            end = Number(endparts[0])+1;
                        } else {
                            end = Number(endparts[1])+1;
                        }
                    }
                    $("#inject-time-interval-time-end").val(end);
                    $("#inject-time-interval-time-start").val(start);

                }
            } else {
                $("#inject-time-type-select").val("none");
            }

            $(".inject-time-row").hide();
            $("#inject-time-type-select").val(repeattype);
            $("#inject-time-row-"+repeattype).show();

            /* */

            $('#node-input-property-container').css('min-height','120px').css('min-width','450px').editableList({
                addItem: function(container,i,opt) {
                    var prop = opt;
                    if (!prop.hasOwnProperty('p')) {
                        prop = {p:"",v:"",vt:"str"};
                    }
                    container.css({
                        overflow: 'hidden',
                        whiteSpace: 'nowrap'
                    });
                    var row = $('<div/>').appendTo(container);

                    var propertyName = $('<input/>',{class:"node-input-prop-property-name",type:"text"})
                        .css("width","30%")
                        .appendTo(row)
                        .typedInput({types:['msg']});

                    $('<div/>',{style: 'display:inline-block; padding:0px 6px;'})
                        .text('=')
                        .appendTo(row);

                    var propertyValue = $('<input/>',{class:"node-input-prop-property-value",type:"text"})
                        .css("width","calc(70% - 30px)")
                        .appendTo(row)
                        .typedInput({default:'str',types:['msg','flow','global','str','num','bool','json','bin','date','jsonata','env']});

                    propertyName.typedInput('value',prop.p);

                    propertyValue.typedInput('value',prop.v);
                    propertyValue.typedInput('type',prop.vt);
                },
                removable: true,
                sortable: true
            });

            if (!this.props) {
                var payload = {
                    p:'payload',
                    v: this.payload ? this.payload : '',
                    vt:this.payloadType ? this.payloadType : 'date'
                };
                var topic = {
                    p:'topic',
                    v: this.topic ? this.topic : '',
                    vt:'string'
                }
                this.props = [payload,topic];
            }

            for (var i=0; i<this.props.length; i++) {
                var prop = this.props[i];
                var newProp = { p: prop.p, v: prop.v, vt: prop.vt };
                if (newProp.v === undefined) {
                    if (prop.p === 'payload') {
                        newProp.v = this.payload ? this.payload : '';
                        newProp.vt = this.payloadType ? this.payloadType : 'date';
                    } else if (prop.p === 'topic' && prop.vt === "str") {
                        newProp.v =  this.topic ? this.topic : '';
                    }
                }
                $("#node-input-property-container").editableList('addItem',newProp);
            }

            $("#inject-time-type-select").trigger("change");
            $("#inject-time-interval-time-start").trigger("change");

        },
        oneditsave: function() {
            var repeat = "";
            var crontab = "";
            var type = $("#inject-time-type-select").val();
            if (type == "none") {
                // nothing
            } else if (type == "interval") {
                var count = $("#inject-time-interval-count").val();
                var units = $("#inject-time-interval-units").val();
                if (units == "s") {
                    repeat = count;
                } else {
                    if (units == "m") {
                        //crontab = "*/"+count+" * * * "+days;
                        repeat = count * 60;
                    } else if (units == "h") {
                        //crontab = "0 */"+count+" * * "+days;
                        repeat = count * 60 * 60;
                    }
                }
            } else if (type == "interval-time") {
                repeat = "";
                var count = $("#inject-time-interval-time-units").val();
                var startTime = Number($("#inject-time-interval-time-start").val());
                var endTime = Number($("#inject-time-interval-time-end").val());
                var days = $('#inject-time-interval-time-days input[type=checkbox]:checked').map(function(_, el) {
                    return $(el).val()
                }).get();
                if (days.length == 0) {
                    crontab = "";
                } else {
                    if (days.length == 7) {
                        days="*";
                    } else {
                        days = days.join(",");
                    }
                    var timerange = "";
                    if (endTime == 0) {
                        timerange = startTime+"-23";
                    } else if (startTime+1 < endTime) {
                        timerange = startTime+"-"+(endTime-1);
                    } else if (startTime+1 == endTime) {
                        timerange = startTime;
                    } else {
                        var startpart = "";
                        var endpart = "";
                        if (startTime == 23) {
                            startpart = "23";
                        } else {
                            startpart = startTime+"-23";
                        }
                        if (endTime == 1) {
                            endpart = "0";
                        } else {
                            endpart = "0-"+(endTime-1);
                        }
                        timerange = startpart+","+endpart;
                    }
                    if (count === "0") {
                        crontab = count+" "+timerange+" * * "+days;
                    } else {
                        crontab = "*/"+count+" "+timerange+" * * "+days;
                    }
                }
            } else if (type == "time") {
                var time = $("#inject-time-time").val();
                var days = $('#inject-time-time-days  input[type=checkbox]:checked').map(function(_, el) {
                    return $(el).val()
                }).get();
                if (days.length == 0) {
                    crontab = "";
                } else {
                    if (days.length == 7) {
                        days="*";
                    } else {
                        days = days.join(",");
                    }
                    var parts = time.split(":");
                    if (parts.length === 2) {
                        repeat = "";
                        parts[1] = ("00" + (parseInt(parts[1]) % 60)).substr(-2);
                        parts[0] = ("00" + (parseInt(parts[0]) % 24)).substr(-2);
                        crontab = parts[1]+" "+parts[0]+" * * "+days;
                    }
                    else { crontab = ""; }
                }
            }

            $("#node-input-repeat").val(repeat);
            $("#node-input-crontab").val(crontab);

            /* Gather the injected properties of the msg object */
            var props = $("#node-input-property-container").editableList('items');
            var node = this;
            node.props= [];
            delete node.payloadType;
            delete node.payload;
            node.topic = "";
            props.each(function(i) {
                var prop = $(this);
                var p = {
                    p:prop.find(".node-input-prop-property-name").typedInput('value')
                };
                if (p.p) {
                    p.v = prop.find(".node-input-prop-property-value").typedInput('value');
                    p.vt = prop.find(".node-input-prop-property-value").typedInput('type');
                    if (p.p === "payload") { // save payload to old "legacy" property
                        node.payloadType = p.vt;
                        node.payload = p.v;
                        delete p.v;
                        delete p.vt;
                    } else if (p.p === "topic" && p.vt === "str") {
                        node.topic = p.v;
                        delete p.v;
                    }
                    node.props.push(p);
                }
            });
        },
        button: {
            enabled: function() {
                return !this.changed
            },
            onclick: function() {
                if (this.changed) {
                    return RED.notify(RED._("notification.warning", {message:RED._("notification.warnings.undeployedChanges")}),"warning");
                }

                var label = this._def.label.call(this);
                if (label.length > 30) {
                    label = label.substring(0,50)+"...";
                }
                label = label.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
                var node = this;
                $.ajax({
                    url: "inject/"+this.id,
                    type:"POST",
                    success: function(resp) {
                        RED.notify(node._("inject.success",{label:label}),{type:"success",id:"inject"});
                    },
                    error: function(jqXHR,textStatus,errorThrown) {
                        if (jqXHR.status == 404) {
                            RED.notify(node._("common.notification.error",{message:node._("common.notification.errors.not-deployed")}),"error");
                        } else if (jqXHR.status == 500) {
                            RED.notify(node._("common.notification.error",{message:node._("inject.errors.failed")}),"error");
                        } else if (jqXHR.status == 0) {
                            RED.notify(node._("common.notification.error",{message:node._("common.notification.errors.no-response")}),"error");
                        } else {
                            RED.notify(node._("common.notification.error",{message:node._("common.notification.errors.unexpected",{status:jqXHR.status,message:textStatus})}),"error");
                        }
                    }
                });
            }
        },
        oneditresize: resizeDialog
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="inject">
<p>Injects a message into a flow either manually or at regular intervals. The message
payload can be a variety of types, including strings, JavaScript objects or the current time.</p>
<h3>Outputs</h3>
<dl class="message-properties">
    <dt>payload<span class="property-type">various</span></dt>
    <dd>The configured payload of the message.</dd>
    <dt class="optional">topic <span class="property-type">string</span></dt>
    <dd>An optional property that can be configured in the node.</dd>
</dl>
<h3>Details</h3>
<p>The Inject node can initiate a flow with a specific payload value.
The default payload is a timestamp of the current time in millisecs since January 1st, 1970.</p>
<p>The node also supports injecting strings, numbers, booleans, JavaScript objects, or flow/global context values.</p>
<p>By default, the node is triggered manually by clicking on its button within the editor. It can also be set to
inject at regular intervals or according to a schedule.</p>
<p>It can also be configured to inject once each time the flows are started.</p>
<p>The maximum <i>Interval</i> that can be specified is about 596 hours / 24 days. However if you are looking at intervals
greater than one day you should consider using a scheduler node that can cope with power outages and restarts.</p>
<p><b>Note</b>: The <i>"Interval between times"</i> and <i>"at a specific time"</i> options use the standard cron system.
This means that 20 minutes will be at the next hour, 20 minutes past and 40 minutes past - not in 20 minutes time.
If you want every 20 minutes from now - use the <i>"interval"</i> option.</p>
<p><b>Note</b>: To include a newline in a string you must use a Function node to create the payload.</p>
</script>

</div><script src="Node-RED_files/debug-utils.js"></script><div><!-- --- [red-module:node-red/debug] --- -->

<script type="text/html" data-template-name="debug">
    <div class="form-row">
        <label for="node-input-typed-complete"><i class="fa fa-list"></i> <span data-i18n="debug.output"></span></label>
        <input id="node-input-typed-complete" type="text" style="width: 70%">
        <input id="node-input-complete" type="hidden">
        <input id="node-input-targetType" type="hidden">
    </div>
    <div class="form-row">
        <label for="node-input-tosidebar"><i class="fa fa-random"></i> <span data-i18n="debug.to"></span></label>
        <label for="node-input-tosidebar" style="width:70%">
        <input type="checkbox" id="node-input-tosidebar" style="display:inline-block; width:22px; vertical-align:top;"><span data-i18n="debug.toSidebar"></span>
        </label>
    </div>
    <div class="form-row">
        <label for="node-input-console"> </label>
        <label for="node-input-console" style="width:70%">
        <input type="checkbox" id="node-input-console" style="display:inline-block; width:22px; vertical-align:top;"><span data-i18n="debug.toConsole"></span>
        </label>
    </div>
    <div class="form-row">
    <label for="node-input-tostatus"> </label>
    <label for="node-input-tostatus" style="width:70%">
        <input type="checkbox" id="node-input-tostatus" style="display:inline-block; width:22px; vertical-align:top;"><span data-i18n="debug.toStatus"></span>
    </label>
    </div>
    <div class="form-row" id="node-tostatus-line">
        <label for="node-input-typed-status"></label>
        <input id="node-input-typed-status" type="text" style="width: 70%">
        <input id="node-input-statusVal" type="hidden">
        <input id="node-input-statusType" type="hidden">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>



<script type="text/javascript">
(function() {
    var subWindow = null;

    function activateAjaxCall(node, active, successCallback) {
        var url;
        var body;

        if (Array.isArray(node)) {
            url = "debug/"+(active?"enable":"disable");
            body = {nodes: node.map(function(n) { return n.id})}
            node = node[0];
        } else {
            url = "debug/"+node.id+"/"+(active?"enable":"disable");
        }
        $.ajax({
            url: url,
            type: "POST",
            data: body,
            success: successCallback,
            error: function(jqXHR,textStatus,errorThrown) {
                if (jqXHR.status == 404) {
                    RED.notify(node._("common.notification.error", {message: node._("common.notification.errors.not-deployed")}),"error");
                } else if (jqXHR.status === 0) {
                    RED.notify(node._("common.notification.error", {message: node._("common.notification.errors.no-response")}),"error");
                } else {
                    // TODO where is the err.status comming from?
                    RED.notify(node._("common.notification.error",{message:node._("common.notification.errors.unexpected",{status:err.status,message:err.response})}),"error");
                }
            }
        });
    }

    RED.nodes.registerType('debug',{
        category: 'common',
        defaults: {
            name: {value:""},
            active: {value:true},
            tosidebar: {value:true},
            console: {value:false},
            tostatus: {value:false},
            complete: {value:"false", required:true},
            targetType: {value:undefined},
            statusVal: {value:""},
            statusType: {value:"auto"}
        },
        label: function() {
            var suffix = "";
            if (this.console === true || this.console === "true") { suffix = " "; }
            if (this.targetType === "jsonata") {
                return (this.name || "JSONata") + suffix;
            }
            if (this.complete === true || this.complete === "true") {
                return (this.name||"msg") + suffix;
            } else {
                return (this.name || "msg." + ((!this.complete || this.complete === "false") ? "payload" : this.complete)) + suffix;
            }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        color:"#87a980",
        inputs:1,
        outputs:0,
        icon: "debug.svg",
        align: "right",
        button: {
            toggle: "active",
            visible: function() { return this.tosidebar; },
            onclick: function() {
                var label = RED.utils.sanitize(this.name||"debug");
                var node = this;
                activateAjaxCall(node, node.active, function(resp, textStatus, xhr) {
                    var historyEvent = {
                        t:'edit',
                        node:node,
                        changes:{
                            active:!node.active
                        },
                        dirty:node.dirty,
                        changed:node.changed,
                        callback: function(ev) {
                            activateAjaxCall(ev.node, ev.node.active);
                        }
                    };
                    node.changed = true;
                    node.dirty = true;
                    RED.nodes.dirty(true);
                    RED.history.push(historyEvent);
                    RED.view.redraw();
                    if (xhr.status == 200) {
                        RED.notify(node._("debug.notification.activated",{label:label}),"success");
                    } else if (xhr.status == 201) {
                        RED.notify(node._("debug.notification.deactivated",{label:label}),"success");
                    }
                });
            }
        },
        onpaletteadd: function() {
            var options = {
                messageMouseEnter: function(sourceId) {
                    if (sourceId) {
                        var n = RED.nodes.node(sourceId);
                        if (n) {
                            n.highlighted = true;
                            n.dirty = true;
                        }
                        RED.view.redraw();
                    }
                },
                messageMouseLeave: function(sourceId) {
                    if (sourceId) {
                        var n = RED.nodes.node(sourceId);
                        if (n) {
                            n.highlighted = false;
                            n.dirty = true;
                        }
                        RED.view.redraw();
                    }
                },
                messageSourceClick: function(sourceId, aliasId, path) {
                    // Get all of the nodes that could have logged this message
                    var candidateNodes = [RED.nodes.node(sourceId)]
                    if (path) {
                        for (var i=2;i<path.length;i++) {
                            candidateNodes.push(RED.nodes.node(path[i]))
                        }
                    }
                    if (aliasId) {
                        candidateNodes.push(RED.nodes.node(aliasId));
                    }
                    if (candidateNodes.length > 1) {
                        // The node is in a subflow. Check to see if the active
                        // workspace is a subflow in the node's parentage. If
                        // so, reveal the relevant subflow instance node.
                        var ws = RED.workspaces.active();
                        for (var i=0;i<candidateNodes.length;i++) {
                            if (candidateNodes[i].z === ws) {
                                RED.view.reveal(candidateNodes[i].id);
                                return
                            }
                        }
                        // The active workspace is unrelated to the node. So
                        // fall back to revealing the top most node
                    }
                    RED.view.reveal(candidateNodes[0].id);
                },
                clear: function() {
                    RED.nodes.eachNode(function(node) {
                        node.highlighted = false;
                        node.dirty = true;
                    });
                    RED.view.redraw();
                }
            };

            var uiComponents = RED.debug.init(options);

            RED.sidebar.addTab({
                id: "debug",
                label: this._("debug.sidebar.label"),
                name: this._("debug.sidebar.name"),
                content: uiComponents.content,
                toolbar: uiComponents.footer,
                enableOnEdit: true,
                pinned: true,
                iconClass: "fa fa-bug",
                action: "core:show-debug-tab"
            });
            RED.actions.add("core:show-debug-tab",function() { RED.sidebar.show('debug'); });

            var that = this;
            RED._debug = function(msg) {
                that.handleDebugMessage("", {
                    name:"debug",
                    msg:msg
                });
            };

            this.refreshMessageList = function() {
                RED.debug.refreshMessageList(RED.workspaces.active());
                if (subWindow) {
                    try {
                        subWindow.postMessage({event:"workspaceChange",activeWorkspace:RED.workspaces.active()},"*");
                    } catch(err) {
                        console.log(err);
                    }
                }
            };
            RED.events.on("workspace:change", this.refreshMessageList);

            this.handleDebugMessage = function(t,o) {
                // console.log("->",o.id,o.z,o._alias);
                //
                // sourceNode should be the top-level node - one that is on a flow.
                var sourceNode;
                var pathParts;
                if (o.path) {
                    // Path is a `/`-separated list of ids that identifies the
                    // complete parentage of the node that generated this message.
                    //    flow-id/subflow-A-instance/subflow-A-type/subflow-B-instance/subflow-B-type/node-id

                    // If it has one id, that is a top level flow
                    // each subsequent id is the instance id of a subflow node
                    //
                    pathParts = o.path.split("/");
                    if (pathParts.length === 1) {
                        // The source node is on a flow - so can use its id to find
                        sourceNode = RED.nodes.node(o.id);
                    } else if (pathParts.length > 1) {
                        // Highlight the subflow instance node.
                        sourceNode = RED.nodes.node(pathParts[1]);
                    }
                } else {
                    // This is probably redundant...
                    sourceNode = RED.nodes.node(o.id) || RED.nodes.node(o.z);
                }
                if (sourceNode) {
                    o._source = {
                        id:sourceNode.id,
                        z:sourceNode.z,
                        name:sourceNode.name,
                        type:sourceNode.type,
                        // _alias identifies the actual logging node. This is
                        // not necessarily the same as sourceNode, which will be
                        // the top-level subflow instance node.
                        // This means the node's name is displayed in the sidebar.
                        _alias:o._alias,
                        path: pathParts
                    };
                }
                RED.debug.handleDebugMessage(o);
                if (subWindow) {
                    try {
                        subWindow.postMessage({event:"message",msg:o},"*");
                    } catch(err) {
                        console.log(err);
                    }
                }
            };
            RED.comms.subscribe("debug",this.handleDebugMessage);

            this.clearMessageList = function() {
                RED.debug.clearMessageList(true);
                if (subWindow) {
                    try {
                        subWindow.postMessage({event:"projectChange"},"*");
                    } catch(err) {
                        console.log(err);
                    }
                }
            };
            RED.events.on("project:change", this.clearMessageList);
            RED.actions.add("core:clear-debug-messages", function() { RED.debug.clearMessageList(true) });

            RED.actions.add("core:activate-selected-debug-nodes", function() { setDebugNodeState(getSelectedDebugNodes(true), true); });
            RED.actions.add("core:activate-all-debug-nodes", function() { setDebugNodeState(getMatchingDebugNodes(true, true),true); });
            RED.actions.add("core:activate-all-flow-debug-nodes", function() { setDebugNodeState(getMatchingDebugNodes(true, false),true); });

            RED.actions.add("core:deactivate-selected-debug-nodes", function() { setDebugNodeState(getSelectedDebugNodes(false), false); });
            RED.actions.add("core:deactivate-all-debug-nodes", function() { setDebugNodeState(getMatchingDebugNodes(false, true),false); });
            RED.actions.add("core:deactivate-all-flow-debug-nodes", function() { setDebugNodeState(getMatchingDebugNodes(false, false),false); });

            function getSelectedDebugNodes(state) {
                var nodes = [];
                var selection = RED.view.selection();
                if (selection.nodes) {
                    selection.nodes.forEach(function(n) {
                        if (RED.nodes.subflow(n.z)) {
                            return;
                        }
                        if (n.type === 'debug' && n.active !== state) {
                            nodes.push(n);
                        } else if (n.type === 'group') {
                            nodes = nodes.concat( RED.group.getNodes(n,true).filter(function(n) {
                                return n.type === 'debug' && n.active !== state
                            }));
                        }
                    });
                }
                return nodes;

            }
            function getMatchingDebugNodes(state,globally) {
                var nodes = [];
                var filter = {type:"debug"};
                if (!globally) {
                    filter.z = RED.workspaces.active();
                }
                var candidateNodes = RED.nodes.filterNodes(filter);
                nodes = candidateNodes.filter(function(n) {
                    return n.active !== state && !RED.nodes.subflow(n.z)
                })
                return nodes;
            }

            function setDebugNodeState(nodes,state) {
                var historyEvents = [];
                if (nodes.length > 0) {
                    activateAjaxCall(nodes,false, function(resp, textStatus, xhr) {
                        nodes.forEach(function(n) {
                            historyEvents.push({
                                t: "edit",
                                node: n,
                                changed: n.changed,
                                changes: {
                                    active: n.active
                                }
                            });
                            n.active = state;
                            n.changed = true;
                            n.dirty = true;
                        })
                        RED.history.push({
                            t: "multi",
                            events: historyEvents,
                            dirty: RED.nodes.dirty(),
                            callback: function() {
                                activateAjaxCall(nodes,nodes[0].active);
                            }
                        });
                        RED.nodes.dirty(true);
                        RED.view.redraw();
                    });
                }
            }

            $("#red-ui-sidebar-debug-open").on("click", function(e) {
                e.preventDefault();
                subWindow = window.open(document.location.toString().replace(/[?#].*$/,"")+"debug/view/view.html"+document.location.search,"nodeREDDebugView","menubar=no,location=no,toolbar=no,chrome,height=500,width=600");
                subWindow.onload = function() {
                    subWindow.postMessage({event:"workspaceChange",activeWorkspace:RED.workspaces.active()},"*");
                };
            });
            RED.popover.tooltip($("#red-ui-sidebar-debug-open"),RED._('node-red:debug.sidebar.openWindow'));



            $(window).on('beforeunload',function() {
                if (subWindow) {
                    try {
                        subWindow.close();
                    } catch(err) {
                        console.log(err);
                    }
                }
            });

            this.handleWindowMessage = function(evt) {
                var msg = evt.data;
                if (msg.event === "mouseEnter") {
                    options.messageMouseEnter(msg.id);
                } else if (msg.event === "mouseLeave") {
                    options.messageMouseLeave(msg.id);
                } else if (msg.event === "mouseClick") {
                    options.messageSourceClick(msg.id,msg._alias,msg.path);
                } else if (msg.event === "clear") {
                    options.clear();
                }
            };
            window.addEventListener('message',this.handleWindowMessage);
        },
        onpaletteremove: function() {
            RED.comms.unsubscribe("debug",this.handleDebugMessage);
            RED.sidebar.removeTab("debug");
            RED.events.off("workspace:change", this.refreshMessageList);
            window.removeEventListener("message",this.handleWindowMessage);
            RED.actions.remove("core:show-debug-tab");
            RED.actions.remove("core:clear-debug-messages");
            delete RED._debug;
        },
        oneditprepare: function() {
            var autoType = {
                value: "auto",
                label: RED._("node-red:debug.autostatus"),
                hasValue: false
            };
            $("#node-input-typed-status").typedInput({
                default: "auto",
                types:[autoType, "msg", "jsonata"],
                typeField: $("#node-input-statusType")
            });
            var that = this;
            var none = {
                value: "none",
                label: RED._("node-red:debug.none"),
                hasValue: false
            };
            if (this.tosidebar === undefined) {
                this.tosidebar = true;
                $("#node-input-tosidebar").prop('checked', true);
            }
            if (this.statusVal === undefined) {
                this.statusVal = (this.complete === "false") ? "payload" : ((this.complete === "true") ? "payload" : this.complete+"");
                $("#node-input-typed-status").typedInput('value',this.statusVal || "");
            }
            if (this.statusType === undefined) {
                this.statusType = "auto";
                $("#node-input-typed-status").typedInput('type',this.statusType || "auto");
            }
            if (typeof this.console === "string") {
                this.console = (this.console == 'true');
                $("#node-input-console").prop('checked', this.console);
                $("#node-input-tosidebar").prop('checked', true);
            }
            var fullType = {
                value: "full",
                label: RED._("node-red:debug.msgobj"),
                hasValue: false
            };

            $("#node-input-typed-complete").typedInput({
                default: "msg",
                types:['msg', fullType, "jsonata"],
                typeField: $("#node-input-targetType")
            });
            if (this.targetType === "jsonata") {
                var property = this.complete || "";
                $("#node-input-typed-complete").typedInput('type','jsonata');
                $("#node-input-typed-complete").typedInput('value',property);
            } else if ((this.targetType === "full") || this.complete === "true" || this.complete === true) {
                // show complete message object
                $("#node-input-typed-complete").typedInput('type','full');
            } else {
                var property = (!this.complete||(this.complete === "false")) ? "payload" : this.complete+"";
                $("#node-input-typed-complete").typedInput('type','msg');
                $("#node-input-typed-complete").typedInput('value',property);
            }
            $("#node-input-typed-complete").on('change',function() {
                if ($("#node-input-typed-complete").typedInput('type') === 'msg' &&
                    $("#node-input-typed-complete").typedInput('value') === ''
                ) {
                    $("#node-input-typed-complete").typedInput('value','payload');
                }
            });

            $("#node-input-tostatus").on('change',function() {
                if ($(this).is(":checked")) {
                    if (!that.hasOwnProperty("statusVal") || that.statusVal === "") {
                        var type = $("#node-input-typed-complete").typedInput('type');
                        var comp = "payload";
                        if (type !== 'full') {
                            comp = $("#node-input-typed-complete").typedInput('value');
                        }
                        that.statusType = "auto";
                        that.statusVal = comp;
                    }
                    $("#node-input-typed-status").typedInput('type',that.statusType);
                    $("#node-input-typed-status").typedInput('value',that.statusVal);
                    $("#node-tostatus-line").show();
                }
                else {
                    $("#node-tostatus-line").hide();
                    that.statusType = "auto";
                    that.statusVal = "";
                    $("#node-input-typed-status").typedInput('type',that.statusType);
                    $("#node-input-typed-status").typedInput('value',that.statusVal);
                }
            });
        },
        oneditsave: function() {
            var type = $("#node-input-typed-complete").typedInput('type');
            if (type === 'full') {
                $("#node-input-complete").val("true");
            } else {
                $("#node-input-complete").val($("#node-input-typed-complete").typedInput('value'));
            }
            $("#node-input-statusVal").val($("#node-input-typed-status").typedInput('value'));
        }
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="debug">
    <p>Displays selected message properties in the debug sidebar tab and optionally the runtime log. By default it displays <code>msg.payload</code>, but can be configured to display any property, the full message or the result of a JSONata expression.</p>
    <h3>Details</h3>
    <p>The debug sidebar provides a structured view of the messages it is sent, making it easier to understand their structure.</p>
    <p>JavaScript objects and arrays can be collapsed and expanded as required. Buffer objects can be displayed as raw data or as a string if possible.</p>
    <p>Alongside each message, the debug sidebar includes information about the time the message was received, the node that sent it and the type of the message.
       Clicking on the source node id will reveal that node within the workspace.</p>
    <p>The button on the node can be used to enable or disable its output. It is recommended to disable or remove any Debug nodes that are not being used.</p>
    <p>The node can also be configured to send all messages to the runtime log, or to send short (32 characters) to the status text under the debug node.</p>
</script>

</div><div><!-- --- [red-module:node-red/complete] --- -->
<script type="text/html" data-template-name="complete">
    <div class="form-row node-input-target-row">
        <button id="node-input-complete-target-select" class="red-ui-button" data-i18n="common.label.selectNodes"></button>
    </div>
    <div class="form-row node-input-target-row node-input-target-list-row" style="position: relative; min-height: 100px">
        <div style="position: absolute; top: -30px; right: 0;"><input type="text" id="node-input-complete-target-filter"></div>
        <div id="node-input-complete-target-container-div"></div>
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>
<script type="text/javascript">
    RED.nodes.registerType('complete',{
        category: 'common',
        color:"#c0edc0",
        defaults: {
            name: {value:""},
            scope: {value:[], type:"*[]"},
            uncaught: {value:false}
        },
        inputs:0,
        outputs:1,
        icon: "alert.svg",
        label: function() {
            if (this.name) {
                return this.name;
            }
            return this._("complete.completeNodes",{number:this.scope.length});
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;
            var scope = node.scope || [];

            this._resize = function() {
                var rows = $("#dialog-form>div:not(.node-input-target-list-row)");
                var height = $("#dialog-form").height();
                for (var i=0;i<rows.length;i++) {
                    height -= $(rows[i]).outerHeight(true);
                }
                var editorRow = $("#dialog-form>div.node-input-target-list-row");
                editorRow.css("height",height+"px");
            };
            var search = $("#node-input-complete-target-filter").searchBox({
                style: "compact",
                delay: 300,
                change: function() {
                    var val = $(this).val().trim().toLowerCase();
                    if (val === "") {
                        dirList.treeList("filter", null);
                        search.searchBox("count","");
                    } else {
                        var count = dirList.treeList("filter", function(item) {
                            return item.label.toLowerCase().indexOf(val) > -1 || item.node.type.toLowerCase().indexOf(val) > -1
                        });
                        search.searchBox("count",count+" / "+candidateNodes.length);
                    }
                }
            });

            var dirList = $("#node-input-complete-target-container-div").css({width: "100%", height: "100%"})
                .treeList({multi:true}).on("treelistitemmouseover", function(e, item) {
                    item.node.highlighted = true;
                    item.node.dirty = true;
                    RED.view.redraw();
                }).on("treelistitemmouseout", function(e, item) {
                    item.node.highlighted = false;
                    item.node.dirty = true;
                    RED.view.redraw();
                })
            var candidateNodes = RED.nodes.filterNodes({z:node.z});
            var allChecked = true;
            var items = [];
            var nodeItemMap = {};

            candidateNodes.forEach(function(n) {
                if (n.id === node.id) {
                    return;
                }
                var isChecked = scope.indexOf(n.id) !== -1;

                allChecked = allChecked && isChecked;

                var nodeDef = RED.nodes.getType(n.type);
                var label;
                var sublabel;
                if (nodeDef) {
                    var l = nodeDef.label;
                    label = (typeof l === "function" ? l.call(n) : l)||"";
                    sublabel = n.type;
                    if (sublabel.indexOf("subflow:") === 0) {
                        var subflowId = sublabel.substring(8);
                        var subflow = RED.nodes.subflow(subflowId);
                        sublabel = "subflow : "+subflow.name;
                    }
                }
                if (!nodeDef || !label) {
                    label = n.type;
                }
                nodeItemMap[n.id] = {
                    node: n,
                    label: label,
                    sublabel: sublabel,
                    selected: isChecked,
                    checkbox: true
                };
                items.push(nodeItemMap[n.id]);
            });
            dirList.treeList('data',items);

            $("#node-input-complete-target-select").on("click", function(e) {
                e.preventDefault();
                var preselected = dirList.treeList('selected').map(function(n) {return n.node.id});
                RED.tray.hide();
                RED.view.selectNodes({
                    selected: preselected,
                    onselect: function(selection) {
                        RED.tray.show();
                        var newlySelected = {};
                        selection.forEach(function(n) {
                            newlySelected[n.id] = true;
                            if (nodeItemMap[n.id]) {
                                nodeItemMap[n.id].treeList.select(true);
                            }
                        })
                        preselected.forEach(function(id) {
                            if (!newlySelected[id]) {
                                nodeItemMap[id].treeList.select(false);
                            }
                        })
                    },
                    oncancel: function() {
                        RED.tray.show();
                    },
                    filter: function(n) {
                        return n.id !== node.id;
                    }
                });
            })

        },
        oneditsave: function() {
            this.scope = $("#node-input-complete-target-container-div").treeList('selected').map(function(i) { return i.node.id})
        },
        oneditresize: function(size) {
            this._resize();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="complete">
    <p>Trigger a flow when another node completes its handling of a message.</p>
    <h3>Details</h3>
    <p>If a node tells the runtime when it has finished handling a message,
        this node can be used to trigger a second flow.</p>
    <p>For example, this can be used alongside a node with no output port,
        such as the Email sending node, to continue the flow.</p>
    <p>This node must be configured to handle the event for selected nodes in the
        flow. Unlike the Catch node, it does not provide a 'handle all' mode automatically
        applies to all nodes in the flow.</p>
    <p>Not all nodes will trigger this event - it will depend on whether they
        have been implemented to support this feature as introduced in Node-RED 1.0.</p>
</script>

</div><div><!-- --- [red-module:node-red/catch] --- -->

<script type="text/html" data-template-name="catch">
    <div class="form-row">
        <label style="width: auto" for="node-input-scope" data-i18n="catch.label.source"></label>
        <select id="node-input-scope-select">
            <option value="all" data-i18n="catch.scope.all"></option>
            <option value="target" data-i18n="catch.scope.selected"></options>
        </select>
    </div>
    <div class="form-row node-input-uncaught-row">
        <input type="checkbox" id="node-input-uncaught" style="display: inline-block; width: auto; vertical-align: top; margin-left: 30px; margin-right: 5px;">
        <label for="node-input-uncaught" style="width: auto" data-i18n="catch.label.uncaught"></label>
    </div>
    <div class="form-row node-input-target-row">
        <button id="node-input-catch-target-select" class="red-ui-button" data-i18n="common.label.selectNodes"></button>
    </div>
    <div class="form-row node-input-target-row node-input-target-list-row" style="position: relative; min-height: 100px">
        <div style="position: absolute; top: -30px; right: 0;"><input type="text" id="node-input-catch-target-filter"></div>
        <div id="node-input-catch-target-container-div"></div>
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>
<script type="text/javascript">
    RED.nodes.registerType('catch',{
        category: 'common',
        color:"#e49191",
        defaults: {
            name: {value:""},
            scope: {value:null, type:"*[]"},
            uncaught: {value:false}
        },
        inputs:0,
        outputs:1,
        icon: "alert.svg",
        label: function() {
            if (this.name) {
                return this.name;
            }
            if (this.scope) {
                return this._("catch.catchNodes",{number:this.scope.length});
            }
            return this.uncaught?this._("catch.catchUncaught"):this._("catch.catch")
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;
            var scope = node.scope || [];

            this._resize = function() {
                var rows = $("#dialog-form>div:not(.node-input-target-list-row)");
                var height = $("#dialog-form").height();
                for (var i=0;i<rows.length;i++) {
                    height -= $(rows[i]).outerHeight(true);
                }
                var editorRow = $("#dialog-form>div.node-input-target-list-row");
                editorRow.css("height",height+"px");
            };
            var search = $("#node-input-catch-target-filter").searchBox({
                style: "compact",
                delay: 300,
                change: function() {
                    var val = $(this).val().trim().toLowerCase();
                    if (val === "") {
                        dirList.treeList("filter", null);
                        search.searchBox("count","");
                    } else {
                        var count = dirList.treeList("filter", function(item) {
                            return item.label.toLowerCase().indexOf(val) > -1 || item.node.type.toLowerCase().indexOf(val) > -1
                        });
                        search.searchBox("count",count+" / "+candidateNodes.length);
                    }
                }
            });
            var dirList = $("#node-input-catch-target-container-div").css({width: "100%", height: "100%"})
                .treeList({multi:true}).on("treelistitemmouseover", function(e, item) {
                    item.node.highlighted = true;
                    item.node.dirty = true;
                    RED.view.redraw();
                }).on("treelistitemmouseout", function(e, item) {
                    item.node.highlighted = false;
                    item.node.dirty = true;
                    RED.view.redraw();
                })
            var candidateNodes = RED.nodes.filterNodes({z:node.z});
            var allChecked = true;
            var items = [];
            var nodeItemMap = {};

            candidateNodes.forEach(function(n) {
                if (n.id === node.id) {
                    return;
                }
                var isChecked = scope.indexOf(n.id) !== -1;

                allChecked = allChecked && isChecked;

                var nodeDef = RED.nodes.getType(n.type);
                var label;
                var sublabel;
                if (nodeDef) {
                    var l = nodeDef.label;
                    label = (typeof l === "function" ? l.call(n) : l)||"";
                    sublabel = n.type;
                    if (sublabel.indexOf("subflow:") === 0) {
                        var subflowId = sublabel.substring(8);
                        var subflow = RED.nodes.subflow(subflowId);
                        sublabel = "subflow : "+subflow.name;
                    }
                }
                if (!nodeDef || !label) {
                    label = n.type;
                }
                nodeItemMap[n.id] = {
                    node: n,
                    label: label,
                    sublabel: sublabel,
                    selected: isChecked,
                    checkbox: true
                };
                items.push(nodeItemMap[n.id]);
            });
            dirList.treeList('data',items);

            $("#node-input-catch-target-select").on("click", function(e) {
                e.preventDefault();
                var preselected = dirList.treeList('selected').map(function(n) {return n.node.id});
                RED.tray.hide();
                RED.view.selectNodes({
                    selected: preselected,
                    onselect: function(selection) {
                        RED.tray.show();
                        var newlySelected = {};
                        selection.forEach(function(n) {
                            newlySelected[n.id] = true;
                            if (nodeItemMap[n.id]) {
                                nodeItemMap[n.id].treeList.select(true);
                            }
                        })
                        preselected.forEach(function(id) {
                            if (!newlySelected[id]) {
                                nodeItemMap[id].treeList.select(false);
                            }
                        })
                    },
                    oncancel: function() {
                        RED.tray.show();
                    },
                    filter: function(n) {
                        return n.id !== node.id;
                    }
                });
            })

            $("#node-input-scope-select").on("change", function(e) {
                var scope = $(this).val();
                if (scope === "target") {
                    $(".node-input-target-row").show();
                    $(".node-input-uncaught-row").hide();
                } else {
                    $(".node-input-target-row").hide();
                    $(".node-input-uncaught-row").show();
                }
                node._resize();
            });
            if (this.scope === null) {
                $("#node-input-scope-select").val("all");
            } else {
                $("#node-input-scope-select").val("target");
            }
            $("#node-input-scope-select").trigger("change");
        },
        oneditsave: function() {
            var scope = $("#node-input-scope-select").val();
            if (scope === 'all') {
                this.scope = null;
            } else {
                $("#node-input-uncaught").prop("checked",false);
                this.scope = $("#node-input-catch-target-container-div").treeList('selected').map(function(i) { return i.node.id})
            }
        },
        oneditresize: function(size) {
            this._resize();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="catch">
    <p>Catch errors thrown by nodes on the same tab.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>error.message <span class="property-type">string</span></dt>
        <dd>the error message.</dd>
        <dt>error.source.id <span class="property-type">string</span></dt>
        <dd>the id of the node that threw the error.</dd>
        <dt>error.source.type <span class="property-type">string</span></dt>
        <dd>the type of the node that threw the error.</dd>
        <dt>error.source.name <span class="property-type">string</span></dt>
        <dd>the name, if set, of the node that threw the error.</dd>
    </dl>
    <h3>Details</h3>
    <p>If a node throws an error whilst handling a message, the flow will typically
       halt. This node can be used to catch those errors and handle them with a
       dedicated flow.</p>
    <p>By default, the node will catch errors thrown by any node on the same tab. Alternatively
    it can be targetted at specific nodes, or configured to only catch errors that
    have not already been caught by a 'targeted' catch node.</p>
    <p>When an error is thrown, all matching catch nodes will receive the message.</p>
    <p>If an error is thrown within a subflow, the error will get handled by any
       catch nodes within the subflow. If none exists, the error will be propagated
       up to the tab the subflow instance is on.</p>
   <p>If the message already has a <code>error</code> property, it is copied to <code>_error</code>.</p>
</script>

</div><div><!-- --- [red-module:node-red/status] --- -->

<script type="text/html" data-template-name="status">
    <div class="form-row">
        <label style="width: auto" for="node-input-scope" data-i18n="status.label.source"></label>
        <select id="node-input-scope-select">
            <option value="all" data-i18n="status.scope.all"></option>
            <option value="target" data-i18n="status.scope.selected"></options>
        </select>
    </div>
    <div class="form-row node-input-target-row">
        <button id="node-input-status-target-select" class="red-ui-button" data-i18n="common.label.selectNodes"></button>
    </div>
    <div class="form-row node-input-target-row node-input-target-list-row" style="position: relative; min-height: 100px">
        <div style="position: absolute; top: -30px; right: 0;"><input type="text" id="node-input-status-target-filter"></div>
        <div id="node-input-status-target-container-div"></div>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('status',{
        category: 'common',
        color:"#94c1d0",
        defaults: {
            name: {value:""},
            scope: {value:null, type:"*[]"}
        },
        inputs:0,
        outputs:1,
        icon: "status.svg",
        label: function() {
            return this.name||(this.scope?this._("status.statusNodes",{number:this.scope.length}):this._("status.status"));
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;
            var scope = node.scope || [];
            this._resize = function() {
                var rows = $("#dialog-form>div:not(.node-input-target-list-row)");
                var height = $("#dialog-form").height();
                for (var i=0;i<rows.length;i++) {
                    height -= $(rows[i]).outerHeight(true);
                }
                var editorRow = $("#dialog-form>div.node-input-target-list-row");
                editorRow.css("height",height+"px");
            };
            var search = $("#node-input-status-target-filter").searchBox({
                style: "compact",
                delay: 300,
                change: function() {
                    var val = $(this).val().trim().toLowerCase();
                    if (val === "") {
                        dirList.treeList("filter", null);
                        search.searchBox("count","");
                    } else {
                        var count = dirList.treeList("filter", function(item) {
                            return item.label.toLowerCase().indexOf(val) > -1 || item.node.type.toLowerCase().indexOf(val) > -1
                        });
                        search.searchBox("count",count+" / "+candidateNodes.length);
                    }
                }
            });

            var dirList = $("#node-input-status-target-container-div").css({width: "100%", height: "100%"})
                .treeList({multi:true}).on("treelistitemmouseover", function(e, item) {
                    item.node.highlighted = true;
                    item.node.dirty = true;
                    RED.view.redraw();
                }).on("treelistitemmouseout", function(e, item) {
                    item.node.highlighted = false;
                    item.node.dirty = true;
                    RED.view.redraw();
                })
            var candidateNodes = RED.nodes.filterNodes({z:node.z});
            var allChecked = true;
            var items = [];
            var nodeItemMap = {};

            candidateNodes.forEach(function(n) {
                if (n.id === node.id) {
                    return;
                }
                var isChecked = scope.indexOf(n.id) !== -1;

                allChecked = allChecked && isChecked;

                var nodeDef = RED.nodes.getType(n.type);
                var label;
                var sublabel;
                if (nodeDef) {
                    var l = nodeDef.label;
                    label = (typeof l === "function" ? l.call(n) : l)||"";
                    sublabel = n.type;
                    if (sublabel.indexOf("subflow:") === 0) {
                        var subflowId = sublabel.substring(8);
                        var subflow = RED.nodes.subflow(subflowId);
                        sublabel = "subflow : "+subflow.name;
                    }
                }
                if (!nodeDef || !label) {
                    label = n.type;
                }
                nodeItemMap[n.id] = {
                    node: n,
                    label: label,
                    sublabel: sublabel,
                    selected: isChecked,
                    checkbox: true
                };
                items.push(nodeItemMap[n.id]);
            });
            dirList.treeList('data',items);

            $("#node-input-status-target-select").on("click", function(e) {
                e.preventDefault();
                var preselected = dirList.treeList('selected').map(function(n) {return n.node.id});
                RED.tray.hide();
                RED.view.selectNodes({
                    selected: preselected,
                    onselect: function(selection) {
                        RED.tray.show();
                        var newlySelected = {};
                        selection.forEach(function(n) {
                            newlySelected[n.id] = true;
                            if (nodeItemMap[n.id]) {
                                nodeItemMap[n.id].treeList.select(true);
                            }
                        })
                        preselected.forEach(function(id) {
                            if (!newlySelected[id]) {
                                nodeItemMap[id].treeList.select(false);
                            }
                        })
                    },
                    oncancel: function() {
                        RED.tray.show();
                    },
                    filter: function(n) {
                        return n.id !== node.id;
                    }
                });
            })

            $("#node-input-scope-select").on("change", function(e) {
                var scope = $(this).val();
                if (scope === "target") {
                    $(".node-input-target-row").show();
                } else {
                    $(".node-input-target-row").hide();
                }
                node._resize();
            });
            if (this.scope === null) {
                $("#node-input-scope-select").val("all");
            } else {
                $("#node-input-scope-select").val("target");
            }
            $("#node-input-scope-select").trigger("change");
        },
        oneditsave: function() {
            var scope = $("#node-input-scope-select").val();
            if (scope === 'all') {
                this.scope = null;
            } else {
                this.scope = $("#node-input-status-target-container-div").treeList('selected').map(function(i) { return i.node.id})
            }
        },
        oneditresize: function(size) {
            this._resize();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="status">
    <p>Report status messages from other nodes on the same tab.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>status.text <span class="property-type">string</span></dt>
        <dd>the status text.</dd>
        <dt>status.source.type <span class="property-type">string</span></dt>
        <dd>the type of the node that reported status.</dd>
        <dt>status.source.id <span class="property-type">string</span></dt>
        <dd>the id of the node that reported status.</dd>
        <dt>status.source.name <span class="property-type">string</span></dt>
        <dd>the name, if set, of the node that reported status.</dd>
    </dl>
    <h3>Details</h3>
   <p>This node does not produce a <code>payload</code>.</p>
   <p>By default the node reports status for all nodes on the same workspace tab.
   It can be configured to selectively report status for individual nodes.</p>
</script>

</div><div><!-- --- [red-module:node-red/link] --- -->

<script type="text/html" data-template-name="link in">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div style="position:relative; height: 30px; text-align: right;"><div style="display:inline-block"><input type="text" id="node-input-link-target-filter"></div></div>
    <div class="form-row node-input-link-row"></div>
</script>
<script type="text/html" data-template-name="link out">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div style="position:relative; height: 30px; text-align: right;"><div style="display:inline-block"><input type="text" id="node-input-link-target-filter"></div></div>
    <div class="form-row node-input-link-row"></div>
</script>

<script type="text/javascript">
(function() {

    var treeList;

    function onEditPrepare(node,targetType) {
        if (!node.links) {
            node.links = [];
        }
        node.oldLinks = [];

        var activeSubflow = RED.nodes.subflow(node.z);

        treeList = $("<div>")
            .css({width: "100%", height: "100%"})
            .appendTo(".node-input-link-row")
            .treeList({})
            .on('treelistitemmouseover',function(e,item) {
                if (item.node) {
                    item.node.highlighted = true;
                    item.node.dirty = true;
                    RED.view.redraw();
                }
            })
            .on('treelistitemmouseout',function(e,item) {
                if (item.node) {
                    item.node.highlighted = false;
                    item.node.dirty = true;
                    RED.view.redraw();
                }
            });
        var candidateNodes = RED.nodes.filterNodes({type:targetType});

        var search = $("#node-input-link-target-filter").searchBox({
            style: "compact",
            delay: 300,
            change: function() {
                var val = $(this).val().trim().toLowerCase();
                if (val === "") {
                    treeList.treeList("filter", null);
                    search.searchBox("count","");
                } else {
                    var count = treeList.treeList("filter", function(item) {
                        return item.label.toLowerCase().indexOf(val) > -1 || (item.node && item.node.type.toLowerCase().indexOf(val) > -1)
                    });
                    search.searchBox("count",count+" / "+candidateNodes.length);
                }
            }
        });


        var flows = [];
        var flowMap = {};

        if (activeSubflow) {
            flowMap[activeSubflow.id] = {
                id: activeSubflow.id,
                class: 'red-ui-palette-header',
                label:  "Subflow : "+(activeSubflow.name || activeSubflow.id),
                expanded: true,
                children: []
            };
            flows.push(flowMap[activeSubflow.id])
        } else {
            RED.nodes.eachWorkspace(function(ws) {
                flowMap[ws.id] = {
                    id: ws.id,
                    class: 'red-ui-palette-header',
                    label: (ws.label || ws.id)+(node.z===ws.id ? " *":""),
                    expanded: true,
                    children: []
                }
                flows.push(flowMap[ws.id])
            })
        }

        candidateNodes.forEach(function(n) {
            if (flowMap[n.z]) {
                var isChecked = false;
                isChecked = (node.links.indexOf(n.id) !== -1) || (n.links||[]).indexOf(node.id) !== -1;
                if (isChecked) {
                    node.oldLinks.push(n.id);
                }
                flowMap[n.z].children.push({
                    id: n.id,
                    node: n,
                    label: n.name||n.id,
                    selected: isChecked,
                    checkbox: true
                })
            }
        });
        flows = flows.filter(function(f) { return f.children.length > 0 })
        treeList.treeList('data',flows);
        setTimeout(function() {
            treeList.treeList('show',node.z);
        },100);
    }

    function resizeNodeList() {
        var rows = $("#dialog-form>div:not(.node-input-link-row)");
        var height = $("#dialog-form").height();
        for (var i=0;i<rows.length;i++) {
            height -= $(rows[i]).outerHeight(true);
        }
        var editorRow = $("#dialog-form>div.node-input-link-row");
        height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
        $(".node-input-link-row").css("height",height+"px");
    }

    function onEditSave(node) {
        var flows = treeList.treeList('data');
        node.links = [];
        flows.forEach(function(f) {
            f.children.forEach(function(n) {
                if (n.selected) {
                    node.links.push(n.id);
                }
            })
        })
        node.oldLinks.sort();
        node.links.sort();
        var nodeMap = {};
        var length = Math.max(node.oldLinks.length,node.links.length);
        for (var i=0;i<length;i++) {
            if (i<node.oldLinks.length) {
                nodeMap[node.oldLinks[i]] = nodeMap[node.oldLinks[i]]||{};
                nodeMap[node.oldLinks[i]].old = true;
            }
            if (i<node.links.length) {
                nodeMap[node.links[i]] = nodeMap[node.links[i]]||{};
                nodeMap[node.links[i]].new = true;
            }
        }
        var n;
        for (var id in nodeMap) {
            if (nodeMap.hasOwnProperty(id)) {
                n = RED.nodes.node(id);
                if (n) {
                    if (nodeMap[id].old && !nodeMap[id].new) {
                        // Removed id
                        i = n.links.indexOf(node.id);
                        if (i > -1) {
                            n.links.splice(i,1);
                        }
                    } else if (!nodeMap[id].old && nodeMap[id].new) {
                        // Added id
                        i = n.links.indexOf(id);
                        if (i === -1) {
                            n.links.push(node.id);
                        }
                    }
                }
            }
        }
    }

    function onAdd() {
        for (var i=0;i<this.links.length;i++) {
            var n = RED.nodes.node(this.links[i]);
            if (n && n.links.indexOf(this.id) === -1) {
                n.links.push(this.id);
            }
        }
    }

    RED.nodes.registerType('link in',{
        category: 'common',
        color:"#ddd",//"#87D8CF",
        defaults: {
            name: {value:""},
            links: { value: [], type:"link out[]" }
        },
        inputs:0,
        outputs:1,
        icon: "link-out.svg",
        outputLabels: function(i) {
            return this.name||this._("link.linkIn");
        },
        label: function() {
            return this.name||this._("link.linkIn");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            onEditPrepare(this,"link out");
        },
        oneditsave: function() {
            onEditSave(this);
        },
        onadd: onAdd,
        oneditresize: resizeNodeList
    });

    RED.nodes.registerType('link out',{
        category: 'common',
        color:"#ddd",//"#87D8CF",
        defaults: {
            name: {value:""},
            links: { value: [], type:"link in[]"}
        },
        align:"right",
        inputs:1,
        outputs:0,
        icon: "link-out.svg",
        inputLabels: function(i) {
            return this.name||this._("link.linkOut");
        },
        label: function() {
            return this.name||this._("link.linkOut");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            onEditPrepare(this,"link in");
        },
        oneditsave: function() {
            onEditSave(this);
        },
        onadd: onAdd,
        oneditresize: resizeNodeList
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="link in">
    <p>Create virtual wires between flows.</p>
    <h3>Details</h3>
    <p>The node can be connected to any <code>link out</code> node that exists on any tab.
       Once connected, they behave as if they were wired together.</p>
    <p>The wires between link nodes are only displayed when a link node is selected.
       If there are any wires to other tabs, a virtual node is shown that can be clicked
       on to jump to the appropriate tab.</p>
    <p><b>Note: </b>Links cannot be created going into, or out of, a subflow.</p>
</script>

<script type="text/html" data-help-name="link out">
    <p>Create virtual wires between flows.</p>
    <h3>Details</h3>
    <p>The node can be connected to any <code>link in</code> node that exists on any tab.
       Once connected, they behave as if they were wired together.</p>
    <p>The wires between link nodes are only displayed when a link node is selected.
       If there are any wires to other tabs, a virtual node is show that can be clicked
       on to jump to the appropriate tab.</p>
    <p><b>Note: </b>Links cannot be created going into, or out of, a subflow.</p>
</script>

</div><div><!-- --- [red-module:node-red/comment] --- -->

<script type="text/html" data-template-name="comment">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row node-text-editor-row">
        <input type="hidden" id="node-input-info" autofocus="autofocus">
        <div style="height: 250px; min-height:150px;" class="node-text-editor" id="node-input-info-editor"></div>
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('comment',{
        category: 'common',
        color:"#ffffff",
        defaults: {
            name: {value:""},
            info: {value:""}
        },
        inputs:0,
        outputs:0,
        icon: "comment.svg",
        label: function() {
            return this.name||this._("comment.comment");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        info: function() {
            return this.name?"# "+this.name+"\n\n---\n\n":"";
        },
        oneditprepare: function() {
            var that = this;
            this.editor = RED.editor.createEditor({
                id: 'node-input-info-editor',
                mode: 'ace/mode/markdown',
                value: $("#node-input-info").val()
            });
            this.editor.focus();
        },
        oneditsave: function() {
            $("#node-input-info").val(this.editor.getValue());
            this.editor.destroy();
            delete this.editor;
        },
        oneditcancel: function() {
            this.editor.destroy();
            delete this.editor;
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-text-editor-row)");
            var height = $("#dialog-form").height();
            for (var i=0; i<rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-text-editor-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
            $(".node-text-editor").css("height",height+"px");
            this.editor.resize();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="comment">
    <p>A node you can use to add comments to your flows.</p>
    <h3>Details</h3>
    <p>The edit panel will accept Markdown syntax. The text will be rendered into
    this information side panel.</p>
</script>

</div><div><!-- --- [red-module:node-red/unknown] --- -->

<script type="text/html" data-template-name="unknown">
    <div class="form-tips"><span data-i18n="[html]unknown.tip"></span></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('unknown',{
        category: 'unknown',
        color:"#fff0f0",
        defaults: {
            name: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "",
        label: function() {
            return "("+this.name+")"||this._("unknown.label.unknown");
        },
        labelStyle: function() {
            return "node_label_unknown";
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="unknown">
    <p>This node is a type unknown to your installation of Node-RED.</p>
    <h3>Details</h3>
    <p><i>If you deploy with the node in this state, its configuration will be preserved, but
    the flow will not start until the missing type is installed.</i></p>
    <p>Use the <code>Menu - Manage Palette</code> option
    to search for and install nodes, or <b>npm install &lt;module&gt;</b> to
    install, any missing modules and restart Node-RED and reimport the nodes.</p>
    <p>It is possible this node type is already installed, but is missing a dependency. Check the Node-RED start-up
    log for any error messages associated with the missing node type.</p>
    <p>Otherwise, you should contact the author of the flow to obtain a copy of the missing node type.</p>
</script>

</div><div><!-- --- [red-module:node-red/function] --- -->
<script type="text/html" data-template-name="function">
    <style>
        .func-tabs-row {
            margin-bottom: 0;
        }
        #node-input-libs-container-row .red-ui-editableList-container {
            padding: 0px;
        }
        #node-input-libs-container-row .red-ui-editableList-container li {
            padding:5px;
        }
        #node-input-libs-container-row .red-ui-editableList-item-remove {
            right: 5px;
        }
        .node-libs-entry {
            display: flex;
        }
        .node-libs-entry .node-input-libs-var, .node-libs-entry .red-ui-typedInput-container {
            flex-grow: 1;
        }
        .node-libs-entry > code,.node-libs-entry > span  {
            line-height: 30px;
        }
        .node-libs-entry > input[type=text] {
            border-radius: 0;
            border-left: none;
            border-top: none;
            border-right: none;
            padding-top: 2px;
            padding-bottom: 2px;
            margin-top: 4px;
            margin-bottom: 2px;
            height: 26px;
        }

        .node-libs-entry > span > i {
            display: none;
        }
        .node-libs-entry > span.input-error > i {
            display: inline;
        }

    </style>
    <input type="hidden" id="node-input-func">
    <input type="hidden" id="node-input-noerr">
    <input type="hidden" id="node-input-finalize">
    <input type="hidden" id="node-input-initialize">

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <div style="display: inline-block; width: calc(100% - 105px)"><input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name"></div>
    </div>


    <div class="form-row func-tabs-row">
        <ul style="min-width: 600px; margin-bottom: 20px;" id="func-tabs"></ul>
    </div>
    <div id="func-tabs-content" style="min-height: calc(100% - 95px);">

        <div id="func-tab-config" style="display:none">
            <div class="form-row">
                <label for="node-input-outputs"><i class="fa fa-random"></i> <span data-i18n="function.label.outputs"></span></label>
                <input id="node-input-outputs" style="width: 60px;" value="1">
            </div>

            <div class="form-row node-input-libs-row hide" style="margin-bottom: 0px;">
                <label><i class="fa fa-cubes"></i> <span data-i18n="function.label.modules"></span></label>
            </div>
            <div class="form-row node-input-libs-row hide" id="node-input-libs-container-row">
                <ol id="node-input-libs-container"></ol>
            </div>
        </div>

        <div id="func-tab-init" style="display:none">
            <div class="form-row node-text-editor-row" style="position:relative">
                <div style="height: 250px; min-height:150px;" class="node-text-editor" id="node-input-init-editor" ></div>
                <div style="position: absolute; right:0; bottom: calc(100% - 20px); z-Index: 10;"><button id="node-init-expand-js" class="red-ui-button red-ui-button-small"><i class="fa fa-expand"></i></button></div>
            </div>
        </div>

        <div id="func-tab-body" style="display:none">
            <div class="form-row node-text-editor-row" style="position:relative">
                <div style="height: 220px; min-height:150px;" class="node-text-editor" id="node-input-func-editor" ></div>
                <div style="position: absolute; right:0; bottom: calc(100% - 20px); z-Index: 10;"><button id="node-function-expand-js" class="red-ui-button red-ui-button-small"><i class="fa fa-expand"></i></button></div>
            </div>
        </div>

        <div id="func-tab-finalize" style="display:none">
            <div class="form-row node-text-editor-row" style="position:relative">
                <div style="height: 250px; min-height:150px;" class="node-text-editor" id="node-input-finalize-editor" ></div>
                <div style="position: absolute; right:0; bottom: calc(100% - 20px); z-Index: 10;"><button id="node-finalize-expand-js" class="red-ui-button red-ui-button-small"><i class="fa fa-expand"></i></button></div>
            </div>
        </div>

    </div>
</script>

<script type="text/javascript">

(function() {

    var invalidModuleVNames = [
        'console',
        'util',
        'Buffer',
        'Date',
        'RED',
        'node',
        '__node__',
        'context',
        'flow',
        'global',
        'env',
        'setTimeout',
        'clearTimeout',
        'setInterval',
        'clearInterval',
        'promisify'
    ]

    var knownFunctionNodes = {};
    RED.events.on("nodes:add", function(n) {
        if (n.type === "function") {
            knownFunctionNodes[n.id] = n;
        }
    })
    RED.events.on("nodes:remove", function(n) {
        if (n.type === "function") {
            delete knownFunctionNodes[n.id];
        }
    })

    var missingModules = [];
    var missingModuleReasons = {};
    RED.events.on("runtime-state", function(event) {
        if (event.error === "missing-modules") {
            missingModules = event.modules.map(function(m) { missingModuleReasons[m.module] = m.error; return m.module });
            for (var id in knownFunctionNodes) {
                if (knownFunctionNodes.hasOwnProperty(id) && knownFunctionNodes[id].libs && knownFunctionNodes[id].libs.length > 0) {
                    RED.editor.validateNode(knownFunctionNodes[id])
                }
            }
        } else if (!event.text) {
            missingModuleReasons = {};
            missingModules = [];
            for (var id in knownFunctionNodes) {
                if (knownFunctionNodes.hasOwnProperty(id) && knownFunctionNodes[id].libs && knownFunctionNodes[id].libs.length > 0) {
                    RED.editor.validateNode(knownFunctionNodes[id])
                }
            }
        }
        RED.view.redraw();
    });

    var installAllowList = ['*'];
    var installDenyList = [];

    var modulesEnabled = true;
    if (RED.settings.get('externalModules.modules.allowInstall', true) === false) {
        modulesEnabled = false;
    }
    var settingsAllowList = RED.settings.get("externalModules.modules.allowList")
    var settingsDenyList = RED.settings.get("externalModules.modules.denyList")
    if (settingsAllowList || settingsDenyList) {
        installAllowList = settingsAllowList;
        installDenyList = settingsDenyList
    }
    installAllowList = RED.utils.parseModuleList(installAllowList);
    installDenyList = RED.utils.parseModuleList(installDenyList);


    // object that maps from library name to its descriptor
    var allLibs = [];

    function moduleName(module) {
        var match = /^([^@]+)@(.+)/.exec(module);
        if (match) {
            return [match[1], match[2]];
        }
        return [module, undefined];
    }

    function getAllUsedModules() {
        var moduleSet = new Set();
        for (var id in knownFunctionNodes) {
            if (knownFunctionNodes.hasOwnProperty(id)) {
                if (knownFunctionNodes[id].libs) {
                    for (var i=0, l=knownFunctionNodes[id].libs.length; i<l; i++) {
                        if (RED.utils.checkModuleAllowed(knownFunctionNodes[id].libs[i].module,null,installAllowList,installDenyList)) {
                            moduleSet.add(knownFunctionNodes[id].libs[i].module);
                        }
                    }
                }
            }
        }
        var modules = Array.from(moduleSet);
        modules.sort();
        return modules;
    }

    function prepareLibraryConfig(node) {
        $(".node-input-libs-row").show();
        var usedModules = getAllUsedModules();
        var typedModules = usedModules.map(function(l) {
            return {icon:"fa fa-cube", value:l,label:l,hasValue:false}
        })
        typedModules.push({
            value:"_custom_", label:RED._("editor:subflow.licenseOther"), icon:"red/images/typedInput/az.svg"
        })

        var libList = $("#node-input-libs-container").css('min-height','100px').css('min-width','450px').editableList({
            addItem: function(container,i,opt) {
                var parent = container.parent();
                var row0 = $("<div/>").addClass("node-libs-entry").appendTo(container);
                var fieldWidth = "260px";
                $('<code>const </code>').appendTo(row0);
                var fvar = $("<input/>", {
                    class: "node-input-libs-var red-ui-font-code",
                    placeholder: RED._("node-red:function.require.var"),
                    type: "text"
                }).css({
                    width: "120px",
                    "margin-left": "5px"
                }).appendTo(row0).val(opt.var);
                var vnameWarning = $('<span style="display:inline-block; width: 16px;"><i class="fa fa-warning"></i></span>').appendTo(row0);
                RED.popover.tooltip(vnameWarning.find("i"),function() {
                    var val = fvar.val();
                    if (invalidModuleVNames.indexOf(val) !== -1) {
                        return RED._("node-red:function.error.moduleNameReserved",{name:val})
                    } else {
                        return RED._("node-red:function.error.moduleNameError",{name:val})
                    }
                })

                $('<code> = require(</code>').appendTo(row0);
                var fmodule = $("<input/>", {
                    class: "node-input-libs-val",
                    placeholder: RED._("node-red:function.require.module"),
                    type: "text"
                }).css({
                    width: "180px",
                }).appendTo(row0).typedInput({
                    types: typedModules,
                    default: usedModules.indexOf(opt.module) > -1 ? opt.module : "_custom_"
                });
                if (usedModules.indexOf(opt.module) === -1) {
                    fmodule.typedInput('value', opt.module);
                }

                $('<code>)</code>').appendTo(row0);

                var moduleWarning = $('<span style="display:inline-block; width: 16px;"><i class="fa fa-warning"></i></span>').appendTo(row0);
                RED.popover.tooltip(moduleWarning.find("i"),function() {
                    var val = fmodule.typedInput("type");
                    if (val === "_custom_") {
                        val = fmodule.val();
                    }
                    var errors = [];

                    if (!RED.utils.checkModuleAllowed(val,null,installAllowList,installDenyList)) {
                        return RED._("node-red:function.error.moduleNotAllowed",{module:val});
                    } else {
                        return RED._("node-red:function.error.moduleLoadError",{module:val,error:missingModuleReasons[val]});
                    }
                })

                fvar.on("change keyup paste", function (e) {
                    var v = $(this).val().trim();
                    if (v === "" || / /.test(v) || invalidModuleVNames.indexOf(v) !== -1) {
                        fvar.addClass("input-error");
                        vnameWarning.addClass("input-error");
                    } else {
                        fvar.removeClass("input-error");
                        vnameWarning.removeClass("input-error");
                    }
                });

                fmodule.on("change keyup paste", function (e) {
                    var val = $(this).typedInput("type");
                    if (val === "_custom_") {
                        val = $(this).val();
                    }
                    var varName = val.trim().replace(/^@/,"").replace(/@.*$/,"").replace(/[-_/]./g, function(v) { return v[1].toUpperCase() });
                    fvar.val(varName);
                    fvar.trigger("change");

                    if (RED.utils.checkModuleAllowed(val,null,installAllowList,installDenyList) && (missingModules.indexOf(val) === -1)) {
                        fmodule.removeClass("input-error");
                        moduleWarning.removeClass("input-error");
                    } else {
                        fmodule.addClass("input-error");
                        moduleWarning.addClass("input-error");
                    }
                });
                if (RED.utils.checkModuleAllowed(opt.module,null,installAllowList,installDenyList) && (missingModules.indexOf(opt.module) === -1)) {
                    fmodule.removeClass("input-error");
                    moduleWarning.removeClass("input-error");
                } else {
                    fmodule.addClass("input-error");
                    moduleWarning.addClass("input-error");
                }
                if (opt.var) {
                    fvar.trigger("change");
                }
            },
            removable: true
        });

        var libs = node.libs || [];
        for (var i=0,l=libs.length;i<l; i++) {
            libList.editableList('addItem',libs[i])
        }

    }

    RED.nodes.registerType('function',{
        color:"#fdd0a2",
        category: 'function',
        defaults: {
            name: {value:""},
            func: {value:"\nreturn msg;"},
            outputs: {value:1},
            noerr: {value:0,required:true,validate:function(v) { return !v; }},
            initialize: {value:""},
            finalize: {value:""},
            libs: {value: [], validate: function(v) {
                if (!v) { return true; }
                for (var i=0,l=v.length;i<l;i++) {
                    var m = v[i];
                    if (!RED.utils.checkModuleAllowed(m.module,null,installAllowList,installDenyList)) {
                        return false
                    }
                    if (m.var === "" || / /.test(m.var)) {
                        return false;
                    }
                    if (missingModules.indexOf(m.module) > -1) {
                        return false;
                    }
                    if (invalidModuleVNames.indexOf(m.var) !== -1){
                        return false;
                    }
                }
                return true;
            }}
        },
        inputs:1,
        outputs:1,
        icon: "function.svg",
        label: function() {
            return this.name||this._("function.function");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var that = this;

            var tabs = RED.tabs.create({
                id: "func-tabs",
                onchange: function(tab) {
                    $("#func-tabs-content").children().hide();
                    $("#" + tab.id).show();
                }
            });
            tabs.addTab({
                id: "func-tab-config",
                iconClass: "fa fa-cog",
                label: that._("function.label.setup")
            });

            tabs.addTab({
                id: "func-tab-init",
                label: that._("function.label.initialize")
            });
            tabs.addTab({
                id: "func-tab-body",
                label: that._("function.label.function")
            });
            tabs.addTab({
                id: "func-tab-finalize",
                label: that._("function.label.finalize")
            });

            tabs.activateTab("func-tab-body");

            $( "#node-input-outputs" ).spinner({
                min:0,
                change: function(event, ui) {
                    var value = this.value;
                    if (!value.match(/^\d+$/)) { value = 1;  }
                    else if (value < this.min) { value = this.min; }
                    if (value !== this.value) { $(this).spinner("value", value); }
                }
            });

            var buildEditor = function(id, value, defaultValue) {
                var editor = RED.editor.createEditor({
                    id: id,
                    mode: 'ace/mode/nrjavascript',
                    value: value || defaultValue || "",
                    globals: {
                        msg:true,
                        context:true,
                        RED: true,
                        util: true,
                        flow: true,
                        global: true,
                        console: true,
                        Buffer: true,
                        setTimeout: true,
                        clearTimeout: true,
                        setInterval: true,
                        clearInterval: true
                    }
                });
                if (defaultValue && value === "") {
                    editor.moveCursorTo(defaultValue.split("\n").length - 1, 0);
                }
                return editor;
            }
            this.initEditor = buildEditor('node-input-init-editor',$("#node-input-initialize").val(),RED._("node-red:function.text.initialize"))
            this.editor = buildEditor('node-input-func-editor',$("#node-input-func").val())
            this.finalizeEditor = buildEditor('node-input-finalize-editor',$("#node-input-finalize").val(),RED._("node-red:function.text.finalize"))

            RED.library.create({
                url:"functions", // where to get the data from
                type:"function", // the type of object the library is for
                editor:this.editor, // the field name the main text body goes to
                mode:"ace/mode/nrjavascript",
                fields:[
                    'name', 'outputs',
                    {
                        name: 'initialize',
                        get: function() {
                            return that.initEditor.getValue();
                        },
                        set: function(v) {
                            that.initEditor.setValue(v||RED._("node-red:function.text.initialize"), -1);
                        }
                    },
                    {
                        name: 'finalize',
                        get: function() {
                            return that.finalizeEditor.getValue();
                        },
                        set: function(v) {
                            that.finalizeEditor.setValue(v||RED._("node-red:function.text.finalize"), -1);
                        }
                    },
                    {
                        name: 'info',
                        get: function() {
                            return that.infoEditor.getValue();
                        },
                        set: function(v) {
                            that.infoEditor.setValue(v||"", -1);
                        }
                    }
                ],
                ext:"js"
            });
            this.editor.focus();


            var expandButtonClickHandler = function(editor) {
                return function(e) {
                    e.preventDefault();
                    var value = editor.getValue();
                    RED.editor.editJavaScript({
                        value: value,
                        width: "Infinity",
                        cursor: editor.getCursorPosition(),
                        mode: "ace/mode/nrjavascript",
                        complete: function(v,cursor) {
                            editor.setValue(v, -1);
                            editor.gotoLine(cursor.row+1,cursor.column,false);
                            setTimeout(function() {
                                editor.focus();
                            },300);
                        }
                    })
                }
            }
            $("#node-init-expand-js").on("click", expandButtonClickHandler(this.initEditor));
            $("#node-function-expand-js").on("click", expandButtonClickHandler(this.editor));
            $("#node-finalize-expand-js").on("click", expandButtonClickHandler(this.finalizeEditor));

            RED.popover.tooltip($("#node-init-expand-js"), RED._("node-red:common.label.expand"));
            RED.popover.tooltip($("#node-function-expand-js"), RED._("node-red:common.label.expand"));
            RED.popover.tooltip($("#node-finalize-expand-js"), RED._("node-red:common.label.expand"));

            if (RED.settings.functionExternalModules !== false) {
                prepareLibraryConfig(that);
            }
        },
        oneditsave: function() {
            var node = this;
            var noerr = 0;
            $("#node-input-noerr").val(0);

            var disposeEditor = function(editorName,targetName,defaultValue) {
                var editor = node[editorName];
                var annot = editor.getSession().getAnnotations();
                for (var k=0; k < annot.length; k++) {
                    if (annot[k].type === "error") {
                        noerr += annot.length;
                        break;
                    }
                }
                var val = editor.getValue();
                if (defaultValue) {
                    if (val.trim() == defaultValue.trim()) {
                        val = "";
                    }
                }
                editor.destroy();
                delete node[editorName];
                $("#"+targetName).val(val);
            }
            disposeEditor("editor","node-input-func");
            disposeEditor("initEditor","node-input-initialize", RED._("node-red:function.text.initialize"));
            disposeEditor("finalizeEditor","node-input-finalize", RED._("node-red:function.text.finalize"));

            $("#node-input-noerr").val(noerr);
            this.noerr = noerr;
            if (RED.settings.functionExternalModules === true) {
                var libs = $("#node-input-libs-container").editableList("items");
                node.libs = [];
                libs.each(function(i) {
                    var item = $(this);
                    var v = item.find(".node-input-libs-var").val();
                    var n = item.find(".node-input-libs-val").typedInput("type");
                    if (n === "_custom_") {
                        n = item.find(".node-input-libs-val").val();
                    }
                    if ((!v || (v === "")) ||
                        (!n || (n === ""))) {
                        return;
                    }
                    node.libs.push({
                        var: v,
                        module: n
                    });
                });
            } else {
                node.libs = [];
            }
        },
        oneditcancel: function() {
            var node = this;

            node.editor.destroy();
            delete node.editor;

            node.initEditor.destroy();
            delete node.initEditor;

            node.finalizeEditor.destroy();
            delete node.finalizeEditor;
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-text-editor-row)");
            var height = $("#dialog-form").height();
            for (var i=0; i<rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-text-editor-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
            $("#dialog-form .node-text-editor").css("height",height+"px");

            var height = size.height;
            $("#node-input-init-editor").css("height", (height -45-48)+"px");
            $("#node-input-func-editor").css("height", (height -45-48)+"px");
            $("#node-input-finalize-editor").css("height", (height -45-48)+"px");

            this.initEditor.resize();
            this.editor.resize();
            this.finalizeEditor.resize();

            $("#node-input-libs-container").css("height", (height - 185)+"px");
        }
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="function">
    <p>A JavaScript function to run against the messages being received by the node.</p>
    <p>The messages are passed in as a JavaScript object called <code>msg</code>.</p>
    <p>By convention it will have a <code>msg.payload</code> property containing
       the body of the message.</p>
    <p>The function is expected to return a message object (or multiple message objects), but can choose
       to return nothing in order to halt a flow.</p>
    <p>The <b>Setup</b> tab contains code that will be run whenever the node is started.
        The <b>Close</b> tab contains code that will be run when the node is stopped.</p>
    <p>If an promise object is returned from the setup code, input message processing starts after its completion.</p>
    <h3>Details</h3>
    <p>See the <a target="_blank" href="http://nodered.org/docs/writing-functions.html">online documentation</a>
    for more information on writing functions.</p>
    <h4>Sending messages</h4>
    <p>The function can either return the messages it wants to pass on to the next nodes
    in the flow, or can call <code>node.send(messages)</code>.</p>
    <p>It can return/send:</p>
    <ul>
      <li>a single message object - passed to nodes connected to the first output</li>
      <li>an array of message objects - passed to nodes connected to the corresponding outputs</li>
    </ul>
    <p>Note: The setup code is executed during the initialization of nodes. Therefore, if <code>node.send</code> is called in the setup tab, subsequent nodes may not be able to receive the message.</p>
    <p>If any element of the array is itself an array of messages, multiple
          messages are sent to the corresponding output.</p>
    <p>If null is returned, either by itself or as an element of the array, no
          message is passed on.</p>
    <h4>Logging and Error Handling</h4>
    <p>To log any information, or report an error, the following functions are available:</p>
      <ul>
          <li><code>node.log("Log message")</code></li>
          <li><code>node.warn("Warning")</code></li>
          <li><code>node.error("Error")</code></li>
      </ul>
    </p>
    <p>The Catch node can also be used to handle errors. To invoke a Catch node,
    pass <code>msg</code> as a second argument to <code>node.error</code>:</p>
    <pre>node.error("Error",msg);</pre>
    <h4>Accessing Node Information</h4>
    <p>The following properties are available to access information about the node:</p>
    <ul>
        <li><code>node.id</code> - id of the node</li>
        <li><code>node.name</code> - name of the node</li>
        <li><code>node.outputCount</code> - number of node outputs</li>
    </ul>
    <h4>Using environment variables</h4>
    <p>Environment variables can be accessed using <code>env.get("MY_ENV_VAR")</code>.</p>
</script>

</div><div><!-- --- [red-module:node-red/switch] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="switch">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="switch.label.property"></span></label>
        <input type="text" id="node-input-property" style="width: 70%"/>
        <input type="hidden" id="node-input-outputs"/>
    </div>
    <div class="form-row node-input-rule-container-row">
        <ol id="node-input-rule-container"></ol>
    </div>
    <div class="form-row">
        <select id="node-input-checkall" style="width:100%; margin-right:5px;">
            <option value="true" data-i18n="switch.checkall"></option>
            <option value="false" data-i18n="switch.stopfirst"></option>
        </select>
    </div>
    <div class="form-row">
        <input type="checkbox" id="node-input-repair" style="display: inline-block; width: auto; vertical-align: top;">
        <label style="width: auto;" for="node-input-repair"><span data-i18n="switch.label.repair"></span></label></input>
    </div>
</script>

<script type="text/javascript">
(function() {
    var operators = [
        {v:"eq",t:"==",kind:'V'},
        {v:"neq",t:"!=",kind:'V'},
        {v:"lt",t:"<",kind:'V'},
        {v:"lte",t:"<=",kind:'V'},
        {v:"gt",t:">",kind:'V'},
        {v:"gte",t:">=",kind:'V'},
        {v:"hask",t:"switch.rules.hask",kind:'V'},
        {v:"btwn",t:"switch.rules.btwn",kind:'V'},
        {v:"cont",t:"switch.rules.cont",kind:'V'},
        {v:"regex",t:"switch.rules.regex",kind:'V'},
        {v:"true",t:"switch.rules.true",kind:'V'},
        {v:"false",t:"switch.rules.false",kind:'V'},
        {v:"null",t:"switch.rules.null",kind:'V'},
        {v:"nnull",t:"switch.rules.nnull",kind:'V'},
        {v:"istype",t:"switch.rules.istype",kind:'V'},
        {v:"empty",t:"switch.rules.empty",kind:'V'},
        {v:"nempty",t:"switch.rules.nempty",kind:'V'},
        {v:"head",t:"switch.rules.head",kind:'S'},
        {v:"index",t:"switch.rules.index",kind:'S'},
        {v:"tail",t:"switch.rules.tail",kind:'S'},
        {v:"jsonata_exp",t:"switch.rules.exp",kind:'O'},
        {v:"else",t:"switch.rules.else",kind:'O'}
    ];

    function clipValueLength(v) {
        if (v.length > 15) {
            return v.substring(0,15)+"...";
        }
        return v;
    }
    function prop2name(key) {
        var result = RED.utils.parseContextKey(key);
        return result.key;
    }
    function getValueLabel(t,v) {
        if (t === 'str') {
            return '"'+clipValueLength(v)+'"';
        } else if (t === 'msg') {
            return t+"."+clipValueLength(v);
        } else if (t === 'flow' || t === 'global') {
            return t+"."+clipValueLength(prop2name(v));
        }
        return clipValueLength(v);
    }
    RED.nodes.registerType('switch', {
        color: "#E2D96E",
        category: 'function',
        defaults: {
            name: {value:""},
            property: {value:"payload", required:true, validate: RED.validators.typedInput("propertyType")},
            propertyType: { value:"msg" },
            rules: {value:[{t:"eq", v:"", vt:"str"}]},
            checkall: {value:"true", required:true},
            repair: {value:false},
            outputs: {value:1}
        },
        inputs: 1,
        outputs: 1,
        outputLabels: function(index) {
            var rule = this.rules[index];
            var label = "";
            if (rule) {
                for (var i=0;i<operators.length;i++) {
                    if (operators[i].v === rule.t) {
                        label = /^switch/.test(operators[i].t)?this._(operators[i].t):operators[i].t;
                        break;
                    }
                }
                if ((rule.t === 'btwn') || (rule.t === 'index')) {
                    label += " "+getValueLabel(rule.vt,rule.v)+" & "+getValueLabel(rule.v2t,rule.v2);
                } else if (rule.t !== 'true' && rule.t !== 'false' && rule.t !== 'null' && rule.t !== 'nnull' && rule.t !== 'empty' && rule.t !== 'nempty' && rule.t !== 'else' ) {
                    label += " "+getValueLabel(rule.vt,rule.v);
                }
                return label;
            }
        },
        icon: "switch.svg",
        label: function() {
            return this.name||this._("switch.switch");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;
            var previousValueType = {value:"prev",label:this._("switch.previous"),hasValue:false};

            $("#node-input-property").typedInput({default:this.propertyType||'msg',types:['msg','flow','global','jsonata','env']});
            var outputCount = $("#node-input-outputs").val("{}");

            var andLabel = this._("switch.and");
            var caseLabel = this._("switch.ignorecase");

            function resizeRule(rule) {
                var newWidth = rule.width();
                var selectField = rule.find("select");
                var type = selectField.val()||"";
                var valueField = rule.find(".node-input-rule-value");
                var typeField = rule.find(".node-input-rule-type-value");
                var numField = rule.find(".node-input-rule-num-value");
                var expField = rule.find(".node-input-rule-exp-value");
                var keyField = rule.find(".node-input-rule-key-value");
                var btwnField1 = rule.find(".node-input-rule-btwn-value");
                var btwnField2 = rule.find(".node-input-rule-btwn-value2");
                var selectWidth;
                if (type.length < 4) {
                    selectWidth = 60;
                } else if (type === "regex") {
                    selectWidth = 147;
                } else {
                    selectWidth = 120;
                }
                selectField.width(selectWidth);
                if ((type === "btwn") || (type === "index")) {
                    btwnField1.typedInput("width",(newWidth-selectWidth-70));
                    btwnField2.typedInput("width",(newWidth-selectWidth-70));
                } else if ((type === "head") || (type === "tail")) {
                    numField.typedInput("width",(newWidth-selectWidth-70));
                } else if (type === "jsonata_exp") {
                    expField.typedInput("width",(newWidth-selectWidth-70));
                } else if (type === "istype") {
                    typeField.typedInput("width",(newWidth-selectWidth-70));
                } else {
                    if (type === "true" || type === "false" || type === "null" || type === "nnull" || type === "empty" || type === "nempty" || type === "else") {
                        // valueField.hide();
                    } else {
                        valueField.typedInput("width",(newWidth-selectWidth-70));
                    }
                }
            }

            $("#node-input-rule-container").css('min-height','150px').css('min-width','450px').editableList({
                addItem: function(container,i,opt) {
                    if (!opt.hasOwnProperty('r')) {
                        opt.r = {};
                    }
                    var rule = opt.r;
                    if (!rule.hasOwnProperty('t')) {
                        rule.t = 'eq';
                    }
                    if (!opt.hasOwnProperty('i')) {
                        opt._i = Math.floor((0x99999-0x10000)*Math.random()).toString();
                    }
                    container.css({
                        overflow: 'hidden',
                        whiteSpace: 'nowrap'
                    });
                    var row = $('<div/>').appendTo(container);
                    var row2 = $('<div/>',{style:"padding-top: 5px; padding-left: 175px;"}).appendTo(container);
                    var row3 = $('<div/>',{style:"padding-top: 5px; padding-left: 102px;"}).appendTo(container);
                    var selectField = $('<select/>',{style:"width:120px; margin-left: 5px; text-align: center;"}).appendTo(row);
                    var group0 = $('<optgroup/>', { label: "value rules" }).appendTo(selectField);
                    for (var d in operators) {
                        if(operators[d].kind === 'V') {
                            group0.append($("<option></option>").val(operators[d].v).text(/^switch/.test(operators[d].t)?node._(operators[d].t):operators[d].t));
                        }
                    }
                    var group1 = $('<optgroup/>', { label: "sequence rules" }).appendTo(selectField);
                    for (var d in operators) {
                        if(operators[d].kind === 'S') {
                            group1.append($("<option></option>").val(operators[d].v).text(/^switch/.test(operators[d].t)?node._(operators[d].t):operators[d].t));
                        }
                    }
                    for (var d in operators) {
                        if(operators[d].kind === 'O') {
                            selectField.append($("<option></option>").val(operators[d].v).text(/^switch/.test(operators[d].t)?node._(operators[d].t):operators[d].t));
                        }
                    }

                    function createValueField(){
                        return $('<input/>',{class:"node-input-rule-value",type:"text",style:"margin-left: 5px;"}).appendTo(row).typedInput({default:'str',types:['msg','flow','global','str','num','jsonata','env',previousValueType]});
                    }

                    function createNumValueField(){
                        return $('<input/>',{class:"node-input-rule-num-value",type:"text",style:"margin-left: 5px;"}).appendTo(row).typedInput({default:'num',types:['flow','global','num','jsonata','env']});
                    }

                    function createExpValueField(){
                        return $('<input/>',{class:"node-input-rule-exp-value",type:"text",style:"margin-left: 5px;"}).appendTo(row).typedInput({default:'jsonata',types:['jsonata']});
                    }

                    function createBtwnValueField(){
                        return $('<input/>',{class:"node-input-rule-btwn-value",type:"text",style:"margin-left: 5px;"}).appendTo(row).typedInput({default:'num',types:['msg','flow','global','str','num','jsonata','env',previousValueType]});
                    }

                    function createBtwnAndLabel(){
                        return $('<span/>',{class:"node-input-rule-btwn-label"}).text(" "+andLabel+" ").appendTo(row3);
                    }

                    function createBtwnValue2Field(){
                        return $('<input/>',{class:"node-input-rule-btwn-value2",type:"text",style:"margin-left:2px;"}).appendTo(row3).typedInput({default:'num',types:['msg','flow','global','str','num','jsonata','env',previousValueType]});
                    }

                    function createTypeValueField(){
                        return $('<input/>',{class:"node-input-rule-type-value",type:"text",style:"margin-left: 5px;"}).appendTo(row).typedInput({default:'string',types:[
                            {value:"string",label:RED._("common.type.string"),hasValue:false,icon:"red/images/typedInput/az.png"},
                            {value:"number",label:RED._("common.type.number"),hasValue:false,icon:"red/images/typedInput/09.png"},
                            {value:"boolean",label:RED._("common.type.boolean"),hasValue:false,icon:"red/images/typedInput/bool.png"},
                            {value:"array",label:RED._("common.type.array"),hasValue:false,icon:"red/images/typedInput/json.png"},
                            {value:"buffer",label:RED._("common.type.buffer"),hasValue:false,icon:"red/images/typedInput/bin.png"},
                            {value:"object",label:RED._("common.type.object"),hasValue:false,icon:"red/images/typedInput/json.png"},
                            {value:"json",label:RED._("common.type.jsonString"),hasValue:false,icon:"red/images/typedInput/json.png"},
                            {value:"undefined",label:RED._("common.type.undefined"),hasValue:false},
                            {value:"null",label:RED._("common.type.null"),hasValue:false}
                        ]});
                    }

                    var valueField = null;
                    var numValueField = null;
                    var expValueField = null;
                    var btwnAndLabel = null;
                    var btwnValueField = null;
                    var btwnValue2Field = null;
                    var typeValueField = null;

                    var finalspan = $('<span/>',{style:"float: right;margin-top: 6px;"}).appendTo(row);
                    finalspan.append(' &#8594; <span class="node-input-rule-index">'+(i+1)+'</span> ');
                    var caseSensitive = $('<input/>',{id:"node-input-rule-case-"+i,class:"node-input-rule-case",type:"checkbox",style:"width:auto;vertical-align:top"}).appendTo(row2);
                    $('<label/>',{for:"node-input-rule-case-"+i,style:"margin-left: 3px;"}).text(caseLabel).appendTo(row2);
                    selectField.on("change", function() {
                        var type = selectField.val();
                        if (valueField){
                            valueField.typedInput('hide');
                        }
                        if (expValueField){
                            expValueField.typedInput('hide');
                        }
                        if (numValueField){
                            numValueField.typedInput('hide');
                        }
                        if (typeValueField){
                            typeValueField.typedInput('hide');
                        }
                        if (btwnValueField){
                            btwnValueField.typedInput('hide');
                        }
                        if (btwnValue2Field){
                            btwnValue2Field.typedInput('hide');
                        }

                        if ((type === "btwn") || (type === "index")) {
                            if (!btwnValueField){
                                btwnValueField = createBtwnValueField();
                            }
                            btwnValueField.typedInput('show');
                        } else if ((type === "head") || (type === "tail")) {
                            if (!numValueField){
                                numValueField = createNumValueField();
                            }
                            numValueField.typedInput('show');
                        } else if (type === "jsonata_exp") {
                            if (!expValueField){
                                expValueField = createExpValueField();
                            }
                            expValueField.typedInput('show');
                        } else if (type === "istype") {
                            if (!typeValueField){
                                typeValueField = createTypeValueField();
                            }
                            typeValueField.typedInput('show');
                        } else if (! (type === "true" || type === "false" || type === "null" || type === "nnull" || type === "empty" || type === "nempty" || type === "else" )) {
                                if (!valueField){
                                    valueField = createValueField();
                                }
                                valueField.typedInput('show');
                        }
                        if (type === "regex") {
                            row2.show();
                            row3.hide();
                        } else if ((type === "btwn") || (type === "index")) {
                            row2.hide();
                            row3.show();
                            if (!btwnValue2Field){
                                btwnValue2Field = createBtwnValue2Field();
                            }
                            btwnValue2Field.typedInput('show');
                        } else {
                            row2.hide();
                            row3.hide();
                        }
                        resizeRule(container);

                    });
                    selectField.val(rule.t);
                    if ((rule.t == "btwn") || (rule.t == "index")) {
                        if (!btwnValueField){
                            btwnValueField = createBtwnValueField();
                        }
                        btwnValueField.typedInput('value',rule.v);
                        btwnValueField.typedInput('type',rule.vt||'num');

                        if (!btwnValue2Field){
                            btwnValue2Field = createBtwnValue2Field();
                        }
                        btwnValue2Field.typedInput('value',rule.v2);
                        btwnValue2Field.typedInput('type',rule.v2t||'num');
                    } else if ((rule.t === "head") || (rule.t === "tail")) {
                        if (!numValueField){
                            numValueField = createNumValueField();
                        }
                        numValueField.typedInput('value',rule.v);
                        numValueField.typedInput('type',rule.vt||'num');
                    } else if (rule.t === "istype") {
                        if (!typeValueField){
                            typeValueField =createTypeValueField();
                        }
                        typeValueField.typedInput('value',rule.vt);
                        typeValueField.typedInput('type',rule.vt);
                    } else if (rule.t === "jsonata_exp") {
                        if (!expValueField){
                            expValueField = createExpValueField();
                        }
                        expValueField.typedInput('value',rule.v);
                        expValueField.typedInput('type',rule.vt||'jsonata');
                    } else if (typeof rule.v != "undefined") {
                        if (!valueField){
                            valueField = createValueField();
                        }
                        valueField.typedInput('value',rule.v);
                        valueField.typedInput('type',rule.vt||'str');
                    }
                    if (rule.case) {
                        caseSensitive.prop('checked',true);
                    } else {
                        caseSensitive.prop('checked',false);
                    }
                    selectField.change();

                    var currentOutputs = JSON.parse(outputCount.val()||"{}");
                    currentOutputs[opt.hasOwnProperty('i')?opt.i:opt._i] = i;
                    outputCount.val(JSON.stringify(currentOutputs));
                },
                removeItem: function(opt) {
                    var currentOutputs = JSON.parse(outputCount.val()||"{}");
                    if (opt.hasOwnProperty('i')) {
                        currentOutputs[opt.i] = -1;
                    } else {
                        delete currentOutputs[opt._i];
                    }
                    var rules = $("#node-input-rule-container").editableList('items');
                    rules.each(function(i) {
                        $(this).find(".node-input-rule-index").html(i+1);
                        var data = $(this).data('data');
                        currentOutputs[data.hasOwnProperty('i')?data.i:data._i] = i;
                    });
                    outputCount.val(JSON.stringify(currentOutputs));
                },
                resizeItem: resizeRule,
                sortItems: function(rules) {
                    var currentOutputs = JSON.parse(outputCount.val()||"{}");
                    var rules = $("#node-input-rule-container").editableList('items');
                    rules.each(function(i) {
                        $(this).find(".node-input-rule-index").html(i+1);
                        var data = $(this).data('data');
                        currentOutputs[data.hasOwnProperty('i')?data.i:data._i] = i;
                    });
                    outputCount.val(JSON.stringify(currentOutputs));
                },
                sortable: true,
                removable: true
            });

            for (var i=0;i<this.rules.length;i++) {
                var rule = this.rules[i];
                $("#node-input-rule-container").editableList('addItem',{r:rule,i:i});
            }
        },
        oneditsave: function() {
            var rules = $("#node-input-rule-container").editableList('items');
            var node = this;
            node.rules = [];
            rules.each(function(i) {
                var ruleData = $(this).data('data');
                var rule = $(this);
                var type = rule.find("select").val();
                var r = {t:type};
                if (!(type === "true" || type === "false" || type === "null" || type === "nnull" || type === "empty" || type === "nempty" || type === "else")) {
                    if ((type === "btwn") || (type === "index")) {
                        r.v = rule.find(".node-input-rule-btwn-value").typedInput('value');
                        r.vt = rule.find(".node-input-rule-btwn-value").typedInput('type');
                        r.v2 = rule.find(".node-input-rule-btwn-value2").typedInput('value');
                        r.v2t = rule.find(".node-input-rule-btwn-value2").typedInput('type');
                    } else if ((type === "head") || (type === "tail")) {
                        r.v = rule.find(".node-input-rule-num-value").typedInput('value');
                        r.vt = rule.find(".node-input-rule-num-value").typedInput('type');
                    } else if (type === "istype") {
                        r.v = rule.find(".node-input-rule-type-value").typedInput('type');
                        r.vt = rule.find(".node-input-rule-type-value").typedInput('type');
                    } else if (type === "jsonata_exp") {
                        r.v = rule.find(".node-input-rule-exp-value").typedInput('value');
                        r.vt = rule.find(".node-input-rule-exp-value").typedInput('type');
                    } else {
                        r.v = rule.find(".node-input-rule-value").typedInput('value');
                        r.vt = rule.find(".node-input-rule-value").typedInput('type');
                    }
                    if (type === "regex") {
                        r.case = rule.find(".node-input-rule-case").prop("checked");
                    }
                }
                node.rules.push(r);
            });
            this.propertyType = $("#node-input-property").typedInput('type');
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-input-rule-container-row)");
            var height = size.height;
            for (var i=0;i<rows.length;i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-input-rule-container-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
            height += 16;
            $("#node-input-rule-container").editableList('height',height);
        }
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="switch">
    <p>Route messages based on their property values or sequence position.</p>
    <h3>Details</h3>
    <p>When a message arrives, the node will evaluate each of the defined rules
    and forward the message to the corresponding outputs of any matching rules.</p>
    <p>Optionally, the node can be set to stop evaluating rules once it finds one
    that matches.</p>
    <p>The rules can be evaluated against an individual message property, a flow or global
    context property, environment variable or the result of a JSONata expression.</p>
    <h4>Rules</h4>
    <p>There are four types of rule:</p>
    <ol>
        <li><b>Value</b> rules are evaluated against the configured property</li>
        <li><b>Sequence</b> rules can be used on message sequences, such as those
            generated by the Split node</li>
        <li>A JSONata <b>Expression</b> can be provided that will be evaluated
            against the whole message and will match if the expression returns
            a true value.</li>
        <li>An <b>Otherwise</b> rule can be used to match if none of the preceeding
            rules have matched.</li>
    </ol>
    <h4>Notes</h4>
    <p>The <code>is true/false</code> and <code>is null</code> rules perform strict
       comparisons against those types. They do not convert between types.</p>
    <p>The <code>is empty</code> and <code>is not empty</code> rules can be used to test the length of Strings, Arrays and Buffers, or the number of properties an Object has. Neither rule will pass if the property being tested has a <code>boolean</code>, <code>null</code> 
       or <code>undefined</code> value.</p>
    <h4>Handling message sequences</h4>
    <p>By default, the node does not modify the <code>msg.parts</code> property of messages
       that are part of a sequence.</p>
    <p>The <b>recreate message sequences</b> option can be enabled to generate new message sequences
       for each rule that matches. In this mode, the node will buffer the entire incoming
       sequence before sending the new sequences on. The runtime setting <code>nodeMessageBufferMaxLength</code>
       can be used to limit how many messages nodes will buffer.</p>
</script>

</div><div><!-- --- [red-module:node-red/change] --- -->

<script type="text/html" data-template-name="change">
    <style>
        ol#node-input-rule-container .red-ui-typedInput-container {
            flex:1;
        }
    </style>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row" style="margin-bottom:0;">
        <label><i class="fa fa-list"></i> <span data-i18n="change.label.rules"></span></label>
    </div>
    <div class="form-row node-input-rule-container-row">
        <ol id="node-input-rule-container"></ol>
    </div>
</script>

<script type="text/javascript">
(function() {
    function validateProperty(v,vt) {
        if (/msg|flow|global/.test(vt)) {
            if (!RED.utils.validatePropertyExpression(v)) {
                return false;
            }
        } else if (vt === "jsonata") {
            try{jsonata(v);}catch(e){return false;}
        } else if (vt === "json") {
            try{JSON.parse(v);}catch(e){return false;}
        }
        return true;
    }
    RED.nodes.registerType('change', {
        color: "#E2D96E",
        category: 'function',
        defaults: {
            name: {value:""},
            rules:{value:[{t:"set",p:"payload",pt:"msg",to:"",tot:"str"}],validate: function(rules) {
                if (!rules || rules.length === 0) { return true }
                for (var i=0;i<rules.length;i++) {
                    var r = rules[i];
                    if (r.t === 'set') {
                        if (!validateProperty(r.p,r.pt) || !validateProperty(r.to,r.tot)) {
                            return false;
                        }
                    } else if (r.t === 'change') {
                        if (!validateProperty(r.p,r.pt) || !validateProperty(r.from,r.fromt) || !validateProperty(r.to,r.tot)) {
                            return false;
                        }
                    } else if (r.t === 'move') {
                        if (!validateProperty(r.p,r.pt)) {
                            return false;
                        }
                    }
                }
                return true;
            }},
            // legacy
            action: {value:""},
            property: {value:""},
            from: {value:""},
            to: {value:""},
            reg: {value:false}
        },
        inputs: 1,
        outputs: 1,
        icon: "swap.svg",
        label: function() {
            function prop2name(type, key) {
                var result = RED.utils.parseContextKey(key);
                return type +"." +result.key;
            }
            if (this.name) {
                return this.name;
            }
            if (!this.rules) {
                if (this.action === "replace") {
                    return this._("change.label.set",{property:"msg."+this.property});
                } else if (this.action === "change") {
                    return this._("change.label.change",{property:"msg."+this.property});
                } else if (this.action === "move") {
                    return this._("change.label.move",{property:"msg."+this.property});
                } else {
                    return this._("change.label.delete",{property:"msg."+this.property});
                }
            } else {
                if (this.rules.length == 1) {
                    if (this.rules[0].t === "set") {
                        return this._("change.label.set",{property:prop2name((this.rules[0].pt||"msg"), this.rules[0].p)});
                    } else if (this.rules[0].t === "change") {
                        return this._("change.label.change",{property:prop2name((this.rules[0].pt||"msg"), this.rules[0].p)});
                    } else if (this.rules[0].t === "move") {
                        return this._("change.label.move",{property:prop2name((this.rules[0].pt||"msg"), this.rules[0].p)});
                    } else {
                        return this._("change.label.delete",{property:prop2name((this.rules[0].pt||"msg"), this.rules[0].p)});
                    }
                } else {
                    return this._("change.label.changeCount",{count:this.rules.length});
                }
            }
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function() {
            var set = this._("change.action.set");
            var change = this._("change.action.change");
            var del = this._("change.action.delete");
            var move = this._("change.action.move");
            var to = this._("change.action.to");
            var search = this._("change.action.search");
            var replace = this._("change.action.replace");
            var regex = this._("change.label.regex");

            $('#node-input-rule-container').css('min-height','150px').css('min-width','450px').editableList({
                addItem: function(container,i,opt) {
                    var rule = opt;
                    if (!rule.hasOwnProperty('t')) {
                        rule = {t:"set",p:"payload",to:"",tot:"str"};
                    }
                    if (rule.t === "change" && rule.re) {
                        rule.fromt = 're';
                        delete rule.re;
                    }
                    if (rule.t === "set" && !rule.tot) {
                        if (rule.to.indexOf("msg.") === 0 && !rule.tot) {
                            rule.to = rule.to.substring(4);
                            rule.tot = "msg";
                        } else {
                            rule.tot = "str";
                        }
                    }
                    if (rule.t === "move" && !rule.tot) {
                        rule.tot = "msg";
                    }
                    container.css({
                        overflow: 'hidden',
                        whiteSpace: 'nowrap'
                    });
                    let fragment = document.createDocumentFragment();
                    var row1 = $('<div/>',{style:"display:flex;"}).appendTo(fragment);
                    var row2 = $('<div/>',{style:"display:flex;margin-top:8px;"}).appendTo(fragment);
                    var row3 = $('<div/>',{style:"margin-top:8px;"}).appendTo(fragment);
                    var row4 = $('<div/>',{style:"display:flex;margin-top:8px;"}).appendTo(fragment);

                    var selectField = $('<select/>',{class:"node-input-rule-type",style:"width:110px; margin-right:10px;"}).appendTo(row1);
                    var selectOptions = [{v:"set",l:set},{v:"change",l:change},{v:"delete",l:del},{v:"move",l:move}];
                    for (var i=0; i<4; i++) {
                        selectField.append($("<option></option>").val(selectOptions[i].v).text(selectOptions[i].l));
                    }

                    var propertyName = $('<input/>',{class:"node-input-rule-property-name",type:"text"})
                        .appendTo(row1)
                        .typedInput({types:['msg','flow','global']});

                    $('<div/>',{style:"display:inline-block;text-align:right; width:120px; padding-right:10px; box-sizing:border-box;"})
                        .text(to)
                        .appendTo(row2);

                    function createPropertyValue() {
                        return $('<input/>',{class:"node-input-rule-property-value",type:"text"})
                        .appendTo(row2)
                        .typedInput({default:'str',types:['msg','flow','global','str','num','bool','json','bin','date','jsonata','env']});
                    }

                    var row3_1 = $('<div/>', {style:"display:flex;"}).appendTo(row3);
                    $('<div/>',{style:"display:inline-block;text-align:right; width:120px; padding-right:10px; box-sizing:border-box;"})
                        .text(search)
                        .appendTo(row3_1);

                    function createFromValue() {
                        return $('<input/>',{class:"node-input-rule-property-search-value",type:"text"})
                        .appendTo(row3_1)
                        .typedInput({default:'str',types:['msg','flow','global','str','re','num','bool','env']});
                    }

                    var row3_2 = $('<div/>',{style:"display:flex;margin-top:8px;"}).appendTo(row3);
                    $('<div/>',{style:"display:inline-block;text-align:right; width:120px; padding-right:10px; box-sizing:border-box;"})
                        .text(replace)
                        .appendTo(row3_2);

                    function createToValue() {
                        return $('<input/>',{class:"node-input-rule-property-replace-value",type:"text"})
                        .appendTo(row3_2)
                        .typedInput({default:'str',types:['msg','flow','global','str','num','bool','json','bin','env']});
                    }

                    $('<div/>',{style:"display:inline-block;text-align:right; width:120px; padding-right:10px; box-sizing:border-box;"})
                        .text(to)
                        .appendTo(row4);

                    function createMoveValue() {
                        return $('<input/>',{class:"node-input-rule-property-move-value",type:"text"})
                        .appendTo(row4)
                        .typedInput({default:'msg',types:['msg','flow','global']});
                    }

                    let propertyValue = null;
                    let fromValue = null;
                    let toValue = null;
                    let moveValue = null;

                    selectField.on("change", function() {
                        var type = $(this).val();
                        if (propertyValue) {
                            propertyValue.typedInput('hide');
                        }
                        if (fromValue) {
                            fromValue.typedInput('hide');
                        }
                        if (toValue) {
                            toValue.typedInput('hide');
                        }
                        if (moveValue) {
                            moveValue.typedInput('hide');
                        }

                        if (type == "set") {
                            if(!propertyValue) {
                                propertyValue = createPropertyValue();
                            }
                            propertyValue.typedInput('show');
                            row2.show();
                            row3.hide();
                            row4.hide();
                        } else if (type == "change") {
                            if(!fromValue) {
                                fromValue = createFromValue();
                            }
                            fromValue.typedInput('show');
                            if(!toValue) {
                                toValue = createToValue();
                            }
                            toValue.typedInput('show');
                            row2.hide();
                            row3.show();
                            row4.hide();
                        } else if (type == "delete") {
                            row2.hide();
                            row3.hide();
                            row4.hide();
                        } else if (type == "move") {
                            if(!moveValue) {
                                moveValue = createMoveValue();
                            }
                            moveValue.typedInput('show');
                            row2.hide();
                            row3.hide();
                            row4.show();
                        }
                    });

                    selectField.val(rule.t);
                    propertyName.typedInput('value',rule.p);
                    propertyName.typedInput('type',rule.pt);
                    if (rule.t == "set") {
                        if(!propertyValue) {
                            propertyValue = createPropertyValue();
                        }
                        propertyValue.typedInput('value',rule.to);
                        propertyValue.typedInput('type',rule.tot);
                    }
                    if (rule.t == "move") {
                        if(!moveValue) {
                            moveValue = createMoveValue();
                        }
                        moveValue.typedInput('value',rule.to);
                        moveValue.typedInput('type',rule.tot);
                    }
                    if (rule.t == "change") {
                        if(!fromValue) {
                            fromValue = createFromValue();
                        }
                        fromValue.typedInput('value',rule.from);
                        fromValue.typedInput('type',rule.fromt);
                        if (!toValue) {
                            toValue = createToValue();
                        }
                        toValue.typedInput('value',rule.to);
                        toValue.typedInput('type',rule.tot);
                    }
                    selectField.change();
                    container[0].appendChild(fragment);
                },
                removable: true,
                sortable: true
            });

            if (!this.rules) {
                var rule = {
                    t:(this.action=="replace"?"set":this.action),
                    p:this.property,
                    pt:"msg"
                };

                if ((rule.t === "set")||(rule.t === "move")) {
                    rule.to = this.to;
                } else if (rule.t === "change") {
                    rule.from = this.from;
                    rule.to = this.to;
                    rule.re = this.reg;
                }

                delete this.to;
                delete this.from;
                delete this.reg;
                delete this.action;
                delete this.property;

                this.rules = [rule];
            }

            for (var i=0; i<this.rules.length; i++) {
                var rule = this.rules[i];
                $("#node-input-rule-container").editableList('addItem',rule);
            }
        },
        oneditsave: function() {
            var rules = $("#node-input-rule-container").editableList('items');
            var node = this;
            node.rules= [];
            rules.each(function(i) {
                var rule = $(this);
                var type = rule.find(".node-input-rule-type").val();
                var r = {
                    t:type,
                    p:rule.find(".node-input-rule-property-name").typedInput('value'),
                    pt:rule.find(".node-input-rule-property-name").typedInput('type')
                };
                if (type === "set") {
                    r.to = rule.find(".node-input-rule-property-value").typedInput('value');
                    r.tot = rule.find(".node-input-rule-property-value").typedInput('type');
                } else if (type === "move") {
                    r.to = rule.find(".node-input-rule-property-move-value").typedInput('value');
                    r.tot = rule.find(".node-input-rule-property-move-value").typedInput('type');
                } else if (type === "change") {
                    r.from = rule.find(".node-input-rule-property-search-value").typedInput('value');
                    r.fromt = rule.find(".node-input-rule-property-search-value").typedInput('type');
                    r.to = rule.find(".node-input-rule-property-replace-value").typedInput('value');
                    r.tot = rule.find(".node-input-rule-property-replace-value").typedInput('type');
                }
                node.rules.push(r);
            });
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-input-rule-container-row)");
            var height = size.height;
            for (var i=0; i<rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-input-rule-container-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
            height += 16;
            $("#node-input-rule-container").editableList('height',height);
        }
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="change">
    <p>Set, change, delete or move properties of a message, flow context or global context.</p>
    <p>The node can specify multiple rules that will be applied in the order they are defined.</p>
    <h3>Details</h3>
    <p>The available operations are:</p>
    <dl class="message-properties">
    <dt>Set</dt>
    <dd>set a property. The value can be a variety of different types, or
            can be taken from an existing message or context property.</dd>
    <dt>Change</dt>
    <dd>search &amp; replace parts of the property. If regular expressions
        are enabled, the "replace with" property can include capture groups, for
        example <code>$1</code>. Replace will only change the type if there
        is a complete match.</dd>
    <dt>Delete</dt>
    <dd>delete a property.</dd>
    <dt>Move</dt>
    <dd>move or rename a property.</dd>
    </dl>
    <p>The "expression" type uses the <a href="http://jsonata.org/" target="_new">JSONata</a>
    query and expression language.
    </p>
</script>

</div><div><!-- --- [red-module:node-red/range] --- -->

<script type="text/html" data-template-name="range">
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="common.label.property"></span></label>
        <input type="text" id="node-input-property" style="width:calc(70% - 1px)"/>
    </div>
    <div class="form-row">
        <label for="node-input-action"><i class="fa fa-dot-circle-o"></i> <span data-i18n="range.label.action"></span></label>
        <select id="node-input-action" style="width:70%;">
            <option value="scale" data-i18n="range.scale.payload"></option>
            <option value="clamp" data-i18n="range.scale.limit"></option>
            <option value="roll" data-i18n="range.scale.wrap"></option>
        </select>
    </div>
    <br/>
    <div class="form-row"><i class="fa fa-sign-in"></i> <span data-i18n="range.label.inputrange"></span>:</div>
    <div class="form-row"><label></label>
        <span data-i18n="range.label.from"></span>: <input type="text" id="node-input-minin" data-i18n="[placeholder]range.placeholder.min" style="width:100px;"/>
        &nbsp;&nbsp;<span data-i18n="range.label.to"></span>: <input type="text" id="node-input-maxin" data-i18n="[placeholder]range.placeholder.maxin" style="width:100px;"/>
    </div>
    <div class="form-row"><i class="fa fa-sign-out"></i> <span data-i18n="range.label.resultrange"></span>:</div>
    <div class="form-row"><label></label>
        <span data-i18n="range.label.from"></span>: <input type="text" id="node-input-minout" data-i18n="[placeholder]range.placeholder.min" style="width:100px;"/>
        &nbsp;&nbsp;<span data-i18n="range.label.to"></span>: <input type="text" id="node-input-maxout" data-i18n="[placeholder]range.placeholder.maxout" style="width:100px;"/>
    </div>
    <br/>
    <div class="form-row"><label></label>
        <input type="checkbox" id="node-input-round" style="display: inline-block; width: auto; vertical-align: top;">
        <label style="width: auto;" for="node-input-round"><span data-i18n="range.label.roundresult"></span></label></input>
    </div>
    <br/>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-tips" id="node-tip"><span data-i18n="range.tip"></span></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('range', {
        color: "#E2D96E",
        category: 'function',
        defaults: {
            minin: {value:"",required:true,validate:RED.validators.number()},
            maxin: {value:"",required:true,validate:RED.validators.number()},
            minout: {value:"",required:true,validate:RED.validators.number()},
            maxout: {value:"",required:true,validate:RED.validators.number()},
            action: {value:"scale"},
            round: {value:false},
            property: {value:"payload",required:true},
            name: {value:""}
        },
        inputs: 1,
        outputs: 1,
        icon: "range.svg",
        label: function() {
            if (this.minout !== "" && this.maxout !== "") { return this.name||this.minout + " - " + this.maxout; }
            else { return this.name||this._("range.range"); }
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function() {
            if (this.property === undefined) {
                $("#node-input-property").val("payload");
            }
            $("#node-input-property").typedInput({default:'msg',types:['msg']});
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="range">
    <p>Maps a numeric value to a different range.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">number</span></dt>
        <dd>The payload <i>must</i> be a number. Anything else will try to be
        parsed into a number and rejected if that fails.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">number</span></dt>
        <dd>The value mapped to the new range.</dd>
    </dl>
    <h3>Details</h3>
    <p>This node will linearly scale the received value. By default, the result
    is not constrained to the range defined in the node.</p>
    <p><i>Scale and limit to target range</i> means that the result will never be outside
    the range specified within the target range.</p>
    <p><i>Scale and wrap within the target range</i> means that the result will
    be wrapped within the target range.</p>
    <p>For example an input 0 - 10 mapped to 0 - 100.</p>
    <table style="outline-width:#888 solid thin">
        <tr><th width="80px">mode</th><th width="80px">input</th><th width="80px">output</th></tr>
        <tr><td><center>scale</center></td><td><center>12</center></td><td><center>120</center></td></tr>
        <tr><td><center>limit</center></td><td><center>12</center></td><td><center>100</center></td></tr>
        <tr><td><center>wrap</center></td><td><center>12</center></td><td><center>20</center></td></tr>
    </table>
</script>

</div><div><!-- --- [red-module:node-red/template] --- -->

<script type="text/html" data-template-name="template">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <div style="display: inline-block; width: calc(100% - 105px)"><input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name"></div>
    </div>
    <div class="form-row">
        <label for="node-input-field"><i class="fa fa-ellipsis-h"></i> <span data-i18n="template.label.property"></span></label>
        <input type="text" id="node-input-field" placeholder="payload" style="width:250px;">
        <input type="hidden" id="node-input-fieldType">
    </div>
    <div class="form-row" style="position: relative; margin-bottom: 0px;">
        <label for="node-input-template"><i class="fa fa-file-code-o"></i> <span data-i18n="template.label.template"></span></label>
        <input type="hidden" id="node-input-template" autofocus="autofocus">
        <div style="position: absolute; right:0;display:inline-block; text-align: right; font-size: 0.8em;">
            <span data-i18n="template.label.format"></span>:
            <select id="node-input-format" style="width:110px; font-size: 10px !important;  height: 24px; padding:0;">
                <option value="handlebars">mustache</option>
                <option value="html">HTML</option>
                <option value="json">JSON</option>
                <option value="javascript">Javascript</option>
                <option value="css">CSS</option>
                <option value="markdown">Markdown</option>
                <option value="python">Python</option>
                <option value="sql">SQL</option>
                <option value="yaml">YAML</option>
                <option value="text" data-i18n="template.label.none"></option>
            </select>
            <button id="node-template-expand-editor" class="red-ui-button red-ui-button-small"><i class="fa fa-expand"></i></button>
        </div>
    </div>
    <div class="form-row node-text-editor-row">
        <div style="height: 250px; min-height:150px;" class="node-text-editor" id="node-input-template-editor" ></div>
    </div>
    <div class="form-row">
        <label for="node-input-syntax"><i class="fa fa-code"></i> <span data-i18n="template.label.syntax"></span></label>
        <select id="node-input-syntax" style="width:180px;">
            <option value="mustache" data-i18n="template.label.mustache"></option>
            <option value="plain" data-i18n="template.label.plain"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-output"><i class="fa fa-long-arrow-right"></i> <span data-i18n="template.label.output"></span></label>
        <select id="node-input-output" style="width:180px;">
            <option value="str" data-i18n="template.label.plain"></option>
            <option value="json" data-i18n="template.label.json"></option>
            <option value="yaml" data-i18n="template.label.yaml"></option>
        </select>
    </div>

</script>

<script type="text/javascript">
    RED.nodes.registerType('template',{
        color:"rgb(243, 181, 103)",
        category: 'function',
        defaults: {
            name: {value:""},
            field: {value:"payload", validate:RED.validators.typedInput("fieldType")},
            fieldType: {value:"msg"},
            format: {value:"handlebars"},
            syntax: {value:"mustache"},
            template: {value:"This is the payload: {{payload}} !"},
            output: {value:"str"}
        },
        inputs:1,
        outputs:1,
        icon: "template.svg",
        label: function() {
            return this.name||this._("template.template");;
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var that = this;
            if (!this.field) {
                this.field = 'payload';
                $("#node-input-field").val("payload");
            }
            if (!this.fieldType) {
                this.fieldType = 'msg';
            }
            if (!this.syntax) {
                this.syntax = 'mustache';
                $("#node-input-syntax").val(this.syntax);
            }
            $("#node-input-field").typedInput({
                default: 'msg',
                types: ['msg','flow','global'],
                typeField: $("#node-input-fieldType")
            });

            this.editor = RED.editor.createEditor({
                id: 'node-input-template-editor',
                mode: 'ace/mode/html',
                value: $("#node-input-template").val()
            });
            RED.library.create({
                url:"templates", // where to get the data from
                type:"template", // the type of object the library is for
                editor:that.editor, // the field name the main text body goes to
                fields:['name','format','output','syntax'],
                ext: "txt"
            });
            this.editor.focus();

            $("#node-input-format").on("change", function() {
                var mod = "ace/mode/"+$("#node-input-format").val();
                that.editor.getSession().setMode({
                    path: mod,
                    v: Date.now()
                });
            });
            RED.popover.tooltip($("#node-template-expand-editor"), RED._("node-red:common.label.expand"));
            $("#node-template-expand-editor").on("click", function(e) {
                e.preventDefault();
                var value = that.editor.getValue();
                RED.editor.editText({
                    mode: $("#node-input-format").val(),
                    value: value,
                    width: "Infinity",
                    cursor: that.editor.getCursorPosition(),
                    complete: function(v,cursor) {
                        that.editor.setValue(v, -1);
                        that.editor.gotoLine(cursor.row+1,cursor.column,false);
                        setTimeout(function() {
                            that.editor.focus();
                        },300);
                    }
                })
            })
        },
        oneditsave: function() {
            $("#node-input-template").val(this.editor.getValue());
            this.editor.destroy();
            delete this.editor;
        },
        oneditcancel: function() {
            this.editor.destroy();
            delete this.editor;
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-text-editor-row)");
            var height = $("#dialog-form").height();
            for (var i=0; i<rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-text-editor-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
            $(".node-text-editor").css("height",height+"px");
            this.editor.resize();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="template">
    <p>Sets a property based on the provided template.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>msg <span class="property-type">object</span></dt>
        <dd>A msg object containing information to populate the template.</dd>
        <dt class="optional">template <span class="property-type">string</span></dt>
        <dd>A template to be populated from msg.payload. If not configured in the edit panel,
         this can be set as a property of msg.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>msg <span class="property-type">object</span></dt>
        <dd>a msg with a property set by populating the configured template with properties from the incoming msg.</dd>
    </dl>
    <h3>Details</h3>
    <p>By default this uses the <i><a href="http://mustache.github.io/mustache.5.html" target="_blank">mustache</a></i>
    format, but this can be switched off if required.</p>
    <p>For example, when a template of:
    <pre>Hello {{payload.name}}. Today is {{date}}</pre>
    <p>receives a message containing:
    <pre>{
  date: "Monday",
  payload: {
    name: "Fred"
  }
}</pre>
    <p>The resulting property will be:
    <pre>Hello Fred. Today is Monday</pre>
    <p>It is possible to use a property from the flow context or global context. Just use <code>{{flow.name}}</code> or
    <code>{{global.name}}</code>, or for persistable store <code>store</code> use <code>{{flow[store].name}}</code> or
    <code>{{global[store].name}}</code>.
    <p><b>Note: </b>By default, <i>mustache</i> will escape any non-alphanumeric or HTML entities in the values it substitutes.
       To prevent this, use <code>{{{triple}}}</code> braces.
</script>

</div><div><!-- --- [red-module:node-red/delay] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="delay">
    <div class="form-row">
        <label for="node-input-delay-action"><i class="fa fa-tasks"></i> <span data-i18n="delay.action"></span></label>
        <select id="node-input-delay-action" style="width:270px !important">
            <option value="delay" data-i18n="delay.delaymsg"></option>
            <option value="rate" data-i18n="delay.limitrate"></option>
        </select>
    </div>

    <div id="delay-details">
        <div class="form-row">
            <label></label>
            <select id="node-input-delay-type" style="width:270px !important">
                <option value="delay" data-i18n="delay.delayfixed"></option>
                <option value="random" data-i18n="delay.randomdelay"></option>
                <option value="delayv" data-i18n="delay.delayvarmsg"></option>
            </select>
        </div>
        <div class="form-row" id="delay-details-for">
            <label for="node-input-timeout"><i class="fa fa-clock-o"></i> <span data-i18n="delay.for"></span></label>
            <input type="text" id="node-input-timeout" style="text-align:end; width:50px !important">
            <select id="node-input-timeoutUnits" style="width:200px !important">
              <option value="milliseconds" data-i18n="delay.milisecs"></option>
              <option value="seconds" data-i18n="delay.secs"></option>
              <option value="minutes" data-i18n="delay.mins"></option>
              <option value="hours" data-i18n="delay.hours"></option>
              <option value="days" data-i18n="delay.days"></option>
            </select>
        </div>
        <div id="random-details" class="form-row">
            <label for="node-input-randomFirst"><i class="fa fa-clock-o"></i> <span data-i18n="delay.between"></span></label>
            <input type="text" id="node-input-randomFirst" placeholder="" style="text-align:end; width:50px !important">
            &nbsp;<span data-i18n="delay.and"></span>&nbsp;
            <input type="text" id="node-input-randomLast" placeholder="" style="text-align:end; width:50px !important">
            <select id="node-input-randomUnits" style="width:140px !important">
              <option value="milliseconds" data-i18n="delay.milisecs"></option>
              <option value="seconds" data-i18n="delay.secs"></option>
              <option value="minutes" data-i18n="delay.mins"></option>
              <option value="hours" data-i18n="delay.hours"></option>
              <option value="days" data-i18n="delay.days"></option>
            </select>
        </div>
    </div>

    <div id="rate-details">
        <div class="form-row">
            <label></label>
            <select id="node-input-rate-type" style="width:270px !important">
                <option value="all" data-i18n="delay.limitall"></option>
                <option value="topic" data-i18n="delay.limittopic"></option>
            </select>
        </div>
        <div class="form-row">
            <label for="node-input-rate"><i class="fa fa-clock-o"></i> <span data-i18n="delay.rate"></span></label>
            <input type="text" id="node-input-rate" placeholder="1" style="text-align:end; width:40px !important">
            <label for="node-input-rateUnits"><span data-i18n="delay.msgper"></span></label>
            <input type="text" id="node-input-nbRateUnits" placeholder="1" style="text-align:end; width:40px !important">
            <select id="node-input-rateUnits" style="width:90px !important">
              <option value="second" data-i18n="delay.label.units.second.singular"></option>
              <option value="minute" data-i18n="delay.label.units.minute.singular"></option>
              <option value="hour" data-i18n="delay.label.units.hour.singular"></option>
              <option value="day" data-i18n="delay.label.units.day.singular"></option>
            </select>
        </div>
        <div class="form-row" id="rate-details-drop">
            <label></label><input style="width: 30px;" type="checkbox" id="node-input-drop"><label style="width: 250px;" for="node-input-drop" data-i18n="delay.dropmsg"></label>
        </div>
        <div class="form-row" id="rate-details-per-topic">
            <label></label>
            <select id="node-input-rate-topic-type" style="width:270px !important">
                <option value="queue" data-i18n="delay.fairqueue"></option>
                <option value="timed" data-i18n="delay.timedqueue"></option>
            </select>
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('delay',{
        category: 'function',
        color:"#E6E0F8",
        defaults: {
            name: {value:""},
            pauseType: {value:"delay", required:true},
            timeout: {value:"5", required:true, validate:function(v) { return RED.validators.number(v) && (v >= 0); }},
            timeoutUnits: {value:"seconds"},
            rate: {value:"1", required:true, validate:function(v) { return RED.validators.number(v) && (v >= 0); }},
            nbRateUnits: {value:"1", required:false, validate:RED.validators.regex(/\d+|/)},
            rateUnits: {value: "second"},
            randomFirst: {value:"1", required:true, validate:function(v) { return RED.validators.number(v) && (v >= 0); }},
            randomLast: {value:"5", required:true, validate:function(v) { return RED.validators.number(v) && (v >= 0); }},
            randomUnits: {value: "seconds"},
            drop: {value:false}
        },
        inputs:1,
        outputs:1,
        icon: "timer.svg",
        label: function() {
            if (this.name) {
                return this.name;
            }
            if (this.pauseType == "delayv") {
                return this._("delay.label.variable");
            } else if (this.pauseType == "delay") {
                var units = this.timeoutUnits ? this.timeoutUnits.charAt(0) : "s";
                if (this.timeoutUnits == "milliseconds") { units = "ms"; }
                return this._("delay.label.delay")+" "+this.timeout+units;
            } else if (this.pauseType == "random") {
                return this._("delay.label.random");
            } else {
                var rate = this.rate+" msg/"+(this.rateUnits ? (this.nbRateUnits > 1 ? this.nbRateUnits : '') + this.rateUnits.charAt(0) : "s");
                if (this.pauseType == "rate") {
                    return this._("delay.label.limit")+" "+rate;
                } else if (this.pauseType == "timed") {
                    return this._("delay.label.limitTopic")+" "+rate;
                } else {
                    return this._("delay.label.limitTopic")+" "+rate;
                }
            }
            //     var units = '';
            //     if (this.nbRateUnits > 1) {
            //         units = this.nbRateUnits + ' ' + this._("delay.label.units." + this.rateUnits + ".plural");
            //     } else {
            //         units = this._("delay.label.units." + this.rateUnits + ".singular");
            //     }
            //     return this.name || this.rate + " " + this._("delay.label.timed") + ' ' + units;
            // } else {
            //     var units = this.rateUnits ? (this.nbRateUnits > 1 ? this.nbRateUnits : '') + this.rateUnits.charAt(0) : "s";
            //     return this.name || this._("delay.label.queue")+" "+this.rate+" msg/"+units;
            // }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;
            $( "#node-input-timeout" ).spinner({min:1});
            $( "#node-input-rate" ).spinner({min:1});
            $( "#node-input-nbRateUnits" ).spinner({min:1});

            $( "#node-input-randomFirst" ).spinner({min:0});
            $( "#node-input-randomLast" ).spinner({min:1});

            $('.ui-spinner-button').on("click", function() {
                $(this).siblings('input').trigger("change");
            });

            $( "#node-input-nbRateUnits" ).on('change keyup', function() {
                var $this = $(this);
                var val = parseInt($this.val());
                var type = "singular";
                if (val > 1) {
                    type = "plural";
                }
                if ($this.attr("data-type") == type) {
                    return;
                }
                $this.attr("data-type", type);
                $("#node-input-rateUnits option").each(function () {
                    var $option = $(this);
                    var key = "delay.label.units." + $option.val() + "." + type;
                    $option.attr('data-i18n', 'node-red:' + key);
                    $option.html(node._(key));
                });
            });

            if (this.pauseType == "delay") {
                $("#node-input-delay-action").val('delay');
                $("#node-input-delay-type").val('delay');
            } else if (this.pauseType == "delayv") {
                $("#node-input-delay-action").val('delay');
                $("#node-input-delay-type").val('delayv');
            } else if (this.pauseType == "random") {
                $("#node-input-delay-action").val('delay');
                $("#node-input-delay-type").val('random');
            } else if (this.pauseType == "rate") {
                $("#node-input-delay-action").val('rate');
                $("#node-input-rate-type").val('all');
            } else if (this.pauseType == "queue") {
                $("#node-input-delay-action").val('rate');
                $("#node-input-rate-type").val('topic');
                $("#node-input-rate-topic-type").val('queue');
            } else if (this.pauseType == "timed") {
                $("#node-input-delay-action").val('rate');
                $("#node-input-rate-type").val('topic');
                $("#node-input-rate-topic-type").val('timed');
            }

            if (!this.timeoutUnits) {
                $("#node-input-timeoutUnits option").filter(function() {
                    return $(this).val() == 'seconds';
                }).attr('selected', true);
            }

            if (!this.randomUnits) {
                $("#node-input-randomUnits option").filter(function() {
                    return $(this).val() == 'seconds';
                }).attr('selected', true);
            }

            $("#node-input-delay-action").on("change",function() {
                if (this.value === "delay") {
                    $("#delay-details").show();
                    $("#rate-details").hide();
                } else if (this.value === "rate") {
                    $("#delay-details").hide();
                    $("#rate-details").show();
                }
            }).trigger("change");

            $("#node-input-delay-type").on("change", function() {
                if (this.value === "delay") {
                    $("#delay-details-for").show();
                    $("#random-details").hide();
                } else if (this.value === "delayv") {
                    $("#delay-details-for").show();
                    $("#random-details").hide();
                } else if (this.value === "random") {
                    $("#delay-details-for").hide();
                    $("#random-details").show();
                }
            }).trigger("change");

            $("#node-input-rate-type").on("change", function() {
                if (this.value === "all") {
                    $("#node-input-drop").attr('disabled',false).next().css("opacity",1)
                    $("#rate-details-per-topic").hide();
                } else if (this.value === "topic") {
                    $("#node-input-drop").prop('checked',true).attr('disabled',true).next().css("opacity",0.5)
                    $("#rate-details-per-topic").show();
                }
            }).trigger("change");
        },
        oneditsave: function() {
            var action = $("#node-input-delay-action").val();
            if (action === "delay") {
                this.pauseType = $("#node-input-delay-type").val();
            } else if (action === "rate") {
                action = $("#node-input-rate-type").val();
                if (action === "all") {
                    this.pauseType = "rate";
                } else {
                    this.pauseType = $("#node-input-rate-topic-type").val();
                }
            }
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="delay">
    <p>Delays each message passing through the node or limits the rate at which they can pass.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">delay <span class="property-type">number</span></dt>
        <dd>Sets the delay, in milliseconds, to be applied to the message. This
            option only applies if the node is configured to allow the message to
            override the configured default delay interval.</dd>
        <dt class="optional">reset</dt>
        <dd>If the received message has this property set to any value, all
            outstanding messages held by the node are cleared without being sent.</dd>
        <dt class="optional">flush</dt>
        <dd>If the received message has this property set to any value, all
            outstanding messages held by the node are sent immediately.</dd>
    </dl>
    <h3>Details</h3>
    <p>When configured to delay messages, the delay interval can be a fixed value,
        a random value within a range or dynamically set for each message.
        Each message is delayed independently of any other message, based on 
        the time of its arrival.
    </p>
    <p>When configured to rate limit messages, their delivery is spread across
        the configured time period. The status shows the number of messages currently in the queue.
        It can optionally discard intermediate messages as they arrive.</p>
    </p>
    <p>The rate limiting can be applied to all messages, or group them according to
        their <code>msg.topic</code> value. When grouping, intermerdiate messages are
        automatically dropped. At each time interval, the node can either release
        the most recent message for all topics, or release the most recent message
        for the next topic.
    </p>
</script>

</div><div><!-- --- [red-module:node-red/trigger] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="trigger">
    <div class="form-row">
        <label data-i18n="trigger.send" for="node-input-op1"></label>
        <input type="hidden" id="node-input-op1type">
        <input style="width:70%" type="text" id="node-input-op1" placeholder="1">
    </div>
    <div class="form-row">
        <label data-i18n="trigger.then"></label>
        <select id="node-then-type" style="width:70%;">
            <option value="block" data-i18n="trigger.wait-reset"></option>
            <option value="wait" data-i18n="trigger.wait-for"></option>
            <option value="loop" data-i18n="trigger.wait-loop"></option>
        </select>
    </div>
    <div class="form-row node-type-duration">
        <label></label>
        <input type="text" id="node-input-duration" style="text-align:end; width:70px !important">
        <select id="node-input-units" style="width:140px !important">
            <option value="ms" data-i18n="trigger.duration.ms"></option>
            <option value="s" data-i18n="trigger.duration.s"></option>
            <option value="min" data-i18n="trigger.duration.m"></option>
            <option value="hr" data-i18n="trigger.duration.h"></option>
        </select>
    </div>
    <div class="form-row node-type-wait">
    <label></label>
        <input type="checkbox" id="node-input-extend" style="margin-left:0px; vertical-align:top; width:auto !important;"> <label style="width:auto !important;" for="node-input-extend" data-i18n="trigger.extend"></label>
    </div>
    <div class="form-row node-type-override">
    <label></label>
        <input type="checkbox" id="node-input-overrideDelay" style="margin-left:0px; vertical-align:top; width:auto !important;"> <label style="width:auto !important;" for="node-input-overrideDelay" data-i18n="trigger.override"></label>
    </div>
    <div class="form-row node-type-wait">
        <label data-i18n="trigger.then-send"></label>
        <input type="hidden" id="node-input-op2type">
        <input style="width:70%" type="text" id="node-input-op2" placeholder="0">
    </div>
    <div class="form-row" id="node-second-output">
        <label></label>
            <input type="checkbox" id="node-input-second" style="margin-left: 0px; vertical-align: top; width: auto !important;"> <label style="width:auto !important;" for="node-input-second" data-i18n="trigger.second"></label>
        </div>
    <div class="form-row">
        <label data-i18n="trigger.label.reset" style="width:auto"></label>
        <div style="display:inline-block; width:70%;vertical-align:top">
        <ul>
            <li data-i18n="trigger.label.resetMessage"></li>
            <li><span data-i18n="trigger.label.resetPayload"></span> <input type="text" id="node-input-reset" style="width:150px" data-i18n="[placeholder]trigger.label.resetprompt"></li>
        </ul>
    </div>
    <br/>
    <div class="form-row">
        <label data-i18n="trigger.for" for="node-input-bytopic"></label>
        <select id="node-input-bytopic" style="width:120px;">
            <option value="all" data-i18n="trigger.alltopics"></option>
            <option value="topic" data-i18n="trigger.bytopics"></option>
        </select>
        <span class="form-row" id="node-stream-topic">
            <input type="text" id="node-input-topic" style="width:46%;"/>
        </span>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name"></input>
        <input type="hidden" id="node-input-outputs" value="1">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('trigger',{
        category: 'function',
        color:"#E6E0F8",
        defaults: {
            name: {value:""},
            op1: {value:"1", validate: RED.validators.typedInput("op1type")},
            op2: {value:"0", validate: RED.validators.typedInput("op2type")},
            op1type: {value:"val"},
            op2type: {value:"val"},
            duration: {value:"250",required:true,validate:RED.validators.number()},
            extend: {value:"false"},
            overrideDelay: {value:"false"},
            units: {value:"ms"},
            reset: {value:""},
            bytopic: {value:"all"},
            topic: {value:"topic",required:true},
            outputs: {value:1}
        },
        inputs:1,
        outputs:1,
        icon: "trigger.svg",
        label: function() {
            if (this.duration > 0) {
                return this.name|| this._("trigger.label.trigger")+" "+this.duration+this.units;
            }
            if (this.duration < 0) {
                return this.name|| this._("trigger.label.trigger-loop")+" "+(this.duration * -1)+this.units;
            }
            else {
                return this.name|| this._("trigger.label.trigger-block");
            }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var that = this;
            if (this.topic === undefined) { $("#node-input-topic").val("topic"); }
            $("#node-input-topic").typedInput({default:'msg',types:['msg']});
            $("#node-input-bytopic").on("change", function() {
                if ($("#node-input-bytopic").val() === "all") {
                    $("#node-stream-topic").hide();
                } else {
                    $("#node-stream-topic").show();
                }
            });

            if (this.outputs == 2) { $("#node-input-second").prop('checked', true) }
            else { $("#node-input-second").prop('checked', false) }

            $("#node-input-second").change(function() {
                if ($("#node-input-second").is(":checked")) {
                    $("#node-input-outputs").val(2);
                }
                else  {
                    $("#node-input-outputs").val(1);
                }
            });
            $("#node-then-type").on("change", function() {
                if ($(this).val() == "block") {
                    $(".node-type-wait").hide();
                    $(".node-type-override").hide();
                    $(".node-type-duration").hide();
                    $("#node-second-output").hide();
                    $("#node-input-second").prop('checked', false);
                    $("#node-input-outputs").val(1);
                }
                else if ($(this).val() == "loop") {
                    if ($("#node-input-duration").val() == 0) { $("#node-input-duration").val(250); }
                    $(".node-type-wait").hide();
                    $(".node-type-override").show();
                    $(".node-type-duration").show();
                    $("#node-second-output").hide();
                    $("#node-input-second").prop('checked', false);
                    $("#node-input-outputs").val(1);
                } else {
                    if ($("#node-input-duration").val() == 0) { $("#node-input-duration").val(250); }
                    $(".node-type-wait").show();
                    $(".node-type-override").show();
                    $(".node-type-duration").show();
                    $("#node-second-output").show();
                }
            });

            if (this.op1type === 'val') {
                $("#node-input-op1type").val('str');
            }
            if (this.op2type === 'val') {
                $("#node-input-op2type").val('str');
            }

            var optionNothing = {value:"nul",label:this._("trigger.output.nothing"),hasValue:false};
            var optionPayload = {value:"pay",label:this._("trigger.output.existing"),hasValue:false};
            var optionOriginalPayload = {value:"pay",label:this._("trigger.output.original"),hasValue:false};
            var optionLatestPayload = {value:"payl",label:this._("trigger.output.latest"),hasValue:false};

            $("#node-input-op1").typedInput({
                default: 'str',
                typeField: $("#node-input-op1type"),
                types:['flow','global','str','num','bool','json','bin','date','env',
                    optionPayload,
                    optionNothing
                ]
            });
            $("#node-input-op2").typedInput({
                default: 'str',
                typeField: $("#node-input-op2type"),
                types:['flow','global','str','num','bool','json','bin','date','env',
                    optionOriginalPayload,
                    optionLatestPayload,
                    optionNothing
                ]
            });

            if (this.bytopic === undefined) {
                $("#node-input-bytopic").val("all");
            }

            if (this.duration == "0") {
                $("#node-then-type").val("block");
            }
            else if ((this.duration * 1) < 0) {
                $("#node-then-type").val("loop");
                $("#node-input-duration").val(this.duration*-1);
            } else {
                $("#node-then-type").val("wait");
            }
            $("#node-then-type").trigger("change");

            if (this.extend === "true" || this.extend === true) {
                $("#node-input-extend").prop("checked",true);
            } else {
                $("#node-input-extend").prop("checked",false);
            }
            if (this.overrideDelay === "true" || this.overrideDelay === true) {
                $("#node-input-overrideDelay").prop("checked",true);
            } else {
                $("#node-input-overrideDelay").prop("checked",false);
            }
        },
        oneditsave: function() {
            if ($("#node-then-type").val() == "block") {
                $("#node-input-duration").val("0");
            }
            if ($("#node-then-type").val() == "loop") {
                $("#node-input-duration").val($("#node-input-duration").val() * -1);
            }
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="trigger">
    <p>When triggered, can send a message, and then optionally a second message, unless extended or reset.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">delay <span class="property-type">number</span></dt>
        <dd>Sets the delay, in milliseconds, to be applied to the message. This option only applies if the node is configured to allow the message to override the configured default delay interval.</dd>
        <dt class="optional">reset</dt>
        <dd>If a message is received with this property, any timeout or repeat
        currently in progress will be cleared and no message triggered.</dd>
    </dl>

    <h3>Details</h3>
    <p>This node can be used to create a timeout within a flow. By default, when
    it receives a message, it sends on a message with a <code>payload</code> of <code>1</code>.
    It then waits 250ms before sending a second message with a <code>payload</code> of <code>0</code>.
    This could be used, for example, to blink an LED attached to a Raspberry Pi GPIO pin.</p>
    <p>The payloads of each message sent can be configured to a variety of values, including
    the option to not send anything. For example, setting the initial message to <i>nothing</i> and
    selecting the option to extend the timer with each received message, the node will
    act as a watchdog timer; only sending a message if nothing is received within the
    set interval.</p>
    <p>If set to a <i>string</i> type, the node supports the mustache template syntax.</p>
    <p>The delay between sending messages can be overridden by <code>msg.delay</code> if that option is enabled in the node. The value must be provided in milliseconds.</p>
    <p>If the node receives a message with a <code>reset</code> property, or a <code>payload</code>
    that matches that configured in the node, any timeout or repeat currently in
    progress will be cleared and no message triggered.</p>
    <p>The node can be configured to resend a message at a regular interval until it
    is reset by a received message.</p>
    <p>Optionally, the node can be configured to treat messages as if they are separate streams,
    using a msg property to identify each stream. Default <code>msg.topic</code>.</p>
    <p>The status indicates the node is currently active. If multiple streams are used the status
    indicates the number of streams being held.</p>
</script>

</div><div><!-- --- [red-module:node-red/exec] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="exec">
    <div class="form-row">
        <label for="node-input-command"><i class="fa fa-file"></i> <span data-i18n="exec.label.command"></span></label>
        <input type="text" id="node-input-command" data-i18n="[placeholder]exec.label.command">
    </div>
    <div class="form-row">
        <label><i class="fa fa-plus"></i> <span data-i18n="exec.label.append"></span></label>
        <input type="checkbox" id="node-input-addpay-cb" style="display:inline-block; width:auto;">
        <input type="text" id="node-input-addpay" style="margin-left: 5px; width:160px;">
    </div>
    <div class="form-row">
        <label for="node-input-append"> </label>
        <input type="text" id="node-input-append" data-i18n="[placeholder]exec.placeholder.extraparams">
    </div>
    <div class="form-row">
        <label><i class="fa fa-sign-out"></i> <span data-i18n="exec.label.return"></span></label>
        <select type="text" id="node-input-useSpawn" style="width:70%">
            <option value="false" data-i18n="exec.opt.exec"></option>
            <option value="true" data-i18n="exec.opt.spawn"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-timer"><i class="fa fa-clock-o"></i> <span data-i18n="exec.label.timeout"></span></label>
        <input type="text" id="node-input-timer" style="width:65px;" data-i18n="[placeholder]exec.label.timeoutplace">
        <span data-i18n="exec.label.seconds"></span>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('exec',{
        category: 'function',
        color:"darksalmon",
        defaults: {
            command: {value:""},
            addpay: {value:""},
            append: {value:""},
            useSpawn: {value:"false"},
            timer: {value:""},
            oldrc: {value:false},
            name: {value:""}
        },
        inputs:1,
        outputs:3,
        outputLabels: function(i) {
            return [
                this._("exec.label.stdout"),
                this._("exec.label.stderr"),
                this._("exec.label.retcode")
            ][i];
        },
        icon: "cog.svg",
        label: function() {
            return this.name||this.command.replace(/\\n /g,"\\\\n ")||(this.useSpawn=="true"?this._("exec.spawn"):this._("exec.exec"));
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            if ($("#node-input-useSpawn").val() === null) {
                $("#node-input-useSpawn").val(this.useSpawn.toString());
            }
            $("#node-input-addpay-cb").prop("checked", this.addpay === true || (this.addpay !== false && this.addpay !== ""))
            var addpayValue = (this.addpay === true)?"payload":((this.addpay === false || this.addpay === "")?"payload":this.addpay);
            $("#node-input-addpay-cb").on("change", function(evt) {
                $("#node-input-addpay").typedInput("disable",!$("#node-input-addpay-cb").prop("checked"));
            });

            $("#node-input-addpay").val(addpayValue);
            $("#node-input-addpay").typedInput({
                default: "msg",
                types: ["msg"]
            });

            $("#node-input-addpay-cb").trigger("change")
        },
        oneditsave: function() {
            if (!$("#node-input-addpay-cb").prop("checked")) {
                $("#node-input-addpay").val("");
            }
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="exec">
    <p>Runs a system command and returns its output.</p>
    <p>The node can be configured to either wait until the command completes, or to
    send its output as the command generates it.</p>
    <p>The command that is run can be configured in the node or provided by the received
    message.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">payload <span class="property-type">string</span></dt>
        <dd>if configured to do so, will be appended to the executed command.</dd>
        <dt class="optional">kill <span class="property-type">string</span></dt>
        <dd>the type of kill signal to send an existing exec node process.</dd>
        <dt class="optional">pid <span class="property-type">number|string</span></dt>
        <dd>the process ID of an existing exec node process to kill.</dd>
    </dl>

    <h3>Outputs</h3>
    <ol class="node-ports">
        <li>Standard output
            <dl class="message-properties">
                <dt>payload <span class="property-type">string</span></dt>
                <dd>the standard output of the command.</dd>
            </dl>
            <dl class="message-properties">
                <dt>rc <span class="property-type">object</span></dt>
                <dd>exec mode only, a copy of the return code object (also available on port 3)</dd>
            </dl>
        </li>
        <li>Standard error
            <dl class="message-properties">
                <dt>payload <span class="property-type">string</span></dt>
                <dd>the standard error of the command.</dd>
            </dl>
            <dl class="message-properties">
                <dt>rc <span class="property-type">object</span></dt>
                <dd>exec mode only, a copy of the return code object (also available on port 3)</dd>
            </dl>
        </li>
        <li>Return code
            <dl class="message-properties">
                <dt>payload <span class="property-type">object</span></dt>
                <dd>an object containing the return code, and possibly <code>message</code>, <code>signal</code> properties.</dd>
            </dl>
        </li>
    </ol>
    <h3>Details</h3>
    <p>By default uses the <code>exec</code> system call which calls the command, waits for it to complete, and then
    returns the output. For example a successful command should have a return code of <code>{ code: 0 }</code>.</p>
    <p>Optionally can use <code>spawn</code> instead, which returns the output from stdout and stderr
    as the command runs, usually one line at a time. On completion it then returns an object
    on the 3rd port. For example, a successful command should return <code>{ code: 0 }</code>.</p>
    <p>Errors may return extra information on the 3rd port <code>msg.payload</code>, such as a <code>message</code> string,
    <code>signal</code> string.</p>
    <p>The command that is run is defined within the node, with an option to append <code>msg.payload</code> and a further set of parameters.</p>
    <p>Commands or parameters with spaces should be enclosed in quotes - <code>"This is a single parameter"</code></p>
    <p>The returned <code>payload</code> is usually a <i>string</i>, unless non-UTF8 characters are detected, in which
    case it is a <i>buffer</i>.</p>
    <p>The node&apos;s status icon and PID will be visible while the node is active. Changes to this can be read by the <code>Status</code> node.</p>
    <h4>Killing processes</h4>
    <p>Sending <code>msg.kill</code> will kill a single active process. <code>msg.kill</code> should be a string containing
    the type of signal to be sent, for example, <code>SIGINT</code>, <code>SIGQUIT</code> or <code>SIGHUP</code>.
    Defaults to <code>SIGTERM</code> if set to an empty string.</p>
    <p>If the node has more than one process running then <code>msg.pid</code> must also be set with the value of the PID to be killed.</p>
    <p>If a value is provided in the <code>Timeout</code> field then, if the process has not completed when the specified number of seconds has elapsed, the process will be killed automatically</p>
    <p>Tip: if running a Python app you may need to use the <code>-u</code> parameter to stop the output being buffered.</p>
</script>

</div><div><!-- --- [red-module:node-red/tls] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="tls-config">
    <div class="form-row" class="hide" id="node-config-row-uselocalfiles">
        <input type="checkbox" id="node-config-input-uselocalfiles" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-config-input-uselocalfiles" style="width: 70%;"><span data-i18n="tls.label.use-local-files"></label>
    </div>
    <div class="form-row">
        <label style="width: 120px;"><i class="fa fa-file-text-o"></i> <span data-i18n="tls.label.cert"></span></label>
        <span class="tls-config-input-data">
            <label class="red-ui-button" for="node-config-input-certfile"><i class="fa fa-upload"></i> <span data-i18n="tls.label.upload"></span></label>
            <input class="hide" type="file" id="node-config-input-certfile">
            <span id="tls-config-certname" style="width: calc(100% - 280px); overflow: hidden; line-height:34px; height:34px; text-overflow: ellipsis; white-space: nowrap; display: inline-block; vertical-align: middle;"> </span>
            <button class="red-ui-button red-ui-button-small" id="tls-config-button-cert-clear" style="margin-left: 10px"><i class="fa fa-times"></i></button>
        </span>
        <input type="hidden" id="node-config-input-certname">
        <input type="hidden" id="node-config-input-certdata">
        <input class="hide tls-config-input-path" style="width: calc(100% - 170px);" type="text" id="node-config-input-cert" data-i18n="[placeholder]tls.placeholder.cert">
    </div>
    <div class="form-row">
        <label style="width: 120px;" for="node-config-input-key"><i class="fa fa-file-text-o"></i> <span data-i18n="tls.label.key"></span></label>
        <span class="tls-config-input-data">
            <label class="red-ui-button" for="node-config-input-keyfile"><i class="fa fa-upload"></i> <span data-i18n="tls.label.upload"></span></label>
            <input class="hide" type="file" id="node-config-input-keyfile">
            <span id="tls-config-keyname" style="width: calc(100% - 280px); overflow: hidden; line-height:34px; height:34px; text-overflow: ellipsis; white-space: nowrap; display: inline-block; vertical-align: middle;"> </span>
            <button class="red-ui-button red-ui-button-small" id="tls-config-button-key-clear" style="margin-left: 10px"><i class="fa fa-times"></i></button>
        </span>
        <input type="hidden" id="node-config-input-keyname">
        <input type="hidden" id="node-config-input-keydata">
        <input class="hide tls-config-input-path" style="width: calc(100% - 170px);" type="text" id="node-config-input-key" data-i18n="[placeholder]tls.placeholder.key">
    </div>
    <div class="form-row">
        <label style="width: 100px; margin-left: 20px;" for="node-config-input-passphrase"> <span data-i18n="tls.label.passphrase"></span></label>
        <input type="password" style="width: calc(100% - 170px);" id="node-config-input-passphrase" data-i18n="[placeholder]tls.placeholder.passphrase">
    </div>
    <div class="form-row">
        <label style="width: 120px;" for="node-config-input-ca"><i class="fa fa-file-text-o"></i> <span data-i18n="tls.label.ca"></span></label>
        <span class="tls-config-input-data">
            <label class="red-ui-button" for="node-config-input-cafile"><i class="fa fa-upload"></i> <span data-i18n="tls.label.upload"></span></label>
            <input class="hide" type="file" title=" " id="node-config-input-cafile">
            <span id="tls-config-caname" style="width: calc(100% - 280px); overflow: hidden; line-height:34px; height:34px; text-overflow: ellipsis; white-space: nowrap; display: inline-block; vertical-align: middle;"> </span>
            <button class="red-ui-button red-ui-button-small" id="tls-config-button-ca-clear" style="margin-left: 10px"><i class="fa fa-times"></i></button>
        </span>
        <input type="hidden" id="node-config-input-caname">
        <input type="hidden" id="node-config-input-cadata">
        <input class="hide tls-config-input-path" style="width: calc(100% - 170px);" type="text" id="node-config-input-ca" data-i18n="[placeholder]tls.placeholder.ca">
    </div>
    <div class="form-row">
        <input type="checkbox" id="node-config-input-verifyservercert" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-config-input-verifyservercert" style="width: calc(100% - 170px);" data-i18n="tls.label.verify-server-cert"></label>
    </div>
    <div class="form-row">
        <label style="width: 120px;" for="node-config-input-servername"><i class="fa fa-server"></i> <span data-i18n="tls.label.servername"></span></label>
        <input style="width: calc(100% - 170px);" type="text" id="node-config-input-servername" data-i18n="[placeholder]tls.placeholder.servername">
    </div>
    <hr>
    <div class="form-row">
        <label style="width: 120px;" for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input style="width: calc(100% - 170px);" type="text" id="node-config-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('tls-config',{
        category: 'config',
        defaults: {
            name: {value:""},
            cert: {value:"", validate: function(v) {
                var currentKey = $("#node-config-input-key").val();
                if (currentKey === undefined) {
                    currentKey = this.key;
                }
                return currentKey === '' || v != '';
            }},
            key: {value:"", validate: function(v) {
                var currentCert = $("#node-config-input-cert").val();
                if (currentCert === undefined) {
                    currentCert = this.cert;
                }
                return currentCert === '' || v != '';
            }},
            ca: {value:""},
            certname: {value:""},
            keyname: {value:""},
            caname: {value:""},
            servername: {value:""},
            verifyservercert: {value: true}
        },
        credentials: {
            certdata: {type:"text"},
            keydata: {type:"text"},
            cadata: {type:"text"},
            passphrase: {type:"password"}
        },
        label: function() {
            return this.name || this._("tls.tls");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            function updateFileUpload() {
                if ($("#node-config-input-uselocalfiles").is(':checked')) {
                    $(".tls-config-input-path").show();
                    $(".tls-config-input-data").hide();
                } else {
                    $(".tls-config-input-data").show();
                    $(".tls-config-input-path").hide();
                }
            }
            $("#node-config-input-uselocalfiles").on("click",function() {
                updateFileUpload();
            });

            function saveFile(property, file) {
                var dataInputId = "#node-config-input-"+property+"data";
                var filenameInputId = "#node-config-input-"+property+"name";
                var filename = file.name;
                var reader = new FileReader();
                reader.onload = function(event) {
                    $("#tls-config-"+property+"name").text(filename);
                    $(filenameInputId).val(filename);
                    $(dataInputId).val(event.target.result);
                }
                reader.readAsText(file,"UTF-8");
            }
            $("#node-config-input-certfile" ).on("change", function() {
                saveFile("cert", this.files[0]);
            });
            $("#node-config-input-keyfile" ).on("change", function() {
                saveFile("key", this.files[0]);
            });
            $("#node-config-input-cafile" ).on("change", function() {
                saveFile("ca", this.files[0]);
            });

            function clearNameData(prop) {
                $("#tls-config-"+prop+"name").text("");
                $("#node-config-input-"+prop+"data").val("");
                $("#node-config-input-"+prop+"name").val("");
            }
            $("#tls-config-button-cert-clear").on("click", function() {
                clearNameData("cert");
            });
            $("#tls-config-button-key-clear").on("click", function() {
                clearNameData("key");
            });
            $("#tls-config-button-ca-clear").on("click", function() {
                clearNameData("ca");
            });

            if (RED.settings.tlsConfigDisableLocalFiles) {
                $("#node-config-row-uselocalfiles").hide();
            } else {
                $("#node-config-row-uselocalfiles").show();
            }
            // in case paths were set from old TLS config
            if(this.cert || this.key || this.ca) {
                $("#node-config-input-uselocalfiles").prop('checked',true);
            }
            $("#tls-config-certname").text(this.certname);
            $("#tls-config-keyname").text(this.keyname);
            $("#tls-config-caname").text(this.caname);
            updateFileUpload();
        },
        oneditsave: function() {
            if ($("#node-config-input-uselocalfiles").is(':checked')) {
                clearNameData("ca");
                clearNameData("cert");
                clearNameData("key");
            } else {
                $("#node-config-input-ca").val("");
                $("#node-config-input-cert").val("");
                $("#node-config-input-key").val("");
            }
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="tls-config">
    <p>Configuration options for TLS connections.</p>
</script>

</div><div><!-- --- [red-module:node-red/httpproxy] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="http proxy">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-config-input-name">
    </div>
    <div class="form-row">
        <label for="node-config-input-url"><i class="fa fa-globe"></i> <span data-i18n="httpin.label.url"></span></label>
        <input type="text" id="node-config-input-url" placeholder="http://hostname:port">
    </div>
    <div class="form-row">
        <input type="checkbox" id="node-config-input-useAuth" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-config-input-useAuth" style="width: 70%;"><span data-i18n="httpin.use-proxyauth"></span></label>
        <div style="margin-left: 20px" class="node-config-input-useAuth-row hide">
            <div class="form-row">
                <label for="node-config-input-username"><i class="fa fa-user"></i> <span data-i18n="common.label.username"></span></label>
                <input type="text" id="node-config-input-username">
            </div>
            <div class="form-row">
                <label for="node-config-input-password"><i class="fa fa-lock"></i> <span data-i18n="common.label.password"></span></label>
                <input type="password" id="node-config-input-password">
            </div>
        </div>
    </div>
    <div class="form-row" style="margin-bottom:0;">
        <label><i class="fa fa-list"></i> <span data-i18n="httpin.noproxy-hosts"></span></label>
    </div>
    <div class="form-row node-config-input-noproxy-container-row">
        <ol id="node-config-input-noproxy-container"></ol>
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('http proxy', {
        category: 'config',
        defaults: {
            name: {value:''},
            url: {value:'',validate:function(v) { return (v && (v.indexOf('://') !== -1) && (v.trim().indexOf('http') === 0)); }},
            noproxy: {value:[]}
        },
        credentials: {
            username: {type:'text'},
            password: {type:'password'}
        },
        label: function() {
            return this.name || this.url || ('http proxy:' + this.id);
        },
        oneditprepare: function() {
            $('#node-config-input-useAuth').on("change", function() {
                if ($(this).is(":checked")) {
                    $('.node-config-input-useAuth-row').show();
                } else {
                    $('.node-config-input-useAuth-row').hide();
                    $('#node-config-input-username').val('');
                    $('#node-config-input-password').val('');
                }
            });
            if (this.credentials.username || this.credentials.has_password) {
                $('#node-config-input-useAuth').prop('checked', true);
            } else {
                $('#node-config-input-useAuth').prop('checked', false);
            }
            $('#node-config-input-useAuth').change();

            var hostList = $('#node-config-input-noproxy-container')
                .css({'min-height':'150px','min-width':'450px'})
                .editableList({
                    addItem: function(container, index, data) {
                        var row = $('<div/>')
                            .css({overflow: 'hidden',whiteSpace: 'nowrap'})
                            .appendTo(container);

                        var hostField = $('<input/>',{class:'node-config-input-host',type:'text',placeholder:'hostname'})
                            .css({width:'100%'})
                            .appendTo(row);
                        if (data.host) {
                            hostField.val(data.host);
                        }
                    },
                    removable: true
                });
            if (this.noproxy) {
                for (var i in this.noproxy) {
                    hostList.editableList('addItem', {host:this.noproxy[i]});
                }
            }
            if (hostList.editableList('items').length == 0) {
                hostList.editableList('addItem', {host:''});
            }
        },
        oneditsave: function() {
            var hosts = $('#node-config-input-noproxy-container').editableList('items');
            var node = this;
            node.noproxy = [];
            hosts.each(function(i) {
                var host = $(this).find('.node-config-input-host').val().trim();
                if (host) {
                    node.noproxy.push(host);
                }
            });
        },
        oneditresize: function(size) {
            var rows = $('#node-config-dialog-edit-form>div:not(.node-config-input-noproxy-container-row)');
            var height = size.height;
            for (var i = 0; i < rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }

            var editorRow = $('#node-config-dialog-edit-form>div.node-config-input-noproxy-container-row');
            height -= (parseInt(editorRow.css('margin-top')) + parseInt(editorRow.css('margin-bottom')));
            $('#node-config-input-noproxy-container').editableList('height',height);
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="http proxy">
    <p>Configuration options for HTTP proxy.</p>

    <h3>Details</h3>
    <p>When accessing to the host in the ignored host list, no proxy will be used.</p>
</script>

</div><div><!-- --- [red-module:node-red/mqtt] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<style>

    .mqtt-form-row-cols2 > input.mqtt-form-row-col1 {
        width: calc(35% - 75px);
    }
    .mqtt-form-row-cols2 > select.mqtt-form-row-col1 {
        width: calc(35% - 75px);
    }

    .mqtt-form-row-cols2 > label.mqtt-form-row-col2 {
        width: 100px;
        margin-left: 42px;
        display: inline-block;
    }
    .mqtt-form-row-cols2 > input.mqtt-form-row-col2 {
        width: calc(35% - 75px);
        display: inline-block;
    }
    .mqtt-form-row-cols2 > select.mqtt-form-row-col2 {
        width: calc(35% - 75px);
        display: inline-block;
    }
    .form-row.mqtt5-out > label {
        width: 130px;
    }
    .form-row.mqtt-flags-row > label {
        vertical-align: top;
    }
    .form-row.mqtt-flags-row > .mqtt-flags {
        display: inline-block;
        width: 70%
    }

    .form-row.mqtt-flags-row > .mqtt-flags > .mqtt-flag > label {
        display: block;
        width: 100%;
    }
    .form-row.mqtt-flags-row > .mqtt-flags > .mqtt-flag > label > input {
        position: relative;
        vertical-align: bottom;
        top: -2px;
        width: 15px;
        height: 15px;
    }
</style>

<script type="text/html" data-template-name="mqtt in">
    <div class="form-row">
        <label for="node-input-broker"><i class="fa fa-globe"></i> <span data-i18n="mqtt.label.broker"></span></label>
        <input type="text" id="node-input-broker">
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> <span data-i18n="common.label.topic"></span></label>
        <input type="text" id="node-input-topic" data-i18n="[placeholder]common.label.topic">
    </div>
    <div class="form-row">
        <label for="node-input-qos"><i class="fa fa-empire"></i> <span data-i18n="mqtt.label.qos"></span></label>
        <select id="node-input-qos" style="width:125px !important">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-datatype"><i class="fa fa-sign-out"></i> <span data-i18n="mqtt.label.output"></span></label>
        <select id="node-input-datatype" style="width:70%;">
            <option value="auto" data-i18n="mqtt.output.auto"></option>
            <option value="buffer" data-i18n="mqtt.output.buffer"></option>
            <option value="utf8" data-i18n="mqtt.output.string"></option>
            <option value="json" data-i18n="mqtt.output.json"></option>
            <option value="base64" data-i18n="mqtt.output.base64"></option>
        </select>
    </div>
    <div class="form-row mqtt-flags-row mqtt5">
        <label for="node-input-nl" ><i class="fa fa-flag"></i> <span data-i18n="mqtt.label.flags">Flags</span></label>
        <div class="mqtt-flags">
            <div class="mqtt-flag">
                <label for="node-input-nl">
                    <input type="checkbox" id="node-input-nl">
                    <span data-i18n="mqtt.label.nl"></span>
                </label>
            </div>
            <div class="mqtt-flag">
                <label for="node-input-rap">
                    <input type="checkbox" id="node-input-rap">
                    <span data-i18n="mqtt.label.rap"></span>
                </label>
            </div>
        </div>
    </div>
    <div class="form-row mqtt5">
        <label for="node-input-rh" style="width:100%"><i class="fa fa-tag"></i> <span data-i18n="mqtt.label.rh"></span></label>
        <select id="node-input-rh" style="margin-left: 104px; width: 70%">
            <option value="0" data-i18n="mqtt.label.rh0"></option>
            <option value="1" data-i18n="mqtt.label.rh1"></option>
            <option value="2" data-i18n="mqtt.label.rh2"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/html" data-template-name="mqtt out">
    <div class="form-row">
        <label for="node-input-broker"><i class="fa fa-globe"></i> <span data-i18n="mqtt.label.broker"></span></label>
        <input type="text" id="node-input-broker">
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> <span data-i18n="common.label.topic"></span></label>
        <input type="text" id="node-input-topic" data-i18n="[placeholder]common.label.topic">
    </div>

    <div class="form-row mqtt-form-row-cols2">
        <label for="node-input-qos" class="mqtt-form-row-col1"><i class="fa fa-empire"></i> <span data-i18n="mqtt.label.qos"></span></label>
        <select id="node-input-qos" class="mqtt-form-row-col1">
            <option value=""></option>
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
        </select>

        <label for="node-input-retain" class="mqtt-form-row-col2"><i class="fa fa-history"></i> <span data-i18n="mqtt.retain"></span></label>
        <select id="node-input-retain" class="mqtt-form-row-col2" >
            <option value=""></option>
            <option value="false" data-i18n="mqtt.false"></option>
            <option value="true" data-i18n="mqtt.true"></option>
        </select>
    </div>
    <div class="form-row mqtt5 mqtt5-out">
        <label for="node-input-userProps"><span data-i18n="mqtt.label.userProperties"></span></label>
        <input type="text" id="node-input-userProps" style="width: calc(100% - 166px);">
    </div>
    <div class="form-row mqtt5 mqtt5-out">
        <label for="node-input-respTopic"><span data-i18n="mqtt.label.responseTopic"></span></label>
        <input type="text" id="node-input-respTopic" style="width: calc(100% - 166px);">
    </div>
    <div class="form-row mqtt5 mqtt5-out">
        <label for="node-input-correl"><span data-i18n="mqtt.label.correlationData"></span></label>
        <input type="text" id="node-input-correl" style="width: calc(100% - 166px);">
    </div>
    <div class="form-row mqtt5 mqtt5-out">
        <label for="node-input-contentType"><span data-i18n="mqtt.label.contentType"></span></label>
        <input type="text" id="node-input-contentType" style="width: calc(100% - 166px);">
    </div>

    <div class="form-row mqtt-form-row-cols2 mqtt5 mqtt5-out">
        <label for="node-input-expiry" class="mqtt-form-row-col1"><span data-i18n="mqtt.label.expiry"></span></label>
        <input id="node-input-expiry"  style="width: calc(100% - 166px);" class="mqtt-form-row-col1" >
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-tips"><span data-i18n="mqtt.tip"></span></div>
</script>

<script type="text/html" data-template-name="mqtt-broker">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-config-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row">
        <ul style="min-width: 600px; margin-bottom: 20px;" id="node-config-mqtt-broker-tabs"></ul>
    </div>
    <div id="node-config-mqtt-broker-tabs-content" style="min-height:150px;">
        <div id="mqtt-broker-tab-connection" style="display:none">
            <div class="form-row node-input-broker">
                <label for="node-config-input-broker"><i class="fa fa-globe"></i> <span data-i18n="mqtt.label.broker"></span></label>
                <input type="text" id="node-config-input-broker" style="width: calc(100% - 300px);" data-i18n="[placeholder]mqtt.label.example">
                <label for="node-config-input-port" style="margin-left:20px; width:43px; "> <span data-i18n="mqtt.label.port"></span></label>
                <input type="text" id="node-config-input-port" data-i18n="[placeholder]mqtt.label.port" style="width:55px">
            </div>
            <div class="form-row" style="height: 34px;">
                <input type="checkbox" id="node-config-input-usetls" style="height: 34px; margin: 0 5px 0 104px; display: inline-block; width: auto; vertical-align: top;">
                <label for="node-config-input-usetls" style="width: 100px; line-height: 34px;"><span data-i18n="mqtt.label.use-tls"></span></label>
                <span id="node-config-row-tls" class="hide"><input style="width: 320px;" type="text" id="node-config-input-tls"></span>
            </div>
            <div class="form-row">
                <label for="node-config-input-protocolVersion"><i class="fa fa-cog"></i> <span data-i18n="mqtt.label.protocolVersion"></span></label>
                <select id="node-config-input-protocolVersion" style="width:70%;">
                    <option value="3" data-i18n="mqtt.label.protocolVersion3"></option>
                    <option value="4" data-i18n="mqtt.label.protocolVersion4"></option>
                    <option value="5" data-i18n="mqtt.label.protocolVersion5"></option>
                </select>
            </div>
            <div class="form-row">
                <label for="node-config-input-clientid"><i class="fa fa-tag"></i> <span data-i18n="mqtt.label.clientid"></span></label>
                <input type="text" id="node-config-input-clientid" data-i18n="[placeholder]mqtt.placeholder.clientid">
            </div>
            <div class="form-row">
                <label for="node-config-input-keepalive"><i class="fa fa-heartbeat"></i> <span data-i18n="mqtt.label.keepalive"></span></label>
                <input type="number" min="0" id="node-config-input-keepalive" style="width: 100px">
            </div>
            <div class="form-row" style="margin-bottom:0">
                <label style="vertical-align:top;"><i class="fa fa-info"></i> <span data-i18n="mqtt.label.session"></span></label>
                <div style="display: inline-block; width:calc(100% - 110px)">
                    <div class="form-row">
                        <label for="node-config-input-cleansession" style="width: auto;">
                            <input type="checkbox" id="node-config-input-cleansession" style="position: relative;vertical-align: bottom; top: -2px; width: 15px;height: 15px;">
                            <span id="node-config-input-cleansession-label" data-i18n="mqtt.label.cleansession"></span>
                        </label>
                    </div>
                    <div class="form-row mqtt5">
                        <label style="width:auto" for="node-config-input-sessionExpiry"><span data-i18n="mqtt.label.sessionExpiry"></span></label>
                        <input type="number" min="0" id="node-config-input-sessionExpiry" style="width: 100px" >
                    </div>
                </div>
            </div>
            <div class="form-row mqtt5">
                <label style="width: 125px;" for="node-config-input-userProps"><span data-i18n="mqtt.label.userProperties"></span></label>
                <input type="text" id="node-config-input-userProps" style="width: calc(100% - 166px);">
            </div>
            <br>
        </div>
        <div id="mqtt-broker-tab-security" style="display:none">
            <div class="form-row">
                <label for="node-config-input-user"><i class="fa fa-user"></i> <span data-i18n="common.label.username"></span></label>
                <input type="text" id="node-config-input-user">
            </div>
            <div class="form-row">
                <label for="node-config-input-password"><i class="fa fa-lock"></i> <span data-i18n="common.label.password"></span></label>
                <input type="password" id="node-config-input-password">
            </div>
        </div>
        <div id="mqtt-broker-tab-messages" style="display:none">
            <div id="mqtt-broker-section-birth">
                <div class="red-ui-palette-header">
                    <i class="fa fa-angle-down"></i><span data-i18n="mqtt.sections-label.birth-message"></span>
                </div>
                <div class="section-content" style="padding:10px 0 0 10px">
                    <div class="form-row">
                        <label style="width: 100px !important;" for="node-config-input-birthTopic"><i class="fa fa-tasks"></i> <span data-i18n="common.label.topic"></span></label>
                        <input style="width: calc(100% - 300px) !important" type="text" id="node-config-input-birthTopic" data-i18n="[placeholder]mqtt.placeholder.birth-topic">
                        <label style="margin-left: 10px; width: 90px !important;" for="node-config-input-birthRetain"><i class="fa fa-history"></i> <span data-i18n="mqtt.label.retain"></span></label>
                        <select id="node-config-input-birthRetain" style="width:75px !important">
                            <option value="false" data-i18n="mqtt.false"></option>
                            <option value="true" data-i18n="mqtt.true"></option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label style="width: 100px !important;" for="node-config-input-birthPayload"><i class="fa fa-envelope"></i> <span data-i18n="common.label.payload"></span></label>
                        <input style="width: calc(100% - 300px) !important" type="text" id="node-config-input-birthPayload" style="width:300px" data-i18n="[placeholder]common.label.payload">
                        <label style="margin-left: 10px; width: 90px !important;" for="node-config-input-birthQos"><i class="fa fa-empire"></i> <span data-i18n="mqtt.label.qos"></span></label>
                        <select id="node-config-input-birthQos" style="width:75px !important">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                        </select>
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-birth-contentType" data-i18n="mqtt.label.contentType"></label>
                        <input type="text" style="width:calc(100% - 200px);" id="node-config-input-birth-contentType">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-birth-props" data-i18n="mqtt.label.userProperties"></label>
                        <input type="text" style="width:calc(100% - 200px);" id="node-config-input-birth-props">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-birth-respTopic"><span data-i18n="mqtt.label.responseTopic"></span></label>
                        <input type="text" id="node-config-input-birth-respTopic" style="width: calc(100% - 200px);">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-birth-correl"><span data-i18n="mqtt.label.correlationData"></span></label>
                        <input type="text" id="node-config-input-birth-correl" style="width: calc(100% - 200px);">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-birth-expiry"><span data-i18n="mqtt.label.expiry"></span></label>
                        <input id="node-config-input-birth-expiry"  style="width: calc(100% - 200px);">
                    </div>
                </div>
            </div>
            <div id="mqtt-broker-section-close">
                <div class="red-ui-palette-header">
                    <i class="fa fa-angle-down"></i><span data-i18n="mqtt.sections-label.close-message"></span>
                </div>
                <div class="section-content" style="padding:10px 0 0 10px">
                    <div class="form-row">
                        <label style="width: 100px !important;" for="node-config-input-closeTopic"><i class="fa fa-tasks"></i> <span data-i18n="common.label.topic"></span></label>
                        <input style="width: calc(100% - 300px) !important" type="text" id="node-config-input-closeTopic" style="width:300px" data-i18n="[placeholder]mqtt.placeholder.close-topic">
                        <label style="margin-left: 10px; width: 90px !important;" for="node-config-input-closeRetain"><i class="fa fa-history"></i> <span data-i18n="mqtt.label.retain"></span></label>
                        <select id="node-config-input-closeRetain" style="width:75px !important">
                            <option value="false" data-i18n="mqtt.false"></option>
                            <option value="true" data-i18n="mqtt.true"></option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label style="width: 100px !important;" for="node-config-input-closePayload"><i class="fa fa-envelope"></i> <span data-i18n="common.label.payload"></span></label>
                        <input style="width: calc(100% - 300px) !important" type="text" id="node-config-input-closePayload" style="width:300px" data-i18n="[placeholder]common.label.payload">
                        <label style="margin-left: 10px; width: 90px !important;" for="node-config-input-closeQos"><i class="fa fa-empire"></i> <span data-i18n="mqtt.label.qos"></span></label>
                        <select id="node-config-input-closeQos" style="width:75px !important">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                        </select>
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-close-contentType" data-i18n="mqtt.label.contentType"></label>
                        <input type="text" style="width:calc(100% - 200px);" id="node-config-input-close-contentType">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-close-props" data-i18n="mqtt.label.userProperties"></label>
                        <input type="text" style="width:calc(100% - 200px);" id="node-config-input-close-props">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-close-respTopic"><span data-i18n="mqtt.label.responseTopic"></span></label>
                        <input type="text" id="node-config-input-close-respTopic" style="width: calc(100% - 200px);">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-close-correl"><span data-i18n="mqtt.label.correlationData"></span></label>
                        <input type="text" id="node-config-input-close-correl" style="width: calc(100% - 200px);">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-close-expiry"><span data-i18n="mqtt.label.expiry"></span></label>
                        <input id="node-config-input-close-expiry"  style="width: calc(100% - 200px);">
                    </div>
                </div>
            </div>
            <div id="mqtt-broker-section-will">
                <div class="red-ui-palette-header">
                    <i class="fa fa-angle-down"></i><span data-i18n="mqtt.sections-label.will-message"></span>
                </div>
                <div class="section-content" style="padding:10px 0 0 10px">
                    <div class="form-row">
                        <label style="width: 100px !important;" for="node-config-input-willTopic"><i class="fa fa-tasks"></i> <span data-i18n="common.label.topic"></span></label>
                        <input style="width: calc(100% - 300px) !important" type="text" id="node-config-input-willTopic" style="width:300px" data-i18n="[placeholder]mqtt.placeholder.will-topic">
                        <label style="margin-left: 10px; width: 90px !important;" for="node-config-input-willRetain"><i class="fa fa-history"></i> <span data-i18n="mqtt.label.retain"></span></label>
                        <select id="node-config-input-willRetain" style="width:75px !important">
                            <option value="false" data-i18n="mqtt.false"></option>
                            <option value="true" data-i18n="mqtt.true"></option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label style="width: 100px !important;" for="node-config-input-willPayload"><i class="fa fa-envelope"></i> <span data-i18n="common.label.payload"></span></label>
                        <input style="width: calc(100% - 300px) !important" type="text" id="node-config-input-willPayload" style="width:300px" data-i18n="[placeholder]common.label.payload">
                        <label style="margin-left: 10px; width: 90px !important;" for="node-config-input-willQos"><i class="fa fa-empire"></i> <span data-i18n="mqtt.label.qos"></span></label>
                        <select id="node-config-input-willQos" style="width:75px !important">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                        </select>
                    </div>
                    <div class="form-row mqtt5">
                        <label><span data-i18n="mqtt.label.delay"></span></label>
                        <input type="number" min="0" id="node-config-input-will-delay" style="width: 100px" >
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-will-contentType" data-i18n="mqtt.label.contentType"></label>
                        <input type="text" style="width:calc(100% - 200px);" id="node-config-input-will-contentType">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-will-props" data-i18n="mqtt.label.userProperties"></label>
                        <input type="text" style="width:calc(100% - 200px);" id="node-config-input-will-props">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-will-respTopic"><span data-i18n="mqtt.label.responseTopic"></span></label>
                        <input type="text" id="node-config-input-will-respTopic" style="width: calc(100% - 200px);">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-will-correl"><span data-i18n="mqtt.label.correlationData"></span></label>
                        <input type="text" id="node-config-input-will-correl" style="width: calc(100% - 200px);">
                    </div>
                    <div class="form-row mqtt5 mqtt5-out">
                        <label for="node-config-input-will-expiry"><span data-i18n="mqtt.label.expiry"></span></label>
                        <input id="node-config-input-will-expiry"  style="width: calc(100% - 200px);">
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>

<script type="text/javascript">
(function() {

    var typedInputNoneOpt = { value: 'none', label: '', hasValue: false };
    var makeTypedInputOpt = function(value){
        return {
            value: value,
            label:value,
            hasValue: false
        }
    }
    var contentTypeOpts = [
        typedInputNoneOpt,
        makeTypedInputOpt("application/json"),
        makeTypedInputOpt("application/octet-stream"),
        makeTypedInputOpt("text/csv"),
        makeTypedInputOpt("text/html"),
        makeTypedInputOpt("text/plain"),
        {value:"other", label:""}
    ];

    function getDefaultContentType(value) {
        var defaultContentType;
        var matchedContentType = contentTypeOpts.filter(function(v) {
            return v.value === value;
        })
        if (matchedContentType.length > 0) {
            defaultContentType = matchedContentType[0].value;
        }
        if (value && !defaultContentType) {
            defaultContentType = 'other';
        }
        return defaultContentType || 'none'
    }

    RED.nodes.registerType('mqtt-broker',{
        category: 'config',
        defaults: {
            name: {value:""},
            broker: {value:"",required:true},
            port: {value:1883,required:false,validate:RED.validators.number(true)},
            tls: {type:"tls-config",required: false},
            clientid: {value:"", validate: function(v) {
                if ($("#node-config-input-clientid").length) {
                    // Currently editing the node
                    return $("#node-config-input-cleansession").is(":checked") || (v||"").length > 0;
                } else {
                    return (this.cleansession===undefined || this.cleansession) || (v||"").length > 0;
                }
            }},
            usetls: {value: false},
            verifyservercert: { value: false},
            compatmode: { value: false},
            protocolVersion: { value: 4},
            keepalive: {value:60,validate:RED.validators.number()},
            cleansession: {value: true},
            birthTopic: {value:""},
            birthQos: {value:"0"},
            birthRetain: {value:false},
            birthPayload: {value:""},
            birthMsg: { value: {}},
            closeTopic: {value:""},
            closeQos: {value:"0"},
            closeRetain: {value:false},
            closePayload: {value:""},
            closeMsg: { value: {}},
            willTopic: {value:""},
            willQos: {value:"0"},
            willRetain: {value:false},
            willPayload: {value:""},
            willMsg: { value: {}},
            sessionExpiry: {value:0}
        },
        credentials: {
            user: {type:"text"},
            password: {type: "password"}
        },
        label: function() {
            if (this.name) {
                return this.name;
            }
            var b = this.broker;
            if (!b) { b = "undefined"; }
            var lab = "";
            lab = (this.clientid?this.clientid+"@":"")+b;
            if (b.indexOf("://") === -1){
                if (!this.port){ lab = lab + ":1883"; }
                else { lab = lab + ":" + this.port; }
            }
            return lab;
        },
        oneditprepare: function () {
            var tabs = RED.tabs.create({
                id: "node-config-mqtt-broker-tabs",
                onchange: function(tab) {
                    $("#node-config-mqtt-broker-tabs-content").children().hide();
                    $("#" + tab.id).show();
                }
            });
            tabs.addTab({
                id: "mqtt-broker-tab-connection",
                label: this._("mqtt.tabs-label.connection")
            });
            tabs.addTab({
                id: "mqtt-broker-tab-security",
                label: this._("mqtt.tabs-label.security")
            });

            tabs.addTab({
                id: "mqtt-broker-tab-messages",
                label: this._("mqtt.tabs-label.messages")
            });

            function setUpSection(sectionId, v5Opts, isExpanded) {
                var birthMessageSection = $("#mqtt-broker-section-"+sectionId);
                var paletteHeader = birthMessageSection.find('.red-ui-palette-header');
                var twistie = paletteHeader.find('i');
                var sectionContent = birthMessageSection.find('.section-content');

                function toggleSection(expanded) {
                    twistie.toggleClass('expanded', expanded);
                    sectionContent.toggle(expanded);
                }
                paletteHeader.on("click", function(e) {
                    e.preventDefault();
                    var isExpanded = twistie.hasClass('expanded');
                    toggleSection(!isExpanded);
                });
                toggleSection(isExpanded);
                $("#node-config-input-"+sectionId+"-contentType").val(v5Opts?v5Opts.contentType:"").typedInput({
                    default: getDefaultContentType(v5Opts?v5Opts.contentType:""),
                    types: contentTypeOpts,
                });

                $("#node-config-input-"+sectionId+"-props").val(v5Opts?v5Opts.userProps:"").typedInput({
                    default:  !(v5Opts?v5Opts.userProps:null)? 'none':'json',
                    types: [typedInputNoneOpt, 'json'],
                });
                $("#node-config-input-"+sectionId+"-respTopic").val(v5Opts?v5Opts.respTopic:"").typedInput({
                    default:  !(v5Opts?v5Opts.respTopic:null)? 'none':'str',
                    types: [typedInputNoneOpt, 'str'],
                });
                $("#node-config-input-"+sectionId+"-correl").val(v5Opts?v5Opts.correl:"").typedInput({
                    default:  !(v5Opts?v5Opts.correl:null)? 'none':'str',
                    types: [typedInputNoneOpt, 'str'],
                });
                $("#node-config-input-"+sectionId+"-expiry").val(v5Opts?v5Opts.expiry:"").typedInput({
                    default:  !(v5Opts?v5Opts.expiry:null)? 'none':'num',
                    types: [typedInputNoneOpt, 'num'],
                });
            }

            // show first section if none are set so the user gets the idea
            var showBirthSection = this.birthTopic !== ""
                || this.willTopic === ""
                && this.birthTopic === ""
                && this.closeTopic == "";
            setUpSection('birth', this.birthMsg, showBirthSection);
            setUpSection('close', this.closeMsg, this.closeTopic !== "");
            setUpSection('will', this.willMsg, this.willTopic !== "");

            if (this.willMsg) {
                $("#node-config-input-will-delay").val(this.willMsg.delay);
            }

            setTimeout(function() { tabs.resize(); },0);
            if (typeof this.cleansession === 'undefined') {
                this.cleansession = true;
                $("#node-config-input-cleansession").prop("checked",true);
            }
            if (typeof this.usetls === 'undefined') {
                this.usetls = false;
                $("#node-config-input-usetls").prop("checked",false);
            }
            if (this.compatmode === 'true' || this.compatmode === true) {
                delete this.compatmode;
                this.protocolVersion = 4;
            }
            if (typeof this.protocolVersion === 'undefined') {
                this.protocolVersion = 4;
            }
            $("#node-config-input-protocolVersion").on("change", function() {
                var v5 = $("#node-config-input-protocolVersion").val() == "5";
                if(v5) {
                    $("#node-config-input-cleansession-label").text(RED._("node-red:mqtt.label.cleanstart"))
                    $("div.form-row.mqtt5").show();
                } else {
                    $("#node-config-input-cleansession-label").text(RED._("node-red:mqtt.label.cleansession"))
                    $("div.form-row.mqtt5").hide();
                }
            });
            $("#node-config-input-protocolVersion").val(this.protocolVersion);
            $("#node-config-input-userProps").typedInput({
                default:  !this.userProps ? 'none':'json',
                types: [typedInputNoneOpt, 'json']
            });
            if (typeof this.keepalive === 'undefined') {
                this.keepalive = 15;
                $("#node-config-input-keepalive").val(this.keepalive);
            }
            if (typeof this.birthQos === 'undefined') {
                this.birthQos = "0";
                $("#node-config-input-birthQos").val("0");
            }
            if (typeof this.closeQos === 'undefined') {
                this.willQos = "0";
                $("#node-config-input-willQos").val("0");
            }
            if (typeof this.willQos === 'undefined') {
                this.willQos = "0";
                $("#node-config-input-willQos").val("0");
            }


            function updateTLSOptions() {
                if ($("#node-config-input-usetls").is(':checked')) {
                    $("#node-config-row-tls").show();
                } else {
                    $("#node-config-row-tls").hide();
                }
            }
            updateTLSOptions();
            $("#node-config-input-usetls").on("click",function() {
                updateTLSOptions();
            });
            var node = this;
            function updateClientId() {
                if ($("#node-config-input-cleansession").is(":checked")) {
                    $("#node-config-input-clientid").attr("placeholder",node._("mqtt.placeholder.clientid"));
                } else {
                    $("#node-config-input-clientid").attr("placeholder",node._("mqtt.placeholder.clientid-nonclean"));
                }
                $("#node-config-input-clientid").trigger("change");
            }
            setTimeout(updateClientId,0);
            $("#node-config-input-cleansession").on("click",function() {
                updateClientId();
            });

            function updatePortEntry(){
                var disabled = $("#node-config-input-port").prop("disabled");
                if ($("#node-config-input-broker").val().indexOf("://") === -1){
                    if (disabled){
                        $("#node-config-input-port").prop("disabled", false);
                    }
                }
                else {
                    if (!disabled){
                        $("#node-config-input-port").prop("disabled", true);
                    }
                }
            }
            $("#node-config-input-broker").on("change", function() {
                updatePortEntry();
            });
            $("#node-config-input-broker").on( "keyup", function() {
                updatePortEntry();
            });
            setTimeout(updatePortEntry,50);
            setTimeout(function() {
                $("#node-config-input-protocolVersion").trigger("change");
            },50);

        },
        oneditsave: function() {
            if (!$("#node-config-input-usetls").is(':checked')) {
                $("#node-config-input-tls").val("");
            }

            var v5 = $("#node-config-input-protocolVersion").val() == "5";

            function saveV5Message(section) {
                var msg = {};
                if ($("#node-config-input-"+section+"Topic").val().trim().length > 0) {
                    var contentType = $("#node-config-input-"+section+"-contentType").val().trim();
                    if (contentType === '') {
                        contentType = $("#node-config-input-"+section+"-contentType").typedInput('type');
                        if (contentType === 'none' || contentType === 'other') {
                            contentType = "";
                        }
                    }
                    if (contentType) {
                        msg.contentType = contentType;
                    }
                    var props = $("#node-config-input-"+section+"-props").val().trim();
                    if (props) {
                        msg.userProps = props;
                    }
                    var resp = $("#node-config-input-"+section+"-respTopic").val().trim();
                    if (props) {
                        msg.respTopic = resp;
                    }
                    var correl = $("#node-config-input-"+section+"-correl").val().trim();
                    if (correl) {
                        msg.correl = correl;
                    }
                    var expiry = $("#node-config-input-"+section+"-expiry").val().trim();
                    if (expiry) {
                        msg.expiry = expiry;
                    }
                }
                return msg;
            }

            if (v5) {
                this.birthMsg = saveV5Message("birth");
                this.closeMsg = saveV5Message("close");
                this.willMsg = saveV5Message("will");
                var willDelay = $("#node-config-input-will-delay").val();
                if (willDelay) {
                    this.willMsg.delay = willDelay;
                }
            } else {
                this.willMsg = {};
                this.birthMsg = {};
                this.closeMsg = {};
            }

        }
    });
    RED.nodes.registerType('mqtt in',{
        category: 'network',
        defaults: {
            name: {value:""},
            topic: {value:"",required:true,validate: RED.validators.regex(/^(#$|(\+|[^+#]*)(\/(\+|[^+#]*))*(\/(\+|#|[^+#]*))?$)/)},
            qos: {value: "2"},
            datatype: {value:"auto",required:true},
            broker: {type:"mqtt-broker", required:true},
            // subscriptionIdentifier: {value:0},
            nl: {value:false},
            rap: {value:true},
            rh: {value:0},
        },
        color:"#d8bfd8",
        inputs:0,
        outputs:1,
        icon: "bridge.svg",
        label: function() {
            return this.name||this.topic||"mqtt";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            $("#node-input-broker").on("change",function(d){
                var confNode = RED.nodes.node($("#node-input-broker").val());
                var v5 = confNode && confNode.protocolVersion == "5";
                if(v5) {
                    $("div.form-row.mqtt5").show();
                } else {
                    $("div.form-row.mqtt5").hide();
                }
            });
            if (this.qos === undefined) {
                $("#node-input-qos").val("2");
            }
            if (this.datatype === undefined) {
                $("#node-input-datatype").val("auto");
            }
        }
    });

    RED.nodes.registerType('mqtt out',{
        category: 'network',
        defaults: {
            name: {value:""},
            topic: {value:""},
            qos: {value:""},
            retain: {value:""},
            respTopic: {value:""},
            contentType: {value:""},
            userProps: {value:''},
            correl: {value:''},
            expiry: {value:''},
            broker: {type:"mqtt-broker", required:true}
        },
        color:"#d8bfd8",
        inputs:1,
        outputs:0,
        icon: "bridge.svg",
        align: "right",
        label: function() {
            return this.name||this.topic||"mqtt";
        },
        oneditprepare: function() {
            var that = this;

            function showHideDynamicFields() {
                var confNode = RED.nodes.node($("#node-input-broker").val());
                var v5 = confNode && confNode.protocolVersion == "5";
                if(v5) {
                    $("div.form-row.mqtt5").show();
                    var t = $("#node-input-respTopic").typedInput("type");
                    if (t == 'none') {
                        $("#node-input-correl").parent().hide();
                    } else {
                        $("#node-input-correl").parent().show();
                    }
                } else {
                    $("div.form-row.mqtt5").hide();
                }
            }

            $("#node-input-broker").on("change",function(d){
                showHideDynamicFields();
            });

            var respTopicTI = $("#node-input-respTopic").typedInput({
                default: !this.respTopic ? 'none':'str',
                types: [typedInputNoneOpt,  'str'],
            });

            var correlTI = $("#node-input-correl").typedInput({
                default: !this.correl ? 'none':'str',
                types: [typedInputNoneOpt,  'str']
            });
            //show / hide correlation data depending on respTopic
            respTopicTI.on("change", showHideDynamicFields);
            respTopicTI.triggerHandler("change");

            $("#node-input-userProps").typedInput({
                default:  !this.userProps ? 'none':'json',
                types: [typedInputNoneOpt, 'json'],
            });
            $("#node-input-expiry").typedInput({
                default: !this.expiry ? 'none':'num',
                types: [typedInputNoneOpt,  'num']
            });
            $("#node-input-contentType").on('change', function (event, type, value, urg) {
                console.log(event);
                console.log("ct change",type,value, urg);
            }).typedInput({
                default: getDefaultContentType(this.contentType),
                types: contentTypeOpts
            })
        },
        oneditsave: function() {

            var contentType = $("#node-input-contentType").val().trim();
            if (contentType === '') {
                contentType = $("#node-input-contentType").typedInput('type');
                if (contentType === 'none' || contentType === 'other') {
                    contentType = "";
                }
            }
            $("#node-input-contentType").val(contentType)

        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="mqtt in">
<p>Connects to a MQTT broker and subscribes to messages from the specified topic.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
       <dt>payload <span class="property-type">string | buffer</span></dt>
       <dd>a string unless detected as a binary buffer.</dd>
       <dt>topic <span class="property-type">string</span></dt>
       <dd>the MQTT topic, uses / as a hierarchy separator.</dd>
       <dt>qos <span class="property-type">number</span> </dt>
       <dd>0, fire and forget - 1, at least once - 2, once and once only.</dd>
       <dt>retain <span class="property-type">boolean</span></dt>
       <dd>true indicates the message was retained and may be old.</dd>

       <dt class="optional">responseTopic <span class="property-type">string</span></dt>
       <dd><b>MQTTv5</b>: the MQTT response topic for the message</dd>
       <dt class="optional">correlationData <span class="property-type">Buffer</span></dt>
       <dd><b>MQTTv5</b>: the correlation data for the message</dd>
       <dt class="optional">contentType <span class="property-type">string</span></dt>
       <dd><b>MQTTv5</b>: the content-type of the payload</dd>
       <dt class="optional">userProperties <span class="property-type">object</span></dt>
       <dd><b>MQTTv5</b>: any user properties of the message</dd>
       <dt class="optional">messageExpiryInterval <span class="property-type">number</span></dt>
       <dd><b>MQTTv5</b>: the expiry time, in seconds, of the message</dd>
    </dl>
    <h3>Details</h3>
    The subscription topic can include MQTT wildcards, + for one level, # for multiple levels.</p>
    <p>This node requires a connection to a MQTT broker to be configured. This is configured by clicking
    the pencil icon.</p>
    <p>Several MQTT nodes (in or out) can share the same broker connection if required.</p>
</script>

<script type="text/html" data-help-name="mqtt out">
    <p>Connects to a MQTT broker and publishes messages.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
       <dt>payload <span class="property-type">string | buffer</span></dt>
       <dd> the payload to publish. If this property is not set, no message will be sent. To send a blank message, set this property to an empty String.</dd>
       <dt class="optional">topic <span class="property-type">string</span></dt>
       <dd> the MQTT topic to publish to.</dd>
       <dt class="optional">qos <span class="property-type">number</span></dt>
       <dd>0, fire and forget - 1, at least once - 2, once and once only. Default 0.</dd>
       <dt class="optional">retain <span class="property-type">boolean</span></dt>
       <dd>set to true to retain the message on the broker. Default false.</dd>
       <dt class="optional">responseTopic <span class="property-type">string</span></dt>
       <dd><b>MQTTv5</b>: the MQTT response topic for the message</dd>
       <dt class="optional">correlationData <span class="property-type">Buffer</span></dt>
       <dd><b>MQTTv5</b>: the correlation data for the message</dd>
       <dt class="optional">contentType <span class="property-type">string</span></dt>
       <dd><b>MQTTv5</b>: the content-type of the payload</dd>
       <dt class="optional">userProperties <span class="property-type">object</span></dt>
       <dd><b>MQTTv5</b>: any user properties of the message</dd>
       <dt class="optional">messageExpiryInterval <span class="property-type">number</span></dt>
       <dd><b>MQTTv5</b>: the expiry time, in seconds, of the message</dd>
       <dt class="optional">topicAlias <span class="property-type">number</span></dt>
       <dd><b>MQTTv5</b>: the MQTT topic alias to use</dd>
    </dl>
    <h3>Details</h3>
    <code>msg.payload</code> is used as the payload of the published message.
    If it contains an Object it will be converted to a JSON string before being sent.
    If it contains a binary Buffer the message will be published as-is.</p>
    <p>The topic used can be configured in the node or, if left blank, can be set by <code>msg.topic</code>.</p>
    <p>Likewise the QoS and retain values can be configured in the node or, if left
    blank, set by <code>msg.qos</code> and <code>msg.retain</code> respectively. To clear a previously
    retained topic from the broker, send a blank message to that topic with the retain flag set.</p>
    <p>This node requires a connection to a MQTT broker to be configured. This is configured by clicking
    the pencil icon.</p>
    <p>Several MQTT nodes (in or out) can share the same broker connection if required.</p>
</script>

<script type="text/html" data-help-name="mqtt-broker">
    <p>Configuration for a connection to an MQTT broker.</p>
    <p>This configuration will create a single connection to the broker which can
       then be reused by <code>MQTT In</code> and <code>MQTT Out</code> nodes.</p>
    <p>The node will generate a random Client ID if one is not set and the
       node is configured to use a Clean Session connection. If a Client ID is set,
       it must be unique to the broker you are connecting to.</p>
    <h4>Birth Message</h4>
    <p>This is a message that will be published on the configured topic whenever the
       connection is established.</p>
    <h4>Close Message</h4>
    <p>This is a message that will be published on the configured topic before the
       connection is closed normally, either by re-deploying the node, or by shutting down.</p>
    <h4>Will Message</h4>
    <p>This is a message that will be published by the broker in the event the node
       unexpectedly loses its connection.</p>
    <h4>WebSockets</h4>
    <p>The node can be configured to use a WebSocket connection. To do so, the Server
       field should be configured with a full URI for the connection. For example:</p>
    <pre>ws://example.com:4000/mqtt</pre>

</script>

</div><div><!-- --- [red-module:node-red/httpin] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="http in">
    <div class="form-row">
        <label for="node-input-method"><i class="fa fa-tasks"></i> <span data-i18n="httpin.label.method"></span></label>
        <select type="text" id="node-input-method" style="width:70%;">
        <option value="get">GET</option>
        <option value="post">POST</option>
        <option value="put">PUT</option>
        <option value="delete">DELETE</option>
        <option value="patch">PATCH</option>
        </select>
    </div>
    <div class="form-row form-row-http-in-upload hide">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-upload" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-upload" style="width: 70%;" data-i18n="httpin.label.upload"></label>
    </div>
    <div class="form-row">
        <label for="node-input-url"><i class="fa fa-globe"></i> <span data-i18n="httpin.label.url"></span></label>
        <input id="node-input-url" type="text" placeholder="/url">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row row-swagger-doc">
        <label for="node-input-swaggerDoc"><i class="fa fa-file-text-o"></i> <span data-i18n="httpin.label.doc"></span></label>
        <input type="text" id="node-input-swaggerDoc">
    </div>
    <div id="node-input-tip" class="form-tips"><span data-i18n="httpin.tip.in"></span><code><span id="node-input-path"></span></code>.</div>
</script>

<script type="text/html" data-template-name="http response">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-statusCode"><i class="fa fa-long-arrow-left"></i> <span data-i18n="httpin.label.status"></span></label>
        <input type="text" id="node-input-statusCode" placeholder="msg.statusCode">
    </div>
    <div class="form-row" style="margin-bottom:0;">
        <label><i class="fa fa-list"></i> <span data-i18n="httpin.label.headers"></span></label>
    </div>
    <div class="form-row node-input-headers-container-row">
        <ol id="node-input-headers-container"></ol>
    </div>
    <div class="form-tips"><span data-i18n="[html]httpin.tip.res"></span></div>
</script>

<script type="text/javascript">
(function() {
    RED.nodes.registerType('http in',{
        category: 'network',
        color:"rgb(231, 231, 174)",
        defaults: {
            name: {value:""},
            url: {value:"",required:true},
            method: {value:"get",required:true},
            upload: {value:false},
            swaggerDoc: {type:"swagger-doc", required:false}
        },
        inputs:0,
        outputs:1,
        icon: "white-globe.svg",
        label: function() {
            if (this.name) {
                return this.name;
            } else if (this.url) {
                var root = RED.settings.httpNodeRoot;
                if (root.slice(-1) != "/") {
                    root = root+"/";
                }
                if (this.url.charAt(0) == "/") {
                    root += this.url.slice(1);
                } else {
                    root += this.url;
                }
                return "["+this.method+"] "+root;
            } else {
                return "http";
            }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var root = RED.settings.httpNodeRoot;
            if (root.slice(-1) == "/") {
                root = root.slice(0,-1);
            }
            if (root == "") {
                $("#node-input-tip").hide();
            } else {
                $("#node-input-path").html(root);
                $("#node-input-tip").show();
            }
            if(!RED.nodes.getType("swagger-doc")){
                $('.row-swagger-doc').hide();
            }
            $("#node-input-method").on("change", function() {
                if ($(this).val() === "post") {
                    $(".form-row-http-in-upload").show();
                } else {
                    $(".form-row-http-in-upload").hide();
                }
            }).change();


        }

    });
    var headerTypes = [
        {value:"content-type",label:"Content-Type",hasValue: false},
        {value:"location",label:"Location",hasValue: false},
        {value:"other",label:RED._("node-red:httpin.label.other"),icon:"red/images/typedInput/az.png"}
       ]
    var contentTypes = [
        {value:"application/json",label:"application/json",hasValue: false},
        {value:"application/xml",label:"application/xml",hasValue: false},
        {value:"text/css",label:"text/css",hasValue: false},
        {value:"text/html",label:"text/html",hasValue: false},
        {value:"text/plain",label:"text/plain",hasValue: false},
        {value:"image/gif",label:"image/gif",hasValue: false},
        {value:"image/png",label:"image/png",hasValue: false},
        {value:"other",label:RED._("node-red:httpin.label.other"),icon:"red/images/typedInput/az.png"}
    ];

    RED.nodes.registerType('http response',{
        category: 'network',
        color:"rgb(231, 231, 174)",
        defaults: {
            name: {value:""},
            statusCode: {value:"",validate: RED.validators.number(true)},
            headers: {value:{}}
        },
        inputs:1,
        outputs:0,
        align: "right",
        icon: "white-globe.svg",
        label: function() {
            return this.name||("http"+(this.statusCode?" ("+this.statusCode+")":""));
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            function resizeRule(rule) {
                var newWidth = rule.width();
                rule.find('.red-ui-typedInput').typedInput("width",(newWidth-15)/2);
            }
            var headerList = $("#node-input-headers-container").css('min-height','150px').css('min-width','450px').editableList({
                addItem: function(container,i,header) {
                    var row = $('<div/>').css({
                        overflow: 'hidden',
                        whiteSpace: 'nowrap'
                    }).appendTo(container);

                    var propertyName = $('<input/>',{class:"node-input-header-name",type:"text"})
                        .appendTo(row)
                        .typedInput({types:headerTypes});

                    var propertyValue = $('<input/>',{class:"node-input-header-value",type:"text",style:"margin-left: 10px"})
                        .appendTo(row)
                        .typedInput({types:
                            header.h === 'content-type'?contentTypes:[{value:"other",label:"other",icon:"red/images/typedInput/az.png"}]
                        });

                    var matchedType = headerTypes.filter(function(ht) {
                        return ht.value === header.h
                    });
                    if (matchedType.length === 0) {
                        propertyName.typedInput('type','other');
                        propertyName.typedInput('value',header.h);
                        propertyValue.typedInput('value',header.v);
                    } else {
                        propertyName.typedInput('type',header.h);

                        if (header.h === "content-type") {
                            matchedType = contentTypes.filter(function(ct) {
                                return ct.value === header.v;
                            });
                            if (matchedType.length === 0) {
                                propertyValue.typedInput('type','other');
                                propertyValue.typedInput('value',header.v);
                            } else {
                                propertyValue.typedInput('type',header.v);
                            }
                        } else {
                            propertyValue.typedInput('value',header.v);
                        }
                    }

                    matchedType = headerTypes.filter(function(ht) {
                        return ht.value === header.h
                    });
                    if (matchedType.length === 0) {
                        propertyName.typedInput('type','other');
                        propertyName.typedInput('value',header.h);
                    } else {
                        propertyName.typedInput('type',header.h);
                    }

                    propertyName.on('change',function(event) {
                        var type = propertyName.typedInput('type');
                        if (type === 'content-type') {
                            propertyValue.typedInput('types',contentTypes);
                        } else {
                            propertyValue.typedInput('types',[{value:"other",label:"other",icon:"red/images/typedInput/az.png"}]);
                        }
                    });



                    resizeRule(container);
                },
                resizeItem: resizeRule,
                removable: true
            });

            if (this.headers) {
                for (var key in this.headers) {
                    if (this.headers.hasOwnProperty(key)) {
                        headerList.editableList('addItem',{h:key,v:this.headers[key]});
                    }
                }
            }
        },
        oneditsave: function() {
            var headers = $("#node-input-headers-container").editableList('items');
            var node = this;
            node.headers = {};
            headers.each(function(i) {
                var header = $(this);
                var keyType = header.find(".node-input-header-name").typedInput('type');
                var keyValue = header.find(".node-input-header-name").typedInput('value');
                var valueType = header.find(".node-input-header-value").typedInput('type');
                var valueValue = header.find(".node-input-header-value").typedInput('value');
                var key = keyType;
                var value = valueType;
                if (keyType === 'other') {
                    key = keyValue;
                }
                if (valueType === 'other') {
                    value = valueValue;
                }
                if (key !== '') {
                    node.headers[key] = value;
                }
            });
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-input-headers-container-row)");
            var height = size.height;
            for (var i=0; i<rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-input-headers-container-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));

            $("#node-input-headers-container").editableList('height',height);
        }
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="http in">
    <p>Creates an HTTP end-point for creating web services.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload</dt>
        <dd>For a GET request, contains an object of any query string parameters.
            Otherwise, contains the body of the HTTP request.</dd>
        <dt>req<span class="property-type">object</span></dt>
        <dd>An HTTP request object. This object contains multiple properties that
            provide information about the request.
            <ul>
             <li><code>body</code> - the body of the incoming request. The format
                 will depend on the request.</li>
             <li><code>headers</code> - an object containing the HTTP request headers.</li>
             <li><code>query</code> - an object containing any query string parameters.</li>
             <li><code>params</code> - an object containing any route parameters.</li>
             <li><code>cookies</code> - an object containing the cookies for the request.</li>
             <li><code>files</code> - if enabled within the node, an object containing
                 any files uploaded as part of a POST request.</li>
            </ul>
        </dd>
        <dt>res<span class="property-type">object</span></dt>
        <dd>An HTTP response object. This property should not be used directly;
            the <code>HTTP Response</code> node documents how to respond to a request.
            This property must remain attached to the message passed to the response node.</dd>
    </dl>
    <h3>Details</h3>
    <p>The node will listen on the configured path for requests of a particular type.
       The path can be fully specified, such as <code>/user</code>, or include
       named parameters that accept any value, such as <code>/user/:name</code>.
       When named parameters are used, their actual value in a request can be accessed under <code>msg.req.params</code>.</p>
    <p>For requests that include a body, such as a POST or PUT, the contents of
       the request is made available as <code>msg.payload</code>.</p>
    <p>If the content type of the request can be determined, the body will be parsed to
       any appropriate type. For example, <code>application/json</code> will be parsed to
       its JavaScript object representation.</p>
    <p><b>Note:</b> this node does not send any response to the request. The flow
       must include an HTTP Response node to complete the request.</p>
</script>

<script type="text/html" data-help-name="http response">
    <p>Sends responses back to requests received from an HTTP Input node.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string</span></dt>
        <dd>The body of the response.</dd>
        <dt class="optional">statusCode <span class="property-type">number</span></dt>
        <dd>If set, this is used as the response status code. Default: 200.</dd>
        <dt class="optional">headers <span class="property-type">object</span></dt>
        <dd>If set, provides HTTP headers to include in the response.</dd>
        <dt class="optional">cookies <span class="property-type">object</span></dt>
        <dd>If set, can be used to set or delete cookies.</dd>
    </dl>
    <h3>Details</h3>
    <p>The <code>statusCode</code> and <code>headers</code> can also be set within
    the node itself. If a property is set within the node, it cannot be overridden
    by the corresponding message property.</p>
    <h4>Cookie handling</h4>
    <p>The <code>cookies</code> property must be an object of name/value pairs.
    The value can be either a string to set the value of the cookie with default
    options, or it can be an object of options.</p>
    <p>The following example sets two cookies - one called <code>name</code> with
    a value of <code>nick</code>, the other called <code>session</code> with a
    value of <code>1234</code> and an expiry set to 15 minutes.</p>
    <pre>
msg.cookies = {
    name: 'nick',
    session: {
        value: '1234',
        maxAge: 900000
    }
}</pre>
    <p>The valid options include:</p>
    <ul>
    <li><code>domain</code> - (String) domain name for the cookie</li>
    <li><code>expires</code> - (Date) expiry date in GMT. If not specified or set to 0, creates a session cookie</li>
    <li><code>maxAge</code> - (String) expiry date as relative to the current time in milliseconds</li>
    <li><code>path</code> - (String) path for the cookie. Defaults to /</li>
    <li><code>value</code> - (String) the value to use for the cookie</li>
    </ul>
    <p>To delete a cookie, set its <code>value</code> to <code>null</code>.</p>

</script>

</div><div><!-- --- [red-module:node-red/httprequest] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="http request">
    <div class="form-row">
        <label for="node-input-method"><i class="fa fa-tasks"></i> <span data-i18n="httpin.label.method"></span></label>
        <select type="text" id="node-input-method" style="width:70%;">
        <option value="GET">GET</option>
        <option value="POST">POST</option>
        <option value="PUT">PUT</option>
        <option value="DELETE">DELETE</option>
        <option value="HEAD">HEAD</option>
        <option value="use" data-i18n="httpin.setby"></option>
        </select>
    </div>

    <div class="form-row">
        <label for="node-input-url"><i class="fa fa-globe"></i> <span data-i18n="httpin.label.url"></span></label>
        <input id="node-input-url" type="text" placeholder="http://">
    </div>

    <div class="form-row node-input-paytoqs-row">
        <label for="node-input-paytoqs"><span data-i18n="common.label.payload"></span></label>
        <select id="node-input-paytoqs" style="width: 70%;">
            <option value="ignore" data-i18n="httpin.label.paytoqs.ignore"></option>
            <option value="query" data-i18n="httpin.label.paytoqs.query"></option>
            <option value="body" data-i18n="httpin.label.paytoqs.body"></option>
        </select>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-usetls" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-usetls" style="width: auto" data-i18n="httpin.use-tls"></label>
        <div id="node-row-tls" class="hide">
            <label style="width: auto; margin-left: 20px; margin-right: 10px;" for="node-input-tls"><span data-i18n="httpin.tls-config"></span></label><input type="text" style="width: 300px" id="node-input-tls">
        </div>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-useAuth" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-useAuth" style="width: 70%;"><span data-i18n="httpin.basicauth"></span></label>
        <div style="margin-left: 20px" class="node-input-useAuth-row hide">
            <div class="form-row">
                <label for="node-input-authType-select"><i class="fa fa-user-secret "></i> <span data-i18n="httpin.label.authType"></span></label>
                <select type="text" id="node-input-authType-select" style="width:70%;">
                    <option value="basic"  data-i18n="httpin.basic"></option>
                    <option value="digest" data-i18n="httpin.digest"></option>
                    <option value="bearer" data-i18n="httpin.bearer"></option>
                </select>
                <input type="hidden" id="node-input-authType">
            </div>
            <div class="form-row node-input-basic-row">
                <label for="node-input-user"><i class="fa fa-user"></i> <span data-i18n="common.label.username"></span></label>
                <input type="text" id="node-input-user">
            </div>
            <div class="form-row">
                <label for="node-input-password"> <i class="fa fa-lock"></i> <span data-i18n="common.label.password" id="node-span-password"></span><span data-i18n="httpin.label.bearerToken" id="node-span-token" style="display:none"></span></label>
                <input type="password" id="node-input-password">
            </div>
        </div>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-persist" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-persist" style="width: auto" data-i18n="httpin.persist"></label>
    </div>

    <div class="form-row">
        <input type="checkbox" id="node-input-useProxy" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-useProxy" style="width: auto;"><span data-i18n="httpin.use-proxy"></span></label>
        <div id="node-input-useProxy-row" class="hide">
            <label style="width: auto; margin-left: 20px; margin-right: 10px;" for="node-input-proxy"><i class="fa fa-globe"></i> <span data-i18n="httpin.proxy-config"></span></label><input type="text" style="width: 270px" id="node-input-proxy">
        </div>
    </div>

    <div class="form-row">
        <label for="node-input-ret"><i class="fa fa-arrow-left"></i> <span data-i18n="httpin.label.return"></span></label>
        <select type="text" id="node-input-ret" style="width:70%;">
        <option value="txt" data-i18n="httpin.utf8"></option>
        <option value="bin" data-i18n="httpin.binary"></option>
        <option value="obj" data-i18n="httpin.json"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-tips" id="tip-json" hidden><span data-i18n="httpin.tip.req"></span></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('http request',{
        category: 'network',
        color:"rgb(231, 231, 174)",
        defaults: {
            name: {value:""},
            method:{value:"GET"},
            ret: {value:"txt"},
            paytoqs: {value: false},
            url:{value:"",validate:function(v) { return (v.trim().length === 0) || (v.indexOf("://") === -1) || (v.trim().indexOf("http") === 0)} },
            tls: {type:"tls-config",required: false},
            persist: {value:false},
            proxy: {type:"http proxy",required: false},
            authType: {value: ""}
        },
        credentials: {
            user: {type:"text"},
            password: {type: "password"}
        },
        inputs:1,
        outputs:1,
        outputLabels: function(i) {
            return ({
                txt: this._("httpin.label.utf8String"),
                bin: this._("httpin.label.binaryBuffer"),
                obj: this._("httpin.label.jsonObject")
            }[this.ret]);
        },
        icon: "white-globe.svg",
        label: function() {
            return this.name||this._("httpin.httpreq");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            $("#node-input-useAuth").on("change", function() {
                if ($(this).is(":checked")) {
                    $(".node-input-useAuth-row").show();
                    // Nodes (< version 0.20.x) with credentials but without authentication type, need type 'basic'
                    if (!$('#node-input-authType').val()) {
                        $("#node-input-authType-select").val('basic').trigger("change");
                    }
                } else {
                    $(".node-input-useAuth-row").hide();
                    $('#node-input-authType').val('');
                    $('#node-input-user').val('');
                    $('#node-input-password').val('');
                }
            });
            $("#node-input-authType-select").on("change", function() {
                var val = $(this).val();
                $("#node-input-authType").val(val);
                if (val === "basic" || val === "digest") {
                    $(".node-input-basic-row").show();
                    $('#node-span-password').show();
                    $('#node-span-token').hide();
                } else if (val === "bearer") {
                    $(".node-input-basic-row").hide();
                    $('#node-span-password').hide();
                    $('#node-span-token').show();
                    $('#node-input-user').val('');
                }
            });
            $("#node-input-method").on("change", function() {
                if ($(this).val() == "GET") {
                    $(".node-input-paytoqs-row").show();
                } else {
                    $(".node-input-paytoqs-row").hide();
                }
            });
            if (this.paytoqs === true || this.paytoqs == "query") {
                $("#node-input-paytoqs").val("query");
            } else if (this.paytoqs === "body") {
                $("#node-input-paytoqs").val("body");
            } else {
                $("#node-input-paytoqs").val("ignore");
            }
            if (this.authType) {
                $('#node-input-useAuth').prop('checked', true);
                $("#node-input-authType-select").val(this.authType);
                $("#node-input-authType-select").change();
            } else {
                $('#node-input-useAuth').prop('checked', false);
            }
            $("#node-input-useAuth").change();

            function updateTLSOptions() {
                if ($("#node-input-usetls").is(':checked')) {
                    $("#node-row-tls").show();
                } else {
                    $("#node-row-tls").hide();
                }
            }
            if (this.tls) {
                $('#node-input-usetls').prop('checked', true);
            } else {
                $('#node-input-usetls').prop('checked', false);
            }
            updateTLSOptions();
            $("#node-input-usetls").on("click",function() {
                updateTLSOptions();
            });

            function updateProxyOptions() {
                if ($("#node-input-useProxy").is(":checked")) {
                    $("#node-input-useProxy-row").show();
                } else {
                    $("#node-input-useProxy-row").hide();
                }
            }
            if (this.proxy) {
                $("#node-input-useProxy").prop("checked", true);
            } else {
                $("#node-input-useProxy").prop("checked", false);
            }
            updateProxyOptions();
            $("#node-input-useProxy").on("click", function() {
                updateProxyOptions();
            });

            $("#node-input-ret").on("change", function() {
                if ($("#node-input-ret").val() === "obj") {
                    $("#tip-json").show();
                } else {
                    $("#tip-json").hide();
                }
            });
        },
        oneditsave: function() {
            if (!$("#node-input-usetls").is(':checked')) {
                $("#node-input-tls").val("_ADD_");
            }
            if (!$("#node-input-useProxy").is(":checked")) {
                $("#node-input-proxy").val("_ADD_");
            }
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="http request">
    <p>Sends HTTP requests and returns the response.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">url <span class="property-type">string</span></dt>
        <dd>If not configured in the node, this optional property sets the url of the request.</dd>
        <dt class="optional">method <span class="property-type">string</span></dt>
        <dd>If not configured in the node, this optional property sets the HTTP method of the request.
            Must be one of <code>GET</code>, <code>PUT</code>, <code>POST</code>, <code>PATCH</code> or <code>DELETE</code>.</dd>
        <dt class="optional">headers <span class="property-type">object</span></dt>
        <dd>Sets the HTTP headers of the request.</dd>
        <dt class="optional">cookies <span class="property-type">object</span></dt>
        <dd>If set, can be used to send cookies with the request.</dd>
        <dt class="optional">payload</dt>
        <dd>Sent as the body of the request.</dd>
        <dt class="optional">rejectUnauthorized</dt>
        <dd>If set to <code>false</code>, allows requests to be made to https sites that use
            self signed certificates.</dd>
        <dt class="optional">followRedirects</dt>
        <dd>If set to <code>false</code> prevent following Redirect (HTTP 301).<code>true</code> by default</dd>
        <dt class="optional">requestTimeout</dt>
        <dd>If set to a positive number of milliseconds, will override the globally set <code>httpRequestTimeout</code> parameter.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string | object | buffer</span></dt>
        <dd>The body of the response. The node can be configured to return the body
             as a string, attempt to parse it as a JSON string or leave it as a
             binary buffer.</dd>
        <dt>statusCode <span class="property-type">number</span></dt>
        <dd>The status code of the response, or the error code if the request could not be completed.</dd>
        <dt>headers <span class="property-type">object</span></dt>
        <dd>An object containing the response headers.</dd>
        <dt>responseUrl <span class="property-type">string</span></dt>
        <dd>In case any redirects occurred while processing the request, this property is the final redirected url.
            Otherwise, the url of the original request.</dd>
        <dt>responseCookies <span class="property-type">object</span></dt>
        <dd>If the response includes cookies, this propery is an object of name/value pairs for each cookie.</dd>
        <dt>redirectList <span class="property-type">array</span></dt>
        <dd>If the request was redirected one or more times, the accumulated information will be added to this property. `location` is the next redirect destination. `cookies` is the cookies returned from the redirect source.</dd>
    </dl>
    <h3>Details</h3>
    <p>When configured within the node, the URL property can contain <a href="http://mustache.github.io/mustache.5.html" target="_blank">mustache-style</a> tags. These allow the
    url to be constructed using values of the incoming message. For example, if the url is set to
    <code>example.com/{{{topic}}}</code>, it will have the value of <code>msg.topic</code> automatically inserted.
    Using {{{...}}} prevents mustache from escaping characters like / & etc.</p>
    <p>The node can optionally automatically encode <code>msg.payload</code> as query string parameters for a GET request, in which case <code>msg.payload</code> has to be an object.</p>
    <p><b>Note</b>: If running behind a proxy, the standard <code>http_proxy=...</code> environment variable should be set and Node-RED restarted, or use Proxy Configuration. If Proxy Configuration was set, the configuration take precedence over environment variable.</p>
    <h4>Using multiple HTTP Request nodes</h4>
    <p>In order to use more than one of these nodes in the same flow, care must be taken with
    the <code>msg.headers</code> property. The first node will set this property with
    the response headers. The next node will then use those headers for its request - this
    is not usually the right thing to do. If <code>msg.headers</code> property is left unchanged
    between nodes, it will be ignored by the second node. To set custom headers, <code>msg.headers</code>
    should first be deleted or reset to an empty object: <code>{}</code>.
    <h4>Cookie handling</h4>
    <p>The <code>cookies</code> property passed to the node must be an object of name/value pairs.
    The value can be either a string to set the value of the cookie or it can be an
    object with a single <code>value</code> property.<p>
    <p>Any cookies returned by the request are passed back under the <code>responseCookies</code> property.</p>
    <h4>Content type handling</h4>
    <p>If <code>msg.payload</code> is an Object, the node will automatically set the content type
    of the request to <code>application/json</code> and encode the body as such.</p>
    <p>To encode the request as form data, <code>msg.headers["content-type"]</code> should be set to <code>application/x-www-form-urlencoded</code>.</p>
    <h4>File Upload</h4>
    <p>To perform a file upload, <code>msg.headers["content-type"]</code> should be set to <code>multipart/form-data</code>
        and the <code>msg.payload</code> passed to the node must be an object with the following structure:</p>
    <pre><code>{
    "KEY": {
        "value": FILE_CONTENTS,
        "options": {
            "filename": "FILENAME"
        }
    }
}</code></pre>
    <p>The values of <code>KEY</code>, <code>FILE_CONTENTS</code> and <code>FILENAME</code>
    should be set to the appropriate values.</p>

</script>

</div><div><!-- --- [red-module:node-red/websocket] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!-- WebSocket Input Node -->
<script type="text/html" data-template-name="websocket in">
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-dot-circle-o"></i> <span data-i18n="websocket.label.type"></span></label>
        <select id="node-input-mode">
            <option value="server" data-i18n="websocket.listenon"></option>
            <option value="client" data-i18n="websocket.connectto"></option>
        </select>
    </div>
    <div class="form-row" id="websocket-server-row">
        <label for="node-input-server"><i class="fa fa-bookmark"></i> <span data-i18n="websocket.label.path"></span></label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row" id="websocket-client-row">
        <label for="node-input-client"><i class="fa fa-bookmark"></i> <span data-i18n="websocket.label.url"></span></label>
        <input type="text" id="node-input-client">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">

(function() {

    function ws_oneditprepare() {
        $("#websocket-client-row").hide();
        $("#node-input-mode").on("change", function() {
            if ( $("#node-input-mode").val() === 'client') {
                $("#websocket-server-row").hide();
                $("#websocket-client-row").show();
            }
            else {
                $("#websocket-server-row").show();
                $("#websocket-client-row").hide();
            }
        });

        if (this.client) {
            $("#node-input-mode").val('client').change();
        }
        else {
            $("#node-input-mode").val('server').change();
        }
    }

    function ws_oneditsave() {
        if ($("#node-input-mode").val() === 'client') {
            $("#node-input-server").append('<option value="">Dummy</option>');
            $("#node-input-server").val('');
        }
        else {
            $("#node-input-client").append('<option value="">Dummy</option>');
            $("#node-input-client").val('');
        }
    }

    function ws_label() {
        var nodeid = (this.client)?this.client:this.server;
        var wsNode = RED.nodes.node(nodeid);
        return this.name||(wsNode?"[ws] "+wsNode.label():"websocket");
    }

    function ws_validateserver() {
        if ($("#node-input-mode").val() === 'client' || (this.client && !this.server)) {
            return true;
        }
        else {
            return RED.nodes.node(this.server) != null;
        }
    }

    function ws_validateclient() {
        if ($("#node-input-mode").val() === 'client' || (this.client && !this.server)) {
            return RED.nodes.node(this.client) != null;
        }
        else {
            return true;
        }
    }

    RED.nodes.registerType('websocket in',{
        category: 'network',
        defaults: {
            name: {value:""},
            server: {type:"websocket-listener", validate: ws_validateserver},
            client: {type:"websocket-client", validate: ws_validateclient}
        },
        color:"rgb(215, 215, 160)",
        inputs:0,
        outputs:1,
        icon: "white-globe.svg",
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        label: ws_label,
        oneditsave: ws_oneditsave,
        oneditprepare: ws_oneditprepare
    });

    RED.nodes.registerType('websocket out',{
        category: 'network',
        defaults: {
            name: {value:""},
            server: {type:"websocket-listener", validate: ws_validateserver},
            client: {type:"websocket-client", validate: ws_validateclient}
        },
        color:"rgb(215, 215, 160)",
        inputs:1,
        outputs:0,
        icon: "white-globe.svg",
        align: "right",
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        label: ws_label,
        oneditsave: ws_oneditsave,
        oneditprepare: ws_oneditprepare
    });

    RED.nodes.registerType('websocket-listener',{
        category: 'config',
        defaults: {
            path: {value:"",required:true,validate:RED.validators.regex(/^((?!\/debug\/ws).)*$/)},
            wholemsg: {value:"false"}
        },
        inputs:0,
        outputs:0,
        label: function() {
            var root = RED.settings.httpNodeRoot;
            if (root.slice(-1) != "/") {
                root = root+"/";
            }
            if (this.path) {
                if (this.path.charAt(0) == "/") {
                    root += this.path.slice(1);
                } else {
                    root += this.path;
                }
            }
            return root;
        },
        oneditprepare: function() {
            var root = RED.settings.httpNodeRoot;
            if (root.slice(-1) == "/") {
                root = root.slice(0,-1);
            }
            if (root === "") {
                $("#node-config-ws-tip").hide();
            } else {
                $("#node-config-ws-path").html(RED._("node-red:websocket.tip.path2", { path: root }));
                $("#node-config-ws-tip").show();
            }
        }
    });

    RED.nodes.registerType('websocket-client',{
        category: 'config',
        defaults: {
            path: {value:"",required:true,validate:RED.validators.regex(/^((?!\/debug\/ws).)*$/)},
            tls: {type:"tls-config",required: false},
            wholemsg: {value:"false"}
        },
        inputs:0,
        outputs:0,
        label: function() {
            return this.path;
        },
        oneditprepare: function() {
            $("#node-config-input-path").on("change keyup paste",function() {
                $(".node-config-row-tls").toggle(/^wss:/i.test($(this).val()))
            });
            $("#node-config-input-path").change();
        },
        oneditsave: function() {
            if (!/^wss:/i.test($("#node-config-input-path").val())) {
                $("#node-config-input-tls").val("_ADD_");
            }
        }
    });

})();
</script>

<!-- WebSocket out Node -->
<script type="text/html" data-template-name="websocket out">
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-dot-circle-o"></i> <span data-i18n="websocket.label.type"></span></label>
        <select id="node-input-mode">
            <option value="server" data-i18n="websocket.listenon"></option>
            <option value="client" data-i18n="websocket.connectto"></option>
        </select>
    </div>
    <div class="form-row" id="websocket-server-row">
        <label for="node-input-server"><i class="fa fa-bookmark"></i> <span data-i18n="websocket.label.path"></span></label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row" id="websocket-client-row">
        <label for="node-input-client"><i class="fa fa-bookmark"></i> <span data-i18n="websocket.label.url"></span></label>
        <input type="text" id="node-input-client">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<!-- WebSocket Server configuration node -->
<script type="text/html" data-template-name="websocket-listener">
    <div class="form-row">
        <label for="node-config-input-path"><i class="fa fa-bookmark"></i> <span data-i18n="websocket.label.path"></span></label>
        <input id="node-config-input-path" type="text" placeholder="/ws/example">
    </div>
    <div class="form-row">
        <label for="node-config-input-wholemsg" data-i18n="websocket.sendrec"></label>
        <select type="text" id="node-config-input-wholemsg" style="width: 70%;">
            <option value="false" data-i18n="websocket.payload"></option>
            <option value="true" data-i18n="websocket.message"></option>
        </select>
    </div>
    <div class="form-tips">
        <span data-i18n="[html]websocket.tip.path1"></span>
        <p id="node-config-ws-tip"><span id="node-config-ws-path"></span></p>
    </div>
</script>

<!-- WebSocket Client configuration node -->
<script type="text/html" data-template-name="websocket-client">
    <div class="form-row">
        <label for="node-config-input-path"><i class="fa fa-bookmark"></i> <span data-i18n="websocket.label.url"></span></label>
        <input id="node-config-input-path" type="text" placeholder="ws://example.com/ws">
    </div>
    <div class="form-row node-config-row-tls hide">
        <label for="node-config-input-tls" data-i18n="httpin.tls-config"></label>
        <input type="text" id="node-config-input-tls">
    </div>

    <div class="form-row">
        <label for="node-config-input-wholemsg" data-i18n="websocket.sendrec"></label>
        <select type="text" id="node-config-input-wholemsg" style="width: 70%;">
            <option value="false" data-i18n="websocket.payload"></option>
            <option value="true" data-i18n="websocket.message"></option>
        </select>
    </div>
    <div class="form-tips">
        <p><span data-i18n="[html]websocket.tip.url1"></span></p>
        <span data-i18n="[html]websocket.tip.url2"></span>
    </div>
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="websocket in">
    <p>WebSocket input node.</p>
    <p>By default, the data received from the WebSocket will be in <code>msg.payload</code>.
    The socket can be configured to expect a properly formed JSON string, in which
    case it will parse the JSON and send on the resulting object as the entire message.</p>
</script>

<script type="text/html" data-help-name="websocket out">
    <p>WebSocket out node.</p>
    <p>By default, <code>msg.payload</code> will be sent over the WebSocket. The socket
    can be configured to encode the entire <code>msg</code> object as a JSON string and send that
    over the WebSocket.</p>

    <p>If the message arriving at this node started at a WebSocket In node, the message
    will be sent back to the client that triggered the flow. Otherwise, the message
    will be broadcast to all connected clients.</p>
    <p>If you want to broadcast a message that started at a WebSocket In node, you
    should delete the <code>msg._session</code> property within the flow.</p>
</script>

<script type="text/html" data-help-name="websocket-listener">
   <p>This configuration node creates a WebSocket Server endpoint using the specified path.</p>
</script>

<script type="text/html" data-help-name="websocket-client">
   <p>This configuration node connects a WebSocket client to the specified URL.</p>
</script>

</div><div><!-- --- [red-module:node-red/tcpin] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="tcp in">
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-dot-circle-o"></i> <span data-i18n="tcpin.label.type"></span></label>
        <select id="node-input-server" style="width:120px; margin-right:5px;">
            <option value="server" data-i18n="tcpin.type.listen"></option>
            <option value="client" data-i18n="tcpin.type.connect"></option>
        </select>
        <span data-i18n="tcpin.label.port"></span> <input type="text" id="node-input-port" style="width:65px">
    </div>
    <div class="form-row hidden" id="node-input-host-row" style="padding-left: 110px;">
        <span data-i18n="tcpin.label.host"></span> <input type="text" id="node-input-host" placeholder="localhost" style="width: 60%;">
    </div>

    <div class="form-row">
        <label><i class="fa fa-sign-out"></i> <span data-i18n="tcpin.label.output"></span></label>
        <select id="node-input-datamode" style="width:110px;">
            <option value="stream" data-i18n="tcpin.output.stream"></option>
            <option value="single" data-i18n="tcpin.output.single"></option>
        </select>
        <select id="node-input-datatype" style="width:140px;">
            <option value="buffer" data-i18n="tcpin.output.buffer"></option>
            <option value="utf8" data-i18n="tcpin.output.string"></option>
            <option value="base64" data-i18n="tcpin.output.base64"></option>
        </select>
        <span data-i18n="tcpin.label.payload"></span>
    </div>

    <div id="node-row-newline" class="form-row hidden" style="padding-left:110px;">
        <span data-i18n="tcpin.label.delimited"></span> <input type="text" id="node-input-newline" style="width:110px;">
    </div>

    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> <span data-i18n="common.label.topic"></span></label>
        <input type="text" id="node-input-topic" data-i18n="[placeholder]common.label.topic">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('tcp in',{
        category: 'network',
        color:"Silver",
        defaults: {
            name: {value:""},
            server: {value:"server",required:true},
            host: {value:"",validate:function(v) { return (this.server == "server")||v.length > 0;} },
            port: {value:"",required:true,validate:RED.validators.number()},
            datamode:{value:"stream"},
            datatype:{value:"buffer"},
            newline:{value:""},
            topic: {value:""},
            base64: {/*deprecated*/ value:false,required:true}
        },
        inputs:0,
        outputs:1,
        icon: "bridge-dash.svg",
        label: function() {
            return this.name || "tcp:"+(this.host?this.host+":":"")+this.port;
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var updateOptions = function() {
                var sockettype = $("#node-input-server").val();
                if (sockettype == "client") {
                    $("#node-input-host-row").show();
                } else {
                    $("#node-input-host-row").hide();
                }
                var datamode = $("#node-input-datamode").val();
                var datatype = $("#node-input-datatype").val();
                if (datamode == "stream") {
                    if (datatype == "utf8") {
                        $("#node-row-newline").show();
                    } else {
                        $("#node-row-newline").hide();
                    }
                } else {
                    $("#node-row-newline").hide();
                }
            };
            updateOptions();
            $("#node-input-server").change(updateOptions);
            $("#node-input-datatype").change(updateOptions);
            $("#node-input-datamode").change(updateOptions);
        }
    });
</script>


<script type="text/html" data-template-name="tcp out">
    <div class="form-row">
        <label for="node-input-beserver"><i class="fa fa-dot-circle-o"></i> <span data-i18n="tcpin.label.type"></span></label>
        <select id="node-input-beserver" style="width:150px; margin-right:5px;">
            <option value="server" data-i18n="tcpin.type.listen"></option>
            <option value="client" data-i18n="tcpin.type.connect"></option>
            <option value="reply" data-i18n="tcpin.type.reply"></option>
        </select>
        <span id="node-input-port-row"><span data-i18n="tcpin.label.port"></span> <input type="text" id="node-input-port" style="width: 65px"></span>
    </div>

    <div class="form-row hidden" id="node-input-host-row" style="padding-left: 110px;">
        <span data-i18n="tcpin.label.host"></span> <input type="text" id="node-input-host" style="width: 60%;">
    </div>

    <div class="form-row hidden" id="node-input-end-row">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-end" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-end" style="width: 70%;"><span data-i18n="tcpin.label.close-connection"></span></label>
    </div>

    <div class="form-row">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-base64" placeholder="base64" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-base64" style="width: 70%;"><span data-i18n="tcpin.label.decode-base64"></span></label>
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('tcp out',{
        category: 'network',
        color:"Silver",
        defaults: {
            host: {value:"",validate:function(v) { return (this.beserver != "client")||v.length > 0;} },
            port: {value:"",validate:function(v) { return (this.beserver == "reply")||RED.validators.number()(v); } },
            beserver: {value:"client",required:true},
            base64: {value:false,required:true},
            end: {value:false,required:true},
            name: {value:""}
        },
        inputs:1,
        outputs:0,
        icon: "bridge-dash.svg",
        align: "right",
        label: function() {
            return this.name || "tcp:"+(this.host?this.host+":":"")+this.port;
        },
        labelStyle: function() {
            return (this.name)?"node_label_italic":"";
        },
        oneditprepare: function() {
            var updateOptions = function() {
                var sockettype = $("#node-input-beserver").val();
                if (sockettype == "reply") {
                    $("#node-input-port-row").hide();
                    $("#node-input-host-row").hide();
                    $("#node-input-end-row").hide();
                } else if (sockettype == "client"){
                    $("#node-input-port-row").show();
                    $("#node-input-host-row").show();
                    $("#node-input-end-row").show();
                } else {
                    $("#node-input-port-row").show();
                    $("#node-input-host-row").hide();
                    $("#node-input-end-row").show();
                }
            };
            updateOptions();
            $("#node-input-beserver").change(updateOptions);
        }
    });
</script>


<script type="text/html" data-template-name="tcp request">
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-globe"></i> <span data-i18n="tcpin.label.server"></span></label>
        <input type="text" id="node-input-server" placeholder="ip.address" style="width:45%">
        <span data-i18n="tcpin.label.port"></span>
        <input type="text" id="node-input-port" style="width:60px">
    </div>
    <div class="form-row">
        <label for="node-input-out"><i class="fa fa-sign-out"></i> <span data-i18n="tcpin.label.return"></span></label>
        <select type="text" id="node-input-out" style="width:54%;">
            <option value="time" data-i18n="tcpin.return.timeout"></option>
            <option value="char" data-i18n="tcpin.return.character"></option>
            <option value="count" data-i18n="tcpin.return.number"></option>
            <option value="sit" data-i18n="tcpin.return.never"></option>
            <option value="immed" data-i18n="tcpin.return.immed"></option>
        </select>
        <input type="text" id="node-input-splitc" style="width:50px;">
        <span id="node-units"></span>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('tcp request',{
        category: 'network',
        color:"Silver",
        defaults: {
            server: {value:""},
            port: {value:"",validate:RED.validators.regex(/^(\d*|)$/)},
            out: {value:"time",required:true},
            splitc: {value:"0",required:true},
            name: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "bridge-dash.svg",
        label: function() {
            return this.name || "tcp:"+(this.server?this.server+":":"")+this.port;
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var previous = null;
            $("#node-input-out").on('focus', function () { previous = this.value; }).on("change", function() {
                $("#node-input-splitc").show();
                if (previous === null) { previous = $("#node-input-out").val(); }
                if ($("#node-input-out").val() == "char") {
                    if (previous != "char") { $("#node-input-splitc").val("\\n"); }
                    $("#node-units").text("");
                }
                else if ($("#node-input-out").val() == "time") {
                    if (previous != "time") { $("#node-input-splitc").val("0"); }
                    $("#node-units").text(RED._("node-red:tcpin.label.ms"));
                }
                else if ($("#node-input-out").val() == "immed") {
                    if (previous != "immed") { $("#node-input-splitc").val(" "); }
                    $("#node-units").text("");
                    $("#node-input-splitc").hide();
                }
                else if ($("#node-input-out").val() == "count") {
                    if (previous != "count") { $("#node-input-splitc").val("12"); }
                    $("#node-units").text(RED._("node-red:tcpin.label.chars"));
                }
                else {
                    if (previous != "sit") { $("#node-input-splitc").val(" "); }
                    $("#node-units").text("");
                    $("#node-input-splitc").hide();
                }
            });
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="tcp in">
    <p>Provides a choice of TCP inputs. Can either connect to a remote TCP port,
       or accept incoming connections.</p>
    <p><b>Note: </b>On some systems you may need root or administrator access
    to access ports below 1024.</p>
</script>

<script type="text/html" data-help-name="tcp out">
    <p>Provides a choice of TCP outputs. Can either connect to a remote TCP port,
    accept incoming connections, or reply to messages received from a TCP In node.</p>
    <p>Only the <code>msg.payload</code> is sent.</p>
    <p>If <code>msg.payload</code> is a string containing a Base64 encoding of binary
    data, the Base64 decoding option will cause it to be converted back to binary
    before being sent.</p>
    <p>If <code>msg._session</code> is not present the payload is
    sent to <b>all</b> connected clients.</p>
    <p><b>Note: </b>On some systems you may need root or administrator access
    to access ports below 1024.</p>
</script>

<script type="text/html" data-help-name="tcp request">
    <p>A simple TCP request node - sends the <code>msg.payload</code> to a server tcp port and expects a response.</p>
    <p>Connects, sends the "request", and reads the "response". It can either count a number of
    returned characters into a fixed buffer, match a specified character before returning,
    wait a fixed timeout from first reply and then return, sit and wait for data, or send then close the connection
    immediately, without waiting for a reply.</p>
    <p>The response will be output in <code>msg.payload</code> as a buffer, so you may want to .toString() it.</p>
    <p>If you leave tcp host or port blank they must be set by using the <code>msg.host</code> and <code>msg.port</code> properties in every message sent to the node.</p>
</script>

</div><div><!-- --- [red-module:node-red/udp] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<!--  The Input Node  -->
<script type="text/html" data-template-name="udp in">
    <div class="form-row">
        <label for="node-input-port"><i class="fa fa-sign-in"></i> <span data-i18n="udp.label.listen"></span></label>
        <select id="node-input-multicast" style='width:70%'>
          <option value="false" data-i18n="udp.udpmsgs"></option>
          <option value="true" data-i18n="udp.mcmsgs"></option>
        </select>
    </div>
    <div class="form-row node-input-group">
        <label for="node-input-group"><i class="fa fa-list"></i> <span data-i18n="udp.label.group"></span></label>
        <input type="text" id="node-input-group" placeholder="225.0.18.83">
    </div>
    <div class="form-row node-input-iface">
        <label for="node-input-iface"><i class="fa fa-random"></i> <span data-i18n="udp.label.interface"></span></label>
        <input type="text" id="node-input-iface" data-i18n="[placeholder]udp.placeholder.interfaceprompt">
    </div>
    <div class="form-row">
        <label for="node-input-port"><i class="fa fa-sign-in"></i> <span data-i18n="udp.label.onport"></span></label>
        <input type="text" id="node-input-port" style="width:80px">
        &nbsp;&nbsp;<span data-i18n="udp.label.using"></span> <select id="node-input-ipv" style="width:80px">
          <option value="udp4">ipv4</option>
          <option value="udp6">ipv6</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-datatype"><i class="fa fa-sign-out"></i> <span data-i18n="udp.label.output"></span></label>
        <select id="node-input-datatype" style="width:70%;">
            <option value="buffer" data-i18n="udp.output.buffer"></option>
            <option value="utf8" data-i18n="udp.output.string"></option>
            <option value="base64" data-i18n="udp.output.base64"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-tips"><span data-i18n="udp.tip.in"></span></div>
    <div class="form-tips" id="udpporttip"><span data-i18n="[html]udp.tip.port"></span></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('udp in',{
        category: 'network',
        color:"Silver",
        defaults: {
            name: {value:""},
            iface: {value:""},
            port: {value:"",required:true,validate:RED.validators.number()},
            ipv: {value:"udp4"},
            multicast: {value:"false"},
            group: {value:"",validate:function(v) { return (this.multicast !== "true")||v.length > 0;} },
            datatype: {value:"buffer",required:true}
        },
        inputs:0,
        outputs:1,
        icon: "bridge-dash.svg",
        label: function() {
            if (this.multicast=="false") {
                return this.name||"udp "+this.port;
            }
            else {
                return this.name||"udp "+(this.group+":"+this.port);
            }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            $("#node-input-multicast").on("change", function() {
                var id = $("#node-input-multicast").val();
                if (id == "false") {
                    $(".node-input-group").hide();
                    $(".node-input-iface").hide();
                }
                else {
                    $(".node-input-group").show();
                    $(".node-input-iface").show();
                }
            });
            $("#node-input-multicast").change();

            var porttip = this._("udp.tip.port");
            var alreadyused = this._("udp.errors.alreadyused");
            var portsInUse = {};
            $.getJSON('udp-ports/'+this.id,function(data) {
                portsInUse = data || {};
                $('#udpporttip').html(porttip + data);
            });
            $("#node-input-port").on("change", function() {
                var portnew = $("#node-input-port").val();
                if (portsInUse.hasOwnProperty($("#node-input-port").val())) {
                    RED.notify(alreadyused+" "+$("#node-input-port").val(),"warn");
                }
            });
        }
    });
</script>


<!--  The Output Node  -->
<script type="text/html" data-template-name="udp out">
    <div class="form-row">
        <label for="node-input-port"><i class="fa fa-envelope"></i> <span data-i18n="udp.label.send"></span></label>
        <select id="node-input-multicast" style="width:40%">
          <option value="false" data-i18n="udp.udpmsg"></option>
          <option value="broad" data-i18n="udp.bcmsg"></option>
          <option value="multi" data-i18n="udp.mcmsg"></option>
        </select>
        <span data-i18n="udp.label.toport"></span> <input type="text" id="node-input-port" style="width:70px">
    </div>
    <div class="form-row node-input-addr">
        <label for="node-input-addr" id="node-input-addr-label"><i class="fa fa-list"></i> <span data-i18n="udp.label.address"></span></label>
        <input type="text" id="node-input-addr" data-i18n="[placeholder]udp.placeholder.address" style="width:50%;">
        <select id="node-input-ipv" style="width:70px">
          <option value="udp4">ipv4</option>
          <option value="udp6">ipv6</option>
        </select>
    </div>
    <div class="form-row node-input-iface">
        <label for="node-input-iface"><i class="fa fa-random"></i> <span data-i18n="udp.label.interface"></span></label>
        <input type="text" id="node-input-iface" data-i18n="[placeholder]udp.placeholder.interface">
    </div>
    <div class="form-row">
        <label for="node-input-outport-type">&nbsp;</label>
        <select id="node-input-outport-type">
          <option id="node-input-outport-type-random" value="random" data-i18n="udp.bind.random"></option>
          <option value="fixed" data-i18n="udp.bind.local"></option>
        </select>
        <input type="text" id="node-input-outport" style="width:70px;">
    </div>
    <div class="form-row">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-base64" style="display:inline-block; width:auto; vertical-align:top;">
        <label for="node-input-base64" style="width:70%;"><span data-i18n="udp.label.decode-base64"></span></label>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-tips"><span data-i18n="[html]udp.tip.out"></span></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('udp out',{
        category: 'network',
        color:"Silver",
        defaults: {
            name: {value:""},
            addr: {value:""},
            iface: {value:""},
            port: {value:""},
            ipv: {value:"udp4"},
            outport: {value:""},
            base64: {value:false,required:true},
            multicast: {value:"false"}
        },
        inputs:1,
        outputs:0,
        icon: "bridge-dash.svg",
        align: "right",
        label: function() {
            return this.name||"udp "+(this.addr+":"+this.port);
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var addresslabel = this._("udp.label.address");
            var addressph = this._("udp.placeholder.address");
            var grouplabel = this._("udp.label.group");
            var bindrandom = this._("udp.bind.random");
            var bindtarget = this._("udp.bind.target");

            var type = this.outport===""?"random":"fixed";
            $("#node-input-outport-type").val(type);

            $("#node-input-outport-type").on("change", function() {
                var type = $(this).val();
                if (type == "random") {
                    $("#node-input-outport").val("").hide();
                } else {
                    $("#node-input-outport").show();
                }
            });
            $("#node-input-outport-type").change();

            $("#node-input-multicast").on("change", function() {
                var id = $("#node-input-multicast").val();
                if (id === "multi") {
                    $(".node-input-iface").show();
                    $("#node-input-addr-label").html('<i class="fa fa-list"></i> ' + grouplabel);
                    $("#node-input-addr")[0].placeholder = '225.0.18.83';
                }
                else if (id === "broad") {
                    $(".node-input-iface").hide();
                    $("#node-input-addr-label").html('<i class="fa fa-list"></i> ' + addresslabel);
                    $("#node-input-addr")[0].placeholder = '255.255.255.255';
                }
                else {
                    $(".node-input-iface").hide();
                    $("#node-input-addr-label").html('<i class="fa fa-list"></i> ' + addresslabel);
                    $("#node-input-addr")[0].placeholder = addressph;
                }
                var type = $(this).val();
                if (type == "false") {
                    $("#node-input-outport-type-random").html(bindrandom);
                } else {
                    $("#node-input-outport-type-random").html(bindtarget);
                }
            });
            $("#node-input-multicast").change();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="udp in">
    <p>A UDP input node, that produces a <code>msg.payload</code> containing a
    Buffer, string, or base64 encoded string. Supports multicast.</p>
    <p>It also provides <code>msg.ip</code> and <code>msg.port</code> set to the
    ip address and port from which the message was received.</p>
    <p><b>Note</b>: On some systems you may need root or administrator access to use
    ports below 1024 and/or broadcast.</p>
</script>

<script type="text/html" data-help-name="udp out">
    <p>This node sends <code>msg.payload</code> to the designated UDP host and port. Supports multicast.</p>
    <p>You may also use <code>msg.ip</code> and <code>msg.port</code> to set the destination values, but the statically configured values have precedence.</p>
    <p>If you select broadcast either set the address to the local broadcast ip address, or maybe try 255.255.255.255, which is the global broadcast address.</p>
    <p><b>Note</b>: On some systems you may need to be root to use ports below 1024 and/or broadcast.</p>
</script>

</div><div><!-- --- [red-module:node-red/CSV] --- -->

<script type="text/html" data-template-name="csv">
    <div class="form-row">
        <label for="node-input-temp"><i class="fa fa-list"></i> <span data-i18n="csv.label.columns"></span></label>
        <input type="text" id="node-input-temp" data-i18n="[placeholder]csv.placeholder.columns">
    </div>
    <div class="form-row">
        <label for="node-input-select-sep"><i class="fa fa-text-width"></i> <span data-i18n="csv.label.separator"></span></label>
            <select style="width:150px" id="node-input-select-sep">
                <option value="," data-i18n="csv.separator.comma"></option>
                <option value="\t" data-i18n="csv.separator.tab"></option>
                <option value=" " data-i18n="csv.separator.space"></option>
                <option value=";" data-i18n="csv.separator.semicolon"></option>
                <option value=":" data-i18n="csv.separator.colon"></option>
                <option value="#" data-i18n="csv.separator.hashtag"></option>
                <option value="" data-i18n="csv.separator.other"></option>
           </select>
           <input style="width:40px;" type="text" id="node-input-sep" pattern=".">
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <hr align="middle"/>
    <div class="form-row">
        <label style="width:100%;"><span data-i18n="csv.label.c2o"></span></label>
    </div>
    <div class="form-row" style="padding-left:20px;">
        <label><i class="fa fa-sign-in"></i> <span data-i18n="csv.label.input"></span></label>
        <span data-i18n="csv.label.skip-s"></span>&nbsp;<input type="text" id="node-input-skip" style="width:40px; height:25px;"/>&nbsp;<span data-i18n="csv.label.skip-e"></span><br/>
        <label>&nbsp;</label>
        <input style="width:20px; vertical-align:baseline; margin-right:5px;" type="checkbox" id="node-input-hdrin"><label style="width:auto; margin-top:7px;" for="node-input-hdrin"><span data-i18n="csv.label.firstrow"></span></label><br/>
        <label>&nbsp;</label>
        <input style="width:20px; vertical-align:baseline; margin-right:5px;" type="checkbox" id="node-input-strings"><label style="width:auto; margin-top:7px;" for="node-input-strings"><span data-i18n="csv.label.usestrings"></span></label><br/>
        <label>&nbsp;</label>
        <input style="width:20px; vertical-align:baseline; margin-right:5px;" type="checkbox" id="node-input-include_empty_strings"><label style="width:auto; margin-top:7px;" for="node-input-include_empty_strings"><span data-i18n="csv.label.include_empty_strings"></span></label><br/>
        <label>&nbsp;</label>
        <input style="width:20px; vertical-align:baseline; margin-right:5px;" type="checkbox" id="node-input-include_null_values"><label style="width:auto; margin-top:7px;" for="node-input-include_null_values"><span data-i18n="csv.label.include_null_values"></span></label><br/>
    </div>
    <div class="form-row" style="padding-left:20px;">
        <label><i class="fa fa-sign-out"></i> <span data-i18n="csv.label.output"></span></label>
        <select type="text" id="node-input-multi" style="width:250px;">
            <option value="one" data-i18n="csv.output.row"></option>
            <option value="mult" data-i18n="csv.output.array"></option>
        </select>
    </div>
    <div class="form-row" style="margin-top:20px">
        <label style="width:100%;"><span data-i18n="csv.label.o2c"></span></label>
    </div>
    <div class="form-row" style="padding-left:20px;">
        <label><i class="fa fa-sign-out"></i> <span data-i18n="csv.label.output"></span></label>
        <!-- <input style="width:20px; vertical-align:top; margin-right:5px;" type="checkbox" id="node-input-hdrout"><label style="width:auto;" for="node-input-hdrout"><span data-i18n="csv.label.includerow"></span></span> -->
        <select style="width:60%" id="node-input-hdrout">
            <option value="none" data-i18n="csv.hdrout.none"></option>
            <option value="all" data-i18n="csv.hdrout.all"></option>
            <option value="once" data-i18n="csv.hdrout.once"></option>
        </select>
    </div>
    <div class="form-row" style="padding-left:20px;">
        <label></label>
        <label style="width:auto; margin-right:10px;" for="node-input-ret"><span data-i18n="csv.label.newline"></span></label>
        <select style="width:150px;" id="node-input-ret">
            <option value='\n' data-i18n="csv.newline.linux"></option>
            <option value='\r' data-i18n="csv.newline.mac"></option>
            <option value='\r\n' data-i18n="csv.newline.windows"></option>
       </select>
    </div>
</script>


<script type="text/javascript">
    RED.nodes.registerType('csv',{
        category: 'parser',
        color:"#DEBD5C",
        defaults: {
            name: {value:""},
            sep: {value:',',required:true,validate:RED.validators.regex(/^.{1,2}$/)},
            //quo: {value:'"',required:true},
            hdrin: {value:""},
            hdrout: {value:"none"},
            multi: {value:"one",required:true},
            ret: {value:'\\n'},
            temp: {value:""},
            skip: {value:"0"},
            strings: {value:true},
            include_empty_strings: {value:""},
            include_null_values: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "parser-csv.svg",
        label: function() {
            return this.name||"csv";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            if (this.hdrout === false) { this.hdrout = "none"; $("#node-input-hdrout").val("none"); }
            if (this.hdrout === true) { this.hdrout = "all"; $("#node-input-hdrout").val("all");}
            if (this.strings === undefined) { this.strings = true; $("#node-input-strings").prop('checked', true); }
            if (this.skip === undefined) { this.skip = 0; $("#node-input-skip").val("0");}
            $("#node-input-skip").spinner({ min:0 });
            if (this.sep == "," || this.sep == "\\t" || this.sep == ";" || this.sep == ":" || this.sep == " " || this.sep == "#") {
                $("#node-input-select-sep").val(this.sep);
                $("#node-input-sep").hide();
            } else {
                $("#node-input-select-sep").val("");
                $("#node-input-sep").val(this.sep);
                $("#node-input-sep").show();
            }
            $("#node-input-select-sep").on("change", function() {
                var v = $("#node-input-select-sep").val();
                $("#node-input-sep").val(v);
                if (v == "") {
                    $("#node-input-sep").val("");
                    $("#node-input-sep").show().focus();
                } else {
                    $("#node-input-sep").hide();
                }
            });
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="csv">
    <p>Converts between a CSV formatted string and its JavaScript object representation, in either direction.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | array | string</span></dt>
        <dd>A JavaScript object, array or CSV string.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | array | string</span></dt>
        <dd>
        <ul>
            <li>If the input is a string it tries to parse it as CSV and creates a JavaScript object of key/value pairs for each line.
                The node will then either send a message for each line, or a single message containing an array of objects.</li>
            <li>If the input is a JavaScript object it tries to build a CSV string.</li>
            <li>If the input is an array of simple values, it builds a single line CSV string.</li>
            <li>If the input is an array of arrays, or an array of objects, a multiple-line CSV string is created.</li>
        </ul>
        </dd>
    </dl>
    <h3>Details</h3>
    <p>The column template can contain an ordered list of column names. When converting CSV to an object, the column names
    will be used as the property names. Alternatively, the column names can be taken from the first row of the CSV.</p>
    <p>When converting to CSV, the columns template is used to identify which properties to extract from the object and in what order.</p>
    <p>If the columns template is blank then you can use a simple comma separated list of properties supplied in <code>msg.columns</code> to
    determine what to extract and in what order. If neither are present then all the object properties are output in the order
    in which the properties are found in the first row.</p>
    <p>If the input is an array then the columns template is only used to optionally generate a row of column titles.</p>
    <p>If 'parse numerical values' option is checked, string numerical values will be returned as numbers, ie. middle value '1,"1.5",2'.</p>
    <p>If 'include empty strings' option is checked, empty strings will be returned in result, ie. middle value '"1","",3'.</p>
    <p>If 'include null values' option is checked, null values will be returned in result, ie. middle value '"1",,3'.</p>
    <p>The node can accept a multi-part input as long as the <code>parts</code> property is set correctly, for example from a file-in node or split node.</p>
    <p>If outputting multiple messages they will have their <code>parts</code> property set and form a complete message sequence.</p>
    <p><b>Note:</b> the column template must be comma separated - even if a different separator is chosen for the data.</p>
</script>

</div><div><!-- --- [red-module:node-red/HTML] --- -->

<script type="text/html" data-template-name="html">
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="common.label.property"></span></label>
        <input type="text" id="node-input-property" style="width:70%">
    </div>
    <div class="form-row">
        <label for="node-input-tag"><i class="fa fa-filter"></i> <span data-i18n="html.label.select"></span></label>
        <input type="text" id="node-input-tag" placeholder="h1">
    </div>
    <div class="form-row">
        <label for="node-input-ret"><i class="fa fa-sign-out"></i> <span data-i18n="html.label.output"></span></label>
        <select id="node-input-ret" style="width:70%">
            <option value="html" data-i18n="html.output.html"></option>
            <option value="text" data-i18n="html.output.text"></option>
            <option value="attr" data-i18n="html.output.attr"></option>
            <!-- <option value="val">return the value from a form element</option> -->
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-as">&nbsp;</label>
        <select id="node-input-as" style="width:70%">
            <option value="single" data-i18n="html.format.single"></option>
            <option value="multi" data-i18n="html.format.multi"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-outproperty">&nbsp;</label>
        <span data-i18n="html.label.in" style="padding-left:8px; padding-right:2px; vertical-align:-1px;"></span> <input type="text" id="node-input-outproperty" style="width:64%">
    </div>
    <br/>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" style="width:70%" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('html',{
        category: 'parser',
        color:"#DEBD5C",
        defaults: {
            name: {value:""},
            property: {value:"payload"},
            outproperty: {value:"payload"},
            tag: {value:""},
            ret: {value:"html"},
            as: {value:"single"}
        },
        inputs:1,
        outputs:1,
        icon: "parser-html.svg",
        label: function() {
            return this.name||this.tag||"html";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            $("#node-input-property").typedInput({default:'msg',types:['msg']});
            $("#node-input-outproperty").typedInput({default:'msg',types:['msg']});
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="html">
    <p>Extracts elements from an html document held in <code>msg.payload</code> using a CSS selector.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
    <dt>payload <span class="property-type">string</span></dt>
    <dd>the html string from which to extract elements.</dd>
    <dt class="optional">select <span class="property-type">string</span></dt>
    <dd>if not configured in the edit panel the selector can be set as a property of msg.</dd>
</dl>
    <h3>Output</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">array | string</span></dt>
        <dd>the result can be either a single message with a payload containing an array of the matched elements, or multiple
           messages that each contain a matched element. If multiple messages are sent they will also have <code>parts</code> set.</dd>
    </dl>
    <h3>Details</h3>
    <p>This node supports a combination of CSS and jQuery selectors. See the
    <a href="https://github.com/fb55/CSSselect#user-content-supported-selectors" target="_blank">css-select documentation</a> for more information
    on the supported syntax.</p>
</script>

</div><div><!-- --- [red-module:node-red/JSON] --- -->

<script type="text/html" data-template-name="json">
    <div class="form-row">
        <label for="node-input-action"><i class="fa fa-dot-circle-o"></i> <span data-i18n="json.label.action"></span></label>
        <select style="width:70%" id="node-input-action">
            <option value=""    data-i18n="json.label.actions.toggle"></option>
            <option value="str" data-i18n="json.label.actions.str"></option>
            <option value="obj" data-i18n="json.label.actions.obj"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="json.label.property"></span></label>
        <input type="text" id="node-input-property" style="width:70%;"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <hr align="middle"/>
    <div class="form-row node-json-to-json-options">
        <label style="width:100%;"><span data-i18n="json.label.o2j"></span></label>
    </div>
    <div class="form-row node-json-to-json-options" style="padding-left: 20px;">
        <input style="width:20px; vertical-align:top; margin-right: 5px;" type="checkbox" id="node-input-pretty"><label style="width: auto;" for="node-input-pretty" data-i18n="json.label.pretty"></span>
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('json',{
        category: 'parser',
        color:"#DEBD5C",
        defaults: {
            name: {value:""},
            property: {value:"payload",required:true},
            action: {value:""},
            pretty: {value:false}
        },
        inputs:1,
        outputs:1,
        icon: "parser-json.svg",
        label: function() {
            return this.name||"json";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            if (this.property === undefined) {
                $("#node-input-property").val("payload");
            }
            $("#node-input-property").typedInput({default:'msg',types:['msg']});
            $("#node-input-action").on("change", function() {
                if (this.value === "" || this.value === "str") {
                    $(".node-json-to-json-options").show();
                } else {
                    $(".node-json-to-json-options").hide();
                }
            });
            $("#node-input-action").change();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="json">
    <p>Converts between a JSON string and its JavaScript object representation, in either direction.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | string</span></dt>
        <dd>A JavaScript object or JSON string.</dd>
        <dt>schema<span class="property-type">object</span></dt>
        <dd>An optional JSON Schema object to validate the payload against.
        The property will be deleted before the <code>msg</code> is sent to the next node.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | string</span></dt>
        <dd>
            <ul>
                <li>If the input is a JSON string it tries to parse it to a JavaScript object.</li>
                <li>If the input is a JavaScript object it creates a JSON string. The string can optionally be well-formatted.</li>
            </ul>
        </dd>
        <dt>schemaError<span class="property-type">array</span></dt>
        <dd>If JSON schema validation fails, the catch node will have a <code>schemaError</code> property
            containing an array of errors.</dd>
    </dl>
    <h3>Details</h3>
    <p>By default, the node operates on <code>msg.payload</code>, but can be configured
       to convert any message property.</p>
    <p>The node can also be configured to ensure a particular encoding instead of toggling
       between the two. This can be used, for example, with the <code>HTTP In</code>
       node to ensure the payload is a parsed object even if an incoming request
       did not set its content-type correctly for the HTTP In node to do the conversion.</p>
    <p>If the node is configured to ensure the property is encoded as a String and it
       receives a String, no further checks will be made of the property. It will
       not check the String is valid JSON nor will it reformat it if the format option
       is selected.</p>
    <p>For more details about JSON Schema you can consult the specification
    <a href="http://json-schema.org/latest/json-schema-validation.html">here</a>.</p>
</script>

</div><div><!-- --- [red-module:node-red/XML] --- -->

<script type="text/html" data-template-name="xml">
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="common.label.property"></span></label>
        <input type="text" id="node-input-property" style="width:70%;"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <hr align="middle"/>
    <div class="form-row">
        <label style="width:100%;"><span data-i18n="xml.label.x2o"></span></label>
    </div>
    <div class="form-row" style="padding-left: 20px;">
        <label style="width:250px;" for="node-input-attr" data-i18n="xml.label.represent"></label> <input type="text" id="node-input-attr" style="text-align:center; width:40px" placeholder="$">
    </div>
    <div class="form-row" style="padding-left: 20px;">
        <label style="width:250px;" for="node-input-chr" data-i18n="xml.label.prefix"></label> <input type="text" id="node-input-chr" style="text-align:center; width:40px" placeholder="_">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('xml',{
        category: 'parser',
        color:"#DEBD5C",
        defaults: {
            name: {value:""},
            property: {value:"payload",required:true},
            attr: {value:""},
            chr: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "parser-xml.svg",
        label: function() {
            return this.name||"xml";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            if (this.property === undefined) {
                $("#node-input-property").val("payload");
            }
            $("#node-input-property").typedInput({default:'msg',types:['msg']});
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="xml">
    <p>Converts between an XML string and its JavaScript object representation, in either direction.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | string</span></dt>
        <dd>A JavaScript object or XML string.</dd>
        <dt class="optional">options <span class="property-type">object</span></dt>
        <dd>This optional property can be used to pass in any of the options supported by the underlying
            library used to convert to and from XML. See <a href="https://github.com/Leonidas-from-XIV/node-xml2js/blob/master/README.md#options" target="_blank">the xml2js docs</a>
            for more information.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | string</span></dt>
        <dd>
            <ul>
                <li>If the input is a string it tries to parse it as XML and creates a JavaScript object.</li>
                <li>If the input is a JavaScript object it tries to build an XML string.</li>
            </ul>
        </dd>
    </dl>
    <h3>Details</h3>
    <p>When converting between XML and an object, any XML attributes are added as a property named <code>$</code> by default.
    Any text content is added as a property named <code>_</code>. These property names can be specified in the node configuration.</p>
    <p>For example, the following XML will be converted as shown:</p>
    <pre>&lt;p class="tag"&gt;Hello World&lt;/p&gt;</pre>
    <pre>{
  "p": {
    "$": {
      "class": "tag"
    },
    "_": "Hello World"
  }
}</pre>
</script>

</div><div><!-- --- [red-module:node-red/YAML] --- -->

<script type="text/html" data-template-name="yaml">
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="common.label.property"></span></label>
        <input type="text" id="node-input-property" style="width:70%;"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('yaml',{
        category: 'parser',
        color:"#DEBD5C",
        defaults: {
            property: {value:"payload",required:true},
            name: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "parser-yaml.svg",
        label: function() {
            return this.name||"yaml";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            if (this.property === undefined) {
                $("#node-input-property").val("payload");
            }
            $("#node-input-property").typedInput({default:'msg',types:['msg']});
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="yaml">
    <p>Converts between a YAML formatted string and its JavaScript object representation, in either direction.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | string</span></dt>
        <dd>A JavaScript object or YAML string.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | string</span></dt>
        <dd>
            <ul>
                <li>If the input is a YAML string it tries to parse it to a JavaScript object.</li>
                <li>If the input is a JavaScript object it creates a YAML string.</li>
            </ul>
        </dd>
    </dl>
</script>

</div><div><!-- --- [red-module:node-red/split] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="split">
    <div class="form-row"><span data-i18n="[html]split.intro"></span></div>
    <div class="form-row"><span data-i18n="[html]split.strBuff"></span></div>
    <div class="form-row">
        <label for="node-input-splt" style="padding-left:10px; margin-right:-10px;" data-i18n="split.splitUsing"></label>
        <input type="text" id="node-input-splt" style="width:70%">
        <input type="hidden" id="node-input-spltType">
    </div>
    <div class="form-row">
        <input type="checkbox" id="node-input-stream" style="margin-left:10px; vertical-align:top; width:auto;">
        <label for="node-input-stream" style="width:auto;" data-i18n="split.stream"></label>
    </div>
    <div class="form-row"><span data-i18n="[html]split.array"></span></div>
    <div class="form-row">
        <label for="node-input-arraySplt" style="padding-left:10px; margin-right:-10px;" data-i18n="split.splitUsing"></label>
        <input type="text" id="node-input-arraySplt" style="width:70%">
        <input type="hidden" id="node-input-arraySpltType">
    </div>
    <div class="form-row"><span data-i18n="[html]split.object"></span></div>
    <div class="form-row" style="padding-left: 10px"><span data-i18n="[html]split.objectSend"></span></div>
    <div class="form-row">
        <input type="checkbox" id="node-input-addname-cb" style="margin-left:10px; vertical-align:baseline; width:auto;">
        <label for="node-input-addname-cb" style="width:auto;" data-i18n="split.addname"></label>
        <input type="text" id="node-input-addname" style="width:70%">
    </div>
    <hr/>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('split',{
        category: 'sequence',
        color:"#E2D96E",
        defaults: {
            name: {value:""},
            splt: {value:"\\n"},
            spltType: {value:"str"},
            arraySplt: {value:1},
            arraySpltType: {value:"len"},
            stream: {value:false},
            addname: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "split.svg",
        label: function() {
            return this.name||this._("split.split");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            $("#node-input-splt").typedInput({
                default: 'str',
                typeField: $("#node-input-spltType"),
                types:[
                    'str',
                    'bin',
                    {value:"len", label:RED._("node-red:split.splitLength"),validate:/^\d+$/}
                ]
            });
            if (this.arraySplt === undefined) {
                $("#node-input-arraySplt").val(1);
            }
            $("#node-input-arraySplt").typedInput({
                default: 'len',
                typeField: $("#node-input-arraySpltType"),
                types:[
                    {value:"len", label:RED._("node-red:split.splitLength"),validate:/^\d+$/}
                ]
            });
            $("#node-input-addname").typedInput({
                typeField: $("#node-input-fnameType"),
                types:['msg']
            });

            $("#node-input-addname-cb").on("change", function() {
                $("#node-input-addname").prop('disabled',!this.checked);
            })
            if (this.addname === "") {
                $("#node-input-addname-cb").prop('checked',false);
                $("#node-input-addname").val('topic');
            } else {
                $("#node-input-addname-cb").prop('checked',true);
            }
            $("#node-input-addname-cb").change();
        },
        oneditsave: function() {
            if (!$("#node-input-addname-cb").prop('checked')) {
                $("#node-input-addname").val('');
            }
        }
    });
</script>


<script type="text/html" data-template-name="join">
    <div class="form-row">
        <label data-i18n="join.mode.mode"></label>
        <select id="node-input-mode" style="width:200px;">
            <option value="auto" data-i18n="join.mode.auto"></option>
            <option value="custom" data-i18n="join.mode.custom"></option>
            <option value="reduce" data-i18n="join.mode.reduce"></option>
        </select>
    </div>
    <div class="node-row-custom">
        <div class="form-row node-row-property">
            <label data-i18n="join.combine"> </label>
            <input type="text" id="node-input-property" style="width:70%;">
            <input type="hidden" id="node-input-propertyType">
        </div>
        <div class="form-row">
            <label data-i18n="join.create"></label>
            <select id="node-input-build" style="width:70%;">
                <option value="string" data-i18n="join.type.string"></option>
                <option value="buffer" data-i18n="join.type.buffer"></option>
                <option value="array" data-i18n="join.type.array"></option>
                <option value="object" data-i18n="join.type.object"></option>
                <option value="merged" data-i18n="join.type.merged"></option>
            </select>
        </div>
        <div class="form-row node-row-key">
            <label style="vertical-align:top; margin-top:7px; width:auto; margin-right: 5px;" data-i18n="join.using"></label>
            <div style="display:inline-block">
                <input type="text" id="node-input-key" style="width:220px;"> <span data-i18n="join.key"></span>
            </div>
        </div>
        <div class="form-row node-row-joiner">
            <label for="node-input-joiner" data-i18n="join.joinedUsing"></label>
            <input type="text" id="node-input-joiner" style="width:70%">
            <input type="hidden" id="node-input-joinerType">
        </div>
        <div class="form-row node-row-trigger" id="trigger-row">
            <label style="width:auto;" data-i18n="join.send"></label>
            <ul>
                <li>
                    <label style="width:280px;" for="node-input-count" data-i18n="join.afterCount"></label> <input id="node-input-count" data-i18n="[placeholder]join.count" type="text" style="width:75px;">
                </li>
                <li class="node-row-accumulate" style="list-style-type:none;">
                    <input type="checkbox" id="node-input-accumulate" style="display:inline-block; width:20px; margin-left:20px; vertical-align:top;">  <label style="width: auto" for="node-input-accumulate" data-i18n="join.subsequent"></label>
                </li>
                <li>
                    <label style="width:280px;" for="node-input-timeout" data-i18n="join.afterTimeout"></label> <input id="node-input-timeout" data-i18n="[placeholder]join.seconds" type="text" style="width:75px;">
                </li>
                <li>
                    <label style="width:auto; padding-top:6px;" data-i18n="[html]join.complete"></label>
                </li>
            </ul>
        </div>
    </div>
    <div class="node-row-reduce">
        <div class="form-row">
            <label for="node-input-reduceExp" data-i18n="join.reduce.exp" style="margin-left:10px;"></label>
            <input type="text" id="node-input-reduceExp" data-i18n="[placeholder]join.reduce.exp-value" style="width:65%">
        </div>
        <div class="form-row">
            <label for="node-input-reduceInit" data-i18n="join.reduce.init" style="margin-left:10px;"></label>
            <input type="text" id="node-input-reduceInit" data-i18n="[placeholder]join.reduce.init" style="width:65%">
            <input type="hidden" id="node-input-reduceInitType">
        </div>
        <div class="form-row">
            <label for="node-input-reduceFixup" data-i18n="join.reduce.fixup" style="margin-left:10px;"></label>
            <input type="text" id="node-input-reduceFixup" data-i18n="[placeholder]join.reduce.exp-value" style="width:65%">
        </div>
        <div class="form-row">
            <label>&nbsp;</label>
            <input type="checkbox" id="node-input-reduceRight" style="display:inline-block; width:auto; vertical-align:top; margin-left:10px;">
            <label for="node-input-reduceRight" style="width:70%;" data-i18n="join.reduce.right" style="margin-left:10px;"/>
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-tips form-tips-auto hide" data-i18n="[html]join.tip"></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('join',{
        category: 'sequence',
        color:"#E2D96E",
        defaults: {
            name: {value:""},
            mode: {value:"auto"},
            build: { value:"string"},
            property: { value:"payload", validate:RED.validators.typedInput("propertyType")},
            propertyType: { value:"msg"},
            key: {value:"topic"},
            joiner: { value:"\\n"},
            joinerType: { value:"str"},
            accumulate: { value:"false" },
            timeout: {value:""},
            count: {value:""},
            reduceRight: {value:false},
            reduceExp: {value:undefined},
            reduceInit: {value:undefined},
            reduceInitType: {value:undefined},
            reduceFixup: {value:undefined}
        },
        inputs:1,
        outputs:1,
        icon: "join.svg",
        label: function() {
            return this.name||this._("join.join");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;

            $("#node-input-mode").on("change", function(e) {
                var val = $(this).val();
                $(".node-row-custom").toggle(val==='custom');
                $(".node-row-reduce").toggle(val==='reduce');
                $(".form-tips-auto").toggle((val==='auto') || (val==='reduce'));
                if (val === "auto") {
                    $("#node-input-accumulate").attr('checked', false);
                }
                else if (val === "custom") {
                    $("#node-input-build").change();
                }
                else if (val === "reduce") {
                    var jsonata_or_empty = {
                        value: "jsonata",
                        label: "expression",
                        icon: "red/images/typedInput/expr.png",
                        validate: function(v) {
                            try{
                                if(v !== "") {
                                    jsonata(v);
                                }
                                return true;
                            }
                            catch(e){
                                return false;
                            }
                        },
                        expand:function() {
                            var that = this;
                            RED.editor.editExpression({
                                value: this.value().replace(/\t/g,"\n"),
                                complete: function(v) {
                                    that.value(v.replace(/\n/g,"\t"));
                                }
                            })
                        }
                    };
                    $("#node-input-reduceExp").typedInput({types:[jsonata_or_empty]});
                    $("#node-input-reduceInit").typedInput({
                        default: 'num',
                        types:['flow','global','str','num','bool','json','bin','date','jsonata','env'],
                        typeField: $("#node-input-reduceInitType")
                    });
                    $("#node-input-reduceFixup").typedInput({types:[jsonata_or_empty]});
                }
            });

            $("#node-input-build").on("change", function(e) {
                var val = $(this).val();
                $(".node-row-key").toggle(val==='object');
                $(".node-row-accumulate").toggle(val==='object' || val==='merged');
                $(".node-row-joiner").toggle(val==='string' || val==='buffer');
                $(".node-row-trigger").toggle(val!=='auto');
                if (val === 'string' || val==='buffer') {
                    $("#node-input-property").typedInput('types',['msg']);
                    $("#node-input-joiner").typedInput("show");
                } else {
                    $("#node-input-property").typedInput('types', ['msg', {
                        value: "full",
                        label: RED._("node-red:join.completeMessage"),
                        hasValue: false
                    }]);
                }
            });

            $("#node-input-joiner").typedInput({
                default: 'str',
                typeField: $("#node-input-joinerType"),
                types:['str', 'bin']
            });

            $("#node-input-property").typedInput({
                typeField: $("#node-input-propertyType"),
                types: ['msg', {
                    value: "full",
                    label: RED._("node-red:join.completeMessage"),
                    hasValue: false
                }]
            });

            $("#node-input-key").typedInput({
                types:['msg']
            });

            $("#node-input-build").change();
            $("#node-input-mode").change();
        },
        oneditsave: function() {
            var build = $("#node-input-build").val();
            if (build !== 'object' && build !== 'merged') {
                $("#node-input-accumulate").prop("checked",false);
            }
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="split">
    <p>Splits a message into a sequence of messages.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object | string | array | buffer</span></dt>
        <dd>The behaviour of the node is determined by the type of <code>msg.payload</code>:
            <ul>
                <li><b>string</b>/<b>buffer</b> - the message is split using the specified character (default: <code>\n</code>), buffer sequence or into fixed lengths.</li>
                <li><b>array</b> - the message is split into either individual array elements, or arrays of a fixed-length.</li>
                <li><b>object</b> - a message is sent for each key/value pair of the object.</li>
            </ul>
        </dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>parts<span class="property-type">object</span></dt>
        <dd>This property contains information about how the message was split from
        the original message. If passed to the <b>join</b> node, the sequence can be
        reassembled into a single message. The property has the following properties:
        <ul>
            <li><code>id</code> - an identifier for the group of messages</li>
            <li><code>index</code> - the position within the group</li>
            <li><code>count</code> - if known, the total number of messages in the group. See 'streaming mode' below.</li>
            <li><code>type</code> - the type of message - string/array/object/buffer</li>
            <li><code>ch</code> - for a string or buffer, the data used to the split the message as either the string or an array of bytes</li>
            <li><code>key</code> - for an object, the key of the property this message was created from. The node can be configured to also copy this value to another message properties, such as <code>msg.topic</code>.</li>
            <li><code>len</code> - the length of each message when split using a fixed length value</li>
        </ul>
        </dd>
    </dl>
    <h3>Details</h3>
    <p>This node makes it easy to create a flow that performs common actions across
    a sequence of messages before, using the <b>join</b> node, recombining the
    sequence into a single message.</p>
    <p>It uses the <code>msg.parts</code> property to track the individual parts
    of a sequence.</p>
    <h4>Streaming mode</h4>
    <p>The node can also be used to reflow a stream of messages. For example, a
    serial device that sends newline-terminated commands may deliver a single message
    with a partial command at its end. In 'streaming mode', this node will split
    a message and send each complete segment. If there is a partial segment at the end,
    the node will hold on to it and prepend it to the next message that is received.
    </p>
    <p>When operating in this mode, the node will not set the <code>msg.parts.count</code>
    property as it does not know how many messages to expect in the stream. This
    means it cannot be used with the <b>join</b> node in its automatic mode</p>
</script>

<script type="text/html" data-help-name="join">
    <p>Joins sequences of messages into a single message.</p>
    <p>There are three modes available:</p>
    <dl>
        <dt>automatic</dt>
        <dd>When paired with the <b>split</b> node, it will automatically join the messages to reverse the split that was performed.</dd>
        <dt>manual</dt>
        <dd>Join sequences of messages in a variety of ways.</dd>
        <dt>reduce sequence</dt>
        <dd>Apply an expression against all messages in a sequence to reduce it to a single message.</dd>
    </dl>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">parts<span class="property-type">object</span></dt>
        <dd>To automatically join a sequence of messages, they should all have
        this property set. The <b>split</b> node generates this property but it
        can be manually created. It has the following properties:
        <ul>
            <li><code>id</code> - an identifier for the group of messages</li>
            <li><code>index</code> - the position within the group</li>
            <li><code>count</code> - the total number of messages in the group</li>
            <li><code>type</code> - the type of message - string/array/object/buffer</li>
            <li><code>ch</code> - for a string or buffer, the data used to the split the message as either the string or an array of bytes</li>
            <li><code>key</code> - for an object, the key of the property this message was created from</li>
            <li><code>len</code> - the length of each message when split using a fixed length value</li>
        </ul>
        </dd>
        <dt class="optional">complete</dt>
        <dd>If set, the node will append the payload, and then send the output message in its current state.
            If you don't wish to append the payload, delete it from the msg.</dd>
    </dl>
    <h3>Details</h3>

    <h4>Automatic mode</h4>
    <p>Automatic mode uses the <code>parts</code> property of incoming messages to
       determine how the sequence should be joined. This allows it to automatically
       reverse the action of a <b>split</b> node.

    <h4>Manual mode</h4>
    <p>When configured to join in manual mode, the node is able to join sequences
     of messages into a number of different results:</p>
    <ul>
        <li>a <b>string</b> or <b>buffer</b> - created by joining the selected property of each message with the specified join characters or buffer.</li>
        <li>an <b>array</b> - created by adding each selected property, or entire message, to the output array.</li>
        <li>a <b>key/value object</b> - created by using a property of each message to determine the key under which
        the required value is stored.</li>
        <li>a <b>merged object</b> - created by merging the property of each message under a single object.</li>
    </ul>
    <p>The other properties of the output message are taken from the last message received before the result is sent.</p>
    <p>A <i>count</i> can be set for how many messages should be received before generating the output message.
    For object outputs, once this count has been reached, the node can be configured to send a message for each subsequent message
    received.</p>
    <p>A <i>timeout</i> can be set to trigger sending the new message using whatever has been received so far.</p>
    <p>If a message is received with the <code>msg.complete</code> property set, the output message is finalised and sent.
    This resets any part counts.</p>
    <p>If a message is received with the <code>msg.reset</code> property set, the partly complete message is deleted and not sent.
    This resets any part counts.</p>

    <h4>Reduce Sequence mode</h4>
    <p>When configured to join in reduce mode, an expression is applied to each
       message in a sequence and the result accumulated to produce a single message.</p>

    <dl class="message-properties">
        <dt>Initial value</dt>
        <dd>The initial value of the accumulated value (<code>$A</code>).</dd>
        <dt>Reduce expression</dt>
        <dd>A JSONata expression that is called for each message in the sequence.
            The result is passed to the next call of the expression as the accumulated value.
            In the expression, the following special variables can be used:
            <ul>
                <li><code>$A</code>: the accumulated value, </li>
                <li><code>$I</code>: index of the message in the sequence, </li>
                <li><code>$N</code>: number of messages in the sequence.</li>
            </ul>
        </dd>
        <dt>Fix-up expression</dt>
        <dd>An optional JSONata expression that is applied after the reduce expression
            has been applied to all messages in the sequence.
            In the expression, following special variables can be used:
            <ul>
                <li><code>$A</code>: the accumulated value, </li>
                <li><code>$N</code>: number of messages in the sequence.</li>
            </ul>
        </dd>
        <p>By default, the reduce expression is applied in order, from the first
           to the last message of the sequence. It can optionally be applied in
           reverse order.</p>
        <p>$N is the number of messages that arrive - even if they are identical.</p>
    </dl>
    <p><b>Example:</b> the following settings, given a sequence of numeric values,
       calculates the average value:
        <ul>
            <li><b>Reduce expression</b>: <code>$A+payload</code></li>
            <li><b>Initial value</b>: <code>0</code></li>
            <li><b>Fix-up expression</b>: <code>$A/$N</code></li>
        </ul>
    </p>
    <h4>Storing messages</h4>
    <p>This node will buffer messages internally in order to work across sequences. The
       runtime setting <code>nodeMessageBufferMaxLength</code> can be used to limit how many messages nodes
       will buffer.</p>
</script>

</div><div><!-- --- [red-module:node-red/sort] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="sort">

    <div class="form-row">
        <label for="node-input-target"><i class="fa fa-dot-circle-o"></i> <span data-i18n="sort.target"></span></label>
        <input type="text" id="node-input-target" style="width:70%;">
        <input type="hidden" id="node-input-targetType">
    </div>

    <div class="node-row-sort-msg-key">
        <div class="form-row">
            <label for="node-input-msgKey"><i class="fa fa-filter"></i> <span data-i18n="sort.key"></span></label>
            <input type="text" id="node-input-msgKey" style="width:70%;">
            <input type="hidden" id="node-input-msgKeyType">
        </div>
    </div>

    <div class="node-row-sort-seq-key">
        <div class="form-row">
            <label for="node-input-seqKey"><i class="fa fa-filter"></i> <span data-i18n="sort.key"></span></label>
            <input type="text" id="node-input-seqKey" style="width:70%;">
            <input type="hidden" id="node-input-seqKeyType">
        </div>
    </div>

    <div class="form-row">
        <label><i class="fa fa-random"></i>  <span data-i18n="sort.order"></span></label>
        <select id="node-input-order" style="width:200px;">
            <option value="ascending" data-i18n="sort.ascending"></option>
            <option value="descending" data-i18n="sort.descending"></option>
        </select>
    </div>

    <div class="form-row" id="node-as_num">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-as_num" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-as_num" style="width: 70%;" data-i18n="sort.as-number"></label>
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('sort',{
        category: 'sequence',
        color:"#E2D96E",
        defaults: {
            name: { value:"" },
            order: { value:"ascending" },
            as_num: { value:false },
            target: { value:"payload" },
            targetType: { value:"msg" },
            msgKey: { value:"payload" },
            msgKeyType: { value:"elem" },
            seqKey: { value:"payload" },
            seqKeyType: { value:"msg" }
        },
        inputs:1,
        outputs:1,
        icon: "sort.svg",
        label: function() {
            return this.name||this._("sort.sort");
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function() {
            var seq = {
                value: "seq",
                label: RED._("node-red:sort.seq"),
                hasValue: false
            };
            var elem = {
                value: "elem",
                label: RED._("node-red:sort.elem"),
                hasValue: false
            };
            $("#node-input-target").typedInput({
                default:'msg',
                typeField: $("#node-input-targetType"),
                types:['msg', seq]
            });
            $("#node-input-msgKey").typedInput({
                default:'elem',
                typeField: $("#node-input-msgKeyType"),
                types:[elem, 'jsonata']
            });
            $("#node-input-seqKey").typedInput({
                default:'msg',
                typeField: $("#node-input-seqKeyType"),
                types:['msg', 'jsonata']
            });
            $("#node-input-target").on("change", function(e) {
                var val = $("#node-input-target").typedInput('type');
                $(".node-row-sort-msg-key").toggle(val === "msg");
                $(".node-row-sort-seq-key").toggle(val === "seq");
            });
            $("#node-input-target").change();
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="sort">
    <p>A function that sorts message property or a sequence of messages.</p>
    <p>When configured to sort message property, the node sorts array data pointed to by specified message property.</p>
    <p>When configured to sort a sequence of messages, it will reorder the messages.</p>
    <p>The sorting order can be:</p>
    <ul>
        <li><b>ascending</b>,</li>
        <li><b>descending</b>.</li>
    </ul>
    <p>For numbers, numerical ordering can be specified by a checkbox.</p>
    <p>Sort key can be element value or JSONata expression for sorting property value, or message property or JSONata expression for sorting a message sequence.<p>
    <p>When sorting a message sequence, the sort node relies on the received messages to have <code>msg.parts</code> set.  The split node generates this property, but can be manually created.  It has the following properties:</p>
    <p>
        <ul>
            <li><code>id</code> - an identifier for the group of messages</li>
            <li><code>index</code> - the position within the group</li>
            <li><code>count</code> - the total number of messages in the group</li>
        </ul>
    </p>
    <p><b>Note:</b> This node internally keeps messages for its operation.  In order to prevent unexpected memory usage, maximum number of messages kept can be specified.  Default is no limit on number of messages.
        <ul>
            <li><code>nodeMessageBufferMaxLength</code> property set in <b>settings.js</b>.</li>
        </ul>
    </p>
</script>

</div><div><!-- --- [red-module:node-red/batch] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="batch">
    <div class="form-row">
        <label for="node-input-mode"><span data-i18n="batch.mode.label"></span></label>
        <select type="text" id="node-input-mode" style="width: 300px;">
            <option value="count" data-i18n="batch.mode.num-msgs"></option>
            <option value="interval" data-i18n="batch.mode.interval"></option>
            <option value="concat" data-i18n="batch.mode.concat"></option>
        </select>
    </div>

    <div class="node-row-msg-count">
        <div class="form-row node-row-count">
            <label style="margin-left: 10px; width: 175px;" for="node-input-count" data-i18n="batch.count.label"></label>
            <input type="text" id="node-input-count" style="width: 50px;">
        </div>
    </div>

    <div class="node-row-msg-overlap">
        <div class="form-row node-row-overlap">
            <label style="margin-left: 10px; width: 175px;" for="node-input-overlap" data-i18n="batch.count.overlap"></label>
            <input type="text" id="node-input-overlap" style="width: 50px;">
        </div>
    </div>

    <div class="node-row-msg-interval">
        <div class="form-row node-row-interval">
            <label style="margin-left: 10px; width: 175px;" for="node-input-interval"> <span data-i18n="batch.interval.label"></span></label>
            <input type="text" id="node-input-interval" style="width: 50px;">
            <span data-i18n="batch.interval.seconds"></span>
        </div>
        <div class="form-row">
            <input type="checkbox" id="node-input-allowEmptySequence" style="margin-left:20px; margin-right: 10px; vertical-align:top; width:auto;">
            <label for="node-input-allowEmptySequence" style="width:auto;" data-i18n="batch.interval.empty"></label>
	</div>
    </div>

    <div class="node-row-msg-concat">
        <div class="form-row">
            <label data-i18n="batch.concat.topics-label"></label>
            <div class="form-row node-input-topics-container-row">
                <ol id="node-input-topics-container"></ol>
            </div>
        </div>
    </div>

    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>

</script>

<script type="text/javascript">
    RED.nodes.registerType("batch",{
        category: "sequence",
        color:"#E2D96E",
        defaults: {
            name: {value:""},
            mode: {value:"count"},
            count: {value:10,validate:function(v) { return RED.validators.number(v) && (v >= 1); }},
            overlap: {value:0,validate:function(v) { return RED.validators.number(v) && (v >= 0); }},
            interval: {value:10,validate:function(v) { return RED.validators.number(v) && (v >= 1); }},
            allowEmptySequence: {value:false},
            topics: {value:[{topic:""}]}
        },
        inputs:1,
        outputs:1,
        icon: "batch.svg",
        label: function() {
            return this.name||this._("batch.batch");;
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function() {
            var node = this;
            var topic_str = node._("batch.concat.topic");

            function resizeTopics(topic) {
                var newWidth = topic.width();
                topic.find('.red-ui-typedInput')
                     .typedInput("width",newWidth-15);
            }

            $("#node-input-topics-container")
                .css('min-height','150px').css('min-width','430px')
                .editableList({
                    addItem: function(container, i, opt) {
                        if (!opt.hasOwnProperty('topic')) {
                            opt.topic = "";
                        }
                        var row = $('<div/>').appendTo(container);
                        var valueField = $('<input/>',{
                            class:"node-input-topic-value",
                            type:"text",
                            style:"margin-left: 5px;"
                        }).appendTo(row)
                        .typedInput({default:'str', types:['str']});
                        valueField.typedInput('value', opt.topic);
                        valueField.typedInput('type', 'str');
                        valueField.attr('placeholder', topic_str);
                        resizeTopics(container);
                    },
                    resizeItem: resizeTopics,
                    sortable: true,
                    removable: true
                });

            $("#node-input-count").spinner({min:1});
            $("#node-input-overlap").spinner({min:0});
            $("#node-input-interval").spinner({min:1});
            $("#node-input-mode").on("change", function(e) {
                var val = $(this).val();
                $(".node-row-msg-count").toggle(val==="count");
                $(".node-row-msg-overlap").toggle(val==="count");
                $(".node-row-msg-interval").toggle(val==="interval");
                $(".node-row-msg-concat").toggle(val==="concat");
                if (val==="concat") {
                    var topics = node.topics;
                    var container = $("#node-input-topics-container");
                    container.editableList('empty');
                    for (var i = 0; i < topics.length; i++) {
                        var topic = topics[i];
                        container.editableList('addItem', topic);
                    }
                }
            });
        },
        oneditsave: function() {
            var topics = $("#node-input-topics-container").editableList('items');
            var node = this;
            node.topics = [];
            topics.each(function(i) {
                var topicData = $(this).data('data');
                var topic = $(this);
                var vf = topic.find(".node-input-topic-value");
                var value = vf.typedInput('value');
                var type = vf.typedInput('type');
                var r = {topic:value};
                node.topics.push(r);
            });
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-input-topics-container-row)");
            var height = size.height;
            for (var i = 0; i < rows.length; i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-input-topics-container-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
            $("#node-input-topics-container").editableList('height',height);
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="batch">
    <p>Creates sequences of messages based on various rules.</p>
    <h3>Details</h3>
    <p>There are three modes for creating message sequences:</p>
    <dl>
        <dt>Number of messages</dt>
        <dd>groups messages into sequences of a given length. The <b>overlap</b>
        option specifies how many messages at the end of one sequence should be
        repeated at the start of the next sequence.</dd>

        <dt>Time interval</dt>
        <dd>groups messages that arrive within the specified interval. If no messages
            arrive within the interval, the node can optionally send on an empty message.</dd>

        <dt>Concatenate Sequences</dt>
        <dd>creates a message sequence by concatenating incoming sequences. Each message
            must have a <code>msg.topic</code> property and a <code>msg.parts</code> property
            identifying its sequence. The node is configured with a list of <code>topic</code>
            values to identify the order sequences are concatenated.
        </dd>
    </dl>
    <h4>Storing messages</h4>
    <p>This node will buffer messages internally in order to work across sequences. The
       runtime setting <code>nodeMessageBufferMaxLength</code> can be used to limit how many messages nodes
       will buffer.</p>
    <p>If a message is received with the <code>msg.reset</code> property set, the buffered messages are deleted and not sent.</p>
</script>

</div><div><!-- --- [red-module:node-red/file] --- -->

<script type="text/html" data-template-name="file">
    <div class="form-row node-input-filename">
         <label for="node-input-filename"><i class="fa fa-file"></i> <span data-i18n="file.label.filename"></span></label>
         <input id="node-input-filename" type="text">
    </div>
    <div class="form-row">
        <label for="node-input-overwriteFile"><i class="fa fa-random"></i> <span data-i18n="file.label.action"></span></label>
        <select type="text" id="node-input-overwriteFile" style="width: 250px;">
            <option value="false" data-i18n="file.action.append"></option>
            <option value="true" data-i18n="file.action.overwrite"></option>
            <option value="delete" data-i18n="file.action.delete"></option>
        </select>
    </div>
    <div class="form-row form-row-file-write-options">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-appendNewline" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-appendNewline" style="width: 70%;"><span data-i18n="file.label.addnewline"></span></label>
    </div>
    <div class="form-row form-row-file-write-options">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-createDir" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-createDir" style="width: 70%;"><span data-i18n="file.label.createdir"></span></label>
    </div>
    <div class="form-row form-row-file-encoding">
        <label for="node-input-encoding"><i class="fa fa-flag"></i> <span data-i18n="file.label.encoding"></span></label>
        <select type="text" id="node-input-encoding" style="width: 250px;">
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-tips"><span data-i18n="file.tip"></span></div>
</script>

<script type="text/html" data-template-name="file in">
    <div class="form-row">
         <label for="node-input-filename"><i class="fa fa-file"></i> <span data-i18n="file.label.filename"></span></label>
         <input id="node-input-filename" type="text" data-i18n="[placeholder]file.label.filename">
    </div>
    <div class="form-row">
        <label for="node-input-format"><i class="fa fa-sign-out"></i> <span data-i18n="file.label.outputas"></span></label>
        <select id="node-input-format" style="width: 250px;">
            <option value="utf8" data-i18n="file.output.utf8"></option>
            <option value="lines" data-i18n="file.output.lines"></option>
            <option value="" data-i18n="file.output.buffer"></option>
            <option value="stream" data-i18n="file.output.stream"></option>
        </select>
    </div>
    <div class="form-row" id="encoding-spec">
        <label for="node-input-encoding"><i class="fa fa-flag"></i> <span data-i18n="file.label.encoding"></span></label>
        <select type="text" id="node-input-encoding" style="width: 250px;">
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
    <div class="form-tips"><span data-i18n="file.tip"></span></div>
</script>

<script type="text/javascript">
(function(){
    var encodings = [
        [ "file.encoding.native",
          "utf8",
          "ucs2",
          "utf-16le",
          "ascii",
          "binary",
          "base64",
          "hex"
        ],
        [ "file.encoding.unicode",
          "utf-16be",
        ],
        [ "file.encoding.japanese",
          "Shift_JIS",
          "Windows-31j",
          "Windows932",
          "EUC-JP"
        ],
        [ "file.encoding.chinese",
          "GB2312",
          "GBK",
          "GB18030",
          "Windows936",
          "EUC-CN"
        ],
        [ "file.encoding.korean",
          "KS_C_5601",
          "Windows949",
          "EUC-KR"
        ],
        [ "file.encoding.taiwan",
          "Big5",
          "Big5-HKSCS",
          "Windows950"
        ],
        [ "file.encoding.windows",
          "cp874",
          "cp1250",
          "cp1251",
          "cp1252",
          "cp1253",
          "cp1254",
          "cp1255",
          "cp1256",
          "cp1257",
          "cp1258"
        ],
        [ "file.encoding.iso",
          "ISO-8859-1",
          "ISO-8859-2",
          "ISO-8859-3",
          "ISO-8859-4",
          "ISO-8859-5",
          "ISO-8859-6",
          "ISO-8859-7",
          "ISO-8859-8",
          "ISO-8859-9",
          "ISO-8859-10",
          "ISO-8859-11",
          "ISO-8859-12",
          "ISO-8859-13",
          "ISO-8859-14",
          "ISO-8859-15",
          "ISO-8859-16"
        ],
        [ "file.encoding.ibm",
          "cp437",
          "cp737",
          "cp775",
          "cp808",
          "cp850",
          "cp852",
          "cp855",
          "cp856",
          "cp857",
          "cp858",
          "cp860",
          "cp861",
          "cp866",
          "cp869",
          "cp922",
          "cp1046",
          "cp1124",
          "cp1125",
          "cp1129",
          "cp1133",
          "cp1161",
          "cp1162",
          "cp1163"
        ],
        [ "file.encoding.mac",
          "maccroatian",
          "maccyrillic",
          "macgreek",
          "maciceland",
          "macroman",
          "macromania",
          "macthai",
          "macturkish",
          "macukraine",
          "maccenteuro",
          "macintosh"
        ],
        [ "file.encoding.koi8",
          "koi8-r",
          "koi8-u",
          "koi8-ru",
          "koi8-t"
        ],
        [ "file.encoding.misc",
          "armscii8",
          "rk1048",
          "tcvn",
          "georgianacademy",
          "georgianps",
          "pt154",
          "viscii",
          "iso646cn",
          "iso646jp",
          "hproman8",
          "tis620"
        ]
    ];

    RED.nodes.registerType('file',{
        category: 'storage',
        defaults: {
            name: {value:""},
            filename: {value:""},
            appendNewline: {value:true},
            createDir: {value:false},
            overwriteFile: {value:"false"},
            encoding: {value:"none"}
        },
        color:"BurlyWood",
        inputs:1,
        outputs:1,
        icon: "file-out.svg",
        label: function() {
            if (this.overwriteFile === "delete") {
                return this.name||this._("file.label.deletelabel",{file:this.filename});
            } else {
                return this.name||this.filename||this._("file.label.filelabel");
            }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;
            var encSel = $("#node-input-encoding");
            var label = node._("file.encoding.none");
            $("<option/>", {
                value: "none",
                label: label
            }).text(label).appendTo(encSel);
            $("<option/>", {
                value: "setbymsg",
                label: node._("file.encoding.setbymsg")
            }).text(label).appendTo(encSel);
            encodings.forEach(function(item) {
                if(Array.isArray(item)) {
                    var group = $("<optgroup/>", {
                        label: node._(item[0])
                    }).appendTo(encSel);
                    for (var i = 1; i < item.length; i++) {
                        var enc = item[i];
                        $("<option/>", {
                            value: enc,
                            label: enc
                        }).text(enc).appendTo(group);
                    }
                }
                else {
                    $("<option/>", {
                        value: item,
                        label: item
                    }).text(item).appendTo(encSel);
                }
            });
            encSel.val(node.encoding);
            $("#node-input-overwriteFile").on("change",function() {
                if (this.value === "delete") {
                    $(".form-row-file-write-options").hide();
                    $(".form-row-file-encoding").hide();
                } else {
                    $(".form-row-file-write-options").show();
                    $(".form-row-file-encoding").show();
                }
            });
        }
    });

    RED.nodes.registerType('file in',{
        category: 'storage',
        defaults: {
            name: {value:""},
            filename: {value:""},
            format: {value:"utf8"},
            chunk: {value:false},
            sendError: {value: false},
            encoding: {value: "none"}
        },
        color:"BurlyWood",
        inputs:1,
        outputs:1,
        outputLabels: function(i) {
            var l = this._(((this.format === "utf8")||(this.format === "lines")) ? "file.label.utf8String" : "file.label.binaryBuffer");
            return ( l + (((this.format === "lines")||(this.format === "stream")) ? "s" : "") );
        },
        icon: "file-in.svg",
        label: function() {
            return this.name||this.filename||this._("file.label.filelabel");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            var node = this;
            var encSel = $("#node-input-encoding");
            var label = node._("file.encoding.none");
            $("<option/>", {
                value: "none",
                label: label
            }).text(label).appendTo(encSel);
            encodings.forEach(function(item) {
                if(Array.isArray(item)) {
                    var group = $("<optgroup/>", {
                        label: node._(item[0])
                    }).appendTo(encSel);
                    for (var i = 1; i < item.length; i++) {
                        var enc = item[i];
                        $("<option/>", {
                            value: enc,
                            label: enc
                        }).text(enc).appendTo(group);
                    }
                }
                else {
                    $("<option/>", {
                        value: item,
                        label: item
                    }).text(item).appendTo(encSel);
                }
            });
            encSel.val(node.encoding);
            $("#node-input-format").on("change",function() {
                var format = $("#node-input-format").val();
                if ((format === "utf8") || (format === "lines")) {
                    $("#encoding-spec").show();
                }
                else {
                    $("#encoding-spec").hide();
                }
            });
        }
    });
})();
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="file">
    <p>Writes <code>msg.payload</code> to a file, either adding to the end or replacing the existing content.
       Alternatively, it can delete the file.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">filename <span class="property-type">string</span></dt>
        <dd>If not configured in the node, this optional property sets the name of the file to be updated.</dd>
        <dt class="optional">encoding <span class="property-type">string</span></dt>
        <dd>If encoding is configured to be set by msg, then this optional property can set the encoding.</dt>
    </dl>
    <h3>Output</h3>
    <p>On completion of write, input message is sent to output port.</p>
    <h3>Details</h3>
    <p>Each message payload will be added to the end of the file, optionally appending
    a newline (\n) character between each one.</p>
    <p>If <code>msg.filename</code> is used the file will be closed after every write.
    For best performance use a fixed filename.</p>
    <p>It can be configured to overwrite the entire file rather than append. For example,
    when writing binary data to a file, such as an image, this option should be used
    and the option to append a newline should be disabled.</p>
    <p>Encoding of data written to a file can be specified from list of encodings.</p>
    <p>Alternatively, this node can be configured to delete the file.</p>
</script>

<script type="text/html" data-help-name="file in">
    <p>Reads the contents of a file as either a string or binary buffer.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt class="optional">filename <span class="property-type">string</span></dt>
        <dd>if not set in the node configuration, this property sets the filename to read.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string | buffer</span></dt>
        <dd>The contents of the file as either a string or binary buffer.</dd>
        <dt class="optional">filename <span class="property-type">string</span></dt>
        <dd>If not configured in the node, this optional property sets the name of the file to be read.</dd>
    </dl>
    <h3>Details</h3>
    <p>The filename should be an absolute path, otherwise it will be relative to
    the working directory of the Node-RED process.</p>
    <p>On Windows, path separators may need to be escaped, for example: <code>\\Users\\myUser</code>.</p>
    <p>Optionally, a text file can be split into lines, outputting one message per line, or a binary file
    split into smaller buffer chunks - the chunk size being operating system dependant, but typically 64k (Linux/Mac) or 41k (Windows).</p>
    <p>When split into multiple messages, each message will have a <code>parts</code>
    property set, forming a complete message sequence.</p>
    <p>Encoding of input data can be specified from list of encodings if output format is string.</p>
    <p>Errors should be caught and handled using a Catch node.</p>
</script>

</div><div><!-- --- [red-module:node-red/watch] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="watch">
    <div class="form-row node-input-filename">
         <label for="node-input-files"><i class="fa fa-file"></i> <span data-i18n="watch.label.files"></span></label>
         <input id="node-input-files" type="text" tabindex="1" data-i18n="[placeholder]watch.placeholder.files">
    </div>
    <div class="form-row">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-recursive" style="display:inline-block; width:auto; vertical-align:top;">
        <label for="node-input-recursive" style="width:70%;"> <span data-i18n="watch.label.recursive"></span></label>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]common.label.name">
    </div>
     <div id="node-input-tip" class="form-tips"><span data-i18n="watch.tip"></span></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('watch',{
        category: 'storage',
        defaults: {
            name: {value:""},
            files: {value:"",required:true},
            recursive: {value:""}
        },
        color:"BurlyWood",
        inputs:0,
        outputs:1,
        icon: "watch.svg",
        label: function() {
            return this.name||this.files||this._("watch.watch");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="watch">
    <p>Watches a directory or file for changes.</p>
    <p>You can enter a list of comma separated directories and/or files. You will
    need to put quotes "..." around any that have spaces in.</p>
    <p>On Windows you must use double back-slashes \\ in any directory names.</p>
    <p>The full filename of the file that actually changed is put into <code>msg.payload</code> and <code>msg.filename</code>,
    while a stringified version of the watch list is returned in <code>msg.topic</code>.</p>
    <p><code>msg.file</code> contains just the short filename of the file that changed.
    <code>msg.type</code> has the type of thing changed, usually <i>file</i> or <i>directory</i>,
    while <code>msg.size</code> holds the file size in bytes.</p>
    <p>Of course in Linux, <i>everything</i> is a file and thus can be watched...</p>
    <p><b>Note: </b>The directory or file must exist in order to be watched. If the file
    or directory gets deleted it may no longer be monitored even if it gets re-created.</p>
</script>

</div><div><!-- --- [red-module:@formbird/nodes/crud] --- -->
<script type="text/x-red" data-template-name="crud">
    <div class="form-row">
        <label for="node-input-url">Url</label>
        <input id="node-input-url"  type="text" placeholder="https://www.formbird.com/api/document">
    </div>
    <div class="form-row">
        <label for="node-input-apiKey">apiKey</label>
        <input id="node-input-apiKey" type="text" placeholder="">
    </div>
    <div class="form-row">
        <label for="node-input-crudType"><i class="fa fa-th"></i> <span>type</span></label>
        <select type="text" id="node-input-crudType">
            <option value="create" selected>create</option>
            <option value="update">update</option>
            <option value="get">get</option>
            <option value="delete">delete</option>
        </select>
    </div>
    <div class="form-row node-input-documentId" >
        <label for="node-input-documentId">documentId</label>
        <input id="node-input-documentId"  type="text" placeholder="">
    </div>
    <div class="form-row">
        <label for="node-input-dataService">dataService</label>
        <input id="node-input-dataService"  type="text" placeholder="default">
    </div>
    <div class="form-row node-input-templateId" >
        <label for="node-input-templateId">templateId</label>
        <input id="node-input-templateId"  type="text" placeholder="">
    </div>
     <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span>name</span></label>
        <input type="text" id="node-input-name" placeholder="name" >
    </div>

      <script>

        $("#node-input-crudType").change(function() {
            var crudType = $("#node-input-crudType").val();
            if (crudType === "get" || crudType === "delete") {
                $(".node-input-documentId").show();
            } else {
                $(".node-input-documentId").hide();
            }

            if (crudType === "create"  || crudType === "update"){
                $(".node-input-templateId").show();
            } else {
                $(".node-input-templateId").hide();
            }
        });

    </script>





<script type="text/javascript">
    RED.nodes.registerType('crud',{
        category: 'formbird',
        color:"rgb(231, 231, 174)",
        defaults: {
            url:{value:"", required:true},
            apiKey: {value:"", required:true},
            crudType: {value:"",required:true},
            dataService: {value:""},
            name: {value:""},
            documentId: {documentId:""},
            templateId: {templateId:""}
        },
        credentials: {
            user: {type:"text"},
            password: {type: "password"}
        },
        inputs:1,
        outputs:1,
        outputLabels: function(i) {
            return ({
                txt: this._("httpin.label.utf8String"),
                bin: this._("httpin.label.binaryBuffer"),
                obj: this._("httpin.label.jsonObject")
            }[this.ret]);
        },
        icon: "formbird-bird.png",
        label: function() {
            return this.name|| this.crudType || this._("crud");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script><script type="text/x-red" data-help-name="crud">
    <p>A CRUD node. Options include create, update, get and delete.</p>
</script>
</div><div><!-- --- [red-module:@formbird/nodes/search] --- -->

<script type="text/x-red" data-template-name="search">
    <div class="form-row">
        <label for="node-input-url">Url</label>
        <input id="node-input-url"  type="text" placeholder="https://www.formbird.com/api/document">
    </div>
    <div class="form-row">
        <label for="node-input-apiKey">apiKey</label>
        <input id="node-input-apiKey" type="text" placeholder="">
    </div>
    <div class="form-row">
        <label for="node-input-dataService">dataService</label>
        <input id="node-input-dataService"  type="text" placeholder="default">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span>name</span></label>
        <input type="text" id="node-input-name" placeholder="name" >
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('search',{
        category: 'formbird',
        color:"rgb(231, 231, 174)",
        defaults: {
            url:{value:"", required:true},
            apiKey: {value:"", required:true},
            name: {value:""},
            dataService: {value:""}
        },
        credentials: {
            user: {type:"text"},
            password: {type: "password"}
        },
        inputs:1,
        outputs:1,
        outputLabels: function(i) {
            return ({
                txt: this._("httpin.label.utf8String"),
                bin: this._("httpin.label.binaryBuffer"),
                obj: this._("httpin.label.jsonObject")
            }[this.ret]);
        },
        icon: "formbird-bird.png",
        label: function() {
            return this.name||this._("search");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>

</div><div><!-- --- [red-module:@formbird/nodes/websocket] --- -->

<script type="text/x-red" data-template-name="websocket">
    <div class="form-row">
        <label for="node-input-url">Url</label>
        <input id="node-input-url"  type="text" placeholder="https://www.formbird.com">
    </div>
    <div class="form-row">
        <label for="node-input-event">event</label>
        <input id="node-input-event"  type="text" placeholder="save_document">
    </div>
     <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span>name</span></label>
        <input type="text" id="node-input-name" placeholder="name" >
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('websocket',{
        category: 'formbird',
        color:"rgb(231, 231, 174)",
        defaults: {
            url:{value:"", required:true},
            event: {value:"", required:true},
            name: {value:""}
        },
        credentials: {
            user: {type:"text"},
            password: {type: "password"}
        },
        inputs:1,
        outputs:1,
        outputLabels: function(i) {
            return ({
                txt: this._("httpin.label.utf8String"),
                bin: this._("httpin.label.binaryBuffer"),
                obj: this._("httpin.label.jsonObject")
            }[this.ret]);
        },
        icon: "formbird-bird.png",
        label: function() {
            return this.name||this._("websocket");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>

</div><div><!-- --- [red-module:@formbird/nodes/redis] --- -->

<script type="text/x-red" data-template-name="redis set">
    <div class="form-row node-input-hostname">
        <label for="node-input-hostname"><i class="fa fa-bookmark"></i> <span>host</span></label>
        <input class="input-append-left" type="text" id="node-input-hostname" placeholder="127.0.0.1" style="width: 40%;" ><button id="node-input-hostname-lookup" class="btn input-append-right"><span class="caret"></span></button>
        <label for="node-input-port" style="margin-left: 10px; width: 35px; "> <span>port</span></label>
        <input type="text" id="node-input-port" placeholder="6379" style="width:45px">
    </div>
    <div class="form-row">
        <label for="node-input-key"><i class="fa fa-key"></i> <span>key</span></label>
        <input type="text" id="node-input-key"
        title="input redis key or leave it blank and pass it through msg.topic or msg.payload">
    </div>
    <div class="form-row">
        <label for="node-input-type"><i class="fa fa-th"></i> <span>type</span></label>
        <select type="text" id="node-input-structtype" style="width: 150px;">
        <option value="set" selected>set</option>
        <option value="rpush">rpush</option>
        </select>
    </div>
     <div class="form-row">
        <label for="node-input-expiry"><i class="fa fa-key"></i> <span>expiry</span></label>
        <input type="text" id="node-input-expiry" title="enter value in seconds (ex: 300 for 5 min)">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span>name</span></label>
        <input type="text" id="node-input-name" placeholder="name" >
    </div>

</script>



<script type="text/javascript">
    RED.nodes.registerType('redis set',{
        category: 'formbird',
        color:"rgb(231, 231, 174)",
        defaults: {
            hostname: { value:"127.0.0.1",required:true},
            port: { value: 6379,required:true},
            name: {value:""},
            key: {value:""},
            structtype: {value:"",required:true},
            expiry : {value:""}
        },
        inputs:1,
        outputs:0,
        icon: "formbird-bird.png",
        align: "right",
        label: function() {
            return this.name||this.structtype || this._("redis set") ;
        },
        oneditprepare: function() {
            var availableServers = [];
            var matchedServers = {};
            RED.nodes.eachNode(function(node) {
                if (node.type == "redis set" && node.hostname && node.port && !matchedServers[node.hostname+":"+node.port]) {
                    var label = node.hostname+":"+node.port;
                    matchedServers[label] = true;
                    availableServers.push({
                        label:label,
                        value:node.hostname,
                        port:node.port
                    });
                }
            });
            $( "#node-input-hostname" ).autocomplete({
                minLength: 0,
                source: availableServers,
                select: function( event, ui ) {
                    $("#node-input-port").val(ui.item.port);
                }
            });
            var tt = this;
            tt._acOpen = false;
            $( "#node-input-hostname" ).on( "autocompleteclose", function( event, ui ) { tt._acOpen = false;} );
            $( "#node-input-hostname-lookup" ).click(function(e) {
                if (tt._acOpen) {
                    $( "#node-input-hostname" ).autocomplete( "close");
                } else {
                    $( "#node-input-hostname" ).autocomplete( "search", "" );
                }
                tt._acOpen = !tt._acOpen;
                e.preventDefault();
            });
        }
    });
</script>


<script type="text/x-red" data-template-name="redis get">
    <div class="form-row node-input-hostname">
        <label for="node-input-hostname"><i class="fa fa-bookmark"></i> <span>host</span></label>
        <input class="input-append-left" type="text" id="node-input-hostname" placeholder="127.0.0.1" style="width: 40%;" ><button id="node-input-hostname-lookup" class="btn input-append-right"><span class="caret"></span></button>
        <label for="node-input-port" style="margin-left: 10px; width: 35px; "> <span>port</span></label>
        <input type="text" id="node-input-port" placeholder="6379" style="width:45px">
    </div>
    <div class="form-row">
        <label for="node-input-key"><i class="fa fa-key"></i> <span>key</span></label>
        <input type="text" id="node-input-key"
        title="input redis key or leave it blank and pass it through msg.topic or msg.payload">
    </div>
    <div class="form-row">
        <label for="node-input-structtype"><i class="fa fa-th"></i> <span>type</span></label>
        <select type="text" id="node-input-structtype" style="width: 150px;">
        <option value="get" selected>get</option>
        <option value="lpop">lpop</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span>name</span></label>
        <input type="text" id="node-input-name" placeholder="name" >
    </div>

</script>



<script type="text/javascript">
    RED.nodes.registerType('redis get',{
        category: 'formbird',
        color:"rgb(231, 231, 174)",
        defaults: {
            hostname: { value:"127.0.0.1",required:true},
            port: { value: 6379,required:true},
            name: {value:""},
            key: {value:""},
            structtype: {value:"",required:true}
        },
        inputs:1,
        outputs:1,
        icon: "formbird-bird.png",

        label: function() {
            return this.name||this.structtype || this._("redis get") ;
        },
        oneditprepare: function() {
            var availableServers = [];
            var matchedServers = {};
            RED.nodes.eachNode(function(node) {
                if (node.type == "redis get" && node.hostname && node.port && !matchedServers[node.hostname+":"+node.port]) {
                    var label = node.hostname+":"+node.port;
                    matchedServers[label] = true;
                    availableServers.push({
                        label:label,
                        value:node.hostname,
                        port:node.port
                    });
                }
            });
            $( "#node-input-hostname" ).autocomplete({
                minLength: 0,
                source: availableServers,
                select: function( event, ui ) {
                    $("#node-input-port").val(ui.item.port);
                }
            });
            var tt = this;
            tt._acOpen = false;
            $( "#node-input-hostname" ).on( "autocompleteclose", function( event, ui ) { tt._acOpen = false;} );
            $( "#node-input-hostname-lookup" ).click(function(e) {
                if (tt._acOpen) {
                    $( "#node-input-hostname" ).autocomplete( "close");
                } else {
                    $( "#node-input-hostname" ).autocomplete( "search", "" );
                }
                tt._acOpen = !tt._acOpen;
                e.preventDefault();
            });
        }
    });
</script>
<script type="text/x-red" data-help-name="redis set">
    <p>A Redis set node. Options include set and rpush.</p>
    <p>To run this you need a local Redis server running. For details see <a href="http://redis.io/" target="_new">the Redis site</a>.</p>
</script><script type="text/x-red" data-help-name="redis get">
    <p>A Redis get node. Options include set and lpop.</p>
    <p>To run this you need a local Redis server running. For details see <a href="http://redis.io/" target="_new">the Redis site</a>.</p>
</script>
<!-- --- [red-module:@formbird/nodes/bulk upload] --- -->
<script type="text/x-red" data-template-name="bulk upload">
    <div class="form-row">
        <label for="node-input-url">Url</label>
        <input id="node-input-url"  type="text" placeholder="https://www.formbird.com/api/bulkUploadDocuments">
    </div>
    <div class="form-row">
        <label for="node-input-apiKey">apiKey</label>
        <input id="node-input-apiKey" type="text" placeholder="">
    </div>

    <div class="form-row">
        <label for="node-input-dataService">dataService</label>
        <input id="node-input-dataService"  type="text" placeholder="default">
    </div>

     <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span>name</span></label>
        <input type="text" id="node-input-name" placeholder="name" >
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('bulk upload',{
        category: 'formbird',
        color:"rgb(231, 231, 174)",
        defaults: {
            url:{value:"", required:true},
            apiKey: {value:"", required:true},
            dataService: {value:""},
            name: {value:""}
        },
        credentials: {
            user: {type:"text"},
            password: {type: "password"}
        },
        inputs:1,
        outputs:1,
        outputLabels: function(i) {
            return ({
                txt: this._("httpin.label.utf8String"),
                bin: this._("httpin.label.binaryBuffer"),
                obj: this._("httpin.label.jsonObject")
            }[this.ret]);
        },
        icon: "formbird-bird.png",
        label: function() {
            return this.name||this._("bulk upload");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>
</div><div><!-- --- [red-module:formio-red/formio] --- -->
<script type="text/javascript">
  RED.nodes.registerType('formio', {
    category: 'config',
    color:"#c0edc0",
    defaults: {
      project: {value: "https://myproject.form.io", required: true},
      apikey: {value: '', required: true}
    },
    label: function() {
      return this.project;
    }
  });
</script>
<script type="text/x-red" data-template-name="formio">
    <div class="form-row">
        <label for="node-config-input-project"><i class="fa fa-database"></i> Project URL</label>
        <input type="text" id="node-config-input-project">
    </div>
    <div class="form-row">
        <label for="node-config-input-apikey"><i class="fa fa-user"></i> API Key</label>
        <input type="text" id="node-config-input-apikey">
    </div>
</script>

<script type="text/x-red" data-help-name="formio">
    <p>Enter your Form.io credentials.</p>
</script>
<!-- --- [red-module:formio-red/formio save] --- -->
<script type="text/javascript">
  RED.nodes.registerType('formio save', {
    category: 'storage-output',
    color:"#c0edc0",
    defaults: {
      formio: {type: "formio", required: true},
      form: {value: "", required: true}
    },
    icon: 'arrow-in.png',
    inputs: 1,
    outputs: 1,
    label: function() {
      var formio = RED.nodes.node(this.formio);
      return (formio ? 'SAVE ' + formio.label() + "/" + this.form: "Save Form");
    }
  });
</script>
<script type="text/x-red" data-template-name="formio save">
    <div class="form-row">
        <label for="node-input-formio"><i class="fa fa-th"></i> Project</label>
        <input type="text" id="node-input-formio">
    </div>
    <div class="form-row">
        <label for="node-input-form"><i class="fa fa-tasks"></i> Form Path</label>
        <input type="text" id="node-input-form">
    </div>
</script>

<script type="text/x-red" data-help-name="formio save">
  <p>Saves a new form submission within Form.io</p>
  <h3>Input</h3>
  <p>This node will save a new record within a Form.io form using the <code>msg.payload</code> being the body sent to create the new submission.</p>
  <p>The <code>msg.payload</code> should resemble the following structure, which will map to the fields within a Form.io form. This structure could be accomplished within a <strong>function</strong> node.</p>
  <pre><code>
msg.payload = {
  data: {
    firstName: 'Joe',
    lastName: 'Smith',
    email: 'joe@example.com'
  }
}
return msg;
  </code></pre>
  <h3>Output</h3>
  <p>Once executed, the result of the saved submission will then be output to the <code>msg.submission</code> object for any downstream nodes to utilize the full submission object that was saved to Form.io</p>
</script>
<!-- --- [red-module:formio-red/formio in] --- -->
<script type="text/javascript">
  RED.nodes.registerType('form_io in', {
    category: 'input',
    color:"#c0edc0",
    defaults: {
      formio: {type: "formio", required: true},
      path: {value:"form",required:true},
      method: {value:"post",required:true},
    },
    icon: 'inject.png',
    inputs: 0,
    outputs: 1,
    label: function() {
      if (this.path) {
        var root = RED.settings.httpNodeRoot;
        if (root.slice(-1) != "/") {
          root = root+"/";
        }
        if (this.path.charAt(0) == "/") {
          root += this.path.slice(1);
        } else {
          root += this.path;
        }
        return "Form ["+this.method+"] "+root;
      } else {
        return "Form.io Form";
      }
    }
  });
</script>
<script type="text/x-red" data-template-name="form_io in">
    <div class="form-row">
        <label for="node-input-formio"><i class="fa fa-th"></i> Project</label>
        <input type="text" id="node-input-formio">
    </div>
    <div class="form-row">
        <label for="node-input-method"><i class="fa fa-tasks"></i> Method</label>
        <select type="text" id="node-input-method" style="width:70%;">
          <option value="get">GET</option>
          <option value="post">POST</option>
          <option value="put">PUT</option>
          <option value="delete">DELETE</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-globe"></i> Path</label>
        <input id="node-input-path" type="text" placeholder="/url">
    </div>
</script>

<script type="text/x-red" data-help-name="form_io in">
  <p>Triggers an input when a Form is submitted within Form.io.</p>
  <p>This uses the Form.io <strong>Webhook</strong> system where a new webhook is fired for any new submissions within Form.io. For more information on how to configure your Webhook actions, see our <a href="https://help.form.io/userguide/#action-webhook">Help Documentation</a></p>
  <p>In order to trigger this input, you must first select the <strong>Project</strong> that this form is being received from. This will use the <strong>API Key</strong> of that project to create the Basic Authentication around the endpoints provided from this trigger to allow for secure communication to this form trigger. You will need to create an <strong>API Key</strong> for your project in order to use this trigger node.</p>
  <p>Once you have an API Key for your project, you will now create a new form, and then attach a <strong>Webhook</strong> action to that form. You will then need to provide the following settings for that webhook.</p>
  <ul>
    <li>Webhook URL: <strong>http://[NODE_RED_URL]/[PATH]</strong></li>
    <li>Authorize User: <strong>admin</strong></li>
    <li>Authorize Password: <strong>[PROJECT_API_KEY]</strong></li>
  </ul>
  <p>In the following settings you will make the following replacements.</p>
  <ul>
    <li>NODE_RED_URL - The URL to your Node Red instance (including the port)</li>
    <li>PATH - The path of the form as configured in this node.</li>
    <li>PROJECT_API_KEY - The API Key of your project on Form.io</li>
  </ul>
</script>
<!-- --- [red-module:formio-red/formio get] --- -->
<script type="text/javascript">
  RED.nodes.registerType('formio get', {
    category: 'storage-output',
    color:"#c0edc0",
    defaults: {
      formio: {type: "formio", required: true},
      form: {value: "", required: true}
    },
    icon: 'db.png',
    inputs: 1,
    outputs: 1,
    label: function() {
      var formio = RED.nodes.node(this.formio);
      return  (formio ? 'GET ' + formio.label() + "/" + this.form: "Get Submissions");
    }
  });
</script>
<script type="text/x-red" data-template-name="formio get">
    <div class="form-row">
        <label for="node-input-formio"><i class="fa fa-th"></i> Project</label>
        <input type="text" id="node-input-formio">
    </div>
    <div class="form-row">
        <label for="node-input-form"><i class="fa fa-tasks"></i> Form Path</label>
        <input type="text" id="node-input-form">
    </div>
</script>

<script type="text/x-red" data-help-name="formio get">
  <p>Retrieves submissions from a form within Form.io</p>
  <h3>Input</h3>
  <p>In order to filter which submissions are retrieved, you must use the query provided a <code>msg.query</code> within the message object.</p>
  <p>The contents of <code>msg.query</code> should be a standard <a href="https://docs.mongodb.com/v3.2/reference/method/db.collection.find/">MongoDB Find Query</a>.</p>
  <h3>Output</h3>
  <p>Once the submissions have been retrieved, they are then added to the <code>msg.submissions</code> object.</p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-button-events/button-events] --- -->
<!--
  Copyright 2020, Bart Butenaers
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<script type="text/javascript">
(function() {
    RED.nodes.registerType('button-events',{
        category: 'function',
        color: '#E9967A',
        defaults: {
            name: {value:""},
            outputs: {value:1}, // Standard field that will be used by Node-Red to draw N output ports in the flow editor            
            inputField: {value: "payload", required: true, validate: RED.validators.typedInput("inputFieldType")},
            inputFieldType: {value: "msg"},
            outputField: {value: "payload", required: true, validate: RED.validators.typedInput("outputFieldType")},
            outputFieldType: {value: "msg"},
            downValue: {value: "0", required: true, validate: RED.validators.typedInput("downValueType")},
            downValueType: {value: "num"},
            upValue: {value: "1", required: true, validate: RED.validators.typedInput("upValueType")},
            upValueType: {value: "num"},
            idleValue : {value: "1"},
            clickedInterval: {value: 200},
            pressedInterval: {value: 200},
            debounceInterval: {value: 30},
            events: {value: []}
        },        
        inputs:1,
        outputs:0,
        outputLabels: function(index) {
            // The label of the n-th output should be the n-th specified event type
            return this.events[index].type;
        },
        icon: "font-awesome/fa-barcode",
        align: 'left',
        label: function() {
            return this.name || "Button events";
        },
        oneditprepare: function() {
            var node = this;

            $('#node-input-inputField').typedInput({
                typeField: $("#node-input-inputFieldType"),
                types: ['msg']
            });
            $('#node-input-outputField').typedInput({
                typeField: $("#node-input-outputFieldType"),
                types: ['msg']
            });
            $('#node-input-downValue').typedInput({
                typeField: $("#node-input-downValueType"),
                types: ['num', 'bool', 'str']
            });
            $('#node-input-upValue').typedInput({
                typeField: $("#node-input-upValueType"),
                types: ['num', 'bool', 'str']
            });
            
            var arrayList = $("#node-input-events-container").css('min-height','250px').css('min-width','450px').editableList({
                addItem: function(container,i,event) {
                    container.css({
                        overflow: 'hidden',
                        whiteSpace: 'nowrap'
                    });
                    
                    // Add a new row to the html table
                    var row = $('<div/>').appendTo(container);
                    
                    // Column 1 : Dropdown with the event names
                    var eventTypeField = $('<select/>',{class:"node-input-event-type",type:"text"}).css({"width":"40%","margin-left":"5px","margin-right":"5px"}).appendTo(row);
                    $('<option />', {value: "clicked", text: "clicked"}).appendTo(eventTypeField);
                    $('<option />', {value: "pressed", text: "pressed"}).appendTo(eventTypeField);
                    $('<option />', {value: "clicked_pressed", text: "clicked_pressed"}).appendTo(eventTypeField);
                    $('<option />', {value: "double_clicked", text: "double_clicked"}).appendTo(eventTypeField);
                    $('<option />', {value: "released", text: "released"}).appendTo(eventTypeField);
                    $('<option />', {value: "button_changed", text: "button_changed"}).appendTo(eventTypeField);
                    $('<option />', {value: "button_press", text: "button_press"}).appendTo(eventTypeField);
                    $('<option />', {value: "button_release", text: "button_release"}).appendTo(eventTypeField);
                    eventTypeField.val(event.type || "clicked");
        
                    var index = $("#node-input-events-container").editableList('items').length;
                    var outputIndexField = $('<span/>',{style:"float: right;margin-top: 6px;"}).appendTo(row);
                    outputIndexField.append(' &#8594; <span class="node-input-event-index">' + index + '</span> ');
                },
                removeItem: function(opt) {
                    // When an event is removed from the list, all remaining items should get a new (output) index
                    var items = $("#node-input-events-container").editableList('items');
                    items.each(function(i) {
                        $(this).find(".node-input-event-index").html(i + 1);
                    });
                },
                sortItems: function(rules) {
                    // When a event are resorted in the list, all items should get a new (output) index
                    var items = $("#node-input-events-container").editableList('items');
                    items.each(function(i) {
                        $(this).find(".node-input-event-index").html(i + 1);
                    });
                },
                removable: true,
                sortable: true
            });
            
            // Show all the events from the node in the editableList
            if (node.events) {
                for (var i = 0; i < node.events.length; i++) {
                    arrayList.editableList('addItem', node.events[i]);
                }
            }
        },
        oneditsave: function() {
            var node = this;
            
            // Store the events from the editableList into this node
            node.events = [];
            var items = $("#node-input-events-container").editableList('items');
            items.each(function(i) {
                var eventType = $(this).find(".node-input-event-type").val();
                node.events.push({type: eventType});
            });
            
            // The number of outputs of this node should correspond to the number of events in the list
            node.outputs = node.events.length;
        }
    });
})();
</script>

<script type="text/x-red" data-template-name="button-events">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <br>
    <div class="form-row">
        <label style="padding-top: 8px" for="node-input-inputField"><i class="fa fa-sign-in"></i> Input</label>
        <input type="text" id="node-input-inputField" style="width:70%">
        <input type="hidden" id="node-input-inputFieldType">
    </div>
    <div class="form-row">
        <label style="padding-top: 8px" for="node-input-outputField"><i class="fa fa-sign-in"></i> Output</label>
        <input type="text" id="node-input-outputField" style="width:70%">
        <input type="hidden" id="node-input-outputFieldType">
    </div>
    <div class="form-row">
        <label for="node-input-clickedInterval"><i class="fa fa-table"></i> Clicked</span></label>
        <input type="number" id="node-input-clickedInterval">
    </div>
    <div class="form-row">
        <label for="node-input-pressedInterval"><i class="fa fa-table"></i> Pressed</span></label>
        <input type="number" id="node-input-pressedInterval">
    </div>
    <div class="form-row">
        <label for="node-input-debounceInterval"><i class="fa fa-table"></i> Debounce</span></label>
        <input type="number" id="node-input-debounceInterval">
    </div>
    <div class="form-row">
        <label style="padding-top: 8px" for="node-input-downValue"><i class="fa fa-hand-o-down"></i> Down value</label>
        <input type="text" id="node-input-downValue" style="width:70%">
        <input type="hidden" id="node-input-downValueType">
    </div>
    <div class="form-row">
        <label style="padding-top: 8px" for="node-input-upValue"><i class="fa fa-hand-o-up"></i> Up value</label>
        <input type="text" id="node-input-upValue" style="width:70%">
        <input type="hidden" id="node-input-upValueType">
    </div>
    <br>
    <div class="form-row" style="margin-bottom:0;">
        <label><i class="fa fa-list"></i> Events:</label>
    </div>
    <div class="form-row">
        <ol id="node-input-events-container"></ol>
    </div>
</script>


<script type="text/x-red" data-help-name="button-events">
    <p>A Node-RED node to send events based on button actions.</p>
    <p>When a button value (low or high) arrives in the input msg, this node will determine the event type.  See the <a target="_blank" href="https://github.com/bartbutenaers/node-red-contrib-button-events">readme</a> on Github for more information and timeline diagrams!</p>
    <p><strong>Input:</strong><br/>	
    The input message field where the button value (the low or high value) will arrive.</p>
    <p><strong>Output:</strong><br/>	
    The output message field where the detected event type will be stored.</p>
    <p><strong>Clicked:</strong><br/>	
    The interval (in milliseconds) to wait - after a button is released - before generating a <code>clicked</code> event.  When a second click arrives within the "Clicked" interval, then both clicks will be combined to a <code>double-click</code> event.</p>
    <p><strong>Pressed:</strong><br/>	
    The interval (in milliseconds) to wait - after a button is pressed - before generating a <code>pressed</code> event. When the button is not being released within this interval, the button is kept down (e.g. for dimming a light).</p>
    <p><strong>Debounce:</strong><br/>	
    The interval (in milliseconds) to wait before considering the input signal to have stabilized.  Within this time interval, all new input messages that arrive will be ignored.</p>
    <p><strong>Down value:</strong><br/>	
    The value that will arrive when the button is down (i.e. clicked or pressed).  This can be high when the GPIO input has a pull-up resistor, or low in case of a pull-down resistor.</p>
    <p><strong>Up value:</strong><br/>	
    The value that will arrive when the button is up (i.e. in normal status).  This can be high when the GPIO input has a pull-up resistor, or low in case of a pull-down resistor.</p>
    <p><strong>Events:</strong><br/>	
    Add all events for which an output needs to be sent (when the event occurs).
    The first five events indicate user intent:   
        <ul>
            <li><b><i>pressed</i></b>: when a button is pressed and held down. This will be followed with a <code>released</code> event, as soon as the button is released.</li>
            <li><b><i>clicked</i></b>: when a button is pressed and released rapidly.</li>
            <li><b><i>clicked_pressed</i></b>: when a click is quickly followed by pressing and holding the button.  This will be followed by a <code>released</code> event, as soon as the button is released.</li>
            <li><b><i>double_clicked</i></b>: when a click is quickly followed with another click.</li>
            <li><b><i>released</i></b>: when the pressed button is released.</li>
        </ul>
    Beside those, there are some low-level events:   
        <ul>
            <li><b><i>button_changed</i></b>: when a button is pressed or released.</li>
            <li><b><i>button_press</i></b>: when a button is pressed.</li>
            <li><b><i>button_release</i></b>: when a button is released.</li>
        </ul>
    Note that the user intent events are sufficient in most cases, and that the low-level events are only required in special circumstances!</p>    
</script>
</div><div><!-- --- [red-module:node-red-contrib-countdown-2/countdown] --- -->
<script type="text/x-red" data-template-name="countdown">
  <div class="form-row">
      <label for="node-input-topic"><i class="fa fa-tasks"></i> <span data-i18n="node-red:common.label.topic"></span></label>
      <input type="text" id="node-input-topic">
  </div>

  <div class="form-row">
    <label for="node-input-payloadTimerStart"><i class="fa fa-tag"></i> Timer On payload</label>
    <input style="width:70%" type="text" id="node-input-payloadTimerStart">
    <input type="hidden" id="node-input-payloadTimerStartType">
  </div>

  <div class="form-row">
    <label for="node-input-payloadTimerStop"><i class="fa fa-tag"></i> Timer Off payload</label>
    <input style="width:70%" type="text" id="node-input-payloadTimerStop">
    <input type="hidden" id="node-input-payloadTimerStopType">
  </div>

  <div class="form-row">
    <label for="node-input-timer"><i class="fa fa-clock-o"></i> Countdown </label>
    <input style="width:15%" type="text" id="node-input-timer" placeholder="30">
  </div>
  <div class="form-row">
    <label for="node-input-minuteCounter">&nbsp;</label>
    <input style="display:inline-block; width:15px; vertical-align:baseline;" type="checkbox" id="node-input-minuteCounter">
    <span>Counter is in Minutes (checked.  Default is Seconds)</span>&nbsp;
  </div>

  <div class="form-row">
    <label for="node-input-resetWhileRunning">&nbsp;</label>
    <input style="display:inline-block; width:15px; vertical-align:baseline;" type="checkbox" id="node-input-resetWhileRunning">
    <span>Restart countdown if message is recieved while running</span>&nbsp;
  </div>

  <div class="form-row">
    <label for="node-input-setTimeToNewWhileRunning">&nbsp;</label>
    <input style="display:inline-block; width:15px; vertical-align:top;" type="checkbox" id="node-input-setTimeToNewWhileRunning">
    <span style="display:inline-block; width:70%">Set time to new duration if control message is recieved while running</span>&nbsp;
  </div>

  <div class="form-row">
    <label for="node-input-startCountdownOnControlMessage">&nbsp;</label>
    <input style="display:inline-block; width:15px; vertical-align:top;" type="checkbox" id="node-input-startCountdownOnControlMessage">
    <span style="display:inline-block; width:70%">Start countdown if control message is recieved while not running</span>&nbsp;
  </div>

  <div class="form-row">
      <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
      <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
  </div>

</script>



<script type="text/javascript">
  RED.nodes.registerType('countdown', {
    category: "function",
    color:"#ffaaaa",
    inputLabels: "Any input starts the timer",
    outputLabels: ["Countdown start/stop messages", "Remaining time in seconds"],
    defaults: {
      name: { value: "" },
      topic: { value: "" },
      payloadTimerStart: { value: true, validate: RED.validators.typedInput('payloadTimerStartType')},
      payloadTimerStartType: { value: 'bool' },
      payloadTimerStop: { value: false, validate: RED.validators.typedInput('payloadTimerStopType')},
      payloadTimerStopType: { value: 'bool' },
      timer: { value: 30, validate:RED.validators.number()  },
      resetWhileRunning: { value: false },
      setTimeToNewWhileRunning: { value: true },
      startCountdownOnControlMessage: { value: false },
      minuteCounter: { value: false }
    },
    inputs: 1,
    outputs: 2,
    icon: "stopwatch.png",
    label: function() {
        return this.name || "countdown";
    },
    labelStyle: function() {
        return this.name ? "node_label_italic" : "";
    },
    oneditprepare: function() {
      var optionNothing = { value: "nul", label: "Nothing", hasValue: false};

      $('#node-input-payloadTimerStart').typedInput({
        default: 'bool',
        typeField: $("#node-input-payloadTimerStartType"),
        types: ['msg','flow','global','str','num','bool','json','bin','re','date','env', optionNothing]
      });

      $('#node-input-payloadTimerStop').typedInput({
        default: 'bool',
        typeField: $("#node-input-payloadTimerStopType"),
        types: ['msg','flow','global','str','num','bool','json','bin','re','date','env', optionNothing]
      });
    }
  });
</script>
<script type="text/x-red" data-help-name="countdown">
<p>
  A simple countdown node. It starts countdown on any input. The countdown timer can be stopped immediately or can be reloaded with a 
  new counter value while it running.
</p>

  <h3>Input</h3>

  <h4>Starting the timer</h4>
  <dl class="message-properties">
      <dt>payload
          <span class="property-type"></span>
      </dt>
      <dd>any <code>msg.payload</code> that does not stop the timer or reload the timer starts the timer.</dd>
  </dl>


  <h4>Stopping the timer</h4>
    <dl class="message-properties">
        <dt>payload
            <span class="property-type">boolean | number</span>
        </dt>
        <dd>if <code>false</code> or <code>0</code>: Immediately stops the timer. <strong>AND</strong> Send output as per configuration </dd>
    </dl>
    
  <h4>Cancel the timer / Alternative Stop</h4>
    <dl class="message-properties">
      <dt>topic
        <span class="property-type">string</span>
      </dt>
      <dd>set to <code>control</code>.</dd>
      <dt>payload
        <span class="property-type">string</span>
      </dt>
      <dd>if <code>cancel</code> (case sensitive) with topic = "control", timmer is stopped and <b>NO</b> output is sent</dd>
    </dl>

  <h4>Reloading the timer</h4>
    <dl class="message-properties">
        <dt>payload
            <span class="property-type">number | string</span>
        </dt>
        <dd>
          if <code>Number</code>: reloads the timer with the desired <code>msg.payload</code> value.<br />
          if <code>String</code> = "<code>reset</code>", timmer will restart with default timer values used.
        
        </dd>
        <dt>topic <span class="property-type">string</span></dt>
        <dd>set to <code>control</code>.</dd>
    </dl>

  <h3>Outputs</h3>
    <ol class="node-ports">
        <li>Primary output
            <dl class="message-properties">
                <dt>payload <span class="property-type"></span></dt>
                <dd>configurable output <code>msg</code> at the countdown start/stop.</dd>
            </dl>
        </li>
        <li>Second output
            <dl class="message-properties">
                <dt>payload <span class="property-type">number</span></dt>
                <dd>give the remaining time.</dd>
            </dl>
        </li>
    </ol>




  <h3>Details</h3>
    <p>
    <code>node-red-contrib-countdown</code> starts a countdown timer on a received input
    <code>msg</code> and decreases the counter value until the countdown timer elapses.
    The countdown can be stopped at any time.
    Also the countdown timer can be set to any new countdown value at any time to reload the timer with a specific value.
    </p>
    <p>
    At the <b>first output</b> the node can emit a <code>msg</code> with an arbitrary <code>msg.payload</code> contents at the start of the timer as well as at the stop of the countdown timer.
    <br>
    At the <b>second output</b> the node emits the remaining counter value every second (or minute if configured).
    </p>
    <p>
    The node's output <code>msg</code> can optionally contain an arbitrary topic string.
    </p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-ds18b20/ds18b20] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ds18b20',{
        category: 'Raspberry Pi',
        color: "#C7E9C0",
        defaults: {
            name: {value:""},
            sensorid: {value:"", required:true},
            timer: {value:"1", required:true, validate:RED.validators.number()}
        },
        inputs: 0,
        outputs: 1,
        icon: "thermometer.png",
        label: function() {
            return this.name || this.sensorid || "ds18b20";
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function() {
            var configuredSensorId = this.sensorid;
            $.getJSON('/sensors/1wire/',function(data) {
                $.each(data, function( index, value ) {
                    var isSelected = configuredSensorId === value;
                    $("#node-input-sensorid").append(
                        new Option(value, value, isSelected, isSelected));
                });
            });
        }
    });
</script>

<script type="text/x-red" data-template-name="ds18b20">
    <div class="form-row">
        <label for="node-input-sensorid">
            <i class="fa fa-ellipsis-v"></i> Sensor ID
        </label>
        <select type="text" id="node-input-sensorid">
        </select>
    </div>
        <div class="form-row">
        <label for="node-input-timer"><i class="fa fa-repeat"></i> Interval (min)</label>
        <input type="text" id="node-input-timer" placeholder="1">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name/topic</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>


<script type="text/x-red" data-help-name="ds18b20">
    <p>Read a temperature value from a DS18B20 sensor</p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-ds18b20-sensor/rpi-ds18b20] --- -->
<!--
  Copyright 2015 Brendan Murray

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->


<!-- Define the edit dialog.                       -->
<script type="text/x-red" data-template-name="rpi-ds18b20">

    <!-- Topic - ID of target device -->
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic" placeholder="Topic">
    </div>
    <br/>

    <!-- If an array should be returned -->
    <div class="form-row">
        <label for="node-input-array"><i class="fa fa-table"></i> Array</label>
        <input type="checkbox" id="node-input-array" value="array">
    </div>
    <br/>

    <!-- Node name -->
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>


<!-- Next, some simple help text is provided for the node.                   -->


<script type="text/javascript">
    RED.nodes.registerType('rpi-ds18b20', {
        category: 'Raspberry Pi',      // the palette category
        defaults: {             // defines the editable properties of the node
            topic:   {value: ""},
            array:   {value: false},
            name:    {value: ""}
        },
        inputs:  1,              // set the number of inputs - only 0 or 1
        outputs: 1,              // set the number of outputs - 0 to n
        color:   "#C6DBEF",
        icon:    "ds18b20.png",   // saved in  icons/myicon.png
        label:   function() {    // sets the default label contents
                   return this.name||"rpi-ds18b20";
                 },
        labelStyle: function() { // sets the class to apply to the label
                   return this.name ? "node_label_italic": "";
                 }
    });
</script>
<script type="text/x-red" data-help-name="rpi-ds18b20">
   <p>Node to retrieve the temperature read by all DS18B20 sensors
      at a predefined period determined by an input message. Alternatively,
      if the input topic is not empty, or the message arriving contains a 
      non-empty topic, it is assumed to be a device ID and only the reading
      for that device is retrieved.</p>
      <p>Usually outputs a <b>msg</b> containing the device ID in the <b>msg.topic</b>
      and the temperature in the <b>msg.payload</b>.</p>
      <p>If <b>msg.array</b> is set, either programmatically or via the
      checkbox, the value(s) will be returned in a single message as an
      array in the <b>msg.payload</b></p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-filesystem/filesystem] --- -->
<script type="text/x-red" data-template-name="fs-copy-move">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-fw fa-tag"></i> <span data-i18n="fs-copy-move.label.name"></span></label>
        <input type="text" id="node-input-name"/>
    </div>
    <div class="form-row">
        <label for="node-input-oper"><i class="fa fa-fw fa-cogs"></i> <span data-i18n="fs-copy-move.label.oper"></span></label>
        <select type="text" id="node-input-oper">
            <option value="cp" data-i18n="fs-copy-move.label.oper-copy"></option>
            <option value="mv" data-i18n="fs-copy-move.label.oper-move"></option>
            <option value="ln" data-i18n="fs-copy-move.label.oper-link"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-srcPath"><i class="fa fa-fw fa-folder"></i> <span data-i18n="fs-copy-move.label.src-path"></span></label>
        <input type="text" id="node-input-srcPath">
        <input type="hidden" id="node-input-srcPathType">
    </div>
    <div class="form-row">
        <label for="node-input-srcFilename"><i class="fa fa-fw fa-file"></i> <span data-i18n="fs-copy-move.label.src-filename"></span></label>
        <input type="text" id="node-input-srcFilename">
        <input type="hidden" id="node-input-srcFilenameType">
    </div>
    <div class="form-row">
        <label for="node-input-dstPath"><i class="fa fa-fw fa-folder"></i> <span data-i18n="fs-copy-move.label.dst-path"></span></label>
        <input type="text" id="node-input-dstPath">
        <input type="hidden" id="node-input-dstPathType">
    </div>
    <div class="form-row">
        <label for="node-input-dstFilename"><i class="fa fa-fw fa-file"></i> <span data-i18n="fs-copy-move.label.dst-filename"></span></label>
        <input type="text" id="node-input-dstFilename">
        <input type="hidden" id="node-input-dstFilenameType">
    </div>
    <div class="form-row">
        <label for="node-input-overwrite"><i class="fa fa-fw fa-eraser"></i> <span data-i18n="fs-copy-move.label.overwrite"></span></label>
        <input type="checkbox" id="node-input-overwrite" style="width:auto; vertical-align:top"/>
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('fs-copy-move', {
        category: 'storage',
        defaults: {
            oper: { value: 'cp' },
            srcPath: { value: '' },
            srcPathType: { value: 'str' },
            srcFilename: { value: 'source', required: true },
            srcFilenameType: { value: 'msg' },
            dstPath: { value: '' },
            dstPathType: { value: 'str' },
            dstFilename: { value: 'destination' },
            dstFilenameType: { value: 'msg' },
            overwrite: { value: true },
            name: { value: '' },
        },
        color: '#DAC4B4',
        inputs: 1,
        outputs: 1,
        icon: 'fs-copy.svg',
        label: function() {
            return this.name ||  {'':'FS Copy/Move/Link', 'cp':'FS Copy', 'mv':'FS Move', 'ln':'FS Link'}[this.oper];
        },
        labelStyle: function() {
            return this.name ? 'node_label_italic' : ''
        },
        paletteLabel: 'fs copy/move',
        oneditprepare: function() {
            $('#node-input-srcPath').typedInput({
                types: ['msg', 'flow', 'global', 'str', 'env'],
                typeField: $('#node-input-srcPathType')
            });
            $('#node-input-srcFilename').typedInput({
                types: ['msg', 'flow', 'global', 'str'],
                typeField: $('#node-input-srcFilenameType')
            });
            $('#node-input-dstPath').typedInput({
                types: ['msg', 'flow', 'global', 'str', 'env'],
                typeField: $('#node-input-dstPathType')
            });
            $('#node-input-dstFilename').typedInput({
                types: ['msg', 'flow', 'global', 'str'],
                typeField: $('#node-input-dstFilenameType')
            });
        }
    });
</script>

<script type="text/x-red" data-template-name="fs-remove">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-fw fa-tag"></i> <span data-i18n="fs-remove.label.name"></span></label>
        <input type="text" id="node-input-name"/>
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-fw fa-folder"></i> <span data-i18n="fs-remove.label.path"></span></label>
        <input type="text" id="node-input-path">
        <input type="hidden" id="node-input-pathType">
    </div>
    <div class="form-row">
        <label for="node-input-filename"><i class="fa fa-fw fa-file"></i> <span data-i18n="fs-remove.label.filename"></span></label>
        <input type="text" id="node-input-filename">
        <input type="hidden" id="node-input-filenameType">
    </div>
    <div class="form-row">
        <label for="node-input-recursive"><i class="fa fa-fw fa-refresh"></i> <span data-i18n="fs-remove.label.recursive"></span></label>
        <input type="checkbox" id="node-input-recursive" style="width:auto; vertical-align:top"/>
    </div>
    <div class="form-row">
        <label for="node-input-exist"><i class="fa fa-fw fa-exclamation"></i> <span data-i18n="fs-remove.label.exist"></span></label>
        <input type="checkbox" id="node-input-exist" style="width:auto; vertical-align:top"/>
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('fs-remove', {
        category: 'storage',
        defaults: {
            path: { value: '' },
            pathType: { value: 'str' },
            filename: { value: 'filename', required: true },
            filenameType: { value: 'msg' },
            recursive: { value: true },
            exist: { value: false },
            name: { value: '' },
        },
        color: '#DAC4B4',
        inputs: 1,
        outputs: 1,
        icon: 'fs-remove.svg',
        label: function() {
            return this.name ||'FS Remove'
        },
        labelStyle: function() {
            return this.name ? 'node_label_italic' : ''
        },
        paletteLabel: 'fs remove',
        oneditprepare: function() {
            $('#node-input-path').typedInput({
                types: ['msg', 'flow', 'global', 'str', 'env'],
                typeField: $('#node-input-pathType')
            });
            $('#node-input-filename').typedInput({
                types: ['msg', 'flow', 'global', 'str'],
                typeField: $('#node-input-filenameType')
            });
        }
    });
</script>

<script type="text/x-red" data-template-name="fs-mkdir">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-fw fa-tag"></i> <span data-i18n="fs-mkdir.label.name"></span></label>
        <input type="text" id="node-input-name"/>
    </div>
    <div class="form-row">
        <label for="node-input-purpose"><i class="fa fa-fw fa-folder-open"></i> <span data-i18n="fs-mkdir.label.purpose"></span></label>
        <span class="button-group">
            <button type="button" id="node-input-reg" value="reg" class="editor-button toggle button-group-purpose" style="width:7em" data-i18n="fs-mkdir.label.purpose-reg">
            </button><button type="button" id="node-input-tmp" value="tmp" class="editor-button toggle button-group-purpose" style="width:7em" data-i18n="fs-mkdir.label.purpose-tmp">
            </button>
        </span>
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-fw fa-folder"></i> <span data-i18n="fs-mkdir.label.path"></span></label>
        <input type="text" id="node-input-path">
        <input type="hidden" id="node-input-pathType">
    </div>
    <div class="form-row purpose-reg-row">
        <label for="node-input-foldername"><i class="fa fa-fw fa-folder"></i> <span data-i18n="fs-mkdir.label.foldername"></span></label>
        <input type="text" id="node-input-foldername">
        <input type="hidden" id="node-input-foldernameType">
    </div>
    <div class="form-row purpose-tmp-row">
        <label for="node-input-prefix"><i class="fa fa-fw fa-folder"></i> <span data-i18n="fs-mkdir.label.prefix"></span></label>
        <input type="text" id="node-input-prefix">
        <input type="hidden" id="node-input-prefixType">
    </div>
    <div class="form-row">
        <label for="node-input-recursive"><i class="fa fa-fw fa-refresh"></i> <span data-i18n="fs-mkdir.label.recursive"></span></label>
        <input type="checkbox" id="node-input-recursive" style="width:auto; vertical-align:top"/>
    </div>
    <div class="form-row purpose-reg-row">
        <label for="node-input-exists"><i class="fa fa-fw fa-exclamation"></i> <span data-i18n="fs-mkdir.label.exists"></span></label>
        <input type="checkbox" id="node-input-exists" style="width:auto; vertical-align:top"/>
    </div>
    <div class="form-row purpose-reg-row">
        <label for="node-input-mode"><i class="fa fa-fw fa-lock"></i> <span data-i18n="fs-mkdir.label.mode"></span></label>
        <input type="text" id="node-input-mode">
        <input type="hidden" id="node-input-modeType">
    </div>
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-fw fa-list-ul"></i> <span data-i18n="fs-mkdir.label.property"></span></label>
        <input type="text" id="node-input-property">
        <input type="hidden" id="node-input-propertyType">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('fs-mkdir', {
        category: 'storage',
        defaults: {
            name: { value: '' },
            purpose: { value: 'reg' },
            path: { value: '' },
            pathType: { value: 'str' },
            foldername: { value: 'payload', required: function(){return this.purpose == 'reg'} },
            foldernameType: { value: 'msg' },
            recursive: { value: true },
            exists: { value: true },
            prefix: { value: '' },
            prefixType: { value: 'str' },
            mode: { value: '777', required: function(){return this.purpose == 'reg'}, validate: function(v){return this.purpose == 'tmp' || /[0-7]{3}/.test(v)} },
            property: { value: 'payload' },
            propertyType: { value: 'msg' }
        },
        color: '#DAC4B4',
        inputs: 1,
        outputs: 1,
        icon: 'fs-mkdir.svg',
        label: function() {
            return this.name || (this.purpose == 'reg' ? 'FS Make Regular Folder' : 'FS Make Temporary Folder')
        },
        labelStyle: function() {
            return this.name ? 'node_label_italic' : ''
        },
        paletteLabel: 'fs mkdir',
        oneditprepare: function() {
            $('.button-group-purpose').on('click', function() {
                $('.button-group-purpose').removeClass('selected');
                $(this).addClass('selected');
                if (this.value == 'reg') {
                    $('.purpose-reg-row').show();
                    $('.purpose-tmp-row').hide();
                } else {
                    $('.purpose-reg-row').hide();
                    $('.purpose-tmp-row').show();
                }
            });
            $('#node-input-path').typedInput({
                types: ['msg', 'flow', 'global', 'str', 'env'],
                typeField: $('#node-input-pathType')
            });
            $('#node-input-foldername').typedInput({
                types: ['msg', 'flow', 'global', 'str'],
                typeField: $('#node-input-foldernameType')
            });
            $('#node-input-prefix').typedInput({
                types: ['msg', 'flow', 'global', 'str'],
                typeField: $('#node-input-prefixType')
            });
            $('#node-input-rights').typedInput({
                types: ['msg', 'flow', 'global', 'str'],
                typeField: $('#node-input-rightsType')
            });
            $('#node-input-property').typedInput({
                types: ['msg', 'flow', 'global'],
                typeField: $('#node-input-propertyType')
            });
            $('.button-group-purpose[value="' + this.purpose + '"]').click();
        },
        oneditsave: function() {
            this.purpose = $('.button-group-purpose.selected').attr('value');
        }
    });
</script>

<script type="text/x-red" data-template-name="fs-list">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-fw fa-tag"></i> <span data-i18n="fs-list.label.name"></span></label>
        <input type="text" id="node-input-name"/>
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-fw fa-folder"></i> <span data-i18n="fs-list.label.path"></span></label>
        <input type="text" id="node-input-path">
        <input type="hidden" id="node-input-pathType">
    </div>
    <div class="form-row">
        <label for="node-input-pattern"><i class="fa fa-fw fa-filter"></i> <span data-i18n="fs-list.label.pattern"></span></label>
        <input type="text" id="node-input-pattern">
        <input type="hidden" id="node-input-patternType">
    </div>
    <div class="form-row">
        <label for="node-input-filter-all"><i class="fa fa-fw fa-filter"></i> <span data-i18n="fs-list.label.filter"></span></label>
        <input type="radio" id="node-input-filter-all" name="node-input-filter" value="all" style="width:auto; vertical-align:top">
        <label for="node-input-filter-all" style="width:auto;margin-left:0.3em; margin-right:1em">all</label>
        <input type="radio" id="node-input-filter-files" name="node-input-filter" value="files" style="width:auto; vertical-align:top">
        <label for="node-input-filter-files" style="width:auto;margin-left:0.3em; margin-right:1em">files only</label>
        <input type="radio" id="node-input-filter-folders" name="node-input-filter" value="folders" style="width:auto; vertical-align:top">
        <label for="node-input-filter-folders" style="width:auto; margin-left:0.3em">folders only</label>
    </div>
    <div class="form-row">
        <label for="node-input-recursive"><i class="fa fa-fw fa-refresh"></i> <span data-i18n="fs-list.label.recursive"></span></label>
        <input type="checkbox" id="node-input-recursive" style="width:auto; vertical-align:top"/>
    </div>
    <div class="form-row">
        <label for="node-input-follow"><i class="fa fa-fw fa-link"></i> <span data-i18n="fs-list.label.follow"></span></label>
        <input type="checkbox" id="node-input-follow" style="width:auto; vertical-align:top"/>
    </div>
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-fw fa-list-ul"></i> <span data-i18n="fs-list.label.property"></span></label>
        <input type="text" id="node-input-property">
        <input type="hidden" id="node-input-propertyType">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('fs-list', {
        category: 'storage',
        defaults: {
            name: { value: '' },
            path: { value: 'payload' },
            pathType: { value: 'msg' },
            pattern: { value: '*', require: true },
            patternType: { value: 'str' },
            filter: { value: 'all' },
            recursive: { value: false },
            follow: { value: true },
            property: { value: 'list', required: true },
            propertyType: { value: 'msg' }
        },
        color: '#DAC4B4',
        inputs: 1,
        outputs: 1,
        icon: 'fs-list.svg',
        label: function() {
            return this.name ||'FS List'
        },
        labelStyle: function() {
            return this.name ? 'node_label_italic' : ''
        },
        paletteLabel: 'fs list',
        oneditprepare: function() {
            $('#node-input-path').typedInput({
                types: ['msg', 'flow', 'global', 'str', 'env'],
                typeField: $('#node-input-pathType')
            });
            $('#node-input-pattern').typedInput({
                types: ['msg', 'flow', 'global', 'str'],
                typeField: $('#node-input-patternType')
            });
            $('#node-input-property').typedInput({
                types: ['msg', 'flow', 'global'],
                typeField: $('#node-input-propertyType')
            });
            $('#node-input-filter-' + this.filter).click();
        },
        oneditsave: function() {
            this.filter = $('input[name="node-input-filter"]:checked').attr('value');
        }
    });
</script>

<script type="text/x-red" data-template-name="fs-stats">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-fw fa-tag"></i> <span data-i18n="fs-stats.label.name"></span></label>
        <input type="text" id="node-input-name"/>
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-fw fa-folder"></i> <span data-i18n="fs-stats.label.path"></span></label>
        <input type="text" id="node-input-path">
        <input type="hidden" id="node-input-pathType">
    </div>
    <div class="form-row">
        <label for="node-input-filename"><i class="fa fa-fw fa-file"></i> <span data-i18n="fs-stats.label.filename"></span></label>
        <input type="text" id="node-input-filename">
        <input type="hidden" id="node-input-filenameType">
    </div>
    <div class="form-row">
        <label for="node-input-attr"><i class="fa fa-fw fa-filter"></i> <span data-i18n="fs-stats.label.attrs"></span></label>
        <select type="text" id="node-input-attr">
            <option value="" data-i18n="fs-stats.label.attr-all"></option>
            <option value="basic" data-i18n="fs-stats.label.attr-basic"></option>
            <option value="size" data-i18n="fs-stats.label.attr-size"></option>
            <option value="kind" data-i18n="fs-stats.label.attr-kind"></option>
            <option value="ctimeMs" data-i18n="fs-stats.label.attr-ctimeu"></option>
            <option value="mtimeMs" data-i18n="fs-stats.label.attr-mtimeu"></option>
            <option value="atimeMs" data-i18n="fs-stats.label.attr-atimeu"></option>
            <option value="ctime" data-i18n="fs-stats.label.attr-ctimes"></option>
            <option value="mtime" data-i18n="fs-stats.label.attr-mtimes"></option>
            <option value="atime" data-i18n="fs-stats.label.attr-atimes"></option>
            <option value="uid" data-i18n="fs-stats.label.attr-uid"></option>
            <option value="gid" data-i18n="fs-stats.label.attr-gid"></option>
            <option value="mode" data-i18n="fs-stats.label.attr-mode"></option>
            <option value="rights" data-i18n="fs-stats.label.attr-rights"></option>
            <option value="mime" data-i18n="fs-stats.label.attr-mime"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-follow"><i class="fa fa-fw fa-link"></i> <span data-i18n="fs-stats.label.follow"></span></label>
        <input type="checkbox" id="node-input-follow" style="width:auto; vertical-align:top"/>
    </div>
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-fw fa-list-ul"></i> <span data-i18n="fs-stats.label.property"></span></label>
        <input type="text" id="node-input-property">
        <input type="hidden" id="node-input-propertyType">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('fs-stats', {
        category: 'storage',
        defaults: {
            name: { value: '' },
            path: { value: '' },
            pathType: { value: 'str' },
            filename: { value: 'filename', required: true },
            filenameType: { value: 'msg' },
            attr: { value: '' },
            follow: { value: true },
            property: { value: 'stats', required: true },
            propertyType: { value: 'msg' }
        },
        color: '#DAC4B4',
        inputs: 1,
        outputs: 1,
        icon: 'fs-stats.svg',
        label: function() {
            return this.name ||'FS Stats'
        },
        labelStyle: function() {
            return this.name ? 'node_label_italic' : ''
        },
        paletteLabel: 'fs stats',
        oneditprepare: function() {
            $('#node-input-path').typedInput({
                types: ['msg', 'flow', 'global', 'str', 'env'],
                typeField: $('#node-input-pathType')
            });
            $('#node-input-filename').typedInput({
                types: ['msg', 'flow', 'global', 'str'],
                typeField: $('#node-input-filenameType')
            });
            $('#node-input-property').typedInput({
                types: ['msg', 'flow', 'global'],
                typeField: $('#node-input-propertyType')
            });
        }
    });
</script>

<script type="text/x-red" data-template-name="fs-access">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-fw fa-tag"></i> <span data-i18n="fs-access.label.name"></span></label>
        <input type="text" id="node-input-name"/>
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-fw fa-folder"></i> <span data-i18n="fs-access.label.path"></span></label>
        <input type="text" id="node-input-path">
        <input type="hidden" id="node-input-pathType">
    </div>
    <div class="form-row">
        <label for="node-input-filename"><i class="fa fa-fw fa-file"></i> <span data-i18n="fs-access.label.filename"></span></label>
        <input type="text" id="node-input-filename">
        <input type="hidden" id="node-input-filenameType">
    </div>
    <div class="form-row">
        <label for="node-input-accessRead"><i class="fa fa-fw fa-question-circle"></i> <span data-i18n="fs-access.label.access"></span></label>
        <input type="checkbox" id="node-input-accessRead" style="width:auto; vertical-align:top"/>
        <label for="node-input-accessRead" style="width:4.7em; padding-left:0.3em"><span data-i18n="fs-access.label.read"></span></label>
        <input type="checkbox" id="node-input-accessWrite" style="width:auto; vertical-align:top"/>
        <label for="node-input-accessWrite" style="width:4.7em; padding-left:0.3em"><span data-i18n="fs-access.label.write"></span></label>
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('fs-access', {
        category: 'storage',
        defaults: {
            name: { value: '' },
            path: { value: '' },
            pathType: { value: 'str' },
            filename: { value: 'filename', required: true },
            filenameType: { value: 'msg' },
            accessRead: { value: true },
            accessWrite: { value: false }
        },
        color: '#DAC4B4',
        inputs: 1,
        outputs: 2,
        icon: 'fs-access.svg',
        outputLabels: function(i) {
            return this._('fs-access.label.' + ['accessible', 'non-accessible'][i])
        },
        label: function() {
            return this.name ||'FS Access'
        },
        labelStyle: function() {
            return this.name ? 'node_label_italic' : ''
        },
        paletteLabel: 'fs access',
        oneditprepare: function() {
            $('#node-input-path').typedInput({
                types: ['msg', 'flow', 'global', 'str', 'env'],
                typeField: $('#node-input-pathType')
            });
            $('#node-input-filename').typedInput({
                types: ['msg', 'flow', 'global', 'str'],
                typeField: $('#node-input-filenameType')
            });
        }
    });
</script>
<script type="text/x-red" data-help-name="fs-copy-move">
    <p>Copies/Moves/Links the files/folders. It can work with a single file or a whole tree.</p>
    <h3>Input</h3>
    <dl class="message-properties">
        <dt>srcPath <span class="property-type">string</span></dt>
        <dd>The path to the source file/folder you want to copy/move/link. It is used when the <code>srcFilename</code> value is relative and then both items are joined.<br/>The <em>Src Path</em> field must be set to <code>msg.</code> to use a message property and then the user can configure property name.</dd>
        <dt>srcFilename <span class="property-type">string</span></dt>
        <dd>The filename of the source file/folder you want to copy/move/link. It can include a path. The relative value will be joined with the path property.<br/>The <em>Src Fname</em> field must be set to <code>msg.</code> to use a message property and then the user can configure property name.</dd>
        <dt>destPath <span class="property-type">string</span></dt>
        <dd>The target path for the copy/move/link operation. It is used when the <code>destFilename</code> value is relative and then both items are joined.<br/>The <em>Dest Path</em> field must be set to <code>msg.</code> to use a message property and then the user can configure property name.</dd>
        <dt>destFilename <span class="property-type">string</span></dt>
        <dd>The target filename for the copy/move/link opeartion. It can include a path. The relative value will be joined with the path property.<br/>The <em>Dest Fname</em> field must be set to <code>msg.</code> to use a message property and then the user can configure property name.</dd>
    </dl>
    <h3>Details</h3>
    <p><strong style="color:white;background-color:#ad1625">!</strong> It is necessary to distinguish between file and folder in some cases. The user then needs to use path separator after the folder name. For example on Linux: When you copy /foo/doc.txt to /bar/dest it will produce file /bar/dest, otherwise when you copy to /bar/dest<strong style="color:#ad1625">/</strong> it will produce file /bar/dest/doc.txt.</p>
    <p>If the source is a <strong>folder</strong> and the destination is a <strong>folder</strong>, the source folder with the whole subtree will be copied/moved/linked to the destination folder with the original names.</p>
    <p>If the source is a <strong>file</strong> and the destination is a <strong>folder</strong>, the source file will be copied/moved/linked to the destination folder with the original name.</p>
    <p>If the source is a <strong>file</strong> and the destination is a <strong>file</strong>, the source file will be copied/moved/linked with the new name.</p>
    <p>If the source is a <strong>globbing expression</strong> (name with wildcards) and the destination is a <strong>folder</strong>, the matched files from source folder will be copied/moved/linked to the destination folder with the original names.</p>
    <p>Other combinations of source/destination are not applicable.</p>
    <p>Missing folders will be created, e.g. when a file is copied to the unexisting folder.</p>
    <p>If <em>Overwrite</em> is not checked and the target already exists, it will cause an error. It is possible to use <em>catch</em> node for it.</p>
    <p>Created links are always symbolic.</p>
    <p>If <em>Src Fname</em> (<em>Dst Fname</em>) is absolute, only that is used. If it is relative, it is combined with <em>Src Path</em> (<em>Dst Path</em>). If the path is not presented (or it is also relative), the current working folder is used.</p>
    <h3>References</h3>
    <ul>
        <li>Official <a href="https://gitlab.com/advantech-czech/node-red-contrib-filesystem/-/tree/1.0.0">documentation</a> on Gitlab.</li>
    </ul>
</script>

<script type="text/x-red" data-help-name="fs-remove">
    <p>Removes files/folders. It can work recursively.</p>
    <h3>Input</h3>
    <dl class="message-properties">
        <dt>path <span class="property-type">string</span></dt>
        <dd>The path to the file/folder you want to remove. It is used when the <code>filename</code> value is relative and then both items are joined.<br/>The <em>Path</em> field must be set to <code>msg.</code> to use a message property and then the user can configure the property name.</dd>
        <dt>filename <span class="property-type">string</span></dt>
        <dd>The filename of the file/folder you want to remove. It can include a path. The relative value will be joined with the path property.<br/>The <em>Filename</em> field must be set to <code>msg.</code> to use a message property and then the user can configure property name.</dd>
    </dl>
    <h3>Details</h3>
    <p>It si possible to use the standard globing expressions (wild cards) for specifing multiple files to remove.</p>
    <p>If <em>Recursive</em> is not checked and removing requires to remove a folder tree, it will cause an error. It is possible to use <em>catch</em> for it.</p>
    <p>If <em>Must exist</em> is chceked and the target does not exist, it will cause an error. It is possible to use <em>catch</em> for it.</p>
    <p>If <em>Filename</em> is absolute, only that is used. If it is relative, it is combined with <em>Path</em>. If the path is not presented (or it is also relative), the current working folder is used.</p>
    <h3>References</h3>
    <ul>
        <li>Official <a href="https://gitlab.com/advantech-czech/node-red-contrib-filesystem/-/tree/1.0.0">documentation</a> on Gitlab.</li>
    </ul>
</script>

<script type="text/x-red" data-help-name="fs-mkdir">
    <p>Creates folders. It can work recursively.</p>
    <h3>Input</h3>
    <dl class="message-properties">
        <dt>path <span class="property-type">string</span></dt>
        <dd>The path where to create the folder. It is used when the <code>foldername</code> value is relative and then both items are joined.<br/>The <em>Path</em> field must be set to <code>msg.</code> to use a message property and then the user can configure the property name.</dd>
        <dt>foldername <span class="property-type">string</span></dt>
        <dd>The foldername of the folder to create. It can include a path. The relative value will be joined with the path property.<br/>The <em>Foldername</em> field must be set to <code>msg.</code> to use a message property and then the user can configure property name.</dd>
        <dt>prefix <span class="property-type">string</span></dt>
        <dd>The foldername prefix of the temporary folder to create. It can include a path. The relative value will be joined with the path property.<br/>A radnom string will be added after the prefix to get a unique result name.<br/>The <em>Name prefix</em> field must be set to <code>msg.</code> to use a message property and then the user can configure property name.</dd>
    </dl>
    <h3>Output</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">strings</span></dt>
        <dd>Result full path; it is useful mainly for a temporary path with a generated random name.<br/>The <em>Result to</em> field must be set to <code>msg.</code> to use a message property and then the user can configure property name.</dd>
    </dl>
    <h3>Details</h3>
    <p>Temporary folders are ensured to have a unique randomly generated name optionaly with your prefix.</p>
    <p>If the path of the temporary folder is not specified the system temporary folder will be used.</p>
    <p>if <em>Err on Exist</em> is checked and a folder with the same name alreay exists, it will cause an error. If <em>Recursive</em> is not checked and creation requires to create more folder levels, it will cause an error too. It is possible to use <em>catch</em> for the errors.</p>
    <p>If <em>Foldername</em> is absolute, only that is used. If it is relative, it is combined with <em>Path</em>. If the path is not presented (or it is also relative), the current working folder is used.</p>
    <h3>References</h3>
    <ul>
        <li>Official <a href="https://gitlab.com/advantech-czech/node-red-contrib-filesystem/-/tree/1.0.0">documentation</a> on Gitlab.</li>
    </ul>
</script>

<script type="text/x-red" data-help-name="fs-list">
    <p>Lists the content of the folder. It is possible to filter the results by name pattern and type (file vs. folder).</p>
    <h3>Input</h3>
    <dl class="message-properties">
        <dt>path <span class="property-type">string</span></dt>
        <dd>The path to the folder you want to list.<br/>The <em>Path</em> field must be set to <code>msg.</code> to use a message property and then the user can configure the property name.</dd>
        <dt>pattern <span class="property-type">string</span></dt>
        <dd>Pattern of looking up filenames.<br/>The <em>Pattern</em> field must be set to <code>msg.</code> to use a message property and then the user can configure property name.</dd>
    </dl>
    <h3>Output</h3>
    <dl class="message-properties">
        <dt>list <span class="property-type">array of strings</span></dt>
        <dd>List of found files/folders.<br/>The <em>Result to</em> field must be set to <code>msg.</code> to use a message property and then the user can configure property name.</dd>
    </dl>
    <h3>Details</h3>
    <p>Checked <em>Recursive</em> causes looking up in the subfolders.</p>
    <p><em>Follow Links</em> ensures following the symbolick links.</p>
    <p>Note that the <em>Recursive</em> and <em>Follow Links</em> options can produce a very large array for a deep tree of folders.</p>
    <h3>References</h3>
    <ul>
        <li>Official <a href="https://gitlab.com/advantech-czech/node-red-contrib-filesystem/-/tree/1.0.0">documentation</a> on Gitlab.</li>
    </ul>
</script>

<script type="text/x-red" data-help-name="fs-stats">
    <p>Reports details about a file/folder. You can get all properties or just a single property.</p>
    <h3>Input</h3>
    <dl class="message-properties">
        <dt>path <span class="property-type">string</span></dt>
        <dd>The path to the file you want to get details. It is used when the <code>filename</code> value is relative and then both items are joined.<br/>The <em>Path</em> field must be set to <code>msg.</code> to use a message property and then the user can configure the property name.</dd>
        <dt>filename <span class="property-type">string</span></dt>
        <dd>The filename of the file you want to get details. It can include a path. The relative value will be joined with the path property.<br/>The <em>Filename</em> field must be set to <code>msg.</code> to use a message property and then the user can configure property name.</dd>
    </dl>
    <h3>Output</h3>
    <dl class="message-properties">
        <dt>stats <span class="property-type">object or string or number</span></dt>
        <dd>The user will get Object for all attributes and String or Number for a requested single attribute.<br/>The <em>Result to</em> field must be set to <code>msg.</code> to use a message property and then the user can configure property name.</dd>
    </dl>
    <h3>Details</h3>
    <p>The <em>All basic</em> option in <em>Attributes</em> means the attributes returned directly by the stats() function. <em>All</em> adds the several extended details.</p>
    <p>The <em>kind</em> attribute is one of <code>file</code>, <code>folder</code>, <code>character</code>, <code>block</code>, <code>pipe</code>, <code>link</code>, <code>socket</code>.</p>
    <p>The timestamp strings have the ISO 8601 format, e.g. 2021-11-18T17:14:58.000Z.</p>
    <p>When <em>Follow Links</em> is checked, the node will probe a linked target, otherwise the link itself.</p>
    <p>If <em>Filename</em> is absolute, only that is used. If it is relative, it is combined with <em>Path</em>. If the path is not presented (or it is also relative), the current working folder is used.</p>
    <h3>References</h3>
    <ul>
        <li>Official <a href="https://gitlab.com/advantech-czech/node-red-contrib-filesystem/-/tree/1.0.0">documentation</a> on Gitlab</li>
        <li><a href="https://en.wikipedia.org/wiki/Media_type">MIME Type</a> description on Wikipedia</li>
        <li><a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> description on Wikipedia</li>
    </ul>
</script>

<script type="text/x-red" data-help-name="fs-access">
    <p>Tests if your flow has access to file/folder for see, read, write.</p>
    <h3>Input</h3>
    <dl class="message-properties">
        <dt>path <span class="property-type">string</span></dt>
        <dd>The path to the file you want to test. It is used when the <code>filename</code> value is relative and then both items are joined.<br/>The <em>Path</em> field must be set to <code>msg.</code> to use a message property and then the user can configure the property name.</dd>
        <dt>filename <span class="property-type">string</span></dt>
        <dd>The filename of the file you want to test. It can include a path. The relative value will be joined with the path property.<br/>The <em>Filename</em> field must be set to <code>msg.</code> to use a message property and then the user can configure property name.</dd>
    </dl>
    <h3>Output</h3>
    <ol class="node-ports">
         <li>accessible
             <div>The untouched original <code>msg</code> when the tested file IS accessible according the given criteria.</div>
         </li>
         <li>inaccessible
             <div>The untouched original <code>msg</code> when the tested file IS NOT accessible according the given criteria.</div>
         </li>
    </ol>
    <h3>Details</h3>
    <p>The write access means you can modify content of the file. The read access means you can read content of the file. If you have both options unchecked, it examines if you can see the existence of the file. If you check a folder, the read access means to list content and write access to create/delete inside.</p>
    <p>If <em>Filename</em> is absolute, only that is used. If it is relative, it is combined with <em>Path</em>. If the path is not presented (or it is also relative), the current working folder is used.</p>
    <h3>References</h3>
    <ul>
        <li>Official <a href="https://gitlab.com/advantech-czech/node-red-contrib-filesystem/-/tree/1.0.0">documentation</a> on Gitlab.</li>
    </ul>
</script>

</div><div><!-- --- [red-module:node-red-contrib-filter/filter] --- -->
<script type="text/javascript">
    var operators = [
        { v: "eq", t: "==" },
        { v: "neq", t: "!=" },
        { v: "lt", t: "<" },
        { v: "lte", t: "<=" },
        { v: "gt", t: ">" },
        { v: "gte", t: ">=" },
        { v: "btwn", t: "is between" },
        { v: "cont", t: "contains" },
        { v: "regex", t: "matches regex" },
        { v: "true", t: "is true" },
        { v: "false", t: "is false" },
        { v: "null", t: "is null" },
        { v: "nnull", t: "is not null" },
        { v: "else", t: "otherwise" }
    ];

    var andLabel = 'and';
    var caseLabel = 'ignore case';
    var previousValueType = {
        value: 'prev',
        label: 'previous value',
        hasValue: false
    };

    function resizeItem(rule) {
        var newWidth = rule.width();
        var selectField = rule.find("select");
        var type = selectField.val() || "";
        var valueField = rule.find(".node-input-rule-value");
        var btwnField1 = rule.find(".node-input-rule-btwn-value");
        var btwnField2 = rule.find(".node-input-rule-btwn-value2");
        var selectWidth;
        if (type.length < 4) {
            selectWidth = 60;
        }
        else if (type === "regex") {
            selectWidth = 147;
        }
        else {
            selectWidth = 120;
        }
        selectField.width(selectWidth);
        if (type === "btwn") {
            btwnField1.typedInput("width", (newWidth - selectWidth - 80));
            btwnField2.typedInput("width", (newWidth - selectWidth - 70));
        }
        else {
            if (type === "true" || type === "false" || type === "null" || type === "nnull" || type === "else") {
                // valueField.hide();
            }
            else {
                valueField.typedInput("width", (newWidth - selectWidth - 80));
            }
        }
    }

    function addItem(container, i, rule) {
        if (!rule.hasOwnProperty('t')) {
            rule.t = 'eq';
        }
        if (!rule.output) {
            rule.output = '1';
        }
        var row = $('<div/>').appendTo(container);
        var row2 = $('<div/>',{style:"padding-top: 5px; padding-left: 175px;"}).appendTo(container);
        var row3 = $('<div/>',{style:"padding-top: 5px; padding-left: 102px;"}).appendTo(container);
        var row4 = $('<div/>',{style:"padding-top: 5px; padding-left: 102px;"}).appendTo(container);
        var selectField = $('<select/>',{style:"width:120px; margin-left: 5px; text-align: center;"}).appendTo(row);
        for (var d in operators) {
            selectField.append($("<option></option>").val(operators[d].v).text(operators[d].t));
        }
        var valueField = $('<input/>',{class:"node-input-rule-value",type:"text",style:"margin-left: 5px; width: 145px;"}).appendTo(row).typedInput({default:'str',types:['msg','flow','global','str','num',previousValueType]});
        var btwnValueField = $('<input/>',{class:"node-input-rule-btwn-value",type:"text",style:"margin-left: 5px;"}).appendTo(row).typedInput({default:'num',types:['msg','flow','global','str','num',previousValueType]});
        var btwnAndLabel = $('<span/>',{class:"node-input-rule-btwn-label"}).text(" "+andLabel+" ").appendTo(row3);
        var btwnValue2Field = $('<input/>',{class:"node-input-rule-btwn-value2",type:"text",style:"margin-left:2px;"}).appendTo(row3).typedInput({default:'num',types:['msg','flow','global','str','num',previousValueType]});
        var caseSensitive = $('<input/>',{id:"node-input-rule-case-"+i,class:"node-input-rule-case",type:"checkbox",style:"width:auto;vertical-align:top"}).appendTo(row2);
        $('<label/>',{for:"node-input-rule-case-"+i,style:"margin-left: 3px;"}).text(caseLabel).appendTo(row2);
        selectField.change(function() {
            resizeItem(container);
            var type = selectField.val();
            if (type === "btwn") {
                valueField.typedInput('hide');
                btwnValueField.typedInput('show');
            } else {
                btwnValueField.typedInput('hide');
                if (type === "true" || type === "false" || type === "null" || type === "nnull" || type === "else") {
                    valueField.typedInput('hide');
                } else {
                    valueField.typedInput('show');
                }
            }
            if (type === "regex") {
                row2.show();
                row3.hide();
            } else if (type === "btwn"){
                row2.hide();
                row3.show();
            } else {
                row2.hide();
                row3.hide();
            }
        });
        selectField.val(rule.t);
        if (rule.t == "btwn") {
            btwnValueField.typedInput('value',rule.v);
            btwnValueField.typedInput('type',rule.vt||'num');
            btwnValue2Field.typedInput('value',rule.v2);
            btwnValue2Field.typedInput('type',rule.v2t||'num');
        } else if (typeof rule.v != "undefined") {
            valueField.typedInput('value',rule.v);
            valueField.typedInput('type',rule.vt||'str');
        }
        if (rule.case) {
            caseSensitive.prop('checked',true);
        } else {
            caseSensitive.prop('checked',false);
        }
        selectField.change();

        var finalspan = $('<span/>',{style:"float: right;"}).appendTo(row);
        finalspan.append(' &#8594; <input class="node-input-rule-output-index" style="width:35px" type="text" value="' + (rule.output) + '"></input> ');
    }

    RED.nodes.registerType('filter', {
        category: 'function',
        color: '#A6BBCF',
        defaults: {
            name: { value: "" },
            property: { value: "payload", required: true },
            propertyType: { value: "msg" },
            asArray: { value: false },
            itemProperty: { value: 'payload' },
            itemPropertyType: { value: 'item' },
            rules: {value:[{t:"eq", v:""}]},
            checkall: { value: "true", required: true },
            outputs: { value: 1 }
        },
        inputs: 1,
        outputs: 1,
        icon: "function.png",
        label: function() {
            return this.name || "filter";
        },
        oneditprepare: function() {
            $("#node-input-outputs").spinner({
                min:1
            });

            $("#node-input-property").typedInput({ default: this.propertyType || 'msg', types: ['msg', 'flow', 'global'] });

            var updateFilterType = function() {
                if ($("#node-input-filter-type").prop('checked')) {
                    $("#node-input-item-property-row").show();
                }
                else {
                    $("#node-input-item-property-row").hide();
                }
            };
            $("#node-input-filter-type").change(updateFilterType);
            $("#node-input-filter-type").prop('checked', this.asArray);
            updateFilterType();

            var customType = {
                value: 'item',
                label: '____[i].',
                hasValue: true
            };
            $("#node-input-item-property").typedInput({
                default: this.itemPropertyType || 'item',
                types: [customType, 'flow', 'global']
            });
            $("#node-input-item-property").typedInput('value', this.itemProperty);

            $("#node-input-rule-container")
                .css('min-height','250px')
                .css('min-width','450px')
                .editableList({
                    addItem: addItem,
                    resizeItem: resizeItem,
                    removable: true,
                    sortable: true
                });

            for (var i = 0; i < this.rules.length; i++) {
                var rule = this.rules[i];
                $("#node-input-rule-container").editableList('addItem', rule);
            }
        },
        oneditsave: function() {
            var node = this;
            node.propertyType = $("#node-input-property").typedInput('type');
            node.asArray = $("#node-input-filter-type").prop('checked');
            node.itemProperty = $("#node-input-item-property").typedInput('value');
            node.itemPropertyType = $("#node-input-item-property").typedInput('type');

            var rules = $("#node-input-rule-container").editableList('items');
            var node = this;
            node.rules= [];
            rules.each(function(i) {
                var rule = $(this);
                var type = rule.find("select").val();
                var r = {t:type};
                if (!(type === "true" || type === "false" || type === "null" || type === "nnull" || type === "else")) {
                    if (type === "btwn") {
                        r.v = rule.find(".node-input-rule-btwn-value").typedInput('value');
                        r.vt = rule.find(".node-input-rule-btwn-value").typedInput('type');
                        r.v2 = rule.find(".node-input-rule-btwn-value2").typedInput('value');
                        r.v2t = rule.find(".node-input-rule-btwn-value2").typedInput('type');
                    } else {
                        r.v = rule.find(".node-input-rule-value").typedInput('value');
                        r.vt = rule.find(".node-input-rule-value").typedInput('type');
                    }
                    if (type === "regex") {
                        r.case = rule.find(".node-input-rule-case").prop("checked");
                    }
                }
                // TODO: Deal with bad input
                r.output = parseInt(rule.find('.node-input-rule-output-index').val());
                node.rules.push(r);
            });
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-input-rule-container-row)");
            var height = size.height;
            for (var i = 0; i < rows.size(); i++) {
                height -= $(rows[i]).outerHeight(true);
            }
            var editorRow = $("#dialog-form>div.node-input-rule-container-row");
            height -= (parseInt(editorRow.css("marginTop"))+parseInt(editorRow.css("marginBottom")));
            $("#node-input-rule-container").editableList('height',height);
        }
    });
</script>

<script type="text/x-red" data-template-name="filter">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>

    <div class="form-row">
        <label for="node-input-outputs"><i class="fa fa-random"></i> Outputs</label>
        <input id="node-input-outputs" style="width: 60px;" value="1">
    </div>

    <div class="form-row">
        <label for="node-input-property">Property</label>
        <input type="text" id="node-input-property" style="width: 70%"/>
    </div>

    <div class="form-row">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-filter-type" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-filter-type" style="width: 70%;">Filter as an array of messages</label>
    </div>

    <div class="form-row" id="node-input-item-property-row">
        <label>&nbsp;</label>
        <input type="text" id="node-input-item-property" style="width: 70%"/>
    </div>

    <div class="form-row node-input-rule-container-row">
        <ol id="node-input-rule-container"></ol>
    </div>

    <div class="form-row">
        <select id="node-input-checkall" style="width:100%; margin-right:5px;">
            <option value="true">checking all rules</option>
            <option value="false">stopping after first match (like an if-statement)</option>
        </select>
    </div>
</script>


<script type="text/x-red" data-help-name="filter">
    <p>A node that filters incoming message(s) based on configured rules.</p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-fs-ops/fs-ops] --- -->
<script type="text/javascript">
    RED.nodes.registerType('fs-ops-move',{
        category: 'storage',
        color: '#767432',
        defaults: {
            name: {value:""},
	    sourcePath: {value: ""},
            sourcePathType: {value: "str"},
	    sourceFilename: {value: "", required: true},
            sourceFilenameType: {value: "msg"},
            destPath: {value: "", required: true},
            destPathType: {value: "str"},
            destFilename: {value: "", required: true},
            destFilenameType: {value: "msg"},
            link: {value:false}
        },
        inputs:1,
        outputs:1,
        icon: "file.png",
        label: function() {
            return this.name||"File Move";
        },
        oneditprepare: function() {
            if (!this.sourcePathType) {
                this.sourcePathType = 'str';
            }
            $("#node-input-sourcePath").typedInput({
                default: 'str',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-sourcePathType")
            });

            if (!this.sourceFilenameType) {
                this.sourceFilenameType = 'msg';
            }
            $("#node-input-sourceFilename").typedInput({
                default: 'msg',
                types: ['str','msg','flow','global'],
                typeField: $("#node-input-sourceFilenameType")
            });

            if (!this.destPathType) {
                this.destPathType = 'str';
            }
            $("#node-input-destPath").typedInput({
                default: 'str',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-destPathType")
            });

            if (!this.destFilenameType) {
                this.destFilenameType = 'msg';
            }
            $("#node-input-destFilename").typedInput({
                default: 'msg',
                types: ['str','msg','flow','global'],
                typeField: $("#node-input-destFilenameType")
            });

        }
    });
</script>

<script type="text/x-red" data-template-name="fs-ops-move">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-sourcePath"><i class="fa fa-folder"></i> Source Path</label>
        <input type="text" id="node-input-sourcePath" placeholder="Path to move from" style="width:250px;">
        <input type="hidden" id="node-input-sourcePathType">
    </div>
    <div class="form-row">
        <label for="node-input-sourceFilename"><i class="fa fa-file"></i> Source Filename</label>
        <input type="text" id="node-input-sourceFilename" placeholder="Old filename" style="width:250px;">
        <input type="hidden" id="node-input-sourceFilenameType">
    </div>
    <div class="form-row">
        <label for="node-input-destPath"><i class="fa fa-folder"></i> Destination Path</label>
        <input type="text" id="node-input-destPath" placeholder="Path to move to" style="width:250px;">
        <input type="hidden" id="node-input-destPathType">
    </div>
    <div class="form-row">
        <label for="node-input-destFilename"><i class="fa fa-file"></i> Destination Filename</label>
        <input type="text" id="node-input-destFilename" placeholder="New filename" style="width:250px;">
        <input type="hidden" id="node-input-destFilenameType">
    </div>
    <div class="form-row">
        <label for="node-input-link"><i class="fa fa-link"></i> Link File</label>
        <input type="checkbox" value="false" id="node-input-link" style="display: inline-block; width: auto; vertical-align: top;"/>
    </div>

</script>



<script type="text/javascript">
    RED.nodes.registerType('fs-ops-copy',{
        category: 'storage',
        color: '#767432',
        defaults: {
            name: {value:""},
	    sourcePath: {value: ""},
            sourcePathType: {value: "str"},
	    sourceFilename: {value: "", required: true},
            sourceFilenameType: {value: "msg"},
            destPath: {value: "", required: true},
            destPathType: {value: "str"},
            destFilename: {value: "", required: true},
            destFilenameType: {value: "msg"},
            link: {value:false},
            overwrite: {value: false}
        },
        inputs:1,
        outputs:1,
        icon: "file.png",
        label: function() {
            return this.name||"File Copy";
        },
        oneditprepare: function() {
            if (!this.sourcePathType) {
                this.sourcePathType = 'str';
            }
            $("#node-input-sourcePath").typedInput({
                default: 'str',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-sourcePathType")
            });

            if (!this.sourceFilenameType) {
                this.sourceFilenameType = 'msg';
            }
            $("#node-input-sourceFilename").typedInput({
                default: 'msg',
                types: ['str','msg','flow','global'],
                typeField: $("#node-input-sourceFilenameType")
            });

            if (!this.destPathType) {
                this.destPathType = 'str';
            }
            $("#node-input-destPath").typedInput({
                default: 'str',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-destPathType")
            });

            if (!this.destFilenameType) {
                this.destFilenameType = 'msg';
            }
            $("#node-input-destFilename").typedInput({
                default: 'msg',
                types: ['str','msg','flow','global'],
                typeField: $("#node-input-destFilenameType")
            });

        }
    });
</script>

<script type="text/x-red" data-template-name="fs-ops-copy">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-sourcePath"><i class="fa fa-folder"></i> Source Path</label>
        <input type="text" id="node-input-sourcePath" placeholder="Path to copy from" style="width:250px;">
        <input type="hidden" id="node-input-sourcePathType">
    </div>
    <div class="form-row">
        <label for="node-input-sourceFilename"><i class="fa fa-file"></i> Source Filename</label>
        <input type="text" id="node-input-sourceFilename" placeholder="Source filename" style="width:250px;">
        <input type="hidden" id="node-input-sourceFilenameType">
    </div>
    <div class="form-row">
        <label for="node-input-destPath"><i class="fa fa-folder"></i> Destination Path</label>
        <input type="text" id="node-input-destPath" placeholder="Path to copy to" style="width:250px;">
        <input type="hidden" id="node-input-destPathType">
    </div>
    <div class="form-row">
        <label for="node-input-destFilename"><i class="fa fa-file"></i> Destination Filename</label>
        <input type="text" id="node-input-destFilename" placeholder="New filename" style="width:250px;">
        <input type="hidden" id="node-input-destFilenameType">
    </div>
    <div class="form-row">
        <label for="node-input-link"><i class="fa fa-link"></i> Link</label>
        <input type="checkbox" value="false" id="node-input-link" style="display: inline-block; width: auto; vertical-align: top;"/>
    </div>
    <div class="form-row">
        <label for="node-input-overwrite"><i class="fa fa-eraser"></i> Overwrite</label>
        <input type="checkbox" value="false" id="node-input-overwrite" style="display: inline-block; width: auto; vertical-align: top;"/>
    </div>

</script>



<script type="text/javascript">
    RED.nodes.registerType('fs-ops-delete',{
        category: 'storage',
        color: '#767432',
        defaults: {
            name: {value:""},
	    path: {value: ""},
            pathType: {value: "str"},
	    filename: {value: "", required: true},
            filenameType: {value: "msg"}
        },
        inputs:1,
        outputs:1,
        icon: "file.png",
        label: function() {
            return this.name||"File Delete";
        },
        oneditprepare: function() {
            if (!this.pathType) {
                this.pathType = 'str';
            }
            $("#node-input-path").typedInput({
                default: 'str',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-pathType")
            });

            if (!this.filenameType) {
                this.filenameType = 'msg';
            }
            $("#node-input-filename").typedInput({
                default: 'msg',
                types: ['str','msg','flow','global'],
                typeField: $("#node-input-filenameType")
            });

        }
    });
</script>

<script type="text/x-red" data-template-name="fs-ops-delete">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-folder"></i> Path</label>
        <input type="text" id="node-input-path" placeholder="Path of file to delete" style="width:250px;">
        <input type="hidden" id="node-input-pathType">
    </div>
    <div class="form-row">
        <label for="node-input-filename"><i class="fa fa-file"></i> Filename</label>
        <input type="text" id="node-input-filename" placeholder="File to delete" style="width:250px;">
        <input type="hidden" id="node-input-filenameType">
    </div>
</script>




<script type="text/javascript">
    RED.nodes.registerType('fs-ops-access',{
        category: 'storage',
        color: '#767432',
        defaults: {
            name: {value:""},
	    path: {value: ""},
            pathType: {value: "str"},
	    filename: {value: "", required: true},
            filenameType: {value: "msg"},
            read: {value: true},
            write: {value: true},
            throwerror: {value: false}
        },
        inputs:1,
        outputs:2,
        icon: "file.png",
        label: function() {
            return this.name||"File Access";
        },
        oneditprepare: function() {
            if (!this.pathType) {
                this.pathType = 'str';
            }
            $("#node-input-path").typedInput({
                default: 'str',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-pathType")
            });

            if (!this.filenameType) {
                this.filenameType = 'msg';
            }
            $("#node-input-filename").typedInput({
                default: 'msg',
                types: ['str','msg','flow','global'],
                typeField: $("#node-input-filenameType")
            });

        }
    });
</script>



<script type="text/x-red" data-template-name="fs-ops-access">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-folder"></i> Path</label>
        <input type="text" id="node-input-path" placeholder="Path of file to test" style="width:250px;">
        <input type="hidden" id="node-input-pathType">
    </div>
    <div class="form-row">
        <label for="node-input-filename"><i class="fa fa-file"></i> Filename</label>
        <input type="text" id="node-input-filename" placeholder="File to test" style="width:250px;">
        <input type="hidden" id="node-input-filenameType">
    </div>
    <div class="form-row">
        <label for="access"><i class="fa fa-lock"></i> Access</label>
        <input type="checkbox" checked value="true" id="node-input-read" style="display: inline-block; width: auto; vertical-align: top;"/>
        <label for="node-input-read" style="width: 30%;"> Read</label>
        <input type="checkbox" checked value="true" id="node-input-write" style="display: inline-block; width: auto; vertical-align: top;"/>
        <label for="node-input-write" style="width: 30%;"> Write</label>
    </div>
    <div class="form-row">
        <label for="node-input-throwerror"><i class="fa fa-exclamation-triangle"></i> Throw Error</label>
        <input type="checkbox" checked value="true" id="node-input-throwerror" style="display: inline-block; width: auto; vertical-align: top;"/>
    </div>
</script>




<script type="text/javascript">
    RED.nodes.registerType('fs-ops-size',{
        category: 'storage',
        color: '#767432',
        defaults: {
            name: {value:""},
	    path: {value: ""},
            pathType: {value: "str"},
	    filename: {value: "", required: true},
            filenameType: {value: "msg"},
	    size: {value: "filesize", required: true},
            sizeType: {value: "msg"}
        },
        inputs:1,
        outputs:1,
        icon: "file.png",
        label: function() {
            return this.name||"File Size";
        },
        oneditprepare: function() {
            if (!this.pathType) {
                this.pathType = 'str';
            }
            $("#node-input-path").typedInput({
                default: 'str',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-pathType")
            });

            if (!this.filenameType) {
                this.filenameType = 'msg';
            }
            $("#node-input-filename").typedInput({
                default: 'msg',
                types: ['str','msg','flow','global'],
                typeField: $("#node-input-filenameType")
            });

            if (!this.sizeType) {
                this.sizeType = 'msg';
            }
            $("#node-input-size").typedInput({
                default: 'msg',
                types: ['msg','flow','global'],
                typeField: $("#node-input-sizeType")
            });

        }
    });
</script>

<script type="text/x-red" data-template-name="fs-ops-size">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-folder"></i> Path</label>
        <input type="text" id="node-input-path" placeholder="Path" style="width:250px;">
        <input type="hidden" id="node-input-pathType">
    </div>
    <div class="form-row">
        <label for="node-input-filename"><i class="fa fa-file"></i> Filename</label>
        <input type="text" id="node-input-filename" placeholder="Filename" style="width:250px;">
        <input type="hidden" id="node-input-filenameType">
    </div>
    <div class="form-row">
        <label for="node-input-size"><i class="fa fa-edit"></i> Size Property</label>
        <input type="text" id="node-input-size" placeholder="Property to record size" style="width:250px;">
        <input type="hidden" id="node-input-sizeType">
    </div>
</script>



<script type="text/javascript">
    RED.nodes.registerType('fs-ops-stats',{
        category: 'storage',
        color: '#767432',
        defaults: {
            name: {value:""},
	    path: {value: ""},
            pathType: {value: "str"},
	    filename: {value: "", required: true},
            filenameType: {value: "msg"},
	    stats: {value: "stats", required: true},
            sizeType: {value: "msg"}
        },
        inputs:1,
        outputs:1,
        icon: "file.png",
        label: function() {
            return this.name||"File Stats";
        },
        oneditprepare: function() {
            if (!this.pathType) {
                this.pathType = 'str';
            }
            $("#node-input-path").typedInput({
                default: 'str',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-pathType")
            });

            if (!this.filenameType) {
                this.filenameType = 'msg';
            }
            $("#node-input-filename").typedInput({
                default: 'msg',
                types: ['str','msg','flow','global'],
                typeField: $("#node-input-filenameType")
            });

            if (!this.statsType) {
                this.statsType = 'msg';
            }
            $("#node-input-stats").typedInput({
                default: 'msg',
                types: ['msg','flow','global'],
                typeField: $("#node-input-statsType")
            });

        }
    });
</script>

<script type="text/x-red" data-template-name="fs-ops-stats">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-folder"></i> Path</label>
        <input type="text" id="node-input-path" placeholder="Path" style="width:250px;">
        <input type="hidden" id="node-input-pathType">
    </div>
    <div class="form-row">
        <label for="node-input-filename"><i class="fa fa-file"></i> Filename</label>
        <input type="text" id="node-input-filename" placeholder="Filename" style="width:250px;">
        <input type="hidden" id="node-input-filenameType">
    </div>
    <div class="form-row">
        <label for="node-input-stats"><i class="fa fa-edit"></i> Stats Property</label>
        <input type="text" id="node-input-stats" placeholder="Property to record size" style="width:250px;">
        <input type="hidden" id="node-input-statsType">
    </div>
</script>



<script type="text/javascript">
    RED.nodes.registerType('fs-ops-link',{
        category: 'storage',
        color: '#767432',
        defaults: {
            name: {value:""},
	    path: {value: ""},
            pathType: {value: "str"},
	    filename: {value: "", required: true},
            filenameType: {value: "msg"},
	    link: {value: "link", required: true},
            linkType: {value: "msg"}
        },
        inputs:1,
        outputs:1,
        icon: "file.png",
        label: function() {
            return this.name||"Get Link";
        },
        oneditprepare: function() {
            if (!this.pathType) {
                this.pathType = 'str';
            }
            $("#node-input-path").typedInput({
                default: 'str',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-pathType")
            });

            if (!this.filenameType) {
                this.filenameType = 'msg';
            }
            $("#node-input-filename").typedInput({
                default: 'msg',
                types: ['str','msg','flow','global'],
                typeField: $("#node-input-filenameType")
            });

            if (!this.linkType) {
                this.linkType = 'msg';
            }
            $("#node-input-link").typedInput({
                default: 'msg',
                types: ['msg','flow','global'],
                typeField: $("#node-input-linkType")
            });

        }
    });
</script>

<script type="text/x-red" data-template-name="fs-ops-link">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-folder"></i> Path</label>
        <input type="text" id="node-input-path" placeholder="Path" style="width:250px;">
        <input type="hidden" id="node-input-pathType">
    </div>
    <div class="form-row">
        <label for="node-input-filename"><i class="fa fa-file"></i> Filename</label>
        <input type="text" id="node-input-filename" placeholder="Filename" style="width:250px;">
        <input type="hidden" id="node-input-filenameType">
    </div>
    <div class="form-row">
        <label for="node-input-link"><i class="fa fa-edit"></i> Link Property</label>
        <input type="text" id="node-input-link" placeholder="Property to record link" style="width:250px;">
        <input type="hidden" id="node-input-linkType">
    </div>
</script>




<script type="text/javascript">
    RED.nodes.registerType('fs-ops-type',{
        category: 'storage',
        color: '#767432',
        defaults: {
            name: {value:""},
	    path: {value: ""},
            pathType: {value: "str"},
	    filename: {value: "", required: true},
            filenameType: {value: "msg"},
	    filetype: {value: "type", required: true},
            filetypeType: {value: "msg"}
        },
        inputs:1,
        outputs:1,
        icon: "file.png",
        label: function() {
            return this.name||"Get Type";
        },
        oneditprepare: function() {
            if (!this.pathType) {
                this.pathType = 'str';
            }
            $("#node-input-path").typedInput({
                default: 'str',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-pathType")
            });

            if (!this.filenameType) {
                this.filenameType = 'msg';
            }
            $("#node-input-filename").typedInput({
                default: 'msg',
                types: ['str','msg','flow','global'],
                typeField: $("#node-input-filenameType")
            });

            if (!this.filetypeType) {
                this.filetypeType = 'msg';
            }
            $("#node-input-type").typedInput({
                default: 'msg',
                types: ['msg','flow','global'],
                typeField: $("#node-input-typeType")
            });

        }
    });
</script>

<script type="text/x-red" data-template-name="fs-ops-type">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-folder"></i> Path</label>
        <input type="text" id="node-input-path" placeholder="Path" style="width:250px;">
        <input type="hidden" id="node-input-pathType">
    </div>
    <div class="form-row">
        <label for="node-input-filename"><i class="fa fa-file"></i> Filename</label>
        <input type="text" id="node-input-filename" placeholder="Filename" style="width:250px;">
        <input type="hidden" id="node-input-filenameType">
    </div>
    <div class="form-row">
        <label for="node-input-filetype"><i class="fa fa-edit"></i> Type Property</label>
        <input type="text" id="node-input-filetype" placeholder="Property to record type" style="width:250px;">
        <input type="hidden" id="node-input-filetypeType">
    </div>
</script>




<script type="text/javascript">
    RED.nodes.registerType('fs-ops-dir',{
        category: 'storage',
        color: '#767432',
        defaults: {
            name: {value:""},
	    path: {value: ""},
            pathType: {value: "str"},
	    filter: {value: "*"},
            filterType: {value: "str"},
	    dir: {value: "files", required: true},
            dirType: {value: "msg"}
        },
        inputs:1,
        outputs:1,
        icon: "db.png",
        label: function() {
            return this.name||"Directory";
        },
        oneditprepare: function() {
            if (!this.pathType) {
                this.pathType = 'str';
            }
            $("#node-input-path").typedInput({
                default: 'str',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-pathType")
            });

            if (!this.filterType) {
                this.filterType = 'msg';
            }
            $("#node-input-filter").typedInput({
                default: 'msg',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-filterType")
            });

            if (!this.dirType) {
                this.dirType = 'msg';
            }
            $("#node-input-dir").typedInput({
                default: 'msg',
                types: ['msg','flow','global'],
                typeField: $("#node-input-dirType")
            });

        }
    });
</script>

<script type="text/x-red" data-template-name="fs-ops-dir">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-folder"></i> Path</label>
        <input type="text" id="node-input-path" placeholder="Path" style="width:250px;">
        <input type="hidden" id="node-input-pathType">
    </div>
    <div class="form-row">
        <label for="node-input-filter"><i class="fa fa-filter"></i> Filter</label>
        <input type="text" id="node-input-filter" placeholder="Filename filter" style="width:250px;">
        <input type="hidden" id="node-input-filterType">
    </div>
    <div class="form-row">
        <label for="node-input-dir"><i class="fa fa-edit"></i> Directory Property</label>
        <input type="text" id="node-input-dir" placeholder="Property to record directory files" style="width:250px;">
        <input type="hidden" id="node-input-dirType">
    </div>
</script>



<script type="text/javascript">
    RED.nodes.registerType('fs-ops-mkdir',{
        category: 'storage',
        color: '#767432',
        defaults: {
            name: {value:""},
	    path: {value: ""},
            pathType: {value: "str"},
	    dirname: {value: "", required: true},
            dirnameType: {value: "msg"},
            recursive: {value: false, required: false},
            mode: {value: "777", required: true, validate:RED.validators.regex(/[0-7][0-7][0-7]/)},
            fullpath: {value: "directory"},
            fullpathType: {value: "msg"}
        },
        inputs:1,
        outputs:1,
        icon: "file.png",
        label: function() {
            return this.name||"Make Directory";
        },
        oneditprepare: function() {
            if (!this.pathType) {
                this.pathType = 'str';
            }
            $("#node-input-path").typedInput({
                default: 'str',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-pathType")
            });

            if (!this.dirnameType) {
                this.dirnameType = 'msg';
            }
            $("#node-input-dirname").typedInput({
                default: 'msg',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-dirnameType")
            });

            if (!this.fullpathType) {
                this.fullpathType = 'msg';
            }
            $("#node-input-fullpath").typedInput({
                default: 'msg',
                types: ['msg','flow','global'],
                typeField: $("#node-input-fullpathType")
            });

        }
    });
</script>

<script type="text/x-red" data-template-name="fs-ops-mkdir">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-folder"></i> Path</label>
        <input type="text" id="node-input-path" placeholder="Path of new directory" style="width:250px;">
        <input type="hidden" id="node-input-pathType">
    </div>
    <div class="form-row">
        <label for="node-input-dirname"><i class="fa fa-folder"></i> Directory</label>
        <input type="text" id="node-input-dirname" placeholder="New directory name" style="width:250px;">
        <input type="hidden" id="node-input-dirnameType">
    </div>
    <div class="form-row">
        <label for="node-input-recursive"></label>
        <input type="checkbox" id="node-input-recursive" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-recursive" style="width: auto"><i class="fa fa-sitemap"></i> Recursive</label>
    </div>
    <div class="form-row">
        <label for="node-input-mode"><i class="icon-lock"></i> Access Mode</label>
        <input type="text" id="node-input-mode" placeholder="Octal">
    </div>
    <div class="form-row">
        <label for="node-input-fullpath"><i class="fa fa-edit"></i> Directory Property</label>
        <input type="text" id="node-input-fullpath" placeholder="Property to record directory name" style="width:250px;">
        <input type="hidden" id="node-input-fullpathType">
    </div>
</script>



<script type="text/javascript">
    RED.nodes.registerType('fs-ops-mktmpdir',{
        category: 'storage',
        color: '#767432',
        defaults: {
            name: {value:""},
	    path: {value: ""},
            pathType: {value: "str"},
	    prefix: {value: "", required: true},
            prefixType: {value: "msg"},
            mode: {value: "777", required: true, validate:RED.validators.regex(/[0-7][0-7][0-7]/)},
            fullpath: {value: "directory", required: true},
            fullpathType: {value: "msg"},
        },
        inputs:1,
        outputs:1,
        icon: "file.png",
        label: function() {
            return this.name||"Make Tmp Directory";
        },
        oneditprepare: function() {
            if (!this.pathType) {
                this.pathType = 'str';
            }
            $("#node-input-path").typedInput({
                default: 'str',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-pathType")
            });

            if (!this.prefixType) {
                this.prefixType = 'msg';
            }
            $("#node-input-prefix").typedInput({
                default: 'msg',
                types: ['str','msg','flow','global','env'],
                typeField: $("#node-input-prefixType")
            });

            if (!this.fullpathType) {
                this.fullpathType = 'msg';
            }
            $("#node-input-fullpath").typedInput({
                default: 'msg',
                types: ['msg','flow','global'],
                typeField: $("#node-input-fullpathType")
            });

        }
    });
</script>

<script type="text/x-red" data-template-name="fs-ops-mktmpdir">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-path"><i class="fa fa-folder"></i> Path</label>
        <input type="text" id="node-input-path" placeholder="Path of tmp directory" style="width:250px;">
        <input type="hidden" id="node-input-pathType">
    </div>
    <div class="form-row">
        <label for="node-input-prefix"><i class="fa fa-folder"></i> Prefix</label>
        <input type="text" id="node-input-prefix" placeholder="New directory prefix" style="width:250px;">
        <input type="hidden" id="node-input-prefixType">
    </div>
    <div class="form-row">
        <label for="node-input-fullpath"><i class="fa fa-edit"></i> Directory Property</label>
        <input type="text" id="node-input-fullpath" placeholder="Property to record directory name" style="width:250px;">
        <input type="hidden" id="node-input-fullpathType">
    </div>
</script>


<script type="text/x-red" data-help-name="fs-ops-move">

    <p>Move or rename a file in the local filesystem.</p>

    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>name
            <span class="property-type">string</span>
        </dt>
        <dd>Name of node to be displayed in editor</dd>
        <dt>source path<span class="property-type">string</span></dt>
        <dd>Path of directory containing file to be moved</dd>
        <dt>source filename<span class="property-type">string</span></dt>
        <dd>Name of file to be moved</dd>
        <dt>destination path<span class="property-type">string</span></dt>
        <dd>Path of directory the file is to be moved to</dd>
        <dt>destination filename<span class="property-type">string</span></dt>
        <dd>New name to be used for file</dd>
        <dt>link file<span class="property-type">boolean</span></dt>
        <dd><i>Deprecated</i>: Link file in destination<dd>
    </dl>
    <h3>Inputs</h3>
    <dl class="message-properties">
    <p>Any</p>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
    <p>Input message is passed unchanged if no errors occur.</p>
    </dl>

    <h3>Details</h3>
    <p>Moves, renames or links a file from the source to the destination.</p>
    <p>Specified file is moved from the source path to the destination path and
    renamed from the source filename to the destination filename.</p>
    <p><b>Warning:</b>This node will always overwrite the destination.</p>
    <p>If <i>Link Files</i> is set, destination file will be a symbolic link to the source file. - DEPRECATED: Use
    File Copy node instead.</p>
    <p>Message is actioned and passed through unchanged if move/rename is successful.</p>
</script><script type="text/x-red" data-help-name="fs-ops-copy">
    <p>Copies or links a file from the source to the destination.</p>

    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>name
            <span class="property-type">string</span>
        </dt>
        <dd>Name of node to be displayed in editor</dd>
        <dt>source path<span class="property-type">string</span></dt>
        <dd>Path of directory containing file to be copied</dd>
        <dt>source filename<span class="property-type">string</span></dt>
        <dd>Name of file to be copied</dd>
        <dt>destination path<span class="property-type">string</span></dt>
        <dd>Path of directory the file is to be copied to</dd>
        <dt>destination filename<span class="property-type">string</span></dt>
        <dd>New name to be used for file</dd>
        <dt>link<span class="property-type">boolean</span></dt>
        <dd>Link file in destination<dd>
        <dt>overwrite<span class="property-type">boolean</span></dt>
        <dd>Overwrite existing destination file<dd>
    </dl>
    <h3>Inputs</h3>
    <dl class="message-properties">
    <p>Any</p>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
    <p>Input message is passed unchanged if no errors occur.</p>
    </dl>

    <h3>Details</h3>
    <p>Specified file is copied from the source path to the destination path and
    renamed from the source filename to the destination filename.  An error is thrown if the destination file
    exists and the overwrite option is not set.</p>
    <p>If <i>Link Files</i> is set, destination file will be a symbolic link to the source file.</p>
    <p>Message is actioned and passed through unchanged if copy is successful.</p>
</script><script type="text/x-red" data-help-name="fs-ops-delete">
    <p>Deletes a file on host filesystem.</p>
    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>name
            <span class="property-type">string</span>
        </dt>
        <dd>Name of node to be displayed in editor</dd>
        <dt>source path<span class="property-type">string</span></dt>
        <dd>Path of directory containing file to be deleted</dd>
        <dt>source filename<span class="property-type">string|array of string</span></dt>
        <dd>Name/s of file/s to be deleted</dd>
    </dl>
    <h3>Inputs</h3>
    <dl class="message-properties">
    <p>Any</p>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
    <p>Input message is passed unchanged if no errors occur.</p>
    </dl>

    <h3>Details</h3>
    <p>Deletes the specified files from the local filesystem. </p>
    <p>If an array of filenames is passed
    in, such as from the file-ops-dir node, then each file will be deleted.</p>

    <p>Message is actioned and passed through unchanged if no error is encountered.</p>
</script><script type="text/x-red" data-help-name="fs-ops-access">
    <p>Tests if a file is accessible on the host filesystem.</p>
    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>name
            <span class="property-type">string</span>
        </dt>
        <dd>Name of node to be displayed in editor</dd>
        <dt>source path<span class="property-type">string</span></dt>
        <dd>Path of directory containing file to be tested</dd>
        <dt>source filename<span class="property-type">string</span></dt>
        <dd>Name of file to be tested</dd>
        <dt>access</dt>
        <dd>Access modes to be tested</dd>
        <dt>throw error</dt>
        <dd>Throw error if access test fails</dd>
    </dl>
    <h3>Inputs</h3>
    <dl class="message-properties">
    <p>Any</p>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
    <p>Input message is passed unchanged.</p>
    </dl>

    <h3>Details</h3>
    <p>Message is actioned and passed through output 1 unchanged if the file is accessible
    or output 2 with error if not accessible.</p>

    <p>Error is also optionally thrown which can trigger a Catch node.</p>
</script><script type="text/x-red" data-help-name="fs-ops-size">
    <p>Determines the size of a file on host filesystem.</p>
    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>name
            <span class="property-type">string</span>
        </dt>
        <dd>Name of node to be displayed in editor</dd>
        <dt>source path<span class="property-type">string</span></dt>
        <dd>Path of directory containing file</dd>
        <dt>source filename<span class="property-type">string | array of string</span></dt>
        <dd>Name/s of file/s</dd>
        <dt>size property</dt>
        <dd>Property where file size is recorded</dd>
    </dl>
    <h3>Inputs</h3>
    <dl class="message-properties">
    <p>Any</p>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
    <p>File size is stored in specified property.</p>
    </dl>

    <h3>Details</h3>
    <p>File size is added in the specified property. If passed an array of
    filenames, like from fs-ops-dir, node will add an array of corresponding
    file sizes.</p>
    <p>Error is thrown and message dropped if size cannot be determined.</p>
</script><script type="text/x-red" data-help-name="fs-ops-stats">
    <p>Returns the stats of a file on host filesystem.</p>
    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>name
            <span class="property-type">string</span>
        </dt>
        <dd>Name of node to be displayed in editor</dd>
        <dt>source path<span class="property-type">string</span></dt>
        <dd>Path of directory containing file</dd>
        <dt>source filename<span class="property-type">string | array of string</span></dt>
        <dd>Name/s of file/s</dd>
        <dt>size property</dt>
        <dd>Property where file size is recorded</dd>
    </dl>
    <h3>Inputs</h3>
    <dl class="message-properties">
    <p>Any</p>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
    <p>File size is stored in specified property.</p>
    </dl>

    <h3>Details</h3>
    <p><a href="https://nodejs.org/docs/latest-v11.x/api/fs.html#fs_class_fs_stats">File stats object</a> 
    is added in the specified property. If passed an array of
    filenames, like from fs-ops-dir, node will add an array of corresponding
    file stats.</p>
    <p>Error is thrown and message dropped if stats cannot be determined.</p>
</script><script type="text/x-red" data-help-name="fs-ops-link">
    <p>Determines if a file on host filesystem is a link and returns the file it links to.</p>
    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>name
            <span class="property-type">string</span>
        </dt>
        <dd>Name of node to be displayed in editor</dd>
        <dt>source path<span class="property-type">string</span></dt>
        <dd>Path of directory containing file</dd>
        <dt>source filename<span class="property-type">string | array of string</span></dt>
        <dd>Name/s of file/s</dd>
        <dt>link property</dt>
        <dd>Property where linked file is recorded</dd>
    </dl>
    <h3>Inputs</h3>
    <dl class="message-properties">
    <p>Any</p>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
    <p>File link is stored in specified property.</p>
    </dl>

    <h3>Details</h3>
    <p>File linked is added in the specified property. If passed an array of
    filenames, like from fs-ops-dir, node will add an array of corresponding
    file links. If the file is not a link, the returned property will be an empty string.</p>
    <p>Error is thrown and message dropped if link cannot be determined.</p>
</script><script type="text/x-red" data-help-name="fs-ops-type">
    <p>Determines the type of a file on host filesystem.</p>
    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>name
            <span class="property-type">string</span>
        </dt>
        <dd>Name of node to be displayed in editor</dd>
        <dt>source path<span class="property-type">string</span></dt>
        <dd>Path of directory containing file</dd>
        <dt>source filename<span class="property-type">string | array of string</span></dt>
        <dd>Name/s of file/s</dd>
        <dt>type property</dt>
        <dd>Property where file type is recorded</dd>
    </dl>
    <h3>Inputs</h3>
    <dl class="message-properties">
    <p>Any</p>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
    <p>File type is stored in specified property.</p>
    </dl>

    <h3>Details</h3>
    <p>File type is added in the specified property. If passed an array of
    filenames, like from fs-ops-dir, node will add an array of corresponding
    file types.</p>
    <p>Types are:
    <ul><li>F - Regular file</li>
    <li>D - Directory</li>
    <li>C - Character device</li>
    <li>B - Block device</li>
    <li>L - Symbolic link</li>
    <li>S - Special file</li>
    </ul></p>
    <p>Error is thrown and message dropped if type cannot be determined.</p>
</script><script type="text/x-red" data-help-name="fs-ops-dir">
    <p>Lists the files in a directory on host filesystem.</p>
    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>name
            <span class="property-type">string</span>
        </dt>
        <dd>Name of node to be displayed in editor</dd>
        <dt>source path<span class="property-type">string</span></dt>
        <dd>Path of directory</dd>
        <dt>filter<span class="property-type">string</span></dt>
        <dd>File name filter</dd>
        <dt>directory property</dt>
        <dd>Property where file names are recorded</dd>
    </dl>
    <h3>Inputs</h3>
    <dl class="message-properties">
    <p>Any</p>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
    <p>File names stored in an array in the specified property.</p>
    </dl>

    <h3>Details</h3>
    <p>List of file names is stored in an array in the specified property.  This array is
    suitable for passing to other fs-op nodes for further operations.</p>

    <p>Error is thrown and message dropped if directory cannot be accessed.</p>
</script><script type="text/x-red" data-help-name="fs-ops-mkdir">
    <p>Makes a directory on host filesystem.</p>
    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>name
            <span class="property-type">string</span>
        </dt>
        <dd>Name of node to be displayed in editor</dd>
        <dt>path<span class="property-type">string</span></dt>
        <dd>Path of directory containing new directory</dd>
        <dt>directory<span class="property-type">string</span></dt>
        <dd>Name of new directory</dd>
        <dt>access mode<span class="property-type">integer</span></dt>
        <dd>Access mode for new directory</dd>
        <dt>directory property</dt>
        <dd>Property where new directory path is recorded</dd>
    </dl>
    <h3>Inputs</h3>
    <dl class="message-properties">
    <p>Any</p>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
    <p>New directory path is stored in specified property.</p>
    </dl>

    <h3>Details</h3>
    <p>Message is actioned and passed through if successful.</p>
    <p>Full pathname of new directory is added to the <i>Directory</i> property as specified.</p>
</script><script type="text/x-red" data-help-name="fs-ops-mktmpdir">
    <p>Creates a new temporary directory on host filesystem.</p>
    <h3>Properties</h3>
    <dl class="message-properties">
        <dt>name
            <span class="property-type">string</span>
        </dt>
        <dd>Name of node to be displayed in editor</dd>
        <dt>path<span class="property-type">string</span></dt>
        <dd>Path of directory containing new directory</dd>
        <dt>prefix<span class="property-type">string</span></dt>
        <dd>Prefix of new directory name</dd>
        <dt>directory property</dt>
        <dd>Property where new directory path is recorded</dd>
    </dl>
    <h3>Inputs</h3>
    <dl class="message-properties">
    <p>Any</p>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
    <p>New directory path is stored in specified property.</p>
    </dl>

    <h3>Details</h3>
    <p>New directory name will be prefix with six random characters appended.</p>
    <p>Message is actioned and passed through if successful.</p>
    <p>Full pathname of new directory is added to the Directory property.</p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-func-exec/func-exec] --- -->
<!--
Copyright 2013, 2015 IBM Corp.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<script type="text/x-red" data-template-name="func-exec">
	<div class="form-row">
		<label for="node-input-name"><i class="fa fa-tag"></i> <span>Name</span></label>
		<input type="text" id="node-input-name" placeholder="Enter a name">
	</div>
	<div class="form-row" style="margin-bottom: 0px;">
		<label for="node-input-func"><i class="fa fa-wrench"></i> <span>Function</span></label>
		<input type="hidden" id="node-input-func" autofocus="autofocus">
		<input type="hidden" id="node-input-noerr">
	</div>
	<div class="form-row node-text-editor-row">
		<div style="height: 250px;" class="node-text-editor" id="node-input-func-editor" ></div>
	</div>
	<div class="form-row">
		<label for="node-input-outputs"><i class="fa fa-random"></i> <span>Outputs</span></label>
		<input id="node-input-outputs" style="width: 60px; height: 1.7em;" value="1">
	</div>
	<div class="form-tips"><span>See the Info tab for help writing functions.</span></div>
</script>



<script type="text/javascript">
	RED.nodes.registerType('func-exec', {
		color : "#FFCC66",
		category : 'function',
		defaults : {
			name : {
				value : ""
			},
			func : {
				value : "\nreturn msg;"
			},
			outputs : {
				value : 1
			},
			noerr : {
				value : 0,
				required : true,
				validate : function(v) {
					return ((!v) || (v === 0)) ? true : false;
				}
			}
		},
		inputs : 1,
		outputs : 1,
		align: "left",
		icon : "function.png",
		label : function() {
			return this.name || "func-exec";
		},
		oneditprepare : function() {
			var that = this;
			$("#node-input-outputs").spinner({
				min : 1
			});

			function functionDialogResize() {
				var rows = $("#dialog-form>div:not(.node-text-editor-row)");
				var height = $("#dialog-form").height();
				for (var i = 0; i < rows.size(); i++) {
					height -= $(rows[i]).outerHeight(true);
				}
				var editorRow = $("#dialog-form>div.node-text-editor-row");
				height -= (parseInt(editorRow.css("marginTop")) + parseInt(editorRow.css("marginBottom")));
				$(".node-text-editor").css("height", height + "px");
				that.editor.resize();
			}


			$("#dialog").on("dialogresize", functionDialogResize);
			$("#dialog").one("dialogopen", function(ev) {
				var size = $("#dialog").dialog('option', 'sizeCache-function');
				if (size) {
					$("#dialog").dialog('option', 'width', size.width);
					$("#dialog").dialog('option', 'height', size.height);
					functionDialogResize();
				}
			});
			$("#dialog").one("dialogclose", function(ev, ui) {
				var height = $("#dialog").dialog('option', 'height');
				$("#dialog").off("dialogresize", functionDialogResize);
			});

			this.editor = RED.editor.createEditor({
				id : 'node-input-func-editor',
				mode : 'ace/mode/javascript',
				value : $("#node-input-func").val()
			});

			RED.library.create({
				url : "functions", // where to get the data from
				type : "function", // the type of object the library is for
				editor : this.editor, // the field name the main text body goes to
				mode : "ace/mode/javascript",
				fields : ['name', 'outputs']
			});
			this.editor.focus();
		},
		oneditsave : function() {
			var annot = this.editor.getSession().getAnnotations();
			this.noerr = 0;
			$("#node-input-noerr").val(0);
			for (var k = 0; k < annot.length; k++) {
				if (annot[k].type === "error") {
					$("#node-input-noerr").val(annot.length);
					this.noerr = annot.length;
				}
			}
			$("#node-input-func").val(this.editor.getValue());
			delete this.editor;
		}
	}); 
</script>
<script type="text/x-red" data-help-name="func-exec">
	<p>A function block where you can write your own code to execute func-exec nodejs library.</p>
	<p><em>Example of using func-exec inside this function block:</em></p>
	<p><code>
		var exec = child_process.exec('cat *.js bad_file | wc -l', (error, stdout, stderr) => { <br/>
		  if (error) { <br/>
		    console.error(`exec error: ${error}`); <br/>
		    return; <br/>
		  } <br/>
		  console.log(`stdout: ${stdout}`); <br/>
		  console.log(`stderr: ${stderr}`); <br/>
		  callback(msg); <br/>
		}); <br/>
	</code></p>
	<p>Supported libraries: child_process, request, console, util.</p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-image-tools/jimp] --- -->


<script type="text/javascript">
(function() {
    var imageToolsNodeCommon = {};
    imageToolsNodeCommon.resizeModes = [
        "RESIZE_NEAREST_NEIGHBOR",
        "RESIZE_BILINEAR",
        "RESIZE_BICUBIC",
        "RESIZE_HERMITE",
        "RESIZE_BEZIER"
    ];
    imageToolsNodeCommon.jimpFonts = [
        "FONT_SANS_8_BLACK",
        "FONT_SANS_10_BLACK",
        "FONT_SANS_12_BLACK",
        "FONT_SANS_14_BLACK",
        "FONT_SANS_16_BLACK",
        "FONT_SANS_32_BLACK",
        "FONT_SANS_64_BLACK",
        "FONT_SANS_128_BLACK",
        "FONT_SANS_8_WHITE",
        "FONT_SANS_16_WHITE",
        "FONT_SANS_32_WHITE",
        "FONT_SANS_64_WHITE",
        "FONT_SANS_128_WHITE"
    ];

    imageToolsNodeCommon.blendModes = [
        "BLEND_SOURCE_OVER",
        "BLEND_DESTINATION_OVER",
        "BLEND_MULTIPLY",
        "BLEND_SCREEN",
        "BLEND_OVERLAY",
        "BLEND_DARKEN",
        "BLEND_LIGHTEN",
        "BLEND_HARDLIGHT",
        "BLEND_DIFFERENCE",
        "BLEND_EXCLUSION",
    ];
    

    imageToolsNodeCommon.alignMode = {
                        "Left" : 1,
                        "Centre": 2,
                        "Right" : 4,
                        "Top" : 8,
                        "Middle": 16,
                        "Bottom": 32,
                        "Top Left" : 1 + 8,
                        "Top Centre" : 2 + 8,
                        "Top Right" : 4 + 8,
                        "Middle Left" : 1 + 16,
                        "Middle Centre" : 2 + 16,                        
                        "Middle Right" : 4 + 16,                        
                        "Bottom Left" : 1 + 32,
                        "Bottom Centre" : 2 + 32,                        
                        "Bottom Right" : 4 + 32,                        
    };  
    
    imageToolsNodeCommon.alignModesX = [
        "HORIZONTAL_ALIGN_LEFT",
        "HORIZONTAL_ALIGN_CENTER",
        "HORIZONTAL_ALIGN_RIGHT"                 
    ];
    imageToolsNodeCommon.alignModesY = [
        "VERTICAL_ALIGN_TOP",
        "VERTICAL_ALIGN_MIDDLE",
        "VERTICAL_ALIGN_BOTTOM"
    ];
   
    //TODO: add sections to the options by giving each item a category
    //TODO: consider moving the 'functions' to the server side and use Http Admin endpoint to get a list of functions (for the dropdown)

    imageToolsNodeCommon.functions = {

        "none" : {"name" : "none","fn" : "none", "description" : "Just loads the image.","parameters" : [] },

        //FUTURE: possible way of simplifying calling any function via msg.payload
        //but how to handle varying amount of variables is problematic 
        //For now, user will have to use batch option and send function+parameters via parameter1
        // "custom" : {"name" : "custom","fn" : "", "description" : "Send function name from msg/flow/global. NOTE: Consider using batch mode and sending a batch object via payload (see side panel info for info)","parameters" : [
        // {"name" : "Function", "type" : "str", "required" : true, "hint" : "Name of the Jimp function to execute", "defaultType" : "str" },
        // {"name" : "Parameter1", "type" : "none|str|num|buf|json", "required" : false, "hint" : "Parameter 1", "defaultType" : "none" },
        // {"name" : "Parameter2", "type" : "none|str|num|buf|json", "required" : false, "hint" : "Parameter 2", "defaultType" : "none" },
        // {"name" : "Parameter3", "type" : "none|str|num|buf|json", "required" : false, "hint" : "Parameter 3", "defaultType" : "none" },
        // {"name" : "Parameter4", "type" : "none|str|num|buf|json", "required" : false, "hint" : "Parameter 4", "defaultType" : "none" },
        // {"name" : "Parameter5", "type" : "none|str|num|buf|json", "required" : false, "hint" : "Parameter 5", "defaultType" : "none" },
        // {"name" : "Parameter6", "type" : "none|str|num|buf|json", "required" : false, "hint" : "Parameter 6", "defaultType" : "none" },
        // {"name" : "Parameter7", "type" : "none|str|num|buf|json", "required" : false, "hint" : "Parameter 7", "defaultType" : "none" }] },


        "write" : {"name" : "write","fn" : "write", "description" : "Write to file. NOTE: You can specify an alternative file extension type to change the type. Currently support types are jpg, png, bmp.","parameters" : [
        {"name" : "filename", "type" : "str", "required" : true, "hint" : "Name of the file", "defaultType" : "str" }] },


        "quality" : {"name" : "quality","fn" : "quality", "description" : "Set the quality of the image. Useful for reducing size of image before calling the write function.","parameters" : [
        {"name" : "quality", "type" : "num", "required" : true, "hint" : "Quality value 1 ~ 100" }] },


        "contain" : {"name" : "contain","fn" : "contain", "description" : "scale the image to the given width and height, some parts of the image may be letter boxed","parameters" : [
        {"name" : "w", "type" : "num", "required" : true, "hint" : "the width to resize the image to" },
        {"name" : "h", "type" : "num", "required" : true, "hint" : "the height to resize the image to" },
        {"name" : "alignBits", "type" : "alignMode", "required" : false, "hint" : "A bitmask for horizontal and vertical alignment. Jimp.HORIZONTAL_ALIGN_LEFT | Jimp.HORIZONTAL_ALIGN_CENTER | Jimp.HORIZONTAL_ALIGN_RIGHT | Jimp.VERTICAL_ALIGN_TOP | Jimp.VERTICAL_ALIGN_MIDDLE | Jimp.VERTICAL_ALIGN_BOTTOM;" },
        {"name" : "mode", "type" : "resizeMode", "required" : false, "hint" : "A scaling method (e.g. Jimp.RESIZE_BEZIER)" }] },


        "cover" : {"name" : "cover","fn" : "cover", "description" : "scale the image to the given width and height, some parts of the image may be clipped","parameters" : [
        {"name" : "w", "type" : "num", "required" : true, "hint" : "the width to resize the image to" },
        {"name" : "h", "type" : "num", "required" : true, "hint" : "the height to resize the image to" },
        {"name" : "alignBits", "type" : "alignMode|str", "required" : false, "hint" : "A bitmask for horizontal and vertical alignment. Jimp.HORIZONTAL_ALIGN_LEFT | Jimp.HORIZONTAL_ALIGN_CENTER | Jimp.HORIZONTAL_ALIGN_RIGHT | Jimp.VERTICAL_ALIGN_TOP | Jimp.VERTICAL_ALIGN_MIDDLE | Jimp.VERTICAL_ALIGN_BOTTOM;" },
        {"name" : "mode", "type" : "resizeMode", "required" : false, "hint" : "a scaling method (e.g. Jimp.RESIZE_BEZIER)" }] },


        "resize" : {"name" : "resize","fn" : "resize", "description" : "resize the image. One of the w or h parameters can be set to automatic (\"Jimp.AUTO\" or -1).","parameters" : [
        {"name" : "w", "type" : "num|auto", "required" : true, "hint" : "the width to resize the image to (or \"Jimp.AUTO\" or -1)" },
        {"name" : "h", "type" : "num|auto", "required" : true, "hint" : "the height to resize the image to (or \"Jimp.AUTO\" or -1)" },
        {"name" : "mode", "type" : "resizeMode", "required" : false, "hint" : "a scaling method (e.g. Jimp.RESIZE_BEZIER)" }] },


        "scale" : {"name" : "scale","fn" : "scale", "description" : "scale the image by the factor f","parameters" : [
        {"name" : "f", "type" : "num", "required" : true, "hint" : "f the factor to scale the image by" },
        {"name" : "mode", "type" : "resizeMode", "required" : false, "hint" : "a scaling method (e.g. Jimp.RESIZE_BEZIER)" }] },


        "scaleToFit" : {"name" : "scaleToFit","fn" : "scaleToFit", "description" : "scale the image to the largest size that fits inside the given width and height. One of the w or h parameters can be set to automatic (\"Jimp.AUTO\" or -1).","parameters" : [
        {"name" : "w", "type" : "num|auto", "required" : true, "hint" : "the width to resize the image to (or \"Jimp.AUTO\" or -1)" },
        {"name" : "h", "type" : "num|auto", "required" : true, "hint" : "the height to resize the image to (or \"Jimp.AUTO\" or -1)" },
        {"name" : "mode", "type" : "resizeMode", "required" : false, "hint" : "a scaling method (e.g. Jimp.RESIZE_BEZIER)" }] },


        "autocrop1" : {"name" : "autocrop","fn" : "autocrop", "description" : "automatically crop same-color borders from image (if any), frames must be a Boolean","parameters" : [
        {"name" : "tolerance", "type" : "num", "required" : false, "hint" : "a percent value of tolerance for pixels color difference (default: 0.0002%)" },
        {"name" : "frames", "type" : "bool", "required" : false, "hint" : "flag to crop only real frames: all 4 sides of the image must have some border (default: true)" }] },


        "autocrop2" : {"name" : "autocrop","fn" : "autocrop", "description" : "automatically crop same-color borders from image (if any), options may contain tolerance, cropOnlyFrames, cropSymmetric, leaveBorder","parameters" : [
        {"name" : "options", "type" : "json", "required" : false, "hint" : "options may contain tolerance, cropOnlyFrames, cropSymmetric, leaveBorder" }] },



        "crop" : {"name" : "crop","fn" : "crop", "description" : "crop to the given region","parameters" : [
        {"name" : "x", "type" : "num", "required" : true, "hint" : "the x coordinate to crop form" },
        {"name" : "y", "type" : "num", "required" : true, "hint" : "the y coordinate to crop form" },
        {"name" : "w", "type" : "num", "required" : true, "hint" : "the width of the crop region" },
        {"name" : "h", "type" : "num", "required" : true, "hint" : "the height of the crop region" }] },


        "blit" : {"name" : "blit","fn" : "blit", "description" : "blit the image with another Jimp image at x, y, optionally cropped","parameters" : [
        {"name" : "src", "type" : "", "required" : true, "hint" : "the source image (a Jimp instance)", "defaultType" : "msg", "defaultValue" : "payload" },
        {"name" : "x", "type" : "num", "required" : true, "hint" : "the x position to blit the image" },
        {"name" : "y", "type" : "num", "required" : true, "hint" : "the y position to blit the image" },
        {"name" : "srcx", "type" : "num", "required" : false, "hint" : "the x position from which to crop the source image" },
        {"name" : "srcy", "type" : "num", "required" : false, "hint" : "the y position from which to crop the source image" },
        {"name" : "srcw", "type" : "num", "required" : false, "hint" : "the width to which to crop the source image" },
        {"name" : "srch", "type" : "num", "required" : false, "hint" : "the height to which to crop the source image" }] },


        "composite" : {"name" : "composite","fn" : "composite", "description" : "composites another Jimp image over this image at x, y","parameters" : [
        {"name" : "src", "type" : "", "required" : true, "hint" : "the source image (a Jimp instance)", "defaultType" : "msg", "defaultValue" : "payload" },
        {"name" : "x", "type" : "num", "required" : true, "hint" : "the x position to blit the image" },
        {"name" : "y", "type" : "num", "required" : true, "hint" : "the y position to blit the image" },
        {"name" : "mode", "group" : "options", "type" : "blend", "required" : true, "hint" : "what blend mode to use" },
        {"name" : "opacitySource", "group" : "options", "type" : "num", "required" : true, "hint" : "opacity of src image 0.0 to 1.0" },
        {"name" : "opacityDest", "group" : "options", "type" : "num", "required" : true, "hint" : "opacity of src image 0.0 to 1.0" }] },



        "mask" : {"name" : "mask","fn" : "mask", "description" : "masks the image with another Jimp image at x, y using average pixel value","parameters" : [
        {"name" : "src", "type" : "", "required" : true, "hint" : "the source image (a Jimp instance)", "defaultType" : "msg", "defaultValue" : "payload" },
        {"name" : "x", "type" : "num", "required" : true, "hint" : "the horizontal position to blit the image" },
        {"name" : "y", "type" : "num", "required" : true, "hint" : "the vertical position to blit the image" }] },



        "flip" : {"name" : "flip","fn" : "flip", "description" : "flip the image horizontally or vertically","parameters" : [
        {"name" : "horz", "type" : "bool", "required" : true, "hint" : "if true the image will be flipped horizontally" },
        {"name" : "vert", "type" : "bool", "required" : true, "hint" : "if true the image will be flipped vertically" }] },


        "mirror" : {"name" : "mirror","fn" : "mirror", "description" : "an alias for flip","parameters" : [
        {"name" : "horz", "type" : "bool", "required" : true, "hint" : "if true the image will be flipped horizontally" },
        {"name" : "vert", "type" : "bool", "required" : true, "hint" : "if true the image will be flipped vertically" }] },


        "rotate" : {"name" : "rotate","fn" : "rotate", "description" : "rotate the image clockwise by a number of degrees. Optionally, a resize mode can be passed. If `false` is passed as the second parameter, the image width and height will not be resized.","parameters" : [
        {"name" : "deg", "type" : "num", "required" : true, "hint" : "the number of degrees to rotate the image by" },
        {"name" : "mode", "type" : "resizeMode|bool", "required" : false, "hint" : "resize mode or a boolean, if false then the width and height of the image will not be changed" }] },



        "brightness" : {"name" : "brightness","fn" : "brightness", "description" : "adjust the brightness", "parameters" : [
        {"name" : "val", "type" : "num", "required" : true, "hint" : "adjust the brightness by a value -1.0 to 1.0" }] },


        "contrast" : {"name" : "contrast","fn" : "contrast", "description" : "adjust the contrast", "parameters" : [
        {"name" : "val", "type" : "num", "required" : true, "hint" : "adjust the contrast by a value -1.0 to 1.0" }] },


        "dither565" : {"name" : "dither565","fn" : "dither565", "description" : "ordered dithering of the image and reduce color space to 16-bits (RGB565)","parameters" : [] },


        "greyscale" : {"name" : "greyscale","fn" : "greyscale", "description" : "remove colour from the image","parameters" : [] },


        "invert" : {"name" : "invert","fn" : "invert", "description" : "invert the image colours","parameters" : [] },


        "normalize" : {"name" : "normalize","fn" : "normalize", "description" : "normalize the channels in an image","parameters" : [] },

        "fade" : {"name" : "fade","fn" : "fade", "description" : "an alternative to opacity, fades the image by a factor 0 - 1. 0 will haven no effect.","parameters" : [
        {"name" : "f", "type" : "num", "required" : true, "hint" : "A number from 0 to 1. 0 will haven no effect. 1 will turn the image completely transparent." }] },


        "opacity" : {"name" : "opacity","fn" : "opacity", "description" : "multiply the alpha channel by each pixel by the factor f, 0 - 1","parameters" : [
        {"name" : "f", "type" : "num", "required" : true, "hint" : "A number, the factor by which to multiply the opacity of each pixel" }] },

        "opaque" : {"name" : "opaque","fn" : "opaque", "description" : "set the alpha channel on every pixel to fully opaque","parameters" : [] },

        "gaussian" : {"name" : "gaussian","fn" : "gaussian", "description" : "Gaussian blur the image by r pixels (VERY slow)","parameters" : [
        {"name" : "r", "type" : "num", "required" : true, "hint" : "the pixel radius of the blur" }] },


        "blur" : {"name" : "blur","fn" : "blur", "description" : "fast blur the image by r pixels","parameters" : [
        {"name" : "r", "type" : "num", "required" : true, "hint" : "the pixel radius of the blur" }] },

        "convolute" : {"name" : "convolute","fn" : "convolute", "description" : "applies a convolution kernel matrix to the image or a region","parameters" : [
        {"name" : "kernel", "type" : "json", "required" : true, "hint" : "a kernel matrix.  e.g. emboss [[-2, -1, 0], [-1, 1, 1], [0, 1, 2]]", "defaultValue" : "[[-2, -1, 0], [-1, 1, 1], [0, 1, 2]]" }] },

        "convolute_antialise" : {"name" : "antialise*","fn" : "convolute_antialise", "description" : "antialise image (*uses convolute([[1, 2, 1], [2, 4, 2], [1, 2, 1]])","parameters" : [] },
        "convolute_edgedetect" : {"name" : "edgedetect*","fn" : "convolute_edgedetect", "description" : "edge detect image (*uses convolute([[0, 1, 0], [1, -4, 1], [0, 1, 0]])","parameters" : [] },
        "convolute_edgeenhance" : {"name" : "edgeenhance*","fn" : "convolute_edgeenhance", "description" : "edge enhance image (*uses convolute([[0, 0, 0], [-1, 1, 0], [0, 0, 0]])","parameters" : [] },
        "convolute_emboss" : {"name" : "emboss*","fn" : "convolute_emboss", "description" : "emboss image (*uses convolute([[-2, -1, 0], [-1, 1, 1], [0, 1, 2]])","parameters" : [] },
        "convolute_sharpen" : {"name" : "sharpen*","fn" : "convolute_sharpen", "description" : "sharpen image (*uses convolute([[0, -1, 0], [-1, 5, -1], [0, -1, 0]])","parameters" : [] },
        "convolute_strongsharpen" : {"name" : "strong sharpen*","fn" : "convolute_strongsharpen","description" : "sharpen image (*uses convolute([[-1, -1, -1], [-1, 9, -1], [-1, -1, -1]])","parameters" : [] },

        
        "posterize" : {"name" : "posterize","fn" : "posterize", "description" : "apply a posterization effect with n level","parameters" : [
        {"name" : "n", "type" : "num", "required" : true, "hint" : "the amount to adjust the contrast, minimum threshold is two" }] },


        "sepia" : {"name" : "sepia","fn" : "sepia", "description" : "apply a sepia wash to the image","parameters" : [] },


        "pixelate" : {"name" : "pixelate","fn" : "pixelate", "description" : "apply a pixelation effect to the image or a region","parameters" : [
        {"name" : "size", "type" : "num", "required" : true, "hint" : "the size of the pixels" },
        {"name" : "x", "type" : "num", "required" : false, "hint" : "the x position of the region to pixelate" },
        {"name" : "y", "type" : "num", "required" : false, "hint" : "the y position of the region to pixelate" },
        {"name" : "w", "type" : "num", "required" : false, "hint" : "the width of the region to pixelate" },
        {"name" : "h", "type" : "num", "required" : false, "hint" : "the height of the region to pixelate" }] },


        "displace" : {"name" : "displace","fn" : "displace", "description" : "displaces the image pixels based on the provided displacement map. Useful for making stereoscopic 3D images.","parameters" : [
        {"name" : "map", "type" : "", "required" : true, "hint" : "the source image (a Jimp instance)", "defaultValue" : "payload" },
        {"name" : "offset", "type" : "num", "required" : false, "hint" : "the maximum displacement value" }] },


        "background" : {"name" : "background","fn" : "background", "description" : "set the default new pixel colour (e.g. 0xFFFFFFFF or 0x00000000) useful for by some operations e.g. contain or rotate","parameters" : [
        {"name" : "hex", "type" : "num", "required" : true, "hint" : "hexadecimal rgba value (must be entered as a decimal e.g. 0xFFFFFFFF = 4294967295)", "defaultValue" : "4294967295" }] },

        "threshold" : {"name" : "threshold","fn" : "threshold", "description" : "apply one or more functions","parameters" : [
        {"name" : "max", "group" : "options", "type" : "num", "required" : true, "hint" : "max value of byte 0 ~ 255" },
        {"name" : "replace", "group" : "options", "type" : "num", "required" : false, "hint" : "replace with byte 0 ~ 255. Default is 255" },
        {"name" : "autoGreyscale", "group" : "options", "type" : "bool", "required" : false, "hint" : "default is true" }] },

        "batch" : {"name" : "batch","fn" : "batch", "description" : "apply one or more functions","parameters" : [
        {"name" : "options", "type" : "json", "required" : true, "hint" : "an object or an array of objects containing {\"name\" : \"function_name\", \"parameters\" : [x,y,z]}.  Refer to info on side panel}" }] },

        "clone" : {"name" : "clone","fn" : "clone", "description" : "returns a clone of the image","parameters" : [] },
        
//not ready        "histogram" : {"name" : "histogram","fn" : "histogram", "description" : "Generate a histogram of the image. The histogram data will be returned in msg.jobs[x].result, msg.jobs[x].g[], msg.jobs[x].b[].","parameters" : [] },

        "distance" : {"name" : "distance","fn" : "distance", "description" : "calculate the hamming distance between two Jimp images based on their perceptual hash. msg.jobs[x].result will contain a number 0-1, where 0 means the two images are perceived to be identical","parameters" : [
        {"name" : "image2", "type" : "", "required" : true, "hint" : "image to compare to" }] },

        "diff" : {"name" : "diff","fn" : "diff", "description" : "Using a mix of hamming distance and pixel diffing to compare images. Returns an image showing differences and msg.jobs[x].result will contain the proportion of different pixels (0-1), where 0 means the images are pixel identical","parameters" : [
        {"name" : "image2", "type" : "", "required" : true, "hint" : "image to compare to" },
        {"name" : "threshold", "type" : "num", "required" : false, "hint" : "threshold ranges 0-1 (default: 0.1)" }] },

        "print" : {"name" : "print","fn" : "print", "description" : "Print text to the image","parameters" : [
        {"name" : "font|str", "type" : "jimpFont", "required" : true, "hint" : "font to print. NOTE: This can be one of the presets or the path to a fnt file" },
        {"name" : "x", "type" : "num", "required" : true, "hint" : "x coordinate to print text" },
        {"name" : "y", "type" : "num", "required" : true, "hint" : "y coordinate to print text" },
        {"name" : "text", "type" : "str", "required" : true, "hint" : "text to print" },
        {"name" : "maxWidth", "type" : "num", "required" : false, "hint" : "wrap text at maxWidth" },
        {"name" : "maxHeight", "type" : "num", "required" : false, "hint" : "max height" }] },
        
        "print2" : {"name" : "print aligned","fn" : "print", "description" : "Print text to the image","parameters" : [
        {"name" : "font|str", "type" : "jimpFont", "required" : true, "hint" : "font to print. NOTE: This can be one of the presets or the path to a fnt file" },
        {"name" : "x", "type" : "num", "required" : true, "hint" : "x coordinate to print text" },
        {"name" : "y", "type" : "num", "required" : true, "hint" : "y coordinate to print text" },
        {"name" : "text", "group" : "options", "type" : "str", "required" : true, "hint" : "text to print" },
        {"name" : "alignmentX", "group" : "options", "type" : "AlignX", "required" : false, "hint" : "X Alignment" },
        {"name" : "alignmentY", "group" : "options", "type" : "AlignY", "required" : false, "hint" : "Y Alignment" },
        {"name" : "maxWidth", "type" : "auto|num", "required" : false, "hint" : "wrap text at maxWidth" },
        {"name" : "maxHeight", "type" : "auto|num", "required" : false, "hint" : "max height" }] }

    };
    
    imageToolsNodeCommon.requiredParameterValidator = function(node,paramNo,v){
        var fn = imageToolsNodeCommon.functions[node.jimpFunction];
        var parameterCount = fn && fn.parameters ? fn.parameters.length : 0;
        if(paramNo <= parameterCount){
            var p = fn.parameters[paramNo-1];
            var varName = "parameter" + paramNo;
            var typeVal = node[varName + 'Type'];
            if(typeVal == "Jimp.AUTO" || typeVal == "auto" || typeVal == "none"){
                return true;
            }
            if(p && p.required){
                return !!v;//not empty
            }
        }
        return true;
    };


    RED.nodes.registerType('jimp-image', {
        category: 'image tools',
        paletteLabel: "image",
        icon: "image.png",
        color: '#FFAAAA',//'#f24b69',
        defaults: {
            name: { value: "" },
            data: { value: "payload", validate: RED.validators.typedInput("dataType") },
            dataType: { value: "msg" },
            ret: { value: "img"},
            parameter1: { value: "", validate: function(v){
                return imageToolsNodeCommon.requiredParameterValidator(this,1,v) ;
            }},
            parameter1Type: { value: "msg" },
            parameter2: { value: "", validate: function(v){
                return imageToolsNodeCommon.requiredParameterValidator(this,2,v) ;
            }},
            parameter2Type: { value: "msg" },
            parameter3: { value: "", validate: function(v){
                return imageToolsNodeCommon.requiredParameterValidator(this,3,v) ;
            }},
            parameter3Type: { value: "msg" },
            parameter4: { value: "", validate: function(v){
                return imageToolsNodeCommon.requiredParameterValidator(this,4,v) ;
            }},
            parameter4Type: { value: "msg" },
            parameter5: { value: "", validate: function(v){
                return imageToolsNodeCommon.requiredParameterValidator(this,5,v) ;
            }},
            parameter5Type: { value: "msg" },
            parameter6: { value: "", validate: function(v){
                return imageToolsNodeCommon.requiredParameterValidator(this,6,v) ;
            }},
            parameter6Type: { value: "msg" },
            parameter7: { value: "", validate: function(v){
                return imageToolsNodeCommon.requiredParameterValidator(this,7,v) ;
            }},
            parameter7Type: { value: "msg" },
            parameter8: { value: "", validate: function(v){
                return imageToolsNodeCommon.requiredParameterValidator(this,8,v) ;
            }},
            parameter8Type: { value: "msg" },
            sendProperty: { value: "payload" },
            sendPropertyType: { value: "msg" },
            parameterCount: {value: 0},
            jimpFunction: {value: "none"},
            selectedJimpFunction: {value: {}}                     
        },
        inputs: 1,
        outputs: 1,
        label: function () {
            var fname = this.selectedJimpFunction && this.selectedJimpFunction.name ? this.selectedJimpFunction.name : ""; 
            if(fname == "none") fname = "";
            return this.name || fname || "image";
        },
        oneditsave: function() {
            const node = this;
            const $dropdown = $("#node-input-jimpFunction");
            const choice = $dropdown.val();
            const fn = imageToolsNodeCommon.functions[choice];
            node.jimpFunction = choice;
            node.selectedJimpFunction = fn;
            node.parameterCount = fn && fn.parameters ? fn.parameters.length : 0;
        },
        oneditprepare: function () {
            const node = this;
            const isObject = function (val) {
                if (val === null) { return false;}
                return (typeof val === 'object');
            };
            const isNumeric = function(n) {
                return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);
            };
            if(!imageToolsNodeCommon.alignModes){
                imageToolsNodeCommon.alignModes =  [];
                for (var key in imageToolsNodeCommon.alignMode) {
                    if (imageToolsNodeCommon.alignMode.hasOwnProperty(key)) {
                        imageToolsNodeCommon.alignModes.push(key);
                    }
                }
            }
            function isTypeInArray(arr, findType){
                try {
                    var typeToFind = findType;
                    if(isObject(findType))
                        typeToFind = findType.value; 
                    for (var index = 0; index < arr.length; index++) {
                        var element = arr[index];
                        var thisType = isObject(element) ? element.value : element;
                        if(thisType === typeToFind) return true;
                    }
                } catch (error) {}   
                return false;             
            }
            function generateTypedInputTypes(allowableTypes, isOptional) {
                allowableTypes = allowableTypes || "msg|flow|global";
                var parameterTypes = allowableTypes.split("|");

                //if optional but 'none' is not yet an option - added it as first option in typedParameter
                if(typeof isOptional == "boolean" && isOptional == false){
                    if( !isTypeInArray(parameterTypes,"none") ){
                        parameterTypes.unshift("none");
                    }
                } 
                
                //convert any custom types to a typedInput object
                const types = parameterTypes.map(function(t){
                    if(t){
                        switch (t) {
                            case "resizeMode":
                                return {
                                    value:"resizeMode",
                                    label:"Resize.",
                                    options: imageToolsNodeCommon.resizeModes 
                                };
                            case "jimpFont":
                                return {
                                    value:"jimpFont",
                                    label:"Font.",
                                    options: imageToolsNodeCommon.jimpFonts 
                                };
                            case "alignMode": 
                                return {
                                    value:"alignMode",
                                    label:"Align.",
                                    options: imageToolsNodeCommon.alignModes 
                                };
                            case "AlignX": 
                            case "alignModeX": 
                                return {
                                    value:"AlignX",
                                    label:"AlignX.",
                                    options: imageToolsNodeCommon.alignModesX 
                                };
                            case "AlignY": 
                            case "alignModeY": 
                                return {
                                    value:"AlignY",
                                    label:"AlignY.",
                                    options: imageToolsNodeCommon.alignModesY 
                                };
                            case "blend": 
                                return {
                                    value:"Blend",
                                    label:"Blend.",
                                    options: imageToolsNodeCommon.blendModes
                                };
                            case "auto": 
                            case "Jimp.AUTO": 
                                return {
                                    value:"auto",
                                    label:"Auto",
                                    hasValue: false 
                                };
                            case "none": 
                                return {
                                    value:"none",
                                    label:"None",
                                    hasValue: false 
                                };
                            default:
                                return t;
                        }
                    }
                });

                return types;
            }            
            function setupTypedInput(varName, allowableTypes, def, defVal, isOptional, width) {
                var varSel = "#node-input-" + varName;
                var typeSel = varSel + "Type";
                var currentValue = node[varName];
                var currentType = node[varName + "Type"];  
                var parameterTypes = generateTypedInputTypes(allowableTypes, isOptional);
                var defShouldNoValue = false;
                
                //if def type is not in the list of parameter type, change def to 1st item
                if(!isTypeInArray(parameterTypes, def)) {
                    var _firstType = parameterTypes[0];
                    if(isObject(_firstType)) {
                        _firstType = _firstType.value;
                        defShouldNoValue = _firstType.hasValue == false;
                    }
                    def = _firstType;
                }

                //if currently set type is not in the list of parameter types, currentType def to 1st item
                if(!isTypeInArray(parameterTypes, currentType)) {
                    currentType = def;
                }

                //catch all
                if(!currentType){
                    currentType = def;
                }

                
                var $ti = $(varSel);
                var alreadyBuilt = $ti.data("built") == true;
                if(alreadyBuilt) {
                    //already built? just update types :)
                    $ti.typedInput("types", parameterTypes); 
                } else {
                   var opts = {
                    default: def,
                    typeField: $(typeSel),
                    types: parameterTypes
                    };
                    if(isOptional){
                        opts.default = def || "none";
                        opts.validate = function(v) { 
                            //todo - handle this when spec changes
                            return !!v;
                        };
                    }
                    $ti.typedInput(opts); 
                }
                $ti.data("built", true);
                
                if(!currentValue && currentType != "Jimp.AUTO" && currentValue && currentType != "auto" && currentType != "none"){
                    $ti.typedInput("type", def);
                    if(defShouldNoValue) currentValue = "";
                } else if(currentType == "num" && !isNumeric(currentValue)) {
                    $ti.typedInput("type", def);
                    if(defShouldNoValue) currentValue = "";
                } else {
                    $ti.typedInput("type", currentType);
                }

                if(currentType == "bool"){
                    $ti.typedInput("value", (currentValue === true ||  currentValue === "true") ? "true" : "false" );
                } else if(currentValue) {
                    if(currentType == "num" && !isNumeric(currentValue)) {
                        $ti.typedInput("type", def);
                        $ti.typedInput("value", defVal || "");
                    } else {
                        $ti.typedInput("value", currentValue);
                    }
                } else {
                    $ti.typedInput("value", defVal || "");
                }

                if(width) $ti.typedInput("width", width);
            }
            
            //hack - prevent node-red calculating UI panel too large due to long text in the tip
            node.sizeHack = false;
            $(".image-tools-form-tip").css("max-width","450px");
            $(".image-tools-form-tip").hide();//will get show / hid as required when function type is set
            
            setupTypedInput('data', 'msg|flow|global|bin|str|json', 'msg', 'payload', false /*"68%"*/);
            $('#node-input-sendProperty').typedInput({types:['msg']});
            $('#node-input-sendProperty').typedInput("value", node.sendProperty || "payload");
            
            const $dropdown = $("#node-input-jimpFunction");
            $dropdown.off();
            $dropdown.empty().append('<option value=""></option>');
            for (let _key in imageToolsNodeCommon.functions) {
                if (imageToolsNodeCommon.functions.hasOwnProperty(_key)) {
                    const element = imageToolsNodeCommon.functions[_key];
                    if(node.jimpFunction == _key){
                        $dropdown.append($("<option selected />").val(_key).text(element.name));
                    } else {
                        $dropdown.append($("<option />").val(_key).text(element.name));
                    }
                }
            }

            const $convertToBatchButton = $("#convertToBatchButton");

            $convertToBatchButton.click(function() {
                try {
                    const choice = $dropdown.val(); 
                    let fn = imageToolsNodeCommon.functions[choice];  
                    const paramCount = fn && fn.parameters ? fn.parameters.length : 0;
                    const batchSpec = {
                        name: fn.fn,
                        parameters:[]
                    };
                    const inputParameters = [];
                    for (var i = 0; i < paramCount; i++) {
                        var param = fn.parameters[i];
                        var $ti = $('#node-input-parameter' + (i + 1));
                        var pv = $ti.typedInput('value');
                        var pt = $ti.typedInput('type');
                        if(pt === 'msg' || pt === 'global' || pt === 'flow' || pt == "none"){
                            //batchSpec.push("{{" + pt + "." + pv + "}}"); //future - permit template/mustache in batch mode
                            inputParameters.push(null);
                        } else if(pt === 'num'){
                            inputParameters.push( parseFloat(pv) );
                        } else if(pt === 'Resize' || pt === 'Jimp' || pt === 'resizeMode'){
                            inputParameters.push( "Jimp." + pv );
                        } else if(pt === 'Align' || pt === 'alignMode'){
                            inputParameters.push( imageToolsNodeCommon.alignMode[pv] || 0 );
                        } else if(pt === 'AlignX' || pt === 'alignModeX'){
                            inputParameters.push( "Jimp." + pv );
                        } else if(pt === 'AlignY' || pt === 'alignModeY'){
                            inputParameters.push( "Jimp." + pv );
                        } else if(pt === 'Blend'){
                            inputParameters.push( "Jimp." + pv );
                        } else if(pt === 'Font'){
                            inputParameters.push( "Jimp." + pv );
                        } else if(pt === 'bool'){
                            inputParameters.push( (pv === true || pv === "true") );
                        } else if(pt === 'Jimp.AUTO' || pt === 'auto'){
                            inputParameters.push( -1 );
                        } else {
                            inputParameters.push(pv);
                        }
                    }

                    //const isNotUndefined = v => typeof v !== 'undefined';// && v !== null;
                    var isNotUndefined = function(v){
                        return (v !== 'undefined');
                    };
                    var finalParams = [];
                    var fplookup = {};
                    var fParam = 0;
                    for (var index = 0; index < fn.parameters.length; index++) {                       
                        var funcParam = fn.parameters[index];
                        if(funcParam.group){
                            var ifpl = fplookup[funcParam.group];
                            if(typeof ifpl != "number"){
                                ifpl = fParam;
                                finalParams[ifpl] = {};
                                fplookup[funcParam.group] = ifpl;
                                fParam++;
                            }
                            var _v1 = inputParameters[index];
                            if(isNotUndefined(_v1)){
                                finalParams[i][funcParam.name] = _v1;
                            }
                        } else {
                            var _v2 = inputParameters[index];
                            if(isNotUndefined(_v2)){
                                finalParams[fParam++] = _v2;
                            }
                        }
                    }  
                    batchSpec.parameters = finalParams;
                    $dropdown.val("batch").change();
                    var p1NewValue = JSON.stringify(batchSpec);
                    $('#node-input-parameter1').typedInput('type', 'json');
                    $('#node-input-parameter1').typedInput('value', p1NewValue);
                    
                } catch (error) {
                    RED.notify("An error occurred while trying to convert this function to a batch function","error");
                }
                RED.tray.resize(); 
            });

            $dropdown.change(function() {
                var choice = $dropdown.val(); 
                var fn = imageToolsNodeCommon.functions[choice];              
                $convertToBatchButton.prop( "disabled", true );
                $('.jimp-parameter-group').hide();//hide parameters
                $("#tip-jimpFunction").hide();//hide the tip
                $(".paramtip").hide();//hide parameter tips
                if(!fn){
                    return;
                }
                if(fn.fn && fn.fn !== "batch" && fn.fn !== "none"){
                    $convertToBatchButton.prop( "disabled", false );
                }

                //set function tip
                if(fn.description){
                    $("#tip-jimpFunction").text(fn.description);
                    $("#tip-jimpFunction").show();
                }         

                //loop through parameters and setup the typed inputs
                var paramNo = 1;

                $.each(fn.parameters, function() {
                    const pname = "parameter" + paramNo;
                    const lname = "parameter-label" + paramNo;
                    const paramTipName = "tip-parameter" + paramNo;
                    
                    $("#" + lname).text(" " + this.name);
                    $("#" + pname).show();

                    var hint = (this.required ? "(Required)" : "(Optional)");
                    if(this.hint){
                        hint += " " + this.hint;
                    }
                    $("#" + paramTipName).text(hint);
                    $("#" + paramTipName).show();
                   
                    var alwaysPresentParameterTypedInputs = "msg|flow|global";
                    var parameterTypesStr = this.type ? this.type + "|" + alwaysPresentParameterTypedInputs : alwaysPresentParameterTypedInputs;
                    setupTypedInput(pname, parameterTypesStr, this.defaultType, this.defaultValue, this.required);
                    paramNo++;
                });
                RED.tray.resize();
            });
            //sfp();
            $('.jimp-parameter-group').hide();//hide parameters
            $("#tip-jimpFunction").hide();//hide the tip       
            RED.tray.resize();
            node.sizeHack = true;
        },
        oneditresize: function(size) {
            if (!this._sizeHackTimer) {
                this._sizeHackTimer = setTimeout(function () {
                    $(".image-tools-form-tip").css("max-width","unset");//hack - prevent node-red calculating UI panel too large due to long text in the tip
                    this._sizeHackTimer = null;
                }, 250);
            }
        }
    });
})();     
</script>

<script type="text/html" data-template-name="jimp-image">
    <link rel="stylesheet" href="image-tools/static/css/common.css" type="text/css"/>
    <div class="form-row image-tools-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" style="width: calc(100% - 150px)" placeholder="Name">
    </div>

    <div class="form-row image-tools-row">
            <label for="node-input-data"><i class="fa fa-file-image-o"></i><span data-i18n="jimp.label.data">
                image</span></label>
            <input type="hidden" id="node-input-dataType">
            <input type="text" id="node-input-data" style="width: calc(100% - 150px)" placeholder="">
            <br>
            <label>&nbsp;</label>
            <div class="image-tools-form-tip" style="width: calc(100% - 150px); max-width: 450px">A string containing a file path, URL or base64 image can be used as an image source. NOTE: Passing in an image object is faster as there is no conversion required before processing.</div>
        </div>
    </div>
    
    <div class="form-row image-tools-row" style="vertical-align: top;">
        <label style="padding-top: 8px" for="node-input-jimpFunction"><i class="fa fa-wrench"></i> <span data-i18n="jimp.label.jimpFunction">
            Function</span></label>
        <div class="image-tools-ui-container" style="width: calc(100% - 150px)">
            <select type="text" id="node-input-jimpFunction" style="width: calc(100% - 30px);display:inline-block"></select>
            <button id="convertToBatchButton" class="editor-button editor-button-small" style="width:28px;display:inline-block;float:right" title="convert to batch function" style="width:100%;"><i class="fa fa-exchange"></i></button>
        </div>
        <br>
        <label>&nbsp;</label>
        <div id="tip-jimpFunction" class="image-tools-form-tip" style="width: calc(100% - 150px); max-width: 450px" hidden></div>
    </div>    

    <div class="form-row image-tools-row">
        <label style="padding-top: 8px" for="node-input-ret"><i class="fa fa-sign-out"></i> <span data-i18n="jimp.label.send">
            Output</span></label>
        <select type="text" id="node-input-ret" style="width: calc(100% - 150px)">
            <option value="img" data-i18n="jimp.jimp">image</option>
            <option value="buf" data-i18n="jimp.buffer">buffer</option>
            <option value="b64" data-i18n="jimp.base64">base64</option>
        </select>
        <br>
        <label>&nbsp;</label>
        <div class="image-tools-form-tip" style="width: calc(100% - 150px);  max-width: 450px">Sending an image is much faster as there is no additional conversion required.</div>
    </div>
    
    <div class="form-row image-tools-row">
        <label for="node-input-sendProperty"><i class="fa fa-sign-out"></i> 
            <span data-i18n="jimp.label.send_property">Output Property</span>
        </label>
        <input type="text" id="node-input-sendProperty" style="width: calc(100% - 150px)" placeholder="payload">
        <br>
        <label>&nbsp;</label>
        <div class="image-tools-form-tip" style="width: calc(100% - 150px); max-width: 450px">The msg property in which to send the resulting image.</div>
    </div>    
    
    <div class="form-row image-tools-row jimp-parameter-group" id="parameter1" style="vertical-align: top;">
        <label style="padding-top: 8px" for="node-input-parameter1"><i class="fa fa-code"></i><span id="parameter-label1"
            data-i18n="jimp.label.parameter1"> parameter1</span></label>
        <input type="hidden" id="node-input-parameter1Type">
        <input type="text" id="node-input-parameter1" style="width: calc(100% - 150px)" placeholder="">
        <br>
        <label>&nbsp;</label>
        <div id="tip-parameter1" class="image-tools-form-tip paramtip"  style="width: calc(100% - 150px); max-width: 450px" hidden></div>
    </div>
    <div class="form-row image-tools-row jimp-parameter-group" id="parameter2" style="vertical-align: top;">
        <label style="padding-top: 8px" for="node-input-parameter2"><i class="fa fa-code"></i><span id="parameter-label2"
            data-i18n="jimp.label.parameter2"> parameter2</span></label>
        <input type="hidden" id="node-input-parameter2Type">
        <input type="text" id="node-input-parameter2" style="width: calc(100% - 150px)" placeholder="">
        <br>
        <label>&nbsp;</label>
        <div id="tip-parameter2" class="image-tools-form-tip paramtip"  style="width: calc(100% - 150px); max-width: 450px" hidden></div>
    </div>
    <div class="form-row image-tools-row jimp-parameter-group" id="parameter3" style="vertical-align: top;">
        <label style="padding-top: 8px" for="node-input-parameter3"><i class="fa fa-code"></i><span id="parameter-label3"
            data-i18n="jimp.label.parameter3"> parameter3</span></label>
        <input type="hidden" id="node-input-parameter3Type">
        <input type="text" id="node-input-parameter3" style="width: calc(100% - 150px)" placeholder="">
        <br>
        <label>&nbsp;</label>
        <div id="tip-parameter3" class="image-tools-form-tip paramtip"  style="width: calc(100% - 150px); max-width: 450px" hidden></div>
    </div>
    <div class="form-row image-tools-row jimp-parameter-group" id="parameter4" style="vertical-align: top;">
        <label style="padding-top: 8px" for="node-input-parameter4"><i class="fa fa-code"></i><span id="parameter-label4"
            data-i18n="jimp.label.parameter4"> parameter4</span></label>
        <input type="hidden" id="node-input-parameter4Type">
        <input type="text" id="node-input-parameter4" style="width: calc(100% - 150px)" placeholder="">
        <br>
        <label>&nbsp;</label>
        <div id="tip-parameter4" class="image-tools-form-tip paramtip"  style="width: calc(100% - 150px); max-width: 450px" hidden></div>
    </div>
    <div class="form-row image-tools-row jimp-parameter-group" id="parameter5" style="vertical-align: top;">
        <label style="padding-top: 8px" for="node-input-parameter5"><i class="fa fa-code"></i><span id="parameter-label5"
            data-i18n="jimp.label.parameter5"> parameter5</span></label>
        <input type="hidden" id="node-input-parameter5Type">
        <input type="text" id="node-input-parameter5" style="width: calc(100% - 150px)" placeholder="">
        <br>
        <label>&nbsp;</label>
        <div id="tip-parameter5" class="image-tools-form-tip paramtip"  style="width: calc(100% - 150px); max-width: 450px" hidden></div>
    </div>
    <div class="form-row image-tools-row jimp-parameter-group" id="parameter6" style="vertical-align: top;">
        <label style="padding-top: 8px" for="node-input-parameter6"><i class="fa fa-code"></i><span id="parameter-label6"
            data-i18n="jimp.label.parameter6"> parameter6</span></label>
        <input type="hidden" id="node-input-parameter6Type">
        <input type="text" id="node-input-parameter6" style="width: calc(100% - 150px)" placeholder="">
        <br>
        <label>&nbsp;</label>
        <div id="tip-parameter6" class="image-tools-form-tip paramtip"  style="width: calc(100% - 150px); max-width: 450px" hidden></div>
    </div>
    <div class="form-row image-tools-row jimp-parameter-group" id="parameter7" style="vertical-align: top;">
        <label style="padding-top: 8px" for="node-input-parameter7"><i class="fa fa-code"></i><span id="parameter-label7"
            data-i18n="jimp.label.parameter7"> parameter7</span></label>
        <input type="hidden" id="node-input-parameter7Type">
        <input type="text" id="node-input-parameter7" style="width: calc(100% - 150px)" placeholder="">
        <br>
        <label>&nbsp;</label>
        <div id="tip-parameter7" class="image-tools-form-tip paramtip"  style="width: calc(100% - 150px); max-width: 450px" hidden></div>
    </div>
    <div class="form-row image-tools-row jimp-parameter-group" id="parameter8" style="vertical-align: top;">
        <label style="padding-top: 8px" for="node-input-parameter8"><i class="fa fa-code"></i><span id="parameter-label8"
            data-i18n="jimp.label.parameter8"> parameter8</span></label>
        <input type="hidden" id="node-input-parameter8Type">
        <input type="text" id="node-input-parameter8" style="width: calc(100% - 150px)" placeholder="">
        <br>
        <label>&nbsp;</label>
        <div id="tip-parameter8" class="image-tools-form-tip paramtip"  style="width: calc(100% - 150px); max-width: 450px" hidden></div>
    </div>
</script>

<script type="text/html" data-help-name="jimp-image">
<p>An image manipulation node built using <a href="https://github.com/oliver-moran/jimp/tree/master/packages/jimp">Jimp</a></p>
<h3>Foreword</h3>
<dl class="message-properties">
    Examples have been included to help you do some common tasks. 
    <a onclick="RED.actions.invoke('core:show-examples-import-dialog')" href="#">Click here</a> to import an example or click the hamburger menu <a class="button" href="#"><i class="fa fa-bars"></i></a> select <b>import</b> then <b>examples</b> or press <kbd>ctrl+i</kbd>
</dl> 
<h3>Inputs</h3>
<dl class="message-properties">
    <dt>image <span class="property-type">string | base64 | buffer | jimp | object</span></dt>
    <dd> the image (jimp object, buffer, file/URL/base64 string) to be processed. 
    <p>NOTE: To create a blank image pass an object <code>{w: number, h: number, background?: number | string}</code> where background is the colour as an integer or #RGB(A)</p>
    </dd>
    <dt>parameters <span class="property-type">any</span></dt>
    <dd> depends on the function selected</dd>
</dl>
<h3>Output</h3>
<dl class="message-properties">
    <dt>payload <span class="property-type">object | []</span></dt>
    <dd> the processed image as a jimp object, buffer or base64 string.</dd>
    <dt>imageInfo <span class="property-type">object</span></dt>
    <dd> properties of the image e.g <code>.hasAlpha</code>, <code>.MIME</code>, <code>.quality</code>, <code>.width</code>, <code>.height</code>
    </dd>
    <dt>jobs <span class="property-type">[object]</span></dt>
    <dd>An array of jobs carried out on the image. Each element is an object containing a information about the performance and any result returned</dd>
    <dt>performance <span class="property-type">object</span></dt>
    <dd>Performance measurements of the image loading and processing</dd>
    <h6>
    <p>NOTES...</p>
    <p>If several functions are to be applied to an image, outputting a jimp object to the next jimp node will be faster than passing a buffer or base64 string </p>
    <p>Additional useful properties are available in the <code>msg</code> object. Use a debug node to inspect them</p>
    </h6>
</dl>

<h3>Details</h3>
    <h4>batch mode</h4>
    <p>To perform batch operations, the options must include name and parameters.  E.g...
        <p><code>
        [
            {
                "name": "crop",
                "parameters": [100,100,250,250]
            },
            {
                "name": "rotate",
                "parameters": [270]
            },
            {
                "name": "posterize",
                "parameters": [22]
            },
            {
                "name": "brightness",
                "parameters": [0.3]
            }
        ]
        </code></p>
    <p>Batch mode can be used to automate image manipulation by sending the name of the function(s) and parameter(s) for example via msg.payload</p>
    <p>Additionally, any functions not listed in this node or new functions added to Jimp can be accessed via Batch mode</p>
    </p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-image-tools/xzingDecode] --- -->
<script type="text/javascript">
    (function () {
        RED.nodes.registerType('Barcode Decoder', {
            category: 'image tools',
            paletteLabel: "Barcode Decoder",
            //labelStyle: "node-label-white",
            icon: "font-awesome/fa-barcode",
            color: '#FFAAAA',//'#f24b69',
            defaults: {
                name: { value: "" },
                data: { value: "payload", validate: RED.validators.typedInput("dataType") },
                dataType: { value: "msg" },
                tryharder: { value: false, validate: RED.validators.typedInput("tryharderType") },
                tryharderType: { value: "bool" },
                QR_CODE: { value: true },
                DATA_MATRIX: { value: false },
                PDF_417: { value: false },
                EAN_8: { value: false },
                EAN_13: { value: false },
                CODE_39: { value: false },
                CODE_128: { value: false },
                ITF: { value: false },
                RSS_14: { value: false },
            },
            inputs: 1,
            outputs: 1,
            label: function () {
                return this.name || "Barcode Decoder";
            },
            oneditprepare: function () {
                let node = this;
                function setupTypedInput(varName, types, def) {
                    let varSel = '#node-input-' + varName;
                    let typeSel = varSel + 'Type';
                    let varVal = node[varName];
                    let typeVal = node[varName + 'Type'];

                    if (typeVal == null || typeVal === 'none') {
                        typeVal = def;
                    } else if (typeVal === 'string') {
                        typeVal = "str";
                    } else if (typeVal === 'number') {
                        typeVal = "num";
                    }
                    $(typeSel).val(typeVal);
                    $(varSel).typedInput({
                        default: def,
                        typeField: $(typeSel),
                        types: types
                    });
                    $(varSel).typedInput('type', typeVal);
                }
                setupTypedInput('data', ['msg', 'flow', 'global', 'bin', 'str'], 'str');
                setupTypedInput('tryharder', ['bool', 'msg', 'flow', 'global'], 'bool');
            },
            oneditsave() {
            }
        });
    })();
</script>

<script type="text/html" data-template-name="Barcode Decoder">
    <link rel="stylesheet" href="image-tools/static/css/common.css" type="text/css"/>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-data"><i class="fa fa-file-image-o"></i><span data-i18n="xzingDecode.label.data"> image</span></label>
        <input type="hidden" id="node-input-dataType">
        <input style="width: 70%" type="text" id="node-input-data" placeholder="image.jpg">
    </div>
    <div class="form-row">
        <label for="node-input-format"><i class="fa fa-barcode"></i><span data-i18n="xzingDecode.label.format"> format</span></label>
        <div class="image-tools-checklist">
                <input type="checkbox" id="node-input-DATA_MATRIX" title="DATA_MATRIX" data-value="DATA_MATRIX"> 
                <label for="node-input-DATA_MATRIX" title="DATA_MATRIX">Datamatrix</label>
                <input type="checkbox" id="node-input-QR_CODE" title="QR_CODE" data-value="QR_CODE"> 
                <label for="node-input-QR_CODE" title="QR_CODE">QR</label>
                <input type="checkbox" id="node-input-PDF_417" title="PDF_417" data-value="PDF_417"> 
                <label for="node-input-PDF_417" title="PDF_417">PDF 417</label>
                <input type="checkbox" id="node-input-EAN_8" title="EAN_8" data-value="EAN_8"> 
                <label for="node-input-EAN_8" title="EAN_8">EAN 8</label>
                <input type="checkbox" id="node-input-EAN_13" title="EAN_13" data-value="EAN_13"> 
                <label for="node-input-EAN_13" title="EAN_13">EAN 13</label>
                <input type="checkbox" id="node-input-CODE_39" title="CODE_39" data-value="CODE_39"> 
                <label for="node-input-CODE_39" title="CODE_39">Code 39</label>
                <input type="checkbox" id="node-input-CODE_128" title="CODE_128" data-value="CODE_128"> 
                <label for="node-input-CODE_128" title="CODE_128">Code 128</label>
                <input type="checkbox" id="node-input-ITF" title="ITF" data-value="ITF"> 
                <label for="node-input-ITF" title="ITF">ITF</label>
                <input type="checkbox" id="node-input-RSS_14" title="RSS_14" data-value="RSS_14"> 
                <label for="node-input-RSS_14" title="RSS_14">RSS 14</label>
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-tryharder"><i class="fa fa-cogs"></i><span data-i18n="xzingDecode.label.tryharder"> try harder</span></label>
        <input type="hidden" id="node-input-tryharderType">
        <input style="width: 70%" type="text" id="node-input-tryharder" >
    </div>
 
</script>

<script type="text/html" data-help-name="Barcode Decoder">
    <link rel="stylesheet" href="image-tools/static/css/common.css" type="text/css"/>
    <p>A barcode decoder node built with zxing and Jimp</p>
    <h3>Foreword</h3>
    <dl class="message-properties">
        Examples have been included to help you do some common tasks. 
        <a onclick="RED.actions.invoke('core:show-examples-import-dialog')" href="#">Click here</a> to import an example or click the hamburger menu <a class="button" href="#"><i class="fa fa-bars"></i></a> select <b>import</b> then <b>examples</b> or press <kbd>ctrl+i</kbd>
    </dl> 
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>image <span class="property-type">string | base64 | buffer | object</span></dt>
        <dd> the image (Jimp image / buffer / base64 string / file name / URL) to be decoded. </dd>
        <dt>format <span class="property-type">JSON</span></dt>
        <dd> 
            The barcode formats to use can be overridden by sending an array of strings in <code>msg.barcodeFormats</code>. 
            Choosing the correct format can reduce processing time and improve accuracy.
            <p style="padding-left: 2px">
                <b>Overriding barcode formats by setting <code>msg.barcodeFormats</code>...</b><br>
                Example to read QR only: <code>["QR_CODE"]</code><br>
                Example to read Datamatrix only: <code>["DATA_MATRIX"]</code><br>
                Example to read 3 different types of barcode: <code>["EAN_32", "RSS_14", "ITF"]</code><br>
                <b>To see all currently supported types, import the example "Barcodes" or refer to <a target="_blank" href="https://github.com/zxing-js/library#supported-formats">supported-formats</a> </b>
            </p>
        </dd>
        <dt>tryharder <span class="property-type">bool</span></dt>
        <dd> if <code>true</code>, this flag instructs the decoder to try harder when looking for a barcode (slower).</dd>
    </dl>
    <h3>Output</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">object</span></dt>
        <dd>The results.</dd>
        <dt>performance <span class="property-type">object</span></dt>
        <dd>Performance measurements of the image loading and processing</dd>
        <h4>Additional useful properties are available in the <code>msg</code> object. Use a debug node to inspect them</h4>
    </dl>
</script>
</div><div><!-- --- [red-module:node-red-contrib-image-tools/barcodeWriter] --- -->
<script type="text/javascript">
    (function () {
        RED.nodes.registerType('Barcode Generator', {
            category: 'image tools',
            paletteLabel: "Barcode Generator",
            icon: "font-awesome/fa-barcode",
            color: '#FFAAAA',//'#f24b69',
            defaults: {
                name: { value: "" },
                data: { value: "payload", validate: RED.validators.typedInput("dataType") },
                dataType: { value: "msg" },
                barcode: { value: "qrcode", validate: RED.validators.typedInput("barcodeType") },
                barcodeType: { value: "barcode" },
                options: { value: "" },
                optionsType: { value: "ui" },
                sendProperty: { value: "payload" },
                props: {
                    value: [{ p: "rotate", v: "N", vt: "str" }, { p: "includetext", v: true, vt: "bool" }, { p: "textxalign", v: "center", vt: "str" }], validate: function (v) {
                        if (!v || v.length === 0) { return true }
                        for (var i = 0; i < v.length; i++) {
                            if (/msg|flow|global/.test(v[i].vt)) {
                                if (!RED.utils.validatePropertyExpression(v[i].v)) {
                                    return false;
                                }
                            } else if (v[i].vt === "jsonata") {
                                try { jsonata(v[i].v); } catch (e) { return false; }
                            } else if ([i].vt === "json") {
                                try { JSON.parse(v[i].v); } catch (e) { return false; }
                            }
                        }
                        return true;
                    }
                },
            },
            inputs: 1,
            outputs: 1,
            label: function () {
                return this.name || (this.barcodeType == "barcode" ? this.barcode : "barcode generator");
            },
            oneditprepare: function () {
                const node = this;
                const symbology = image_tools.getSymbology();
                const symbologyOptionsList = image_tools.getOptionsList();
                const symbologyOptionsMap = image_tools.getOptionsMap();
                const symbologyKeys = Object.keys(symbology);

                $('#node-input-sendProperty').typedInput({
                    default: "msg",
                    types: ['msg']
                });
                $('#node-input-sendProperty').typedInput("value", node.sendProperty || "payload");

                var barcodeData = $("#node-input-data");
                barcodeData.typedInput({
                    default: "msg",
                    typeField: $("#node-input-dataType"),
                    types: ["msg", "flow", "global", "str", "env", "jsonata"]
                });

                var barcodeChoices = symbologyKeys.map(e => {
                    return {
                        label: symbology[e].desc,
                        value: symbology[e].sym
                    }
                });

                var barcode = $("#node-input-barcode");
                barcode.typedInput({
                    default: "barcode",
                    typeField: $("#node-input-barcodeType"),
                    types: [
                        {
                            value: "barcode",
                            label: "Barcode",
                            title: "Barcode",
                            icon: "fa fa-barcode",
                            showLabel: false,
                            multiple: false,
                            options: barcodeChoices
                        }, "msg", "flow", "global", "str", "env", "jsonata",
                    ]
                });

                const options = $("#node-input-options");
                options.typedInput({
                    default: "ui",
                    typeField: $("#node-input-optionsType"),
                    types: [{ label: "Set in UI (below)", value: "ui", hasValue: false }, "msg", "flow", "global", "json", "env", "jsonata"]
                });
                options.typedInput("type", this.optionsType || "msg");
                if (this.optionsType != "ui") options.typedInput("value", this.options);
                options.on("change", function (el) {
                    let $this = $(this);
                    if ($this.typedInput("type") == "ui") {
                        $("#node-input-property-container-row").show();
                    } else {
                        $("#node-input-property-container-row").hide();
                    }
                    onResize(node);
                })

                const tiTypes = symbologyOptionsList.map(function (item) {
                    //name type desc
                    let type = item.type;
                    let name = item.name;
                    let desc = item.desc;
                    switch (type) {
                        case "string":
                            type = "str";
                            break;
                        case "boolean":
                            type = "num";
                            break;
                        case "float":
                            type = "num";
                            break;
                        default:
                            type = "str";
                            break;
                    }
                    return {
                        label: name,
                        value: name,
                        title: desc,
                        type: type,
                        hasValue: false
                    }
                })

                const eList = $('#node-input-property-container').css('min-height', '120px').css('min-width', '450px');

                eList.editableList({
                    addItem: function (container, i, opt) {
                        var prop = opt;
                        if (!prop.hasOwnProperty('p')) {
                            prop = { p: "rotate", v: "N", vt: "str" };
                        }
                        container.css({
                            overflow: 'hidden',
                            whiteSpace: 'nowrap'
                        });
                        var row = $('<div/>').appendTo(container);

                        var propertyName = $('<input/>', { class: "node-input-prop-property-name", type: "text" })
                            .css("width", "30%")
                            .appendTo(row)
                            .typedInput({ types: tiTypes });

                        $('<div/>', { style: 'display:inline-block; padding:0px 6px;' })
                            .text('=')
                            .appendTo(row);

                        var propertyValue = $('<input/>', { class: "node-input-prop-property-value", type: "text" })
                            .css("width", "calc(70% - 30px)")
                            .appendTo(row)
                            .typedInput({ default: 'str', types: ['msg', 'flow', 'global', 'str', 'num', 'bool', 'json', 'bin', 'date', 'jsonata', 'env'] });

                        propertyName.typedInput('type', prop.p);

                        propertyValue.typedInput('value', prop.v);
                        propertyValue.typedInput('type', prop.vt);
                    },
                    removable: true,
                    sortable: true
                });

                for (var i = 0; i < node.props.length; i++) {
                    const prop = node.props[i];
                    const newProp = { p: prop.p, v: prop.v, vt: prop.vt };
                    eList.editableList('addItem', newProp);
                }
                options.trigger("change");
            },
            oneditsave() {
                const node = this;
                /* Gather the properties */
                const items = $("#node-input-property-container").editableList('items');
                node.props = getProps(items);
            },
            oneditresize() {
                onResize(this);
            }
        });

        /** 
         * Retrieve editableList items (refactored for re-use in the form inject button) 
        */
        function getProps(el) {
            var props = [];
            el.each(function (i) {
                var prop = $(this);
                var p = {
                    p: prop.find(".node-input-prop-property-name").typedInput('type')
                };
                if (p.p) {
                    p.v = prop.find(".node-input-prop-property-value").typedInput('value');
                    p.vt = prop.find(".node-input-prop-property-value").typedInput('type');
                    props.push(p);
                }
            });
            return props;
        }

        function onResize(node) {
            try {
                const editorRow = $("#dialog-form>div.node-input-property-container-row");
                const size = { height: $(".red-ui-tray-content form").height() }
                const rows = $("#dialog-form>div:not(.node-input-property-container-row):visible");
                let height = size.height;
                for (let i = 0; i < rows.length; i++) {
                    height -= $(rows[i]).outerHeight(true);
                }
                height -= (parseInt(editorRow.css("marginTop")) + parseInt(editorRow.css("marginBottom")));
                height += 16;
                $("#node-input-property-container").editableList('height', height);
            } catch (error) { }
            if (!node._sizeHackTimer) {
                node._sizeHackTimer = setTimeout(function () {
                    $(".image-tools-form-tip").css("max-width", "unset");//hack - prevent node-red calculating UI panel too large due to long text in the tip
                    node._sizeHackTimer = null;
                }, 250);
            }
        }
    })();
    // Update built in help from types/options
    function update_image_tools_barcode_built_in_help() {
        if (window.image_tools && $("#image-tools-barcode-options").length && $("#image-tools-barcode-types").length) {
            const symbology = image_tools.getSymbology();
            const symbologyOptionsList = image_tools.getOptionsList();
            const symbologyOptionsMap = image_tools.getOptionsMap();
            const symbologyKeys = Object.keys(symbology);
            try {
                const $typesHelp = $("#image-tools-barcode-types");
                $typesHelp.empty();
                const $typeList = $('<ul/>');
                for (let index = 0; index < symbologyKeys.length; index++) {
                    const sym = symbology[symbologyKeys[index]];
                    $typeList.append($("<li/>").html('<code>' + sym.sym + '</code> - ' + sym.desc + '. Example data: <span>' + sym.text + '</span>'));
                }
                $typesHelp.append($typeList);
            } catch (error) { }
            try {
                const $optionsHelp = $("#image-tools-barcode-options");
                $optionsHelp.empty();
                const $symList = $('<ul/>');
                for (let index = 0; index < symbologyOptionsList.length; index++) {
                    const op = symbologyOptionsList[index];
                    $symList.append($("<li/>").html('<code>' + op.name + '</code> (' + op.type + ') - ' + op.desc));
                }
                $optionsHelp.append($symList);
            } catch (error) { }
        }
    }
</script>

<script type="text/html" data-template-name="Barcode Generator">
    <link rel="stylesheet" href="image-tools/static/css/common.css" type="text/css"/>
    <div class="form-row image-tools-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" style="width: calc(100% - 150px);" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row image-tools-row">
        <label for="node-input-data"><i class="fa fa-font"></i><span data-i18n="barcode_writer.label.data"> Text</span></label>
        <input type="hidden" id="node-input-dataType">
        <input type="text" id="node-input-data" style="width: calc(100% - 150px)" placeholder="0123456789">
        <br>
        <label>&nbsp;</label>
        <div class="image-tools-form-tip" style="width: calc(100% - 150px); max-width: 450px">The value to encode in the barcode.</div>
    </div>
    <div class="form-row image-tools-row">
        <label for="node-input-barcode"><i class="fa fa-barcode"></i><span data-i18n="barcode_writer.label.barcode"> Type</span></label>
        <input type="hidden" id="node-input-barcodeType">
        <input type="text" id="node-input-barcode" style="width: calc(100% - 150px)" placeholder="image.jpg">
    </div>    
    <div class="form-row image-tools-row">
        <label for="node-input-sendProperty"><i class="fa fa-sign-out"></i> 
            <span>Output Property</span>
        </label>
        <input type="text" id="node-input-sendProperty" style="width: calc(100% - 150px)" placeholder="payload">
        <br>
        <label>&nbsp;</label>
        <div class="image-tools-form-tip" style="width: calc(100% - 150px); max-width: 450px">The msg property in which to send the barcode.</div>
    </div> 

    <div class="form-row image-tools-row">
        <label for="node-input-options"><i class="fa fa-tasks"></i><span data-i18n="barcode_writer.label.options"> Options</span></label>
        <input type="hidden" id="node-input-optionsType">
        <input style="width: calc(100% - 150px)" type="text" id="node-input-options" placeholder="">
    </div> 
 
    <div id="node-input-property-container-row" class="form-row node-input-property-container-row">
        <ol style="width: calc(100% - 150px)" id="node-input-property-container"></ol>
    </div>
</script>

<script type="text/html" data-help-name="Barcode Generator">
    <link rel="stylesheet" href="image-tools/static/css/common.css" type="text/css"/>
    <p>A barcode generator node</p>
    <h3>Foreword</h3>
    <dl class="message-properties">
        Examples have been included to help you do some common tasks. 
        <a onclick="RED.actions.invoke('core:show-examples-import-dialog')" href="#">Click here</a> to import an example or click the hamburger menu <a class="button" href="#"><i class="fa fa-bars"></i></a> select <b>import</b> then <b>examples</b> or press <kbd>ctrl+i</kbd>
    </dl> 
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>text <span class="property-type">string</span></dt>
        <dd> the data to be encoded in the barcode. </dd>
        <dt>type <span class="property-type">string</span></dt>
        <dd> the barcode type.
            <details>
                <summary>allowable types</summary>
                <p id="image-tools-barcode-types">
                    <button style="background: none!important; border: none; padding: 0!important;  text-decoration: underline; cursor: pointer;" 
                        onclick="update_image_tools_barcode_built_in_help()">click me to load list</button>
                </p>
            </details>
        </dd>
        <dt>output property <span class="property-type">string</span></dt>
        <dd> The msg property where the barcode is returned</dd>
        <dt>Options <span class="property-type">object</span></dt>
        <dd> additional options to format the barcode.
            <details>
                <summary>allowable options</summary>
                <p id="image-tools-barcode-options">
                    <button style="background: none!important; border: none; padding: 0!important;  text-decoration: underline; cursor: pointer;" 
                        onclick="update_image_tools_barcode_built_in_help()">click me to load list</button>
                </p>
            </details>
        </dd>
    </dl>
    <h3>Output</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">Buffer</span></dt>
        <dd>A PNG barcode. NOTE: The msg property where the barcode is set will depend on the the setting in Output Property</dd>
        <dt>performance <span class="property-type">object</span></dt>
        <dd>Performance measurements of the node and barcode creation</dd>
    </dl>
</script>
</div><div><!-- --- [red-module:node-red-contrib-image-tools/imageViewer] --- -->
<!-- 
This image viewer node is heavily based on the excellent works by rikukissa and dceejay
* rikukissa (https://github.com/rikukissa) 
* dceejay (https://github.com/dceejay)
* src: https://github.com/rikukissa/node-red-contrib-image-output
MIT License included as per Copyright (c) 2018 Riku Rouvila

MIT License

Copyright (c) 2018 Riku Rouvila, 2021 Steve-Mcl

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
-->


<script type="text/javascript">
    (function () {
        const DEFAULT_WIDTH = 160
        RED.nodes.registerType('image viewer', {
            category: 'image tools',
            paletteLabel: "viewer",
            icon: "watch.png",
            align: 'right',
            color: '#FFAAAA',
            defaults: {
                name: { value: "" },
                width: {
                    value: DEFAULT_WIDTH,
                    required: true,
                    validate: function (v) {
                        return !v || !isNaN(parseInt(v, 10));
                    }
                },
                data: {
                    value: "payload",
                    required: true,
                    validate: RED.validators.typedInput("dataType")
                },
                dataType: {
                    value: "msg"
                },
                active: {
                    value: true
                }
            },
            inputs: 1,
            outputs: 1,
            button: {
                toggle: "active",
                onclick: function () {
                    const label = this.name || "image viewer";
                    var node = this;
                    $.ajax({
                        url: `image-viewer/${this.id}/${this.active ? 'enable' : 'disable'}`,
                        type: "POST",
                        success: function (resp, textStatus, xhr) {
                            const historyEvent = {
                                t: 'edit',
                                node: node,
                                changes: {
                                    active: !node.active
                                },
                                dirty: node.dirty,
                                changed: node.changed
                            };
                            node.changed = true;
                            node.dirty = true;
                            RED.nodes.dirty(true);
                            RED.history.push(historyEvent);
                            RED.view.redraw();
                            if (xhr.status == 200) {
                                RED.notify("Successfully " + resp + ": " + label, "success");
                            }
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            var message;

                            switch (jqXHR.status) {
                                case 404:
                                    message = "node not deployed";
                                    break;
                                case 0:
                                    message = "no response from server";
                                    break;
                                default:
                                    message = `unexpected error (${textStatus}) ${errorThrown}`;
                            }

                            RED.notify(`<strong>Error</strong>: ${message}`, "error");
                        }
                    });
                }
            },

            label: function () {
                return this.name || "viewer";
            },
            oneditprepare: function () {
                let node = this;
                // Set a default width of 160 for existing nodes that don't have that field yet.
                $('#node-input-width').val(this.width || DEFAULT_WIDTH);

                $('#node-input-data').typedInput({
                    default: 'msg',
                    typeField: $("#node-input-dataType"),
                    types: ['msg', 'flow', 'global', 'str', 'bin']
                });
            }
        });

        const latestImages = {}

        function _remove(nodeid) {
            const id = nodeid
            const $img = document.getElementById('image-tools-viewer-img-' + id)
            const $bubble = document.getElementById('image-tools-viewer-bubble-' + id)

            $img && $img.remove()
            $bubble && $bubble.remove()
            delete latestImages[id]
        }

        function redraw(node) {
            const id = node.id
            const $img = document.getElementById('image-tools-viewer-img-' + id)
            const $bubble = document.getElementById('image-tools-viewer-bubble-' + id)

            $img && $img.remove()
            $bubble && $bubble.remove()

            if (latestImages[id]) {
                render(id, latestImages[id], node)
            }
        }

        function render(id, data, node) {
            let i = new Image();
            i.src = data;
            let $img = document.getElementById('image-tools-viewer-img-' + id);
            if (!$img) {
                const $container = document.getElementById(id);
                if (!$container) { return };

                const bubble = document.createElementNS("http://www.w3.org/2000/svg", 'polyline');
                bubble.setAttribute('id', 'image-tools-viewer-bubble-' + id);
                bubble.setAttribute('style', 'fill:transparent');
                bubble.setAttribute('stroke', '#999999');
                $container.insertBefore(bubble, $container.lastChild.nextSibling);

                const img = document.createElementNS("http://www.w3.org/2000/svg", 'image');
                img.setAttribute('id', 'image-tools-viewer-img-' + id);
                img.setAttribute('x', '1');
                img.setAttribute('y', '47');
                img.setAttribute('width', node.width || DEFAULT_WIDTH);
                // img.setAttribute('onclick', "function(){remove('" + id + "');}");
                $(img).on("click", function r(el) {
                    _remove(id)
                })
                $container.insertBefore(img, $container.lastChild.nextSibling);
                $img = img;
            }

            i.onload = function () {
                $img.setAttribute('height', node.width * i.height / i.width);
                const bubbleId = $img.id.replace("img", "bubble");
                const $bubble = document.getElementById(bubbleId);
                let imgBbox = $img.getBBox();
                imgBbox.x = 1;
                imgBbox.y = 47;
                imgBbox.width = (imgBbox.width || node.width || DEFAULT_WIDTH);
                imgBbox.height = (imgBbox.height || node.width * i.height / i.width);
                const left = imgBbox.x;
                const top = imgBbox.y;
                const right = imgBbox.x + imgBbox.width;
                const bottom = (imgBbox.y + imgBbox.height);
                const points =
                    (left + 4) + "," + (top - 17) + " " +
                    (left + 4) + "," + top + " " +
                    right + "," + top + " " +
                    right + "," + bottom + " " +
                    left + "," + bottom + " " +
                    left + "," + (top - 21)
                $bubble.setAttribute('points', points);
            }

            $img.setAttribute('href', data);
        }

        RED.events.on("editor:save", redraw)

        RED.comms.subscribe('image-tools-image-viewer', function (event, data) {
            if (data.hasOwnProperty("data")) {
                latestImages[data.id] = data.data
                render(data.id, data.data, RED.nodes.node(data.id))
            }
            else {
                _remove(data.id);
            }
        })
    })();
</script>

<script type="text/html" data-template-name="image viewer">
	<link rel="stylesheet" href="image-tools/static/css/common.css" type="text/css"/>
	<div class="form-row">
		<label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
		<input type="text" id="node-input-name" placeholder="Name">
	</div>
	<div class="form-row">
		<label style="padding-top: 8px" for="node-input-data"><i class="fa fa-file-image-o"></i> Image</label>
		<input type="text" id="node-input-data" style="width:70%">
		<input type="hidden" id="node-input-dataType">
	</div>
	<div class="form-row">
		<label for="node-input-width"><i class="fa fa-arrows-h"></i> Width</label>
		<input type="number" id="node-input-width">
	</div>
</script>
</div><div><!-- --- [red-module:node-red-contrib-image-tools/app] --- -->
<script type="text/javascript">
    $.getScript('image-tools/static/js/image_tools.js');
</script>
</div><div><!-- --- [red-module:node-red-contrib-influxdb/influxdb] --- -->
<script type="text/html" data-template-name="influxdb">    
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-config-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-config-input-influxdbVersion"><i class="fa fa-code-fork"></i> <span data-i18n="influxdb.label.version"></span></label>
        <select type="text" style="width: 100px" id="node-config-input-influxdbVersion">
            <option value="1.x">1.x</option> 
            <option value="1.8-flux">1.8-flux</option> 
            <option value="2.0">2.0</option> 
        </select>
    </div>
    <div class="form-row" id="node-config-row-hostname-port">
        <label for="node-config-input-hostname"><i class="fa fa-server"></i> <span data-i18n="influxdb.label.host"></span></label>
        <input class="input-append-left" type="text" id="node-config-input-hostname" placeholder="localhost" style="width: 40%;" >
        <label for="node-config-input-port" style="margin-left: 10px; width: 35px; "> <span data-i18n="influxdb.label.port"></span></label>
        <input type="text" id="node-config-input-port" style="width:45px">
    </div>
    <div class="form-row" id="node-config-row-url">
        <label for="node-config-input-url"><i class="fa fa-server"></i> <span data-i18n="influxdb.label.url"></span></label>
        <input class="input-append-left" type="text" id="node-config-input-url" placeholder="http://localhost:8086">
    </div>
    <div class="form-row" id="node-config-row-database">
        <label for="node-config-input-database"><i class="fa fa-database"></i> <span data-i18n="influxdb.label.database"></span></label>
        <input type="text" id="node-config-input-database">
    </div>
    <div class="form-row" id="node-config-row-username">
        <label for="node-config-input-username"><i class="fa fa-user"></i> <span data-i18n="node-red:common.label.username"></span></label>
        <input type="text" id="node-config-input-username">
    </div>
    <div class="form-row" id="node-config-row-password">
        <label for="node-config-input-password"><i class="fa fa-lock"></i> <span data-i18n="node-red:common.label.password"></span></label>
        <input type="password" id="node-config-input-password">
    </div>
    <div class="form-row" id="node-config-row-token">
        <label for="node-config-input-token"><i class="fa fa-lock"></i> <span data-i18n="influxdb.label.token"></span></label>
        <input type="password" id="node-config-input-token">
    </div>
    <div class="form-row" id="node-config-row-rejectUnauthorized">
        <input type="checkbox" id="node-config-input-rejectUnauthorized" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-config-input-rejectUnauthorized" style="width: auto" data-i18n="influxdb.label.reject-unauthorized"></label>
    </div>
    <div class="form-row" id="node-config-row-enableSecureConnection">
        <input type="checkbox" id="node-config-input-usetls" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-config-input-usetls" style="width: auto" data-i18n="influxdb.label.use-tls"></label>
        <div id="node-config-row-tls" class="hide">
            <label style="width: auto; margin-left: 20px; margin-right: 10px;" for="node-config-input-tls"><span data-i18n="influxdb.label.tls-config"></span></label>
            <input style="width: 300px;" type="text" id="node-config-input-tls">
        </div>
    </div>

</script>

<script type="text/javascript">
    function getVersion() {
        return $("#node-config-input-influxdbVersion option:selected").val();
    }
    RED.nodes.registerType('influxdb', {
        category: 'config',
        color: "rgb(218, 196, 180)",
        defaults: {
            hostname: {value: "127.0.0.1", required: true},
            port: {value: 8086, required: true},            
			protocol: {value: "http", required: true},
            database: {value: "database",
                validate:function(db) {
                    let version = getVersion();
                    if (!version || version === '1.x') {
                        return db.length > 0;
                    }
                    return true;
                }
            },
            name: {value: ""},
            usetls: {value: false},
            tls: {type:"tls-config",required: false},
            influxdbVersion: {value: "1.x", required: false},
            url: {value: "http://localhost:8086",
                validate:function(url) {
                    let version = getVersion();
                    if (version === '1.8-flux' || version === '2.0') {
                        return url.length > 0;
                    }
                    return true;
                }
            },
            rejectUnauthorized: {value: true}
        },
        credentials: {
            username: {type: "text"},
            password: { type: "password" },
            token: {type: "password"}
        },
        label: function () {
            this.influxdbVersion = this.influxdbVersion || '1.x';   // for compatibility
            var version = "[v"+this.influxdbVersion+"] ";
            if (this.influxdbVersion === '1.8-flux' || this.influxdbVersion === '2.0') {
                return this.name ? version + this.name : version + this.url;
            } else {
                return this.name ? version + this.name : version + this.hostname + ":" + this.port + "/" + this.database;
            }
        },
        oneditprepare: function () {
            function updateTLSOptions() {
                if ($("#node-config-input-usetls").is(':checked')) {
                    $("#node-config-row-tls").show();
                } else {
                    $("#node-config-row-tls").hide();
                }
            }

            function update18Options() {                
                $("#node-config-row-hostname-port").show();
                $("#node-config-row-url").hide();
                $("#node-config-row-database").show();
                $("#node-config-row-username").show();
                $("#node-config-row-password").show();
                $("#node-config-row-token").hide();
                $("#node-config-row-rejectUnauthorized").hide();   
                $("#node-config-row-enableSecureConnection").show();                
            }

            function update18FluxOptions() {                
                $("#node-config-row-hostname-port").hide();
                $("#node-config-row-url").show();
                $("#node-config-row-database").hide();
                $("#node-config-row-username").show();
                $("#node-config-row-password").show();
                $("#node-config-row-token").hide();
                $("#node-config-row-rejectUnauthorized").show();   
                $("#node-config-row-enableSecureConnection").hide();   
            }

            function update20Options() {                
                $("#node-config-row-hostname-port").hide();
                $("#node-config-row-url").show();
                $("#node-config-row-database").hide();
                $("#node-config-row-username").hide();
                $("#node-config-row-password").hide();
                $("#node-config-row-token").show();
                $("#node-config-row-rejectUnauthorized").show();   
                $("#node-config-row-enableSecureConnection").hide();  
            }

            $("#node-config-input-influxdbVersion").change(function () {
                let selected = $("#node-config-input-influxdbVersion option:selected").val();

                switch (selected) {
                    case '1.8-flux':
                        update18FluxOptions();
                        break;
                    case '2.0':
                        update20Options();
                        break;
                    default:    // 1.x
                        update18Options();
                        updateTLSOptions();
                        $("#node-config-input-usetls").on("click", function () {
                            updateTLSOptions();
                        });
                }   
            });
            // if version not set assume 1.x to support older flows
            let selected = $("#node-config-input-influxdbVersion option:selected").val();
            selected = selected || '1.x';
            $("#node-config-input-influxdbVersion").val(selected)
        }
    });
</script>

<script type="text/html" data-template-name="influxdb out">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-influxdb"><i class="fa fa-server"></i> <span data-i18n="influxdb.label.server"></span></label>
        <input type="text" id="node-input-influxdb">
    </div>
    <div class="form-row" id="node-input-row-org">
        <label for="node-input-org"><i class="fa fa-sitemap"></i> <span data-i18n="influxdb.label.org"></span></label>
        <input type="text" id="node-input-org">
    </div>
    <div class="form-row" id="node-input-row-bucket">
        <label for="node-input-bucket"><i class="fa fa-database"></i> <span data-i18n="influxdb.label.bucket"></span></label>
        <input type="text" id="node-input-bucket">
    </div>
    <div class="form-row" id="node-input-row-database">
        <label for="node-input-database"><i class="fa fa-database"></i> <span data-i18n="influxdb.label.database"></span></label>
        <input type="text" id="node-input-database">
    </div>
    <div class="form-row">
        <label for="node-input-measurement"><i style="width: 10px;" class="fa fa-rss"></i> <span data-i18n="influxdb.label.measurement"></span></label>
        <input type="text" id="node-input-measurement">
    </div>
    <div class="form-row" id="node-input-row-enableAdvancedOptions">
        <input type="checkbox" id="advanced-options-checkbox" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="advanced-options-checkbox" style="width: 70%;"><span data-i18n="influxdb.label.use-advanced-query"></span></label>
        <div id="advanced-options-div" class="hide" style="margin-left: 20px; margin-top: 10px;">
            <div class="form-row">
                <label for="node-input-precision" style="width:35%"><i class="fa fa-clock-o"></i> <span data-i18n="influxdb.label.time-precision"></span></label>
                <select type="text" id="node-input-precision" style="width:55%">
                    <option value="">Default</option> 
                    <option value="n">Nanoseconds (n)</option> 
                    <option value="u">Microseconds (u)</option> 
                    <option value="ms">Milliseconds (ms)</option> 
                    <option value="s">Seconds (s)</option>
                    <option value="m">Minute (m)</option>
                    <option value="h">Hour (h)</option>
                    <option value="d">Day (d)</option>
                    <option value="w">Week (w)</option>
                </select>  
            </div>
            <div class="form-row">
                <label for="node-input-retentionPolicy" style="width:35%"><i class="fa fa-gavel"></i> <span data-i18n="influxdb.label.retention-policy"></span></label>
                <input type="text" style="width:55%" id="node-input-retentionPolicy">
            </div>
        </div>  
    </div>
    <div class="form-row" id="node-input-row-precisionV18FluxV20">
        <label for="node-input-precisionV18FluxV20" style="width:35%"><i class="fa fa-clock-o"></i> <span data-i18n="influxdb.label.time-precision"></span></label>
        <select type="text" id="node-input-precisionV18FluxV20" style="width:55%">
            <option value="ns">Nanoseconds (ns)</option> 
            <option value="us">Microseconds (us)</option> 
            <option value="ms">Milliseconds (ms)</option> 
            <option value="s">Seconds (s)</option>
        </select>  
    </div>
    <div class="form-row" id="node-input-row-retentionPolicyV18Flux">
        <label for="node-input-retentionPolicyV18Flux" style="width:35%"><i class="fa fa-gavel"></i> <span data-i18n="influxdb.label.retention-policy"></span></label>
        <input type="text" id="node-input-retentionPolicyV18Flux" style="width:55%">
    </div>

    <div class="form-tips" id="node-warning-measurement"><span data-i18n="[html]influxdb.tip.measurement"></span></div>
    <div class="form-tips" id="node-warning-retention-policy"><span data-i18n="[html]influxdb.tip.retention-policy"></span></div>
</script>



<script type="text/javascript">
    function selectedVersion() {
        // use prefix to update UI when version of config node changes
        var optionSelected = $("#node-input-influxdb option:selected").text();
        var influxDBVersionMatches = optionSelected.match(/\[(.*?)\]/);
        var influxDBVersion = '';
        if (influxDBVersionMatches) {
            influxDBVersion = influxDBVersionMatches[1];
        }
        return influxDBVersion;
    }

    RED.nodes.registerType('influxdb out', {
        category: 'storage-output',
        color: "rgb(218, 196, 180)",
        defaults: {
            influxdb: {type: "influxdb", required: true},
            name: {value: ""},
            measurement: {value: ""},
            precision: {value: ""},
            retentionPolicy: {value: ""},
            database: {value: "database",
                validate:function(db) {
                    if (selectedVersion() === 'v1.8-flux') {
                        return db.length > 0;
                    }
                    return true;
                }
            },
            precisionV18FluxV20: {value: "ms"},
            retentionPolicyV18Flux: {value: ""},
            org: {value: "organisation",
                validate:function(org) {
                    if (selectedVersion() === 'v2.0') {
                        return org.length > 0;
                    }
                    return true;
                }
            },
            bucket: {value: "bucket",
                validate:function(bucket) {
                    let version = selectedVersion()
                    if (version === 'v2.0') {
                        return bucket.length > 0;
                    }
                    return true;
                }
            }
        },
        inputs: 1,
        outputs: 0,
        icon: "influxdb.png",
        align: "right",
        label: function() {
            var influxNode = RED.nodes.node(this.influxdb);
            return this.name || (influxNode ? influxNode.label() + " " + this.measurement : "influxdb");
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function() {
            $("#advanced-options-checkbox").change( function () {
                if ($('#advanced-options-checkbox').is(":checked")) {
                    $("#advanced-options-div").show();
                } else {
                    $("#advanced-options-div").hide();
                }
            });

            // show advanced options if a query option is set on startup
            if (($('#node-input-precision').val() === "")
                    && ($('#node-input-retentionPolicy').val() === "")) {
                $("#advanced-options-div").hide();
            } else {
                $('#advanced-options-checkbox').prop('checked', true);
                $("#advanced-options-div").show();
            }

            function update18Options() {                
                $("#node-input-row-org").hide();
                $("#node-input-row-bucket").hide();
                $("#node-input-row-database").hide();
                $("#node-input-row-enableAdvancedOptions").show();
                $("#node-input-row-precisionV18FluxV20").hide();
                $("#node-input-row-retentionPolicyV18Flux").hide();
                $("#node-warning-retention-policy").show();
            }

            function update18FluxOptions() {       
                $("#node-input-row-org").hide();
                $("#node-input-row-bucket").hide();         
                $("#node-input-row-database").show();
                $("#node-input-row-enableAdvancedOptions").hide();
                $("#node-input-row-precisionV18FluxV20").show();
                $("#node-input-row-retentionPolicyV18Flux").show();
                $("#node-warning-retention-policy").show();
            }

            function update20Options() {
                $("#node-input-row-org").show();
                $("#node-input-row-bucket").show();           
                $("#node-input-row-database").hide();
                $("#node-input-row-enableAdvancedOptions").hide();
                $("#node-input-row-precisionV18FluxV20").show();
                $("#node-input-row-retentionPolicyV18Flux").hide();
                $("#node-warning-retention-policy").hide();
            }

            $("#node-input-influxdb").change(function () {
                switch (selectedVersion()) {
                    case 'v1.8-flux':
                        update18FluxOptions();                    
                        break;
                    case 'v2.0':
                        update20Options();                    
                        break;
                    default:
                        update18Options();
                }
            });

            $("#node-input-measurement").change(function () {
                if($("#node-input-measurement").val() === "") {
                    $("#node-warning-measurement").show();
                } else {
                    $("#node-warning-measurement").hide();
                }
            });
        },
        oneditsave: function() {
            // reset inputs if we are not using advanced options
            if (!$("#advanced-options-checkbox").is(':checked')) {
                $("#node-input-precision").val("");
                $("#node-input-retentionPolicy").val("");
            }
        }
    });
</script>

<script type="text/html" data-template-name="influxdb batch">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-influxdb"><i class="fa fa-server"></i> <span data-i18n="influxdb.label.server"></span></label>
        <input type="text" id="node-input-influxdb">
    </div>
    <div class="form-row" id="node-input-row-org">
        <label for="node-input-org"><i class="fa fa-sitemap"></i> <span data-i18n="influxdb.label.org"></span></label>
        <input type="text" id="node-input-org">
    </div>
    <div class="form-row" id="node-input-row-bucket">
        <label for="node-input-bucket"><i class="fa fa-database"></i> <span data-i18n="influxdb.label.bucket"></span></label>
        <input type="text" id="node-input-bucket">
    </div>
    <div class="form-row" id="node-input-row-database">
        <label for="node-input-database"><i class="fa fa-database"></i> <span data-i18n="influxdb.label.database"></span></label>
        <input type="text" id="node-input-database">
    </div>
    <div class="form-row" id="node-input-row-enableAdvancedOptions">
        <input type="checkbox" id="advanced-options-checkbox" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="advanced-options-checkbox" style="width: 70%;"><span data-i18n="influxdb.label.use-advanced-query"></span></label>
        <div id="advanced-options-div" class="hide" style="margin-left: 20px; margin-top: 10px;">
            <div class="form-row">
                <label for="node-input-precision" style="width:35%"><i class="fa fa-clock-o"></i> <span data-i18n="influxdb.label.time-precision"></span></label>
                <select type="text" id="node-input-precision" style="width:55%">
                    <option value="">Default</option> 
                    <option value="n">Nanoseconds (n)</option> 
                    <option value="u">Microseconds (u)</option> 
                    <option value="ms">Milliseconds (ms)</option> 
                    <option value="s">Seconds (s)</option>
                    <option value="m">Minute (m)</option>
                    <option value="h">Hour (h)</option>
                    <option value="d">Day (d)</option>
                    <option value="w">Week (w)</option>
                </select>  
            </div>
            <div class="form-row">
                <label for="node-input-retentionPolicy" style="width:35%"><i class="fa fa-gavel"></i> <span data-i18n="influxdb.label.retention-policy"></span></label>
                <input type="text" style="width:55%" id="node-input-retentionPolicy">
            </div>
        </div>  
    </div>
    <div class="form-row" id="node-input-row-precisionV18FluxV20">
        <label for="node-input-precisionV18FluxV20" style="width:35%"><i class="fa fa-clock-o"></i> <span data-i18n="influxdb.label.time-precision"></span></label>
        <select type="text" id="node-input-precisionV18FluxV20" style="width:55%">
            <option value="ns">Nanoseconds (ns)</option> 
            <option value="us">Microseconds (us)</option> 
            <option value="ms">Milliseconds (ms)</option> 
            <option value="s">Seconds (s)</option>
        </select>  
    </div>
    <div class="form-row" id="node-input-row-retentionPolicyV18Flux">
        <label for="node-input-retentionPolicyV18Flux" style="width:35%"><i class="fa fa-gavel"></i> <span data-i18n="influxdb.label.retention-policy"></span></label>
        <input type="text" id="node-input-retentionPolicyV18Flux" style="width:55%">
    </div>
    <div class="form-tips" id="node-warning-retention-policy"><span data-i18n="[html]influxdb.tip.retention-policy"></span></div>
</script>



<script type="text/javascript">
    RED.nodes.registerType('influxdb batch', {
        category: 'storage-output',
        color: "rgb(218, 196, 180)",
        paletteLabel: 'influx batch',
        defaults: {
            influxdb: {type: "influxdb", required: true},
            precision: {value: ""},
            retentionPolicy: {value: ""},
            name: {value: ""},
            database: {value: "database",
                validate:function(db) {
                    if (selectedVersion() === 'v1.8-flux') {
                        return db.length > 0;
                    }
                    return true;
                }
            },
            precisionV18FluxV20: {value: "ms"},
            retentionPolicyV18Flux: {value: ""},
            org: {value: "organisation",
                validate:function(org) {
                    if (selectedVersion() === 'v2.0') {
                        return org.length > 0;
                    }
                    return true;
                }
            },
            bucket: {value: "bucket",
                validate:function(bucket) {
                    let version = selectedVersion()
                    if (version === 'v2.0') {
                        return bucket.length > 0;
                    }
                    return true;
                }
            }
        },
        inputs: 1,
        outputs: 0,
        icon: "influxdb.png",
        align: "right",
        label: function() {
            var influxNode = RED.nodes.node(this.influxdb);
            return this.name || (influxNode ? influxNode.label() : "influxdb batch");
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function() {
            function update18Options() {                
                $("#node-input-row-org").hide();
                $("#node-input-row-bucket").hide();
                $("#node-input-row-database").hide();
                $("#node-input-row-enableAdvancedOptions").show();
                $("#node-input-row-precisionV18FluxV20").hide();
                $("#node-input-row-retentionPolicyV18Flux").hide();
                $("#node-warning-retention-policy").show();
            }

            function update18FluxOptions() {       
                $("#node-input-row-org").hide();
                $("#node-input-row-bucket").hide();         
                $("#node-input-row-database").show();
                $("#node-input-row-enableAdvancedOptions").hide();
                $("#node-input-row-precisionV18FluxV20").show();
                $("#node-input-row-retentionPolicyV18Flux").show();
                $("#node-warning-retention-policy").show();
            }

            function update20Options() {
                $("#node-input-row-org").show();
                $("#node-input-row-bucket").show();           
                $("#node-input-row-database").hide();
                $("#node-input-row-enableAdvancedOptions").hide();
                $("#node-input-row-precisionV18FluxV20").show();
                $("#node-input-row-retentionPolicyV18Flux").hide();
                $("#node-warning-retention-policy").hide();
            }
            $("#node-input-influxdb").change(function () {
                switch (selectedVersion()) {
                    case 'v1.8-flux':
                        update18FluxOptions();                    
                        break;
                    case 'v2.0':
                        update20Options();                    
                        break;
                    default:
                        update18Options();
                }
            });
            
            $("#advanced-options-checkbox").change( function () {
                if ($('#advanced-options-checkbox').is(":checked")) {
                    $("#advanced-options-div").show();
                } else {
                    $("#advanced-options-div").hide();
                }
            });

            // show advanced options if a query option is set on startup
            if (($('#node-input-precision').val() === "")
                    && ($('#node-input-retentionPolicy').val() === "")) {
                $("#advanced-options-div").hide();
            } else {
                $('#advanced-options-checkbox').prop('checked', true);
                $("#advanced-options-div").show();
            }
        },
        oneditsave: function() {
            // reset inputs if we are not using advanced options
            if (!$("#advanced-options-checkbox").is(':checked')) {
                $("#node-input-precision").val("");
                $("#node-input-retentionPolicy").val("");
            }
        }
    });
</script>

<script type="text/html" data-template-name="influxdb in">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-influxdb"><i class="fa fa-server"></i> <span data-i18n="influxdb.label.server"></span></label>
        <input type="text" id="node-input-influxdb">
    </div>
    <div class="form-row" id="node-input-row-org">
        <label for="node-input-org"><i class="fa fa-sitemap"></i> <span data-i18n="influxdb.label.org"></span></label>
        <input type="text" id="node-input-org">
    </div>
    <div class="form-row" id="node-input-row-extras">
        <input type="checkbox" id="node-input-rawOutput" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-rawOutput"><span data-i18n="influxdb.label.use-raw-output"></span></label>        
        <input type="checkbox" id="advanced-options-checkbox" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="advanced-options-checkbox" style="width: 60%;"><span data-i18n="influxdb.label.use-advanced-query"></span></label>
        <div id="advanced-options-div" class="hide" style="margin-left: 20px; margin-top: 10px;">
            <div class="form-row">
                <label for="node-input-precision" style="width:35%"><i class="fa fa-clock-o"></i> <span data-i18n="influxdb.label.time-precision"></span></label>
                <select type="text" id="node-input-precision" style="width:55%">
                    <option value="">Default</option> 
                    <option value="n">Nanoseconds (n)</option> 
                    <option value="u">Microseconds (u)</option> 
                    <option value="ms">Milliseconds (ms)</option> 
                    <option value="s">Seconds (s)</option>
                    <option value="m">Minute (m)</option>
                    <option value="h">Hour (h)</option>
                    <option value="d">Day (d)</option>
                    <option value="w">Week (w)</option>
                </select>  
            </div>
            <div class="form-row">
                <label for="node-input-retentionPolicy" style="width:35%"><i class="fa fa-gavel"></i> <span data-i18n="influxdb.label.retention-policy"></span></label>
                <input type="text" style="width:55%" id="node-input-retentionPolicy">
            </div>
        </div>  
    </div>
    <div>
        <input type="hidden" id="node-input-query">
    </div>
    <div class="form-row" style="margin-bottom: 0px;">
        <label for="" style="width: unset;" id="node-input-query-label"><i class="fa fa-code"></i> <span data-i18n="influxdb.label.query"></label>
    </div>
    <div class="form-row node-text-editor-row">
        <div style="height: 250px; min-height:150px;" class="node-text-editor" id="node-input-query-editor" ></div>
    </div>
    <div class="form-tips" id="node-warning" style="display: none"><span data-i18n="[html]influxdb.tip.querytip"></span></div>
</script>



<script type="text/javascript">
    RED.nodes.registerType('influxdb in', {
        category: 'storage-input',
        color: "rgb(218, 196, 180)",
        defaults: {
            influxdb: {type: "influxdb", required: true},
            name: {value: ""},
            query: {value: ""},
            rawOutput: {value: false},
            precision: {value: ""},
            retentionPolicy: {value: ""},
            org: { value: "organisation",
                validate:function(org) {
                    if (selectedVersion() === 'v2.0') {
                        return org.length > 0;
                    }
                    return true;
                }
            }
        },
        inputs: 1,
        outputs: 1,
        icon: "influxdb.png",
        label: function() {
            var influxNode = RED.nodes.node(this.influxdb);
            return this.name || (influxNode ? influxNode.label() : "influxdb");
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function() {
            this.editor = RED.editor.createEditor({
                id: 'node-input-query-editor',
                mode: 'ace/mode/text',
                value: $("#node-input-query").val()
            });
            $("#node-input-query").change();

            $("#node-input-query").change(function () {
                if($("#node-input-query").val() === "") {
                    $("#node-warning").show();
                } else {
                    $("#node-warning").hide();
                }
            });

            $("#advanced-options-checkbox").change( function () {
                if ($('#advanced-options-checkbox').is(":checked")) {
                    $("#advanced-options-div").show();
                } else {
                    $("#advanced-options-div").hide();
                }
            });

            // show advanced options if a query option is set on startup
            if (($('#node-input-precision').val() === "")
                    && ($('#node-input-retentionPolicy').val() === "")) {
                $("#advanced-options-div").hide();
            } else {
                $('#advanced-options-checkbox').prop('checked', true);
                $("#advanced-options-div").show();
            }

            function update18Options() {
                $("#node-input-row-org").hide();
                $("#node-input-row-extras").show();
            }

            function update18FluxOptions() {                
                $("#node-input-row-org").hide();
                $("#node-input-row-extras").hide();
            }

            function update20Options() {
                $("#node-input-row-org").show();
                $("#node-input-row-extras").hide();
            }

            $("#node-input-influxdb").change(function () {
                switch (selectedVersion()) {
                    case 'v1.8-flux':
                        update18FluxOptions();                    
                        break;
                    case 'v2.0':
                        update20Options();                    
                        break;
                    default:
                        update18Options();
                }
            });
        },
        oneditsave: function() {
            $("#node-input-query").val(this.editor.getValue());
            this.editor.destroy();
            delete this.editor;
            
            // reset inputs if we are not using advanced options
            if (!$("#advanced-options-checkbox").is(':checked')) {
                $("#node-input-precision").val("");
                $("#node-input-retentionPolicy").val("");
            }
        },
        oneditcancel: function() {
            this.editor.destroy();
            delete this.editor;
        }
    });
</script>
<script type="text/html" data-help-name="influxdb out">
    <p>A simple influxdb output node to write values and tags to an influxdb measurement.</p>
    <p>The fields and tags to write are in <b>msg.payload</b>. If <b>msg.payload</b> is a string, number, or boolean, 
    it will be written as a single value to the specified measurement (called <i>value</i>).</p>
    <p>If <b>msg.payload</b> is an object containing multiple properties, the fields will be written to the measurement.</p>
    <p>If <b>msg.payload</b> is an array containing two objects, the first object will be written as the set of named fields, 
    the second is the set of named tags.</p>
    <p>Finally, if <b>msg.payload</b> is an array of arrays, it will be written as a series of points containing fields and tags.</p>
    <p>If the <i>measurement</i> field is not set in the node configuration, the user can send in data with a specified measurement 
        name in <b>msg.measurement</b> to overwrite the <i>measurement</i> field in the configuration of the node.</p>

    <p><b>InfluxDB 1.x Mode</b></p>
    <p>Check <i>Advanced Query Options</i> to specify a time precision and retention policy for the insertion.<p>
    <p>The advanced query options <i>Time Precision</i> and <i>Retention Policy</i> can be overwritten using 
    message properties <b>msg.precision</b> and <b>msg.retentionPolicy</b>.</p>

    <p><b>InfluxDB 1.8 Flux and InfluxDB 2.0 Mode</b></p>
    <p>If no retention policy is specified, <i>autogen</i> will be assumed.</p>
</script><script type="text/html" data-help-name="influxdb batch">
    <p><b>InfluxDB 1.8</b></p>
    <p>A influxdb output node to write multiple points (fields and tags) to multiple influxdb measurements.</p>
    <p>The <b>msg.payload</b> needs to be an array of <i>point</i> objects.</p>
    <p>The <b>measurement</b> property of a point contains the name of the measurement for the point. The <b>fields</b> property will contain the
    fields of the point.  If supplied, the <b>tags</b> property will contain the tags for the point. To set the time
    for the point, supply a <b>timestamp</b> property.</p>
    <p>Check <i>Advanced Query Options</i> to specify a time precision and retention policy for the insertion.<p>
    <p>The advanced query options <i>Time Precision</i> and <i>Retention Policy</i> can be overwritten using 
    message properties <b>msg.precision</b> and <b>msg.retentionPolicy</b>.</p>
</script><script type="text/html" data-help-name="influxdb in">
    <p>Allows basic queries to be made to an influxdb time series database.</p>
    <p>The query can be specified in the configuration property or using the property
        <b>msg.query</b>. The results will be returned in <b>msg.payload</b>.</p>

    <p><b>InfluxDB 1.x</b></p>
    <p>To output the results of the query in the raw output format returned by InfluxDb,
    check the <i>Raw Output</i> checkbox.</p>
    <p>Check <i>Advanced Query Options</i> to specify a time precision and retention policy for the query.<p>
    <p>The raw output configuration can be overwritten by the message property <b>msg.rawOutput</b>.</p>
    <p>The advanced query options <i>Time Precision</i> and <i>Retention Policy</i> can be overwritten using 
    message properties <b>msg.precision</b> and <b>msg.retentionPolicy</b>.</p>

    <p>&nbsp;</p><p><b>InfluxDB 1.8 Flux and InfluxDB 2.0</b></p>
    <p>Uses a flux query in the configuration property or using the property
    <b>msg.query</b>. The results will be returned in <b>msg.payload</b>.</p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-maps/maps] --- -->
<!-- Maps-->
<script type="text/x-red" data-template-name="maps">
  <div class="form-row">
    <label for="node-input-name"><i class="fa"></i>Name</label>
    <input type="text" id="node-input-name">
  </div>
  <div class="form-row">
    <label for="node-input-path"><i class="fa"></i>Path</label>
    <input type="text" id="node-input-path" placeholder="Map path">
  </div>
  <div class="form-row">
    <label for="node-input-maptitle"><i class="fa"></i>Title</label>
    <input type="text" id="node-input-maptitle" placeholder="Map title">
  </div>          
</script>



<script type="text/javascript">
    RED.nodes.registerType("maps", {
        category:'Maps',
        defaults: {
            name: {value: ''},
            path: {value: 'maps'},
            maptitle: {value: 'Map title'}            
        },
        outputs: 1,
        inputs: 1,
        label: function() {
            return this.name || "Map";
        },
        color: '#DEBD5C',
        icon: 'map.png'
    });
</script><script type="text/x-red" data-help-name="maps">
  <p>Map.</p>
  <p>Inputs</h3>
  <dl class="message-properties">
    <dt>Path<span class="property-type">string</span></dt>
    <dd>This property sets the map path.</dd>
  </dl>
  <dl class="message-properties">
    <dt>Title<span class="property-type">string</span></dt>
    <dd>This property sets the map title.</dd>
  </dl>  
  <h3>Outputs</h3>
  <dl class="message-properties">
     <dt>payload<span class="property-type">object</span></dt>
     <dd>The payload dataset object.</dd>
  </dl>
  <h3>Error</h3>
  <dl class="message-properties">
     <dt>error<span class="property-type">string</span></dt>
     <dd>The error string.</dd>
  </dl>
  <h3>Details</h3>
  <p><code>msg.payload</code> property contains the dataset. The data structure could be:</p>  
  <p><code>[
    {
        "channel": "TEMP",
        "color": "Red",
        "dataset": [
        {
            "channel": "TEMP",
            "dataset": [
                {
                    "lon": -3.703548,
                    "lat": 40.417204,
                    "description": "Temperature in Madrid"                    
                    "value": 20.5,
                    "unit": "C",
                    "color": "Blue",
                },
                {
                    "lon": -0.075906,
                    "lat": 51.508319,
                    "description": "Temperature in London"                    
                    "value": 16,
                    "unit": "C",
                    "color": "Yellow",
                },
                {
                    "lon": 2.34294,
                    "lat": 48.859271,
                    "description": "Temperature in Paris"
                    "value": 19.7,
                    "unit": "C",
                    "color": "Red",
                },
                {
                    "lon": 13.402786,
                    "lat": 52.517987,
                    "description": "Temperature in Berlin"                    
                    "value": 10.8,
                    "unit": "C",
                    "color": "Red",                    
                }
            ]
        }
    ]    
]</code>
  </p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-moment/moment] --- -->
<!--
  Copyright (c) 2020 Julian Knight (Totally Information)

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="moment">
    <!-- data-template-name identifies the node type this is for              -->

    <!-- INPUT -->
    <div class="form-row">
        <label for="node-input-input"><i class="fa fa-arrow-left"></i> Input from</label>
        <input type="text" id="node-input-input" style="width: 70%;" placeholder="payload">
        <input type="hidden" id="node-input-inputType">
    </div>
    <!-- INPUT TIMEZONE -->
    <div class="form-row">
        <label for="node-input-inTz">Input Timezone</label>
        <input type="text" id="node-input-inTz" placeholder="[determined by system]" style="width:70%;">
    </div>
    <!-- ADJUSTMENT -->
    <div class="form-row">
        <label for="node-input-adjAmount"> Adjustment</label>
        <select id="node-input-adjDir" style="width:4em">
          <option value="add">+</option>
          <option value="subtract">-</option>
        </select>
        <input type="text" id="node-input-adjAmount" placeholder="0" style="width:25%;">
        <select id="node-input-adjType" style="width:30%">
          <option value="days">Days</option>
          <option value="hours">Hours</option>
          <option value="weeks">Weeks</option>
          <option value="months">Months</option>
          <option value="quarters">Quarters</option>
          <option value="years">Years</option>
          <option value="minutes">Minutes</option>
          <option value="seconds">Seconds</option>
          <option value="milliseconds">Milliseconds</option>
        </select>
    </div>

    <!-- OUTPUT FORMAT -->
    <br />
    <div class="form-row">
        <label for="node-input-format"><i class="fa fa-eye-open"></i> Output Format</label>
        <input type="text" id="node-input-format" placeholder="ISO8601 (UTC)">
    </div>
    <!-- OUTPUT LOCALE -->
    <div class="form-row">
        <label for="node-input-locale"><i class="fa fa-flag"></i> Locale</label>
        <input type="text" id="node-input-locale" placeholder="en">
    </div>
    <!-- OUTPUT TIMEZONE -->
    <div class="form-row">
        <label for="node-input-outTz">Output Timezone</label>
        <input type="text" id="node-input-outTz" placeholder="[determined by system]" style="width:70%;">
    </div>
    <!-- OUTPUT OBJECT -->
    <div class="form-row">
        <label for="node-input-output"><i class="fa fa-arrow-right"></i> Output to</label>
        <input type="text" id="node-input-output" style="width: 70%;" placeholder="payload">
        <input type="hidden" id="node-input-outputType">
    </div>

    <br/>
    <!-- TOPIC -->
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic" placeholder="Topic">
    </div>
    <!-- NODE NAME - Should always be the last field -->
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>

    <div class="form-tips" style="font-size:83%">
        See the info sidebar for formatting details. <br />
        Use locale and format to change string output.<br />
        See the info sidebar for several warnings about inputting strings.
    </div>
</script>


<!-- The first <p> is used as the pop-up tool tip when hovering over palette -->


<script type="text/javascript">
;(function () { // Isolate the front-end code
    'use strict'

    //#region --------- "global" variables for the panel --------- //

    /** Module name must match this nodes html file @constant {string} moduleName */
    var moduleName  = 'moment'
    /** Node's label @constant {string} paletteCategory */
    var nodeLabel  = 'Date/Time Formatter'
    /** Node's palette category @constant {string} paletteCategory */
    var paletteCategory  = 'formats'
    /** Node's background color @constant {string} paletteColor */
    var paletteColor  = '#E6E0F8'

    //#endregion ------------------------------------------------- //

    //#region --------- "global" functions for the panel --------- //

    function tzValidate(val) {
        // TODO: See /contribapi/momentzones in nrmoment.js
        // auto-correct the entry
        //$('#node-input-inTz').val( val.replace(/^GMT|UTC/i, 'ETC/GMT') )
        return true
    }

    //#endregion ------------------------------------------------- //

    RED.nodes.registerType(moduleName, {
        category: paletteCategory,      // the palette category
        color: paletteColor,
        defaults: {
            name: {value:''},
            topic: {value:''},
            input: {value:''},
            inputType: {value:'msg'},
            inTz: {value:'', validate:tzValidate},
            adjAmount: {value:0, validate:RED.validators.number()},
            adjType: {value:'days'},
            adjDir: {value:'add'},
            format: {value:''},
            locale: {value:''},
            output: {value:''},
            outputType: {value:'msg'},
            outTz: {value:'', validate:tzValidate}
        },
        inputs:1,               // set the number of inputs - only 0 or 1
        outputs:1,              // set the number of outputs - 0 to n
        // set the icon (held in icons dir below where you save the node)
        icon: 'timer.png',     // saved in  icons/myicon.png
        paletteLabel: nodeLabel,
        label: function() {     // sets the default label contents
            return this.name||this.topic||nodeLabel;
        },
        labelStyle: function() { // sets the class to apply to the label
            return this.name?'node_label_italic':'';
        },
        oneditprepare: function() {
            // Make sure we can reference parent this in async fns
            var _this = this

            if (!this.inputType) {
            this.inputType = 'msg';
            }
            $('#node-input-input').typedInput({
            default: 'msg',
            types: ['msg','flow','global','date','str'],
            typeField: $('#node-input-inputType')
            });
            if (!this.outputType) {
            this.outputType = 'msg';
            }
            $('#node-input-output').typedInput({
            default: 'msg',
            types: ['msg','flow','global'],
            typeField: $('#node-input-outputType')
            });

            // Get host locale and timezone
            $.getJSON('contribapi/moment',function(data) {
            // Save to parent object
            _this.localeData = data

            if ( $('#node-input-inTz').val() === '' ) $('#node-input-inTz').val(data.tz);
            if ( $('#node-input-outTz').val() === '' ) $('#node-input-outTz').val(data.tz);
            if ( $('#node-input-locale').val() === '' ) $('#node-input-locale').val(data.locale);
            });

            // Autocorrect timezone entries
            $('#node-input-inTz').add('#node-input-outTz').blur( function(){
            if( this.value === '' ) {
                // Use saved locale data from parent object as default
                this.value = _this.localeData.tz
            } else {
                // autocorrect common tz errors
                this.value = this.value.trim().replace(/^(GMT|UTC)/i, 'ETC/$1')
            }
            })

        }, // --- end of oneditprepare --- //
    }) // ---- end of RED.nodes.registerType ---- //
})()
</script>
<script type="text/html" data-help-name="moment">
    <p>
      Convert date/time object or string to nicely formatted text or date/time object.
    </p>
    <ul>
        <li><a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" target="_blank">Valid Timezone reference</a></li>
        <li><a href="https://momentjs.com/docs/#/displaying/format/" target="_blank">Date/Time formatting codes</a></li>
    </ul>
    <p>
      Uses the moment.js library. Now updated to use moment-timezone.js for full timezone and DST handling.
      Also uses moment.parseFormat for string inputs and os-locale for output localisation.
      This version requires Node v6+.
    </p>
    <p>
      See the <a href="https://github.com/TotallyInformation/node-red-contrib-moment">readme file</a> for a change log.
    </p>

    <h3>Input</h3>
      <p>
        If the input property does not exist or is left blank, the current date/time will be assumed.
        This can be used to add a current timestamp to a flow of any kind easily.
      </p>
      <p>Otherwise, the input is processed as follows:</p>
      <ul>
        <li>If input is "timestamp" or a JS datetime object or a <a href="http://momentjs.com/docs/#/parsing/">string that Moment.js</a> can resolve
        (with the help of <a href="https://github.com/gr2m/moment-parseformat">moment.parseFormat</a>). It will be processed as normal.</li>
        <li>If the input is null, is a blank string or a string that cannot be converted. The output will be an empty string.</li>
      </ul>

    <h4>String input warnings</h4>
      <p>
        Note that parsing date/time strings is a hard problem. moment.parseFormat helps but it isn&apos;t magic.
        We assume that ambiguous input dates such as <code>3/5/05</code> are in EU/UK format <code>dd/mm/yy</code> <i>unless</i>
        either the input timezone is in <i>America</i> or the locale is set to <i>en_US</i>.
      </p>

    <h3>Input Timezone</h3>
      <p>
        Will try to use <code>msg.inTz</code>, if that is not present, the input TZ setting will be used and if that isn't present, the node will try to guess. If you have set your host system to a local timezone 
        (e.g. <code>dpkg-reconfigure tzdata</code> on Linux)
        then by default, input timestamps from the <code>inject</code> node will be in that timezone, otherwise they will be in UTC.
        You can override this by specifying the full timezone in the format <code>region/location</code>,
        e.g. <code>Europe/London</code>. Note that spellings are not validated, if it doesn&apos;t seem to work, check the valid timezone
        list built in to moment-timezone.
      </p>

    <h3>Output</h3>
      <p>
        Is a formatted string if the output format is anything other than <code>date</code> or <code>object</code>
        in which case, the output is a Javascript date object or an object as described below respectively.
      </p>
      <p>
        Output string formatting is controlled by the Locale setting and the output format field.
        Note that the output Timezone is ignored for ISO8601 output (the default), such output is <i>always</i>
        in UTC. For other formats, the output will be in the specified timezone which defaults to your host timezone.
      </p>
      <p>
        Specifying different input and output timezones allows you to translated between them. If left blank in settings, the output timezone may be set using <code>msg.outTz</code>.
      </p>
      <p>
        The output msg will pass through the input msg.topic unless it is overridden. If the "Output to" field is changed
        from the default <code>msg.payload</code>, the input msg.payload will also be passed through.
      </p>

    <h3>Output String Formatting</h3>
      <p>
        May be any <a href="http://momentjs.com/docs/#/displaying/format/">format string
        allowed by Moment.JS</a> (try <code>LLL</code> for a localised output for example).
        The formatting additions from moment-timezone are also allowed.<br>
        In addition, the following (not case sensitive, alternatives in brackets) format strings are also allowed:
      </p>
      <dl>
          <dt>Blank (ISO8601, ISO)</dt>
          <dd>
            ISO 8602 format, e.g. "2015-01-28T16:24:48.123Z"<br>
            Note that ISO8601 formatted output is ALWAYS in UTC ('Z', Zulu time) not
            local, no matter what output timezone you may specify.
          </dd>
          <dt>date (jsDate)</dt>
          <dd>
            A Javascript Date object<br>
            This is the default if the input is a recognised date string
          </dd>
          <dt>object</dt>
          <dd>
            A Javascript object in the form <code>{years:nnnn, months:n, date:n, hours:n, minutes:n, seconds:n, milliseconds:n}</code>
            <br>
            <em>WARNING</em>: moment.js has a bizarre object format where the month is zero-based (0-11) instead of 1-based (1-12) like all the other elements are.
            I don't currently know why, I've raised an upstream issue but this appears to be a deliberate decision for some strange reason.
          </dd>
          <dt>fromNow (timeAgo)</dt>
          <dd>
            Human readable output<br />
            e.g. 30 minutes ago
          </dd>
          <dt>calendar (aroundNow)</dt>
          <dd>
            Human readable alternative<br />
            e.g. "Last Monday", "Tomorrow 2:30pm"<br />
            Note that dates beyond a week from now are output as yyyy-mm-dd
          </dd>
      </dl>
      <p>
        Note that with the exception of ISO8601, other formats are in the specified
        timezone & DST. If not specified, the output timezone/DST is the same as the input.<br />
        Use an output timezone of <code>UTC</code> to force output to that.
      </p>
      <p>
        If output is shown in the wrong format, such as dates in US mm/dd/yy format, change the
        output locale. For example, using <code>en_gb</code> will force short dates to output in
        dd/mm/yy format. The default is <code>en</code> which moment assumes means the USA :-(
      </p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-moment/humanizer] --- -->
<!--
  Copyright (c) 2018 Julian Knight (Totally Information)

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<!-- This creates and configures the onscreen elements of the node           -->


<!-- First, the content of the edit dialog is defined.                       -->
<script type="text/x-red" data-template-name="humanizer">
  <!-- data-template-name identifies the node type this is for              -->

  <!-- INPUT -->
  <div class="form-row">
    <label for="node-input-input"><i class="fa fa-arrow-left"></i> Input variable</label>
    <input type="text" id="node-input-input" style="width: 70%;" placeholder="varname in msg.payload or empty for all">
  </div>
  <!-- NODE NAME - Should always be the last field -->
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name">
  </div>

  <div class="form-tips" style="font-size:83%">
    Specify which property on msg.payload to humanize or use msg.payload. <br />
    The input must be in seconds since the event so +10 is 10 seconds ago.<br />
    Only integer numbers are allowed.
  </div>
</script>


<!-- Next, some simple help text is provided for the node.                   -->
<!-- The first <p> is used as the pop-up tool tip when hovering over pallette -->


<!-- Finally, the node type is registered along with all of its properties   -->
<script type="text/javascript">
  RED.nodes.registerType('humanizer',{
    category: 'formats',      // the palette category
    color: '#E6E0F8',
    defaults: {
    name: {value:''},
    input: {value:''}
    },
    inputs:1,               // set the number of inputs - only 0 or 1
    outputs:1,              // set the number of outputs - 0 to n
    // set the icon (held in icons dir below where you save the node)
    icon: 'timer.png',     // saved in  icons/myicon.png
    label: function() {     // sets the default label contents
      return this.name||'Humanizer';
    },
    labelStyle: function() { // sets the class to apply to the label
      return this.name?'node_label_italic':'';
    }
  }); // ---- end of RED.nodes.registerType ---- //
</script>
<script type="text/x-red" data-help-name="humanizer">
  <p>
    Humanize timespans in seconds.
  </p>
  <p>
    Uses the <a href="https://momentjs.com/docs/#/durations/humanize/">humanize functionality in the moment.js library</a>.
  </p>
  <p>
    Input must be in integer seconds. Output is the humanized timespan as a localized text message (e.g. "2 seconds").
  </p>
  <p>
    Contributed by <a href="https://github.com/Laro88">Laro88</a>
  </p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-mongodb3/mongodb] --- -->
<!--
  Copyright 2018 Awear Solutions Ltd.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/x-red" data-template-name="mongodb3">
  <div class="form-row">
    <label for="node-config-input-uri"><i class="icon-globe"></i> URI</label>
    <input type="text" id="node-config-input-uri" placeholder="mongodb://host1.yourprovider.com:27017,host2.yourprovider.com:27017/yourdb?replicaSet=foo" />
  </div>
  <div class="form-row">
    <label for="node-config-input-name"><i class="icon-tag"></i> Name</label>
    <input type="text" id="node-config-input-name" placeholder="Name" />
  </div>
  <div class="form-row">
    <label for="node-config-input-user"><i class="icon-user"></i> Username</label>
    <input type="text" id="node-config-input-user" />
  </div>
  <div class="form-row">
    <label for="node-config-input-password"><i class="icon-lock"></i> Password</label>
    <input type="password" id="node-config-input-password" />
  </div>
  <div class="form-row">
    <label for="node-config-input-options"><i class="icon-wrench"></i> Connection Options</label>
    <input type="text" id="node-config-input-options" placeholder="Stringified JSON" />
  </div>
  <div class="form-row">
    <label for="node-config-input-parallelism"><i class="icon-tasks"></i> Parallelism Limit</label>
    <input type="number" id="node-config-input-parallelism" />
  </div>
</script>

<script type="text/javascript">
RED.nodes.registerType("mongodb3", {
  "category": "config",
  "color": "#68B368",
  "defaults": {
    "uri": {
      "value": ""
    },
    "name": {
      "value": ""
    },
    "options": {
      "value": ""
    },
    "parallelism": {
      "value": -1
    }
  },
  "credentials": {
    "user": {
      "type": "text"
    },
    "password": {
      "type": "password"
    }
  },
  "label": function() {
    return this.name || ('' + this.uri).replace(/^(\w+\:\/\/)([^\@]*\@)?/, '$1');
  }
});
</script>

<script type="text/x-red" data-template-name="mongodb3 in">
  <div class="form-row">
    <label for="node-input-service"><i class="icon-folder-close"></i> Service</label>
    <select id="node-input-service">
      <option value="" disabled></option>
      <option value="_ext_">External service</option>
    </select>
  </div>
  <div class="form-row hide" id="node-input-external-details">
    <label for="node-input-configNode"><i class="icon-bookmark"></i> Server</label>
    <input type="text" id="node-input-configNode" />
  </div>
  <div class="form-row">
    <label for="node-input-collection"><i class="icon-briefcase"></i> Collection</label>
    <input type="text" id="node-input-collection" placeholder="collection" />
  </div>
  <div class="form-row">
    <label for="node-input-operation"><i class="fa fa-wrench"></i> Operation</label>
    <select type="text" id="node-input-operation" style="display: inline-block; vertical-align: top;">
      <option value="" id="node-input-dynamic-operation" style="font-style: italic;">Dynamic (msg.operation)</option>
    </select>
  </div>
  <div class="form-row">
  <label for="node-input-name"><i class="icon-tag"></i> Name</label>
  <input type="text" id="node-input-name" placeholder="Name" />
  </div>
  <div class="form-tips" id="node-warning" style="display: none">
    <b> Tip:</b> If no collection is set, ensure <b>msg.collection</b> will contain the collection name.
  </div>
</script>



<script type="text/javascript">
RED.nodes.registerType("mongodb3 in", {
  category: "storage-input",
  color: "#68B368",
  defaults: {
    service: {
      value: "",
      required: true
    },
    configNode: {
      type: "mongodb3",
      validate: function validateServer(v) {
        return this.service !== "_ext_" || v !== "_ADD_";
      }
    },
    name: {
      value: ""
    },
    collection: {
      value: ""
    },
    operation: {
      value: ""
    }
  },
  inputs: 1,
  outputs: 1,
  icon: "mongodb.png",
  label: function label() {
    var mongoConfigNode = RED.nodes.node(this.configNode);
    if (this.name) {
      return this.name;
    }
    var serviceName = "mongodb3";
    if (this.service && this.service !== "_ext_") {
      serviceName = this.service;
    } else if (mongoConfigNode) {
      serviceName = mongoConfigNode.label();
    }
    return serviceName + " " + this.collection + " " + this.operation;
  },
  labelStyle: function() {
    return this.name ? "node_label_italic" : "";
  },
  oneditprepare: function oneditprepare() {
    var serviceSelect = $('#node-input-service');
    var node = this;
    $.getJSON("mongodb3/vcap", function(data) {
      var last = serviceSelect.children().last();
      var opts = data.map(function(d) {
        return $('<option></option>').attr('value', d.name).attr('selected', node.service === d.name).text(d.name).wrap('<p/>').parent().html();
      });
      if (opts.length === 0) {
        node.service = "_ext_";
        serviceSelect.find("option").filter(function() {
          return $(this).val() === node.service;
        }).attr('selected', true);
      } else {
        last.before(opts.join(""));
      }
      serviceSelect.change();
    });

    serviceSelect.change(function() {
      var service = serviceSelect.val();
      if (service === "_ext_") {
        $('#node-input-external-details').show();
      } else {
        $('#node-input-external-details').hide();
      }
    });

    var selectOperation = $('#node-input-operation');
    console.log('getting operations json');
    $.getJSON("mongodb3/operations", function(data) {
      console.log('operations', data);
      selectOperation.children().last().after(data.map(function(d) {
        return $('<option></option>').attr('value', d).attr('selected', node.operation === d).text(d).wrap('<p/>').parent().html();
      }).join(""));
      if (data.indexOf(node.operation) < 0) {
        $('#node-input-dynamic-operation').attr('selected', true);
      }
      selectOperation.change();
    });

    $('#node-input-collection').change(function () {
      if($('#node-input-collection').val()) {
        $('#node-warning').hide();
      } else {
        $('#node-warning').show();
      }
    });
  }
});
</script>
<script type="text/x-red" data-help-name="mongodb3 in">
  <p>Calls a MongoDB collection method based on the selected operator.</p>
  <p>If <b>msg.payload</b> is an array, each element is passed as an arugment.</p>
  <p>See the <a href="http://mongodb.github.io/node-mongodb-native/3.0/api/Collection.html" target="_blank"><i>MongoDB collection api-3 docs</i></a> for examples.</p>
  <p>The result is returned in <b>msg.payload</b>.</p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-npm/npm] --- -->
<script type="text/javascript">
    RED.nodes.registerType('npm',{
        category: 'function',
        color: '#CB3837',
        defaults: {
          name: {value:""},
          func: {value:"// NPM module exposed as variable, npm_module\nreturn npm_module(msg.payload);"},
          npm_module: {value: ""},
          module_style: {value: "cstr"},
          msg_payload: {value: "return_val"},
          function_name: {value: ""}
        },
        inputs:1,
        outputs:1,
        icon: "npm.png",
        label: function() {
            return this.name||"npm";
        }, 
        // TODO: On change, focus and hide.
        oneditprepare: function () {
          that = this
          $('#node-input-module_style').change(function () {
            var value = $('#node-input-module_style').val()
            $('.form-row.toggle').hide()
            $('.form-row.' + value).show()
            that.editor.resize()
          })

          this.editor = RED.editor.createEditor({
            id: 'node-input-func-editor',
            mode: 'ace/mode/javascript',
            value: $("#node-input-func").val()
          });
          this.editor.focus();
        },
        oneditsave: function() {
            var annot = this.editor.getSession().getAnnotations();
            this.noerr = 0;
            $("#node-input-noerr").val(0);
            for (var k=0; k < annot.length; k++) {
                //console.log(annot[k].type,":",annot[k].text, "on line", annot[k].row);
                if (annot[k].type === "error") {
                    $("#node-input-noerr").val(annot.length);
                    this.noerr = annot.length;
                }
            }
            $("#node-input-func").val(this.editor.getValue());
            delete this.editor;
        }
    });
</script>

<script type="text/x-red" data-template-name="npm">
    <style type="text/css">
    .form-row label {
      width: 130px;
    }

    .form-row input {
      width: 67%;
    }
    </style>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-npm_module"><i class="icon-search"></i> NPM Module</label>
        <input type="text" id="node-input-npm_module" placeholder="NPM Module Name">
    </div>
    <div class="form-row">
        <label for="node-input-module_style"><i class="fa fa-file-code-o"></i> Module Style</label>
        <select type="text" id="node-input-module_style" style="display: inline-block; width: 70%;" >
            <option value="cstr">Module Constructor</option>
            <option value="function">Module Function</option>
            <option value="custom">Custom</option>
        </select>
    </div>
    <div class="form-row toggle function">
        <label for="node-input-function_name"><i class="icon-tag"></i> Function</label>
        <input type="text" id="node-input-function_name" placeholder="Function Name">
    </div>
    <div class="form-row toggle function cstr">
        <label for="node-input-msg_payload"><i class="fa fa-file-code-o"></i> Message Payload</label>
        <select type="text" id="node-input-msg_payload" style="display: inline-block; width: 70%;" >
            <option value="return_val">Function Return Value</option>
            <option value="callback">Callback, data as first parameter</option>
            <option value="callback_error">Callback with Error, data as second parameter</option>
        </select>
    </div>

    <div class="form-row toggle custom" style="margin-bottom: 0px;">
        <label for="node-input-func" style="width: 200px;"><i class="fa fa-wrench"></i> Module Invocation</label>
        <input type="hidden" id="node-input-func" autofocus="autofocus">
        <input type="hidden" id="node-input-noerr">
    </div>
    <div class="form-row toggle custom node-text-editor-row">
        <div style="height: 250px;" class="node-text-editor" id="node-input-func-editor" ></div>
    </div>
</script>


<script type="text/x-red" data-help-name="npm">
    <p>A meta-node to dynamically expose NPM modules as nodes.</p>
    <p>NPM Module name must match the registered package identifier from the <a href="http://npmjs.org">NPM Registry</a>.</p>
    <p>Node can be configured to execute the module constructor, function property or custom setup code to return results.</p>
    <p>Property (msg.payload) will be passed in as function argument. Response returned as new msg.payload property value.</p>
    <p>Results from the function execution can be configured to use return value (primitive type or promise) or callback-based operation.</p>
</script>
</div><div><!-- --- [red-module:node-red-contrib-play-audio/play-audio] --- -->

<!--
  Copyright 2015 Lorentz Lasson
  Copyright 2015-2019 Lorentz Lasson, Dave Conway-Jones

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/javascript">
(function() {
    var voices;
    var sources = [];

    RED.nodes.registerType('play audio',{
        category: 'output',
        color: '#DAAFF7',
        defaults: {
            name: {value:""},
            voice: {value:""}
        },
        inputs:1,
        outputs:0,
        icon: "feed.png",
        align: "right",
        label: function() {
            return this.name||"play audio";
        },
        onpaletteadd: function() {

            this.handleAudio = function(t,o) {
                var context = new AudioContext();
                var byteArray = (o.hasOwnProperty("data")) ? o.data : o;

                ( function () {
                    return new Promise(function resolver(resolve, reject) {
                        if (context.state && 'running' !== context.state && context.resume) {
                            context.resume().then(() => {
                                resolve();
                            })
                        } else {
                          resolve();
                        }
                    });
                }()).then(() => {
                  try {
                      var source = context.createBufferSource();
                      var buffer = new Uint8Array(byteArray.length);
                      buffer.set(new Uint8Array(byteArray), 0);
                      source.addEventListener('ended', () => { context.close(); context = undefined; }, {capture:false, once:true});
                      context.decodeAudioData(buffer.buffer, function(buffer) {
                          source.buffer = buffer;
                          source.onended = function() {
                              $.getJSON('playaudio',function() { });
                              sources = sources.filter(function(s) {
                                  if (source === s) { return false; }
                                  else { return true; }
                              });
                          }
                          source.connect(context.destination);
                          source.start(0);
                          sources.push(source);
                      });
                  }
                  catch(e) {
                      alert("Error playing audio: "+e);
                  }
                }).catch((e)=> {
                    alert("Audio context error: "+e);
                });
            };

            this.handleTTS = function(t,o) {
                var v = o.split('#',2);
                if ('speechSynthesis' in window) {
                    voices = window.speechSynthesis.getVoices();
                    var words = new SpeechSynthesisUtterance(v[1]);
                    words.voice = voices[parseInt(v[0])];
                    window.speechSynthesis.speak(words);
                    words.onend = function(event) {
                        $.getJSON('playaudio',function() { });
                    }
                }
                else {
                    alert("Your Browser does not support Text-to-Speech");
                }
            };

            RED.comms.subscribe("playaudio", this.handleAudio);
            RED.comms.subscribe("playtts", this.handleTTS);
        },
        oneditprepare: function() {
            if ('speechSynthesis' in window) {
                voices = window.speechSynthesis.getVoices();
                for (i = 0; i < voices.length ; i++) {
                    //console.log(i,voices[i].name,voices[i].lang,voices[i].voiceURI,voices[i].default);
                    var option = document.createElement('option');
                    option.textContent = voices[i].name + ' (' + voices[i].lang + ')';
                    if (voices[i].default) { option.textContent += ' -- DEFAULT'; }
                    option.setAttribute('value', i);
                    document.getElementById("node-input-voice").appendChild(option);
                }
                $('#node-input-voice').val(this.voice || 0);
            }
            else {
                $('#voice-input-row').hide();
            }
        },
        button : {
            enabled : true,
            onclick : function() {
                sources = sources.filter(function(source) {
                    source.stop(0);
                    return false;
                });
            }
        }
    });
})();
</script>

<script type="text/html" data-template-name="play audio">
<div class="form-row" id="voice-input-row">
    <label for="node-input-voice"><i class="fa fa-language"></i> <span data-i18n="playAudio.label.ttsVoice"></label>
    <select id="node-input-voice"></select>
</div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script>
<script type="text/x-red" data-help-name="play audio">
    <p>A node to play audio in the browser.</p>
    <p>To work the editor web page must be open.</p>
    <p>Expects <code>msg.payload</code> to contain a buffer of a <b>wav</b> file.</p>
    <p>If your browser has native support for Text-to-Speech then a <code>msg.payload</code>
    can also be a <b>string</b> to be read aloud.</p>
    <p>The button will stop the audio that is currently playing.</p>
</script>

</div><div><!-- --- [red-module:node-red-contrib-require/require] --- -->
<script type="text/html" data-template-name="require">
    <div class="form-row">
        <label for="node-input-name">
            <i class="fa fa-tag"></i>
            <span data-i18n="node-red:common.label.name"></span>
        </label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>

    <div class="form-row">
        <label for="node-input-module">
            <i class="fa fa-file"></i>
            <span data-i18n="require.label.module"></span>
        </label>
        <input type="text" id="node-input-module" data-i18n="[placeholder]require.label.module">
    </div>
    <div class="form-row">
        <label for="node-input-field">
            <i class="fa fa-sign-out"></i>
            <span data-i18n="require.label.mounted"></span>
        </label>
        <input type="text" id="node-input-field" placeholder="payload" style="width:275px;">
        <input type="hidden" id="node-input-fieldType">
    </div>

</script>

<script type="text/javascript">
    RED.nodes.registerType('require', {
        category: 'function',
        color: '#1b82f1',
        defaults: {
            name: {
                value: ""
            },
            module: {
                value: "",
                required: true
            },
            field: {
                value: "payload",
                required: true
            },
            fieldType: {
                value: "msg"
            },
        },
        inputs: 1,
        outputs: 1,
        icon: "file-out.svg",
        label: function () {
            return this.name || this.module || "require";
        },
        oneditprepare: function () {
            var that = this;
            if (!this.fieldType) {
                this.fieldType = 'msg';
            }
            $("#node-input-field").typedInput({
                default: 'msg',
                types: ['msg', 'flow', 'global'],
                typeField: $("#node-input-fieldType")
            });
        },
    });

</script>
<script type="text/html" data-help-name="require">
    <p>Require a module.</p>
    <p>For third party module, please <code>npm install third-party-module</code> first.</p>
    <p>For local module, use path to require it.</p>
    <p>The module must comply with the CommonJS specification.</p>

</script>

</div><div><!-- --- [red-module:node-red-contrib-spreadsheet-in/book] --- -->
<script type="text/javascript">
    RED.nodes.registerType('book',{
        category: 'Spreadsheet',
        color: "#DEBD5C",
        defaults: {
            name: {value:""},
            raw: {value:false}
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-file-excel-o",
        label: function() {
            return this.name||"book";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        inputLabels: function() {
            return this._("book.label.binaryBuffer");
        },
        outputLabels: function () {
            return this._("book.label.workbookObject");
        }
    });
</script>

<script type="text/x-red" data-template-name="book">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label><i class="fa fa-sign-out"></i> <span data-i18n="book.label.parse"></span></label>
        <input type="checkbox" id="node-input-raw" style="width:auto">
        <label for="node-input-raw" style="width:auto" data-i18n="book.label.raw"></label>
    </div>
</script>
<script type="text/x-red" data-help-name="book">
    <p>Converts the contents of a spreadsheet file to a workbook object.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload
            <span class="property-type">Buffer</span>
        </dt>
        <dd>a Buffer object of the contents of a spreadsheet file.</dd>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">object</span></dt>
        <dd>a workbook object decoded from the Buffer object.</dd>
    </dl>

    <h3>Details</h3>
    <p>If you want to read a spreadsheet file using file-in node, you should set the Output type property of the file-in node should be set to binary buffer.
        Otherwise, you will get an error in this node.</p>
    <p>If Parse property is checked, this node suppresses to interpret values from CSV and other plain text.</p>

    <h3>References</h3>
    <ul>
        <li><a href="https://sheetjs.gitbooks.io/docs/#sheetjs-js-xlsx" target="_blank">SheetJS js-xlsx</a> - full description of js-xlsx which this node is based on.</li>
        <li><a href="https://github.com/sakai-to/node-red-contrib-spreadsheet-in" target="_blank">GitHub</a> - the nodes github repository.</li>
    </ul>
</script>

</div><div><!-- --- [red-module:node-red-contrib-spreadsheet-in/sheet] --- -->
<script type="text/javascript">
    RED.nodes.registerType('sheet',{
        category: 'Spreadsheet',
        color: "#DEBD5C",
        defaults: {
            name: {value:""},
            sheetName: {value:"Sheet1"}
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-table",
        label: function() {
            return this.name||"sheet";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        inputLabels: function() {
            return this._("sheet.label.workbookObject");
        },
        outputLabels: function () {
            return this._("sheet.label.sheetObject");
        }
    });
</script>

<script type="text/x-red" data-template-name="sheet">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-sheetName"><i class="icon-tag"></i> <span data-i18n="sheet.label.sheetName"></span></label>
        <input type="text" id="node-input-sheetName" data-i18n="[placeholder]sheet.placeholder.sheetName">
    </div>
</script>
<script type="text/x-red" data-help-name="sheet">
    <p>Picks a sheet object from a workbook object.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload
            <span class="property-type">object</span>
        </dt>
        <dd>a workbook object from a book node.</dd>
        <dt class="optional">selectSheetName <span class="property-type">string</span></dt>
        <dd>If the Sheet name property is not configured in the node, this optional property sets a sheet name.</dd>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">object</span></dt>
        <dd>an object of a sheet which is named by the Sheet name property.</dd>
        <dt>selectedSheetName <span class="property-type">string</span></dt>
        <dd>the selected sheet name.</dd>
    </dl>

    <h3>Details</h3>
    <p>The Sheet name property or <code>msg.selectSheetName</code> property should be set the name of a sheet to pick from the workbook object.</p>

    <h3>References</h3>
    <ul>
        <li><a href="https://sheetjs.gitbooks.io/docs/#sheetjs-js-xlsx" target="_blank">SheetJS js-xlsx</a> - full description of js-xlsx which this node is based on.</li>
        <li><a href="https://github.com/sakai-to/node-red-contrib-spreadsheet-in" target="_blank">GitHub</a> - the nodes github repository.</li>
    </ul>
</script>

</div><div><!-- --- [red-module:node-red-contrib-spreadsheet-in/cell] --- -->
<script type="text/javascript">
    RED.nodes.registerType('cell',{
        category: 'Spreadsheet',
        color: "#DEBD5C",
        defaults: {
            name: {value:""},
            address: {value:""},
            dataType: {value:"w"}
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-square-o",
        label: function() {
            return this.name||"cell";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        inputLabels: function() {
            return this._("cell.label.sheetObject");
        },
        outputLabels: function () {
            return this._("cell.label.cellValue");
        }
    });
</script>

<script type="text/x-red" data-template-name="cell">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-address"><i class="fa fa-crosshairs"></i> <span data-i18n="cell.label.address"></span></label>
        <input type="text" id="node-input-address" data-i18n="[placeholder]cell.placeholder.address">
    </div>
    <div class="form-row">
        <label for="node-input-dataType"><i class="fa fa-sign-out"></i> <span data-i18n="cell.label.dataType"></span></label>
        <select id="node-input-dataType" style="width:70%">
            <option value="v" data-i18n="cell.dataType.v"></option>
            <option value="w" data-i18n="cell.dataType.w"></option>
            <option value="t" data-i18n="cell.dataType.t"></option>
            <option value="f" data-i18n="cell.dataType.f"></option>
            <option value="F" data-i18n="cell.dataType.F"></option>
            <option value="h" data-i18n="cell.dataType.h"></option>
            <option value="c" data-i18n="cell.dataType.c"></option>
            <option value="z" data-i18n="cell.dataType.z"></option>
            <option value="l" data-i18n="cell.dataType.l"></option>
            <option value="s" data-i18n="cell.dataType.s"></option>
            <option value="" data-i18n="cell.dataType.none"></option>
        </select>
    </div>
</script>
<script type="text/x-red" data-help-name="cell">
    <p>Picks a cell value from a sheet object.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload
            <span class="property-type">object</span>
        </dt>
        <dd>a sheet object from a sheet node.</dd>
        <dt class="optional">selectAddress <span class="property-type">string</span></dt>
        <dd>If the Address property is not configured in the node, this optional property sets an A1-style cell address.</dd>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">any</span></dt>
        <dd>the cell value as selecting the Data type property.</dd>
        <dt>selectedAddress <span class="property-type">string</span></dt>
        <dd>The A1-style address of the cell which the value is picked from.</dd>
    </dl>

    <h3>Details</h3>
    <p>The Address proprty or <code>msg.selectAddress</code> property should be set an A1-style cell address.</p>
    <p>Regarding the details for the Data type property, please see the <a href="https://sheetjs.gitbooks.io/docs/#cell-object" target="_blank">description of js-xlsx</a>.</p>

    <h3>References</h3>
    <ul>
        <li><a href="https://sheetjs.gitbooks.io/docs/#sheetjs-js-xlsx" target="_blank">SheetJS js-xlsx</a> - full description of js-xlsx which this node is based on.</li>
        <li><a href="https://github.com/sakai-to/node-red-contrib-spreadsheet-in" target="_blank">GitHub</a> - the nodes github repository.</li>
    </ul>
</script>

</div><div><!-- --- [red-module:node-red-contrib-spreadsheet-in/sheet-to-json] --- -->
<script type="text/javascript">
    RED.nodes.registerType('sheet-to-json',{
        category: 'Spreadsheet',
        color: "#DEBD5C",
        defaults: {
            name: {value:""},
            raw: {value:"false", required:true},
            range: {value:""},
            header: {value:"default", required:true},
            blankrows: {value:false, required:true}
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-sign-out",
        label: function() {
            return this.name||"sheet to json";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        inputLabels: function() {
            return this._("sheet-to-json.label.sheetObject");
        },
        outputLabels: function () {
            return this._("sheet-to-json.label.cellValues");
        }
    });
</script>

<script type="text/x-red" data-template-name="sheet-to-json">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-raw"><i class="fa fa-sign-out"></i> <span data-i18n="sheet-to-json.label.raw"></span></label>
        <select id="node-input-raw">
            <option value="false" data-i18n="sheet-to-json.raw.false"></option>
            <option value="true" data-i18n="sheet-to-json.raw.true"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-range"><i class="fa fa-th-large"></i> <span data-i18n="sheet-to-json.label.range"></span></label>
        <input type="text" id="node-input-range" data-i18n="[placeholder]sheet-to-json.placeholder.range">
    </div>
    <div class="form-row">
        <label for="node-input-header"><i class="fa fa-columns"></i> <span data-i18n="sheet-to-json.label.header"></span></label>
        <select id="node-input-header" style="width: 70%">
            <option value="1" data-i18n="sheet-to-json.header.1"></option>
            <option value="A" data-i18n="sheet-to-json.header.A"></option>
            <option value="default" data-i18n="sheet-to-json.header.default"></option>
        </select>
    </div>
    <div class="form-row">
        <label><i class="fa fa-bars"></i> <span data-i18n="sheet-to-json.label.blankrows"></span></label>
        <input type="checkbox" id="node-input-blankrows" style="width:auto">
        <label for="node-input-blankrows" style="width:auto" data-i18n="sheet-to-json.blankrows.include"></label>
    </div>
</script>
<script type="text/x-red" data-help-name="sheet-to-json">
    <p>Converts a sheet object to an array of JSON objects.</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload
            <span class="property-type">object</span>
        </dt>
        <dd>a sheet object from a sheet node.</dd>
        <dt class="optional">selectRange <span class="property-type">string</span></dt>
        <dd>If the Range property is not configured in the node, this optional property sets an A-1 based range.</dd>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">object</span></dt>
        <dd>an array of objects which represents cell values in the sheet object.</dd>
        <dt>selectedRange <span class="property-type">string</span></dt>
        <dd>the A-1 based range.</dd>
    </dl>

    <h3>Details</h3>
    <p>This node generates different types of JS objects. This node takes the following properties.</p>
    <p>The Data type property controls cell values to use raw values or formatted strings.</p>
    <p>The Range property or <code>msg.selectRange</code> property can be set an A-1 based range. If both are blank or undefined, the sheet range is used.</p>
    <p>The Header property controls output format.</p>
    <p>The Blank rows property controls to include blank lines in the output.</p>
    
    <h3>References</h3>
    <ul>
        <li><a href="https://sheetjs.gitbooks.io/docs/#sheetjs-js-xlsx" target="_blank">SheetJS js-xlsx</a> - full description of js-xlsx which this node is based on.</li>
        <li><a href="https://github.com/sakai-to/node-red-contrib-spreadsheet-in" target="_blank">GitHub</a> - the nodes github repository.</li>
    </ul>
</script>

</div><div><!-- --- [red-module:node-red-contrib-ui-media/ui_media] --- -->
<!--
 Copyright 2016-2017 Smart-Tech Controle e Automao

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

		 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->

<script type="text/javascript">
    RED.nodes.registerType('ui_media', {
        category: 'dashboard',
        color: 'rgb( 63, 173, 181)',
        defaults: {
            group: {
                type: 'ui_group',
                required: true
            },
            name: {value: ''},
            width: {
                value: 0,
                validate: function (v) {
                    var width = v || 0;
                    var currentGroup = $('#node-input-group').val() || this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error", !valid);

                    return valid;
                }
            },
            height: {value: 0},
            order: {value: 0},
            category: {value: ''},
            file: {value: ''},
            layout: {value: 'adjust'},
            showcontrols: {value: true},
            loop: {value: true},
            onstart: {value: false},
            scope: {value: 'local'},
  	    tooltip: {value: ''}
        },
        inputs: 1,
        outputs: 1,
        icon: "ui_image.png",
        paletteLabel: 'media',
        align: 'right',
        label: function () {
            return this.name || 'media';
        },
        labelStyle: function () {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: function () {
            const bt_category_cancel = $('#bt-category-cancel');
            const bt_category_save = $('#bt-category-save');
            const bt_media_cancel = $('#bt-media-cancel');

            var divCategory = $('#div-category');
            var divNewCategory = $('#div-new-category');
            var divFile = $('#div-file');
            var divNewFile = $('#div-new-file');

            const input_file = $('#node-input-file');
            const input_category = $('#node-input-category');
            const input_link = $('#node-input-link');
            const input_new_category = $("#node-input-new-category");
            const media_preview = $('#img-preview');
            const bar_progress = $("#progress-upload");

            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });

            var that = this;
            var filesToUpload = null;

            // ----- functions -----

            function copyLinkToClipboard() {
                var $temp = $("<input>");
                $("body").append($temp);
                var val = $("#node-input-link").val();
                $temp.val(val).select();
                document.execCommand("copy");
                $temp.remove();
                RED.notify('"' + val + '" copied to clipboard!', 'status', false, 1500);
            }

            function updateCategoryList(selected) {
                var input_category = $('#node-input-category');
                var input_file = $('#node-input-file');

                divNewCategory.hide();
                divCategory.show();
                divFile.hide();

                input_category.find("option").remove().end();
                input_category.append($("<option></option>").val("").text(""));

                $.getJSON('uimedia', function (categories) {

                    categories.forEach(function (category) {
                        let option = $("<option></option>");

                        if (selected == category) {
                            option.attr('selected', 'selected')
                        }

                        option.val(category);
                        option.text(category);

                        input_category.append(option);
                    });

                    updateMediaList();
                });
            }

            function updateMediaList() {

                var input_file = $('#node-input-file');
                var category = $('#node-input-category').val();

                divNewFile.hide();
                divFile.hide();

                input_file.find("option").remove().end();

                if(!category) return updateMediaPreview(); //leave it empty if there's no category

                $.getJSON("uimedia/" + category, function (medias) {

                    divFile.show();
                    medias.forEach(function (media) {

                        let option = $("<option></option>");

                        if (that.file == media) {
                            option.attr('selected', 'selected')
                        }

                        option.val(media);
                        option.text(media);

                        input_file.append(option);
                    });

                    updateMediaPreview();
                });
            }

            function getFileType (url) {
              return String(String(url).split('.').pop());
            }

            function updateMediaPreview() {
                var file = $('#node-input-file').val();
                var category = $('#node-input-category').val();
                var type = undefined;
                var media_preview = $("#img-preview");// img by default
                var unused = $("#video-preview"); // stores the other type of preview and hide it
                // checks which kind of preview code to show
                let url = category + "/" + file
                type = getFileType(url);
                if ((/(gif|jpg|jpeg|tiff|png)$/i).test(type)) {
                     media_preview = $("#img-preview");
                     unused = $("#video-preview");
                } else if ((/(mp4|webm|ogv)$/i).test(type)) {
                     media_preview = $("#video-preview");
                     unused = $("#img-preview");
                }

                if(category && file) {
                    media_preview.attr('src', 'uimedia/' + url);
                    unused.hide();
                    media_preview.show();
                    input_link.val(url)
                } else {
                    unused.hide();
                    media_preview.hide();
                    input_link.val('');
                }
            }

            function saveCategory() {

                //TODO: sanitize input

                let value = input_new_category.val();
                input_new_category.val('');

                if (!value) {
                    RED.notify("Invalid category", "error", false, 5000);
                    return;
                }

                $.ajax({
                    url: 'uimedia/' + value,
                    type: 'POST',
                    cache: false,
                    processData: false,
                    contentType: false,
                    xhr: function () {
                        var xhr = new window.XMLHttpRequest();
                        //Upload progress
                        bar_progress.val(0);
                        bar_progress.show();
                        xhr.upload.addEventListener("progress", function (evt) {
                            if (evt.lengthComputable) {
                                var percentComplete = evt.loaded / evt.total;
                                bar_progress.val(percentComplete * 100);
                            }
                        }, false);

                        return xhr;
                    },
                    success: function (data, textStatus) {
                        bar_progress.hide();
                        updateCategoryList(value);
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        bar_progress.hide();
                        RED.notify("Error API: " + errorThrown, "error", false, 5000);
                        updateCategoryList();
                    }
                });
            }

            function removeCategory() {
                var category = document.getElementById("node-input-category");
                if(!category) return;
                category = category.options[category.selectedIndex].value;
                $.ajax({
                    url: "uimedia/" + category,
                    type: 'DELETE',
                    cache: false,
                    processData: false,
                    contentType: false,
                    success: function (data, textStatus) {
                        updateCategoryList(undefined);
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        RED.notify("Error API: " + errorThrown, "error", false, 5000);
                        updateCategoryList();
                    }
                });
            };

            function uploadMedias(event) {

                let category = input_category.val();
                let validFiles = true;

                if(!category || !filesToUpload || !filesToUpload.length) return;

                $.each(filesToUpload, function (key, value) {
                    if (!(/\.(gif|jpg|jpeg|tiff|png|mp4|webm|ogv)$/i).test(value.name)) {
                        validFiles = false;
                    }
                });

                if (!validFiles) {
                    RED.notify("Incompatible File", "error", false, 5000);
                    $("#node-input-upload").val('');
                    filesToUpload = null;
                    return;
                }

                event.stopPropagation();
                event.preventDefault();

                var data = new FormData();

                $.each(filesToUpload, function (key, value) {
                    data.append(key, value);
                });

                var link = "uimedia/" + category + "/" + filesToUpload[0].name;

                $.ajax({
                    url: link,
                    type: 'POST',
                    data: data,
                    cache: false,
                    processData: false,
                    contentType: false,
                    xhr: function () {
                        var xhr = new window.XMLHttpRequest();
                        //Upload progress
                        bar_progress.val(0);
                        bar_progress.show();
                        xhr.upload.addEventListener("progress", function (evt) {
                            if (evt.lengthComputable) {
                                var percentComplete = evt.loaded / evt.total;
                                bar_progress.val(percentComplete * 100);
                            }
                        }, false);

                        return xhr;
                    },
                    success: function (data, textStatus) {
                        bar_progress.hide();
                        updateMediaList();
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        bar_progress.hide();
                        RED.notify("Error API: " + errorThrown, "error", false, 5000);
                        updateMediaList();
                    }
                });
            }

            function removeMedia() {

                let category = input_category.val();
                /* to-do: investigate why 'input_file.val()' Returns
                 * the file current being shown on the dashboard instead
                 * of the node currently being selected
                 */
                var file = document.getElementById("node-input-file");
                if(!file) return updateMediaList();

                file = file.options[file.selectedIndex].value;

                $.ajax({
                    url: 'uimedia/' + category + '/' + file,
                    type: 'DELETE',
                    cache: false,
                    processData: false,
                    contentType: false,
                    success: function (data, textStatus) {
                        updateMediaList()
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        RED.notify("Error API: " + errorThrown, "error", false, 5000);
                        updateMediaList();
                    }
                });
            }

            // ----- create tabs -------
      			var tabs = RED.tabs.create({
      				id: "node-config-media-endpoint-tabs",
      				onchange: function(tab) {
      					$("#node-media-edit-tabs").children().hide();
      					$("#" + tab.id).show();
      				}
      			});

      			tabs.addTab({
      				id: "media-endpoint-tab-config",
      				label: this._("ui_media.config.label.configuration")
      			});
      			tabs.addTab({
      				id: "media-endpoint-tab-file",
      				label: this._("ui_media.files.label.files")
      			});
            setTimeout(function() {
      				tabs.resize()
      			}, 0);

            $("#media-endpoint-tab-config").show();
            // ----- attach events -----

            $("#bt-copy").click(copyLinkToClipboard);

            RED.menu.init({
                id: "btn-category-options",
                options: [
                    {
                        id: "btn-category-new",
                        label: that._('ui_media.files.label.add-new'),
                        onselect: function () {
                            input_link.val('');
                            input_new_category.val('');

                            divCategory.hide();
                            divNewCategory.show();
                            divFile.hide();
                            divNewFile.hide();
                            media_preview.hide();

                            input_new_category.focus();
                        },
                    },
                    {
                        id: "btn-category-remove",
                        label: that._('ui_media.files.label.remove-category'),
                        onselect: function () {
                            var value = $('#node-input-category').val();

                            if (!value) return;

                            $("#node-dialog-confirm-remove-category").dialog("open");
                        },
                    }
                ]
            });

            RED.menu.init({
                id: "btn-media-options",
                options: [
                    {
                        id: "btn-media-new",
                        label: that._('ui_media.files.label.add-new'),
                        onselect: function () {
                            input_link.val('');
                            $("#node-input-upload").val('');
                            filesToUpload = null;

                            divFile.hide();
                            divNewFile.show();
                            media_preview.hide();
                        },
                    },
                    {
                        id: "btn-media-remove",
                        label: that._('ui_media.files.label.remove-media'),
                        onselect: function () {
                            var value = $('#node-input-file').val();

                            if (!value) return;

                            $("#node-dialog-confirm-remove-media").dialog("open");
                        },
                    }
                ]
            });

            bt_category_cancel.click(function(){
                updateCategoryList(input_category.val());
            });
            bt_category_save.click(saveCategory);

            input_category.change(updateMediaList);
            input_new_category.keypress(function (e) {
                if (e.which === 13) {
                    saveCategory();
                }
            });

            bt_media_cancel.click(updateMediaList);

            input_file.change(updateMediaPreview);

            $("#node-input-upload").on('change', function (event) {
                filesToUpload = event.target.files;
            });
            $("#bt-upload").click(uploadMedias);

            // -----------

            $("#node-dialog-confirm-remove-category").dialog({
                title: "Remove category",
                autoOpen: false,
                width: 550,
                height: "auto",
                buttons: [{
                        id: "bt-cancel-remove",
                        text: "Cancel",

                        click: function () {
                            $(this).dialog("close");
                        }
                    },
                    {
                        id: "bt-confirm-remove",
                        text: "Remove",
                        class: "primary",

                        click: function () {
                            removeCategory();
                            $(this).dialog("close");
                        }
                    }
                ]
            });
            $("#node-dialog-confirm-remove-media").dialog({
                title: "Remove media",
                autoOpen: false,
                width: 550,
                height: "auto",
                buttons: [{
                        id: "bt-cancel-remove",
                        text: "Cancel",

                        click: function () {
                            $(this).dialog("close");
                        }
                    },
                    {
                        id: "bt-confirm-remove",
                        text: "Remove",
                        class: "primary",

                        click: function () {
                            removeMedia();
                            $(this).dialog("close");
                        }
                    }
                ]
            });

            // -----------

            bar_progress.hide();
            updateCategoryList(that.category);
        }

    });
</script>

<script type="text/x-red" data-template-name="ui_media">
    <!-- Tabs -->
    <div class="form-row">
		    <ul style="background: #fff; min-width: 600px; margin-bottom: 20px;" id="node-config-media-endpoint-tabs"></ul>
	  </div>
    <!-- Tabs -->
    <div id="node-media-edit-tabs" style="min-height: 170px;">
      <div class="hide" id="node-dialog-confirm-remove-category">
          <p><strong>Warning:</strong> This will also delete all medias inside. This action cannot be undone. Are you sure?</p>
      </div>
      <div class="hide" id="node-dialog-confirm-remove-media">
          <p><strong>Warning:</strong> This action cannot be undone. Are you sure?</p>
      </div>

      <div id="media-endpoint-tab-config" style="display:none">
        <!-- Group -->
        <div class="form-row" id="template-row-group">
            <label for="node-input-group">
                <i class="fa fa-table"></i> <span data-i18n="ui_media.config.label.group"></span></label>
            <input type="text" id="node-input-group" data-i18n="ui_media.config.label.group">
        </div>
        <!-- Group -->

        <!-- Size -->
        <div class="form-row" id="template-row-size">
            <label>
                <i class="fa fa-object-group"></i> <span data-i18n="ui_media.config.label.size"></span></label>
            <input type="hidden" id="node-input-width">
            <input type="hidden" id="node-input-height">
            <button class="editor-button" id="node-input-size"></button>
        </div>
        <!-- Size -->

        <!-- Layout -->
        <div class="form-row">
            <label><i class="fa fa-th-large"></i> <span data-i18n="ui_media.config.layouts.layout"></span></label>
            <select style="width:70%" id="node-input-layout">
                <option value="adjust" data-i18n="ui_media.config.layouts.adjust"></option>
                <option value="center" data-i18n="ui_media.config.layouts.center"></option>
                <option value="expand" data-i18n="ui_media.config.layouts.expand"></option>
                <option value="side" data-i18n="ui_media.config.layouts.side-by-side"></option>
            </select>
        </div>
        <!-- Layout -->

	<!-- Tooltip -->
        <div class="form-row">
           <label for="node-input-tooltip">
           <i class="fa fa-tag"></i> <span data-i18n="ui_media.files.label.tooltip"></span></label>
           <input type="text" id="node-input-tooltip" data-i18n="[placeholder]ui_media.files.label.tooltip" placeholder="Tooltip">
        </div>
        <!-- Tooltip -->

        <!-- Video Opions --->
        <div class="form-row">
          <div class="form-row">
            <label for="node-input-tosidebar"><span data-i18n="ui_media.files.label.video-options"></span></label>
            <label for="node-input-onstart" style="width:70%">
              <input type="checkbox" id="node-input-onstart" style="display:inline-block; width:22px; vertical-align:baseline;"><span data-i18n="ui_media.files.label.run-on-start"></span>
            </label>
          </div>
          <div class="form-row">
            <label ></label>
            <label for="node-input-showcontrols" style="width:70%">
              <input type="checkbox" id="node-input-showcontrols" style="display:inline-block; width:22px; vertical-align:baseline;"><span data-i18n="ui_media.files.label.show-controls"></span>
            </label>
          </div>
          <div class="form-row">
            <label></label>
            <label for="node-input-loop" style="width:70%">
              <input type="checkbox" id="node-input-loop" style="display:inline-block; width:22px; vertical-align:baseline;"><span data-i18n="ui_media.files.label.loop"></span>
            </label>
          </div>
        </div>
        <!-- Video Opions --->

        <!-- Name -->
        <div class="form-row">
            <label for="node-input-name">
                <i class="fa fa-tag"></i> <span data-i18n="ui_media.config.label.name"></span></label>
            <input type="text" id="node-input-name" data-i18n="[placeholder]ui_media.config.label.name" placeholder="Name">
        </div>
        <!-- Name -->
      </div>

      <!-- File Tab -->
      <div id="media-endpoint-tab-file" style="display:none">
        <!-- Category -->
        <div id="div-category" class="form-row">
            <label for="node-input-category"><i class="fa fa-tag"></i> <span data-i18n="ui_media.files.label.category"></span></label>
            <div style="display: inline-block; position: relative; width: 70%; height: 20px;">
                <div style="position: absolute; left: 0px; right: 50px;">
                    <select style="width:100%" id="node-input-category">
                    </select>
                </div>
                <div class="btn-group" style="position: absolute; right: 0px; top: 0px;">
                    <a id="btn-category-options" class="editor-button red-ui-button" data-toggle="dropdown">
                        <i class="fa fa-book"></i>
                        <i class="fa fa-caret-down"></i>
                    </a>
                </div>
            </div>
        </div>
        <!-- Category -->

        <!-- New Category -->
        <div id="div-new-category" class="form-row">
            <label for="node-input-new-category"><i class="fa fa-tag"></i><span data-i18n="ui_media.files.label.category"></span></label>
            <div style="display: inline-block; position: relative; width: 70%; height: 20px;">
                <div style="position: absolute; left: 0px; right: 75px;">
                    <input style="width:100%" type="text" id="node-input-new-category">
                </div>
                <div class="btn-group" style="position: absolute; right: 35px; top: 0px;">
                    <a id="bt-category-save" class="editor-button"><i class="fa fa-check"></i></a>
                </div>
                <div class="btn-group" style="position: absolute; right: 0px; top: 0px;">
                    <a id="bt-category-cancel" class="editor-button"><i class="fa fa-times"></i></a>
                </div>
            </div>
        </div>
        <!-- New Category -->

        <!-- File -->
        <div id="div-file" class="form-row">
            <label for="node-input-file"><i class="fa fa-file-media-o"></i><span data-i18n="ui_media.files.label.file"></span></label>
            <div style="display: inline-block; position: relative; width: 70%; height: 20px;">
                <div style="position: absolute; left: 0px; right: 50px;">
                    <select style="width:100%" id="node-input-file">
                    </select>
                </div>
                <div class="btn-group" style="position: absolute; right: 0px; top: 0px;">
                    <a id="btn-media-options" class="editor-button red-ui-button" data-toggle="dropdown">
                        <i class="fa fa-book"></i>
                        <i class="fa fa-caret-down"></i>
                    </a>
                </div>
            </div>
        </div>
        <!-- File -->

        <!-- New Media -->
        <div id="div-new-file" class="form-row">
            <label><i class="fa fa-file-media-o"></i></label>
            <div style="display: inline-block; position: relative; width: 70%; height: 20px;">
                <div style="position: absolute; left: 0px; right: 75px;">
                    <input type="file" id="node-input-upload" name="fileuploadfile" style="width: 100%" accept="media/*" multiple>
                </div>
                <div class="btn-group" style="position: absolute; right: 35px; top: 0px;">
                    <a id="bt-upload" class="editor-button"><i class="fa fa-upload"></i></a>
                </div>
                <div class="btn-group" style="position: absolute; right: 0px; top: 0px;">
                    <a id="bt-media-cancel" class="editor-button"><i class="fa fa-times"></i></a>
                </div>
            </div>
        </div>
        <!-- New Media -->

        <div class="form-row">
            <progress style="width: 95%; height: 5px" id="progress-upload" value="0" min="0" max="100"></progress>
        </div>

        <!-- Link -->
        <div class="form-row">
            <label for="node-input-link"><i class="fa fa-link"></i> <span data-i18n="ui_media.config.label.link"></span></label>
            <div style="display: inline-block; position: relative; width: 70%; height: 20px;">
                <div style="position: absolute; left: 0px; right: 40px;">
                    <input style="width:100%" type="text" id="node-input-link" readonly>
                </div>
                <div class="btn-group" style="position: absolute; right: 0px; top: 0px;">
                    <a id="bt-copy" class="editor-button">
                        <i class="fa fa-clipboard"></i>
                    </a>
                </div>
            </div>
        </div>
        <!-- Link -->

        <div class="formkk-row" style="text-align: left">
            <label style="padding: 5px"><span data-i18n="ui_media.files.label.preview"></span></label>
            <hr>
        </div>

        <div class="form-row" style="text-align: center">
            <img id="img-preview" style="height:auto; width:90%" src="">
            <video id="video-preview" controls style="height:auto; width:90%" src="">
        </div>
      </div>
    </div>
</script>


<script type="text/x-red" data-help-name="ui_media">
    <p>Displays media files and URLs on the Dashboard</p>

    <h3>Input</h3>
    <dl class="message-properties">
        <dt>payload
            <span class="property-type">object | string | Buffer</span>
        </dt>
        <dd>
            Selects which media will be displayed. It should be a string exactly 
            like the <i>Link</i> field displays on the configuration panel, an
            object with the <code>category</code> and <code>name</code> properties,
            or a Buffer, whose content will be displayed according to the 
            <code>mimetype</code> specified

            <h5>Examples:</h5>
            <pre>
{
    payload: "category/file name"
}
            </pre>
            <pre>
{
    payload: {
        category: "category", 
        name: "file name"
    } 
}
            </pre>
        </dd>

        <dt>src 
            <span class="property-type">string</span>
        </dt>
        <dd>
            Allows to directly set a full URL to be displayed. This takes precedence
            over the <code>payload</code> property. Note that security policies of 
            your browser or from the server where the media is hosted may prevent 
            it from being correctly displayed. 

            <h5>Examples:</h5>
            <code>{ src: "https://http.cat/200.jpg" }</code>
        </dd>

        <dt>layout
            <span class="property-type">string</span>
        </dt>
        <dd>
            Overrides the current layout being used. Can be either
            <code>adjust</code>, <code>center</code>, <code>side</code> or
            <code>expand</code>.
        </dd>
        
        <dt>play
          <span class="property-type">boolean</span>
        </dt>
        <dd>
            When playing a video, sending a message with the <code>play</code>
            property allows the video to be played or paused, whether its value 
            is <code>true</code> or <code>false</code>
        </dd>

        <dt>onstart
            <span class="property-type">boolean</span>
        </dt>
        <dd>
            Controls whether a video should start playing as soon as loaded.
            Overrides the <i>Run on start</i> option set on the configuration panel
        </dd>

        <dt>loop
            <span class="property-type">boolean</span>
        </dt>
        <dd>
            Controls whether a video should play in loop
            Overrides the <i>Loop</i> option set on the configuration panel
        </dd>

        <dt>controls
            <span class="property-type">boolean</span>
        </dt>
        <dd>
            Controls whether the video control buttons (like play button, volume, etc) 
            should be displayed. Overrides the <i>Show controls</i> option set on the 
            configuration panel
        </dd>

        <dt>mimetype
            <span class="property-type">string</span>
        </dt>
        <dd>
            Allows the media type to be pre-determined. This property is mandatory when
            <code>payload</code> is of type Buffer, because the media type cannot be 
            inferred from the Buffer's content alone.
            <h5>Examples:</h5>
            <ul>
                <li>Sending a PNG Image: <code>"image/png"</code></li>
                <li>Sending a JPG Image: <code>"image/jpeg"</code></li>
            </ul>
        </dd>

    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload
           <span class="property-type">object</span>
        </dt>
        <dd>
            When an image is clicked, all values relate to the clicked position
            are sent as the output payload
        </dd>
    </dl>

    <h3>Details</h3>
    <dl class="message-properties">
        <p>
            This node allows displaying images, audio and video files on the
            Dashboard, handling the upload of files and serving them to the
            Dashboard users
        </p>
        <p>
            In the <b>Configuration</b> tab, besides the common dashboard placement
            rules, the <i>Layout</i> configuration allows the disposition of an image 
            to be controlled, and the <i>Video Options</i> set options regarding video
            playback
        </p>
        <p>
            The media files can be uploaded on the <b>Files</b> tab, where categories
            can be created and files can be uploaded to Node-RED, so that they can be 
            served to the Dashboard later. The <i>Link</i> field then generates the 
            string that should be sent on <code>payload</code> for displaying that 
            particular media. You can also leave no media selected (after uploading
            them), so that no media is displayed by default when deploying.
        </p>
    </dl>
</script>
</div><div><!-- --- [red-module:node-red-contrib-uibuilder/uibuilder] --- -->
<script type="text/html" data-template-name="uibuilder"><div class="form-row tabs-row"><ul id="tabs"></ul></div><div id="tabs-content" x-style="border-bottom: 1px solid silver; padding-bottom: 1em; margin-bottom: 1em;"><div id="tab-core"><div id="url-input" aria-label="Home 'page' id. Defines the URL used" class="form-row" title="Make sure this gives a unique URL. Also used as a folder name for resources."><label for="node-input-url"><i class="fa fa-globe"></i> URL</label> <input type="text" id="node-input-url" title="Cannot be 'templates. Cannot contain: space _ / \\ ..'" placeholder="Required. <20 chars. Unique"></div><div id="info" aria-label="Information and utility links" class="form-row" style="display: flex; justify-content: space-between; width:450px"><a id="uibuilderurl" title="Open the uibuilder web page" href="uibindex" target="_blank" class="red-ui-button editor-button">Open Webpage</a> <a href="./uibuilder/uibindex" target="_blank" class="red-ui-button editor-button" title="Shows available libraries, configuration and other detailed uibuilder information">uibuilder details</a> <a id="uibinstanceconf" href="./uibuilder/instance/_url_?cmd=showinstancesettings" target="_blank" class="red-ui-button editor-button" title="Shows detailed configuration for this instance of uibuilder">Instance Details</a> <a href="./uibuilder/techdocs" target="_blank" class="red-ui-button editor-button" title="Shows the uibuilder technical documentation as a new page">Tech Docs</a></div><div id="info-webserver" class="form-row" style="width:450px"></div><div aria-label="Node Name" class="form-row" title="Node Name (descriptive only)"><label for="node-input-name"><i class="fa fa-tag"></i> Name</label> <input type="text" id="node-input-name"></div><div aria-label="Topic" class="form-row" title="Adds a msg.topic to input msgs if not already provided"><label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label> <input type="text" id="node-input-topic"></div><h4>Template Settings</h4><div aria-label="Template selector" class="form-row"><label for="node-input-templateFolder" style="width:100px;"><i class="fa fa-window-restore"></i> Template</label> <select id="node-input-templateFolder" style="width:70%;"></select></div><div aria-label="Hidden unless external template is selected above" id="et-input" class="form-row" title="Input a Degit compatible repository name. e.g. totallyinformation&sol;uib-template-test" style="display:none"><label for="node-input-extTemplate"><i class="fa fa-globe"></i> External</label> <input type="text" id="node-input-extTemplate" placeholder="totallyinformation/uib-template-test"></div><div aria-label="Button to load new template" class="form-row"><label for="btn-load-template" style="width:100px;"></label> <button class="btn" id="btn-load-template" style="margin-top: 0.3em;" title="Load selected template, overwriting existing files">Load & Overwrite Files</button></div><div aria-label="How to use the template selector" class="form-row" style="max-width: 450px"><p>By default, uibuilder creates a template folder with a minimal template. If you wish to use a different template, select and load it here.</p><p>Selecting a Template from the drop-down <b>does not</b> load the template</p><p>Loading a Template <b>will overwrite</b> existing files.</p></div></div><div id="tab-files"><div aria-label="Drop-down for selecting folder & new, del buttons" class="form-row" title="Choose between the src, dist (built src) or root folders"><label for="node-input-folder" style="width:5em;"><i class="fa fa-folder-open-o"></i> Folder:</label> <select id="node-input-folder" style="width:63%;"></select> <span id="fldr-buttons"><button class="btn" id="btn-fldr-new" title="Add a new folder">New</button><div id="fldr-new-dialog" title="Create a new folder" dialog><label for="fldr-input-newname">New Folder Name</label> <input type="text" id="fldr-input-newname"><div title="" style="margin-top:.5em;">New folder will be created inside <code>&lt;uibRoot>/<span id="fldr_url">&lt;url></span></code>.<br>Do not forget to include sub-folder name if needed.<br>e.g. <code>src/mynewfldr</code></div></div><button class="btn" id="btn-fldr-del" title="Delete the selected folder">Del</button><div id="fldr-del-dialog" title="Delete the currently selected folder" dialog><b>Folder to be deleted</b><p><code id="fldr-del-name"></code></p><p id="fldr-del-recopy"></p><p style="border:2px solid brown;color:brown;font-weight:bold;padding:5px 5px;">Warning: This action cannot be undone.<br>If you delete the <code>src</code> or <code>dist</code> folders some things might not work correctly.</p></div></span></div><div aria-label="Drop-down for selecting file to edit" class="form-row"><label for="node-input-filename" style="width:5em;"><i class="fa fa-file-code-o"></i> File:</label> <select id="node-input-filename" style="width: 83%;"></select></div><div aria-label="Save, Reset, close, (message), Delete" class="form-row"><button class="btn" id="edit-save" title="Save any changes to the file">Save</button> <button class="btn" id="edit-reset" title="Reset any changes to last saved version (cancel changes)">Reset</button> <span id="file-action-message"></span><div style="position: absolute;right:1.6em;display:inline-block;"><button class="btn" id="edit-new" title="Add a new file.">New</button><div dialog id="edit_new_dialog" title="Create a new file"><label for="edit-input-newname">New File Name</label> <input type="text" id="edit-input-newname"><div style="margin-top:.5em;">New file will be created inside the <code>&lt;uibRoot>/<span id="file_url">&lt;url></span>/<span id="file_fldr">&lt;folder></span></code> folder.<br>You can include a sub-folder name if needed. Intermediate folders will be automatically created.<br>e.g. <code>src/mynewfldr/myfile.js</code></div></div><button class="btn" id="edit-delete" title="Delete the file. Will reset to the default template if Copy from templates flag is set.">Delete</button><div id="edit_delete_dialog" title="Delete the currently selected file" dialog><b>File to be deleted</b><p><code id="edit-delete-name"></code></p><p id="edit-delete-recopy"></p><p style="border:2px solid brown;color:brown;font-weight:bold;padding:5px 5px;">Warning: This action cannot be undone.</p></div></div></div><div aria-label="Edit box editor-tray-content" id="edit-outer" class="form-row node-text-editor-row" style="position:relative"><div style="height: 350px; min-height:150px;" class="node-text-editor" id="node-input-template-editor"></div><div style="height: 350px; min-height:150px;" style="display:hidden" id="node-input-template-editor-no-file">No file available, please select a different file or folder.</div></div><div aria-label="File data (hidden), language selector" class="form-row"><button id="node-function-expand-js" class="editor-button"><i class="fa fa-expand"></i></button> <input type="checkbox" id="node-input-reload" style="width:auto;" title="If set, all connected clients will reload the page they are on when any change is saved."> <label for="node-input-reload" style="width:80%;">Reload connected clients on save?.</label> <input type="hidden" id="node-input-template" data-isclean="true"><div style="position: absolute; right:1.6em;display:inline-block; text-align: right;"><select id="node-input-format" style="width:110px; padding:0;"><option value="text">Text</option><option value="html">HTML</option><option value="javascript">Javascript</option><option value="json">JSON</option><option value="css">CSS</option><option value="scss">SCSS</option><option value="handlebars">mustache</option><option value="markdown">Markdown</option><option value="yaml">YAML</option></select></div></div></div><div id="tab-libraries"><p>Install, remove or update npm packages that provide front-end libraries such as VueJS, jQuery, MoonJS, etc.<br>Search for packages on <a href="https://www.npmjs.com/" target="_blank" style="color:var(--red-ui-text-color-link);text-decoration:underline;">official npm site</a> or <a href="https://npms.io/" target="_blank" style="color:var(--red-ui-text-color-link);text-decoration:underline;">npms.io</a>.</p><div aria-label="Package List Container" class="form-row" id="package-list-container"><ol id="node-input-packageList"></ol></div></div><div id="tab-advanced"><div aria-label="Select source folder" class="form-row" title="Select the folder to serve files from"><label for="node-input-sourceFolder" style="width:7em;"><i class="fa fa-folder"></i> Serve:</label> <select id="node-input-sourceFolder" style="width:73%;"><option value="src">src</option><option value="dist">dist</option></select></div><div class="form-row" title="If turned on, an index page showing all available files is created. This can be a security vulnerability and not recommended in Production."><input type="checkbox" id="node-input-showfolder" style="display: inline-block; width: auto; vertical-align: top;"> <label for="node-input-showfolder" style="width: 90%;">Show web view of source files (deploy before you can use it)</label> <span id="show-src-folder-idx-url">_</span>.</div><div class="form-row" title="Add msg.script&sol;msg.style to the input msg. This can be a security issue as the data is NOT VETTED.">Allow passing to the front-end:<br><input type="checkbox" id="node-input-allowScripts" style="display: inline-block; width: auto; vertical-align: top;"> <label for="node-input-allowScripts">Scripts? (JS)</label> <input type="checkbox" id="node-input-allowStyles" style="display: inline-block; width: auto; vertical-align: top;"> <label for="node-input-allowStyles">Styles? (CSS)</label></div><div class="form-tips node-help" title="">Warning: Most people will not need the following.</div><div aria-label="Forward flag" class="form-row" title="forward inbound msg's direct to the output"><input type="checkbox" id="node-input-fwdInMessages" style="display: inline-block; width: auto; vertical-align: top;"> <label for="node-input-fwdInMessages" style="width: 40%;">Forward input to output?</label></div></div></div></script><script>!function(){"use strict";const e="127.0.0.1"===location.hostname,i=e?console.log:function(){};if(i("[uibuilder] DEBUG ON (because running on localhost)"),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),i=t.length,o=new Array(i);i--;)o[i]=[t[i],e[t[i]]];return o}),!Object.values){const x=Function.bind.call(Function.call,Array.prototype.reduce),D=Reflect.ownKeys,R=Function.bind.call(Function.call,Array.prototype.concat),C=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable);Object.values=function(i){return x(D(i),(e,t)=>R(e,"string"==typeof t&&C(i,t)?[i[t]]:[]),[])}}const r="blank",o={};var a=[],n=RED.settings.uibuilderInstances;const u={format:"html",folder:"src",fname:"index.html",fullscreen:!1};function t(o){if(""===o||"string"!=typeof o)return"No package";RED.notify("Starting removal of npm package "+o),$("i.spinner").show(),$.get("uibuilder/uibnpmmanage?cmd=remove&package="+o,function(e){!0===e.success?(console.log("[uibuilder:removePackageRow:get] PACKAGE REMOVED. ",o),RED.notify("Successfully uninstalled npm package "+o,"success"),a[o]&&delete a[o]):(console.log("[uibuilder:removePackageRow:get] ERROR ON PACKAGE REMOVAL ",e.result),RED.notify("FAILED to uninstall npm package "+o,"error"),$("#node-input-packageList").editableList("addItem",o)),$("i.spinner").hide()}).fail(function(e,t,i){return console.error("[uibuilder:removePackageRow:get] Error "+t,i),RED.notify("FAILED to uninstall npm package "+o,"error"),$("#node-input-packageList").editableList("addItem",o),$("i.spinner").hide(),"removePackageRow failed"})}function c(e){let t="text",i=e.split(".");if(""===i[0]&&i.shift(),1<i.length){var o=i.pop().toLowerCase().trim();switch(o){case"js":t="javascript";break;case"html":case"css":case"json":t=o;break;case"vue":t="html";break;case"md":t="markdown";break;case"yaml":case"yml":t="yaml";break;default:t=o}}return t}function l(e){$("#edit-save").prop("disabled",e),$("#edit-reset").prop("disabled",e),$("#edit-close").prop("disabled",!e),$("#node-edit-file").prop("disabled",!e),$("#node-input-filename").prop("disabled",!e),$("#node-dialog-ok").prop("disabled",!e),$("#node-dialog-cancel").prop("disabled",!e),e?($("#node-dialog-ok").css("cursor","pointer"),$("#node-dialog-cancel").css("cursor","pointer")):($("#file-action-message").text("Save Required"),$("#node-dialog-ok").css("cursor","not-allowed"),$("#node-dialog-cancel").css("cursor","not-allowed"))}function p(){var e=$("#node-input-url").val(),t=$("#node-input-folder").val(),i=(null===t&&(t=localStorage.getItem("uibuilder."+e+".folder")||u.folder),$("#node-input-filename").val()),o=(null===i&&(i=localStorage.getItem("uibuilder."+e+".selectedFile")||u.fname),u.folder=t,u.fname=i,localStorage.setItem("uibuilder."+e+".folder",u.folder),localStorage.setItem("uibuilder."+e+".selectedFile",u.fname),u.format=c(i));$("#node-input-format").val(o),$.get("uibuilder/uibgetfile?url="+e+"&fname="+i+"&folder="+t,function(e){$("#node-input-template-editor").show(),$("#node-input-template-editor-no-file").hide(),u.editorSession.setValue(e),u.editorSession.setMode({path:"ace/mode/"+o,v:Date.now()}),u.editorSession.getUndoManager().isClean(),u.editor.focus()}).fail(function(e,t,i){console.error("[uibuilder:getFileContents:get] Error "+t,i),u.editorSession.setValue(""),$("#node-input-template-editor").hide(),$("#node-input-template-editor-no-file").show()}).always(function(){l(!0),$("#node-input-format option:selected").length||$("#node-input-format").val("text")})}function d(d){var a=$("#node-input-url").val(),s=$("#node-input-folder").val(),e=$("#node-input-filename").val();null===(d=void 0===d?e:d)&&(d=localStorage.getItem("uibuilder."+a+".selectedFile")||void 0),null===s&&(s=localStorage.getItem("uibuilder."+a+".folder")||void 0),$("#node-input-filename option").remove(),$("#node-input-folder option").remove(),$.ajax({type:"GET",dataType:"json",url:"./uibuilder/admin/"+a,data:{cmd:"listall"}}).done(function(e,t,i){let o="",r=!1,n=!1;var l=Object.keys(e).sort(),l=($.each(l,function(e,t){""===t&&(t="root"),$("#node-input-folder").append($("<option>",{value:t,text:t}))}),e[s]||(s=e.src?"src":"root"),$("#node-input-folder").val(s),u.folder=s,localStorage.setItem("uibuilder."+a+".folder",s),e[s]);$.each(l,function(e,t){$("#node-input-filename").append($("<option>",{value:t,text:t})),0===e&&(o=t),t===u.fname&&(r=!0),t===d&&(n=!0)}),!0===n?u.fname=d:!0===r?u.fname="index.html":u.fname=o,$("#node-input-filename").val(u.fname),u.format=c(u.fname),localStorage.setItem("uibuilder."+a+".selectedFile",u.fname)}).fail(function(e,t,i){console.error("[uibuilder:getFileList:getJSON] Error "+t,i),u.fname="",u.format="text",RED.notify("uibuilder: Folder and file listing error.<br>"+i,{type:"error"})}).always(function(){p()})}function s(){let e;if(!0===u.editorLoaded){if(document.fullscreenElement)$("#edit-props").css("background-color","#f6f6f6").css("padding","1em"),e=parseInt($("#edit-props").css("height"),10),e-=25,$("#node-function-expand-js").css("background-color","black").html('<i class="fa fa-compress"></i>'),u.fullscreen=!0;else{if("auto"===$("#edit-outer").css("top"))return;$("#edit-props").css("background-color","").css("padding",""),e=$(".red-ui-tray-footer").position().top-$("#edit-outer").offset().top-35,$("#node-function-expand-js").css("background-color","").html('<i class="fa fa-expand"></i>'),u.fullscreen=!1}for(var t=$("#edit-props > div:not(.node-text-editor-row)"),i=0;i<t.length;i++)e-=$(t[i]).outerHeight(!0);$("#node-input-template-editor").css("height",e+"px"),u.editor.resize()}}function f(){var e=RED.settings.get("auth-tokens");const t=new XMLHttpRequest;var i="fname="+$("#node-input-filename").val()+"&folder="+$("#node-input-folder").val()+"&url="+$("#node-input-url").val()+"&reload="+$("#node-input-reload").prop("checked")+"&data="+encodeURIComponent(u.editorSession.getValue());t.open("POST","uibuilder/uibputfile",!0),t.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&(200===this.status?($("#file-action-message").text("File Saved"),l(!0)):$("#file-action-message").text("File Save FAILED"))},t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e&&t.setRequestHeader("Authorization","Bearer "+e.access_token),t.send(i)}function b(e){$.ajax({type:"GET",async:!1,dataType:"json",url:"./uibuilder/admin/_",data:{cmd:"listinstances"},success:function(e){n=e}}),e&&(e.isDeployed=void 0!==n[e.id])}function m(e,t=!0){!0===t?($("#node-input-templateFolder, #btn-load-template").prop("disabled",!1).css({cursor:"pointer"}),$("#red-ui-tab-tab-files, #red-ui-tab-tab-libraries, #red-ui-tab-tab-security, #red-ui-tab-tab-advanced, info").css({cursor:"pointer"}),$("#red-ui-tab-tab-files>a, #red-ui-tab-tab-libraries>a, #red-ui-tab-tab-security>a, #red-ui-tab-tab-advanced>a, info>a").prop("disabled",!1).css({"pointer-events":"auto",cursor:"pointer",opacity:1}),$("#uibuilderurl, #uibinstanceconf").prop("disabled",!1).css({cursor:"pointer",opacity:1}),$("#url-errors").remove()):($("#node-input-templateFolder, #btn-load-template").prop("disabled",!0).css({cursor:"not-allowed"}),$("#red-ui-tab-tab-files, #red-ui-tab-tab-libraries, #red-ui-tab-tab-security, #red-ui-tab-tab-advanced, info").css({cursor:"not-allowed"}),$("#red-ui-tab-tab-files>a, #red-ui-tab-tab-libraries>a, #red-ui-tab-tab-security>a, #red-ui-tab-tab-advanced>a, info>a").prop("disabled",!0).css({"pointer-events":"none",cursor:"not-allowed",opacity:.3}),$("#uibuilderurl, #uibinstanceconf").prop("disabled",!0).css({cursor:"not-allowed",opacity:.3}),$("#url-errors").remove(),$("#url-input").after(`
                    <div id="url-errors" class="form-row" style="color:var(--red-ui-text-color-error)">
                        ${Object.values(e).join("<br>")} 
                    </div>
                `))}function h(){var e,t=$("#node-input-templateFolder").val();if(RED.settings.uibuilderTemplates[t]){const i=RED.settings.uibuilderTemplates[t].dependencies||[],o=[];i.forEach(e=>{a[e]||o.push(e)}),0<o.length&&(e=RED.notify(`WARNING<br /><br />The selected uibuilder template (${t}) is MISSING the following dependencies:<div> ${o.join(", ")}</div><br />Please install them using the uibuilder Library Manager or select a different template.`,{type:"warning",modal:!0,fixed:!0,buttons:[{text:"OK",class:"primary",click:function(){e.close()}}]}))}else console.error("[uibuilder:checkDependencies] Template name not found: "+t)}function g(){var o=RED.notify(`WARNING<br /><br />
                Are you <b>SURE</b> you want to overwrite your code
                with the template <b><code>${$("#node-input-templateFolder").val()}</code></b>?<br /><br />
                <b>THIS CANNOT BE UNDONE.</b>`,{type:"warning",modal:!0,fixed:!0,buttons:[{text:"Cancel, don't overwrite",class:"primary",click:function(){o.close()}},{text:"OK, overwrite",click:function(){var e,t,i;e=$("#node-input-templateFolder").val(),t=$("#node-input-extTemplate").val(),i=$("#node-input-url").val(),$.ajax({type:"POST",dataType:"json",url:"./uibuilder/admin/"+i,data:{template:e,extTemplate:t,cmd:"replaceTemplate"}}).done(function(e,t,i){return RED.notify(`<b>uibuilder</b>:<br><br>${i.statusText}<br>`,{type:"success"}),"Template load succeeded"}).fail(function(e,t,i){return console.error("[uibuilder:loadTemplate] Error "+t,i),RED.notify(`<b>uibuilder</b>:<br><br>Template Load Error.<br><br>${i}<br>`,{type:"error"}),"Template load failed"}),o.close()}}]})}function y(i){$("#adv-templ").hide(),$("#show-templ-props").css("cursor","pointer"),$("#show-templ-props").on("click",function(){$("#adv-templ").toggle(),$("#adv-templ").is(":visible")?$("#show-templ-props").html('<i class="fa fa-caret-down"></i> Template Settings'):$("#show-templ-props").html('<i class="fa fa-caret-right"></i> Template Settings')});{var o=i;let e=o.templateFolder,t=[];RED.settings&&RED.settings.uibuilderTemplates?t=RED.settings.uibuilderTemplates:console.error("[uibuilder:populateTemplateDropdown] Cannot access RED.settings for node "+o.id),Object.values(t).forEach(e=>{$("#node-input-templateFolder").append($("<option>",{value:e.folder,text:e.name}))}),t[e]||(e=r),$(`#node-input-templateFolder option[value="${e}"]`).prop("selected",!0),$("#node-input-templateFolder").val(e),$("#node-templSel-info").text(t[e].description),e}h(),"external"===$("#node-input-templateFolder").val()&&$("#et-input").show(),$("#node-input-templateFolder").on("change",function(){RED.settings.uibuilderTemplates[i.templateFolder]&&$("#node-templSel-info").text(RED.settings.uibuilderTemplates[i.templateFolder].description),h(),"external"===$("#node-input-templateFolder").val()?$("#et-input").show():$("#et-input").hide()}),$("#btn-load-template").on("click",function(e){e.preventDefault(),g()})}function v(){return $(".red-ui-tray-footer").position().top-$("#package-list-container").offset().top+25}function w(d){$("#node-input-packageList").editableList({addItem:function(i,o,r){{var n=d,l=o;o=r;let e="",t;return e=0===Object.entries(o).length?`
                    <div>
                        <label for="packageList-input-${l}" style="width:3em;">Name:</label>
                        <input type="text" id="packageList-input-${l}" title="" style="width:80%" placeholder="Valid npm package name">
                    </div>
                    <div>
                        <label for="packageList-tag-${l}" style="width:3em;">Tag:</label>
                        <input type="text" id="packageList-tag-${l}" title="" style="width:80%" placeholder="npm: @tag/version, GH: #branch/tag">
                    </div>
                    <div>
                        <label for="packageList-button-${l}" style="width:3em;"></label>
                        <button id="packageList-button-${l}" style="width:5em;">Install</button>
                    </div>
                `:(t=a[o],`
                    <div id="packageList-row-${l}" class="packageList-row-data">
                        <a href="${t.homepage}" target="_blank" title="Click to open homepage in a new tab"><b>${o}</b></a>, <span title="${t.spec}">${t.installedVersion}</span>
                        <br>
                        URL to use: <code style="white-space:inherit;" title="NB: The actual resource is an estimate, check the package docs for the actual entry point">
                            ${t.url}
                        </code>
                    </div>
                `),$(e).appendTo(i),0===Object.entries(o).length&&($("#packageList-input-"+l).tooltip({content:'Enter one of:<ul><li>An npm package name (optionally with leading)</li><li>A GitHub user/repo</li><li>A filing system path to a local package</li></ul>Ensure that you select the correct "From" dropdown.'}),$("#packageList-ver-"+l).tooltip({content:"Optional. Branch, Tag or Version to install (defaults to @latest)"})),void $("#packageList-button-"+l).on("click",function(){$("i.spinner").show();var o=String($("#packageList-input-"+l).val()),e=String($("#packageList-tag-"+l).val());0!==o.length&&(RED.notify("Installing npm package "+o),$.get(`uibuilder/uibnpmmanage?cmd=install&package=${o}&url=${n.url}&tag=`+e,function(e){var t=e.result[0];!0===e.success?(a=e.result[1],console.log("[uibuilder:addPackageRow:get] PACKAGE INSTALLED. ",o,n.url,"\n\n",t,"\n "),RED.notify(`Successful installation of npm package ${o} for `+n.url,"success"),$("#node-input-packageList").editableList("empty"),$("#node-input-packageList").editableList("addItems",Object.keys(a))):(console.log("[uibuilder:addPackageRow:get] ERROR ON INSTALLATION OF PACKAGE ",o,n.url,"\n\n",t,"\n "),RED.notify(`FAILED installation of npm package ${o} for `+n.url,"error")),$("i.spinner").hide()}).fail(function(e,t,i){return console.error("[uibuilder:addPackageRow:get] Error "+t,i),RED.notify(`FAILED installation of npm package ${o} for `+n.url,"error"),$("i.spinner").hide(),"addPackageRow failed"}))})}},removeItem:t,header:$("<div>").append("<b>Installed Packages (Install again to update)</b>"),height:v(),addButton:!0,removable:!0,scrollOnAdd:!0,sortable:!1}),$("#node-input-packageList").editableList("empty"),$("#node-input-packageList").editableList("addItems",Object.keys(a)),$(".red-ui-editableList-addButton").after(' <i class="spinner"></i>'),$("i.spinner").hide()}function E(o){const e=RED.tabs.create({id:"tabs",scrollable:!1,collapsible:!1,onchange:function(e){switch($("#tabs-content").children().hide(),$("#"+e.id).show(),e.id){case"tab-files":var t=o;if(d(),!0!==u.editorLoaded){""!==$("#node-input-template").val("")&&$("#node-input-template").val(""),u.editor=RED.editor.createEditor({id:"node-input-template-editor",mode:"ace/mode/"+u.format,value:t.template}),u.editorSession=u.editor.getSession(),u.editor.on("input",function(){l(u.editorSession.getUndoManager().isClean())}),u.editorLoaded=!0;const i=document.getElementsByClassName("red-ui-editor-text-container");i.item(0).addEventListener("keydown",e=>{!0===e.ctrlKey&&"s"===e.key&&(e.preventDefault(),f())}),s(),p(),l(!0)}break;case"tab-libraries":w(o)}}});e.addTab({id:"tab-core",label:"Core"}),e.addTab({id:"tab-files",label:"Files"}),e.addTab({id:"tab-libraries",label:"Libraries"}),e.addTab({id:"tab-advanced",label:"Advanced"})}function k(t){$.ajax({dataType:"json",method:"get",url:"uibuilder/uibvendorpackages",async:!1,success:function(e){a=e}}),void 0!==t.templateFolder&&""!==t.templateFolder||(t.templateFolder=r),i=t,$("#node-input-fwdInMessages").prop("checked",i.fwdInMessages),$("#node-input-allowScripts").prop("checked",i.allowScripts),$("#node-input-allowStyles").prop("checked",i.allowStyles),$("#node-input-copyIndex").prop("checked",i.copyIndex),$("#node-input-showfolder").prop("checked",i.showfolder),$("#node-input-useSecurity").prop("checked",i.useSecurity),$("#node-input-allowUnauth").prop("checked",i.allowUnauth),$("#node-input-tokenAutoExtend").prop("checked",i.tokenAutoExtend),$("#node-input-reload").prop("checked",i.reload),E(t),$(`#node-input-sourceFolder option[value="${t.sourceFolder||"src"}"]`).prop("selected",!0),$("#node-input-sourceFolder").val(t.sourceFolder||"src"),$("#node-input-showfolder").on("change",function(){!1===$(this).is(":checked")?$("#show-src-folder-idx-url").hide():$("#show-src-folder-idx-url").show()}),y(t);{var i=t;let e;const o=window.origin.split(":");i.nodeRoot=RED.settings.httpNodeRoot.replace(/^\//,""),$("#info-webserver").empty(),e=!0===RED.settings.uibuilderCustomServer.isCustom?(o[0]=RED.settings.uibuilderCustomServer.type.replace("http2","https"),o[2]=RED.settings.uibuilderCustomServer.port,i.nodeRoot="","a custom"):"Node-RED's",i.urlPrefix=o.join(":")+"/"+i.nodeRoot,$("#info-webserver").append(`<div class="form-tips node-help">uibuilder is using ${e} webserver at ${i.urlPrefix} </div>`)}$("#node-input-url").on("change",function(){!function(e){var t=$(this).val();$("#uibuilderurl").prop("href",""+e.urlPrefix+t).text("Open "+e.nodeRoot+t),$("#uibinstanceconf").prop("href",`./uibuilder/instance/${t}?cmd=showinstancesettings`),$("#show-src-folder-idx-url").empty().append(`<div>at 
                        <a href="${e.urlPrefix}${t}/idx" target="_blank" 
                                style="color:var(--red-ui-text-color-link);text-decoration:underline;">
                            ${e.nodeRoot}${t}/idx
                        </a>
                    </div>`)}.call(this,t)}),void 0!==t.url&&""!==t.url||m(t.urlErrors,Object.keys(t.urlErrors).length<1),l(!0),$("#node-input-folder").change(function(){d()}),$("#node-input-filename").change(function(){p()}),$("#fldr-new-dialog_new").addClass("input-error").prop("disabled",!0),$("#fldr-input-newname").addClass("input-error").on("input",function(){0===$("#fldr-input-newname").val().length?($("#fldr-input-newname").addClass("input-error"),$("#fldr").addClass("input-error").prop("disabled",!0)):($("#fldr-input-newname").removeClass("input-error"),$("#fldr-new-dialog_new").removeClass("input-error").prop("disabled",!1))}),$("#fldr-new-dialog").dialog({autoOpen:!1,modal:!0,closeOnEscape:!0,buttons:[{text:"Create",id:"fldr-new-dialog_new",click:function(){var e,t;e=$("#fldr-input-newname").val(),t=$("#node-input-url").val(),$.ajax({type:"POST",dataType:"json",url:"./uibuilder/admin/"+t,data:{folder:e,cmd:"newfolder"}}).done(function(){return RED.notify(`uibuilder: Folder <code>${e}</code> Created.`,{type:"success"}),d(),"Create folder succeeded"}).fail(function(e,t,i){return RED.notify("uibuilder: Create Folder Error.<br>"+i,{type:"error"}),"Create folder failed"}),$("#fldr-input-newname").val(null).addClass("input-error"),$("#fldr-new-dialog_new").addClass("input-error").prop("disabled",!0),$(this).dialog("close")}},{text:"Cancel",click:function(){$("#fldr-input-newname").val(null).addClass("input-error"),$("#fldr-new-dialog_new").addClass("input-error").prop("disabled",!0),$(this).dialog("close")}}]}).keyup(function(e){e.keyCode==$.ui.keyCode.ENTER&&$("#fldr_new_dialog_new").trigger("click")}),$("#btn-fldr-new").on("click",function(){$("#fldr_url").html($("#node-input-url").val()),$("#fldr-new-dialog").dialog("open")}),$("#fldr-del-dialog").dialog({autoOpen:!1,modal:!0,closeOnEscape:!0,buttons:[{text:"Delete",id:"fldr-del-dialog_del",click:function(){var e,t;e=$("#node-input-url").val(),t=$("#node-input-folder").val(),$.ajax({type:"DELETE",dataType:"json",url:"./uibuilder/admin/"+e,data:{folder:t,cmd:"deletefolder"}}).done(function(){return RED.notify(`uibuilder: Folder <code>${t}</code> deleted.`,{type:"success"}),d(),"Delete folder succeeded"}).fail(function(e,t,i){return console.error("[uibuilder:deleteFolder:delete] Error "+t,i),RED.notify("uibuilder: Delete Folder Error.<br>"+i,{type:"error"}),"Delete folder failed"}),$(this).dialog("close")}},{text:"Cancel",click:function(){$(this).dialog("close")}}]}),$("#btn-fldr-del").on("click",function(){$("#fldr-del-dialog_del").addClass("input-error").css("color","brown"),$("#fldr-del-name").text($("#node-input-folder").val()),"src"===$("#node-input-folder").val()?$("#node-input-copyIndex").is(":checked")?$("#fldr-del-recopy").css("color","").text("Copy flag is set so the src folder will be recreated and the index.(html|js|css) files will be recopied from the master template."):$("#fldr-del-recopy").css("color","brown").text("Copy flag is NOT set so the src folder will NOT be recopied from the master template."):$("#fldr-del-recopy").css("color","").text(""),$("#fldr-del-dialog").dialog("open")}),$("#edit-reset").on("click",function(e){e.preventDefault(),p(),$("#file-action-message").text("")}),$("#edit-save").on("click",function(e){e.preventDefault(),f()}),$("#edit_delete_dialog").dialog({autoOpen:!1,modal:!0,closeOnEscape:!0,buttons:[{text:"Delete",id:"edit_del_dialog_del",click:function(){var e,t,i;e=$("#node-input-folder").val()||u.folder,t=$("#node-input-url").val(),i=$("#node-input-filename").val(),$.ajax({type:"DELETE",dataType:"json",url:"./uibuilder/admin/"+t,data:{folder:e,fname:i,cmd:"deletefile"}}).done(function(){return RED.notify(`uibuilder: File <code>${e}/${i}</code> Deleted.`,{type:"success"}),d(i),"Delete file succeeded"}).fail(function(e,t,i){return console.error("[uibuilder:deleteFile:delete] Error "+t,i),RED.notify("uibuilder: Delete File Error.<br>"+i,{type:"error"}),"Delete file failed"}),$(this).dialog("close")}},{text:"Cancel",click:function(){$(this).dialog("close")}}]}),$("#edit-delete").on("click",function(){$("#edit_del_dialog_del").addClass("input-error").css("color","brown"),$("#edit-delete-name").text($("#node-input-folder").val()+"/"+$("#node-input-filename").val()),"src"===$("#node-input-folder").val()?$("#node-input-copyIndex").is(":checked")?$("#edit-delete-recopy").css("color","").text("Copy flag is set so index.(html|js|css) files will be recopied from master template."):$("#edit-delete-recopy").css("color","brown").text("Copy flag is NOT set so index.(html|js|css) files will NOT be recopied from master template."):$("#edit-delete-recopy").css("color","").text(""),$("#edit_delete_dialog").dialog("open")}),$("#edit_new_dialog_new").addClass("input-error").prop("disabled",!0),$("#edit-input-newname").addClass("input-error").on("input",function(){0===$("#edit-input-newname").val().length?($("#edit-input-newname").addClass("input-error"),$("#edit_new_dialog_new").addClass("input-error").prop("disabled",!0)):($("#edit-input-newname").removeClass("input-error"),$("#edit_new_dialog_new").removeClass("input-error").prop("disabled",!1))}),$("#edit_new_dialog").dialog({autoOpen:!1,modal:!0,closeOnEscape:!0,buttons:[{text:"Create",id:"edit_new_dialog_new",click:function(){var e,t,i;e=$("#edit-input-newname").val(),t=$("#node-input-folder").val()||u.folder,i=$("#node-input-url").val(),$.ajax({type:"POST",dataType:"json",url:"./uibuilder/admin/"+i,data:{folder:t,fname:e,cmd:"newfile"}}).done(function(){return RED.notify(`uibuilder: File <code>${t}/${e}</code> Created.`,{type:"success"}),d(e),"Create file succeeded"}).fail(function(e,t,i){return console.error("[uibuilder:createNewFile:post] Error "+t,i),RED.notify("uibuilder: Create File Error.<br>"+i,{type:"error"}),"Create file failed"}),$("#edit-input-newname").val(null).addClass("input-error"),$("#edit_new_dialog_new").addClass("input-error").prop("disabled",!0),$(this).dialog("close")}},{text:"Cancel",click:function(){$("#edit-input-newname").val(null).addClass("input-error"),$("#edit_new_dialog_new").addClass("input-error").prop("disabled",!0),$(this).dialog("close")}}]}).keyup(function(e){e.keyCode==$.ui.keyCode.ENTER&&$("#edit_new_dialog_new").click()}),$("#edit-new").on("click",function(){$("#file_url").html($("#node-input-url").val()),$("#file_fldr").html($("#node-input-folder").val()),$("#edit_new_dialog").dialog("open")}),$("#node-function-expand-js").on("click",function(e){e.preventDefault();var i=u.editor.getValue();RED.editor.editText({mode:$("#node-input-format").val(),value:i,width:"Infinity",cursor:u.editor.getCursorPosition(),complete:function(e,t){u.editor.setValue(e,-1),u.editor.gotoLine(t.row+1,t.column,!1),setTimeout(function(){u.editor.focus(),e!==i&&l(!1)},300)}})})}RED.events.on("nodes:add",function(e){"uibuilder"===e.type&&(o[e.id]=e.url)}),RED.events.on("nodes:change",function(e){"uibuilder"===e.type&&(i("nodes:change:",e),o[e.id]=e.url)}),RED.events.on("nodes:remove",function(e){"uibuilder"===e.type&&(i(">> nodes:remove >>",e),delete o[e.id])}),RED.nodes.registerType("uibuilder",{category:"uibuilder",color:"#E6E0F8",defaults:{name:{value:""},topic:{value:""},url:{required:!0,validate:function(e){b(this),this.urlErrors={},this.urlDeployedChanged=n[this.id]!==e,this.urlChanged=this.url!==e;let t=Object.values(n).indexOf(e);return this.urlDeployedDup=-1<t&&Object.keys(n)[t]!==this.id,t=Object.values(o).indexOf(e),this.urlEditorDup=-1<t&&Object.keys(o)[t]!==this.id,!1===this.isDeployed&&!0===this.urlEditorDup&&(this.urlErrors.config="Pasted or imported, URL must be changed",e="",this.url=this.oldUrl=void 0,$("#node-input-url").val(""),i("[uib] >> Copy/Paste >>",this.id,"this.url:",this.url,", value:",e,", this.oldUrl:",this.oldUrl)),void 0===e&&(this.urlErrors.config="Not yet configured, valid URL needed"),void 0===e||""===e?this.urlErrors.none="Must not be empty":(20<e.length&&(this.urlErrors.len="Too long, must be <= 20 chars"),-1!==e.indexOf("..")&&(this.urlErrors.dbldot="Cannot contain <code>..</code> (double-dot)"),-1!==e.indexOf("/")&&(this.urlErrors.fslash="Cannot contain <code>/</code>"),-1!==e.indexOf("\\")&&(this.urlErrors.bslash="Cannot contain <code>\\</code>"),-1!==e.indexOf(" ")&&(this.urlErrors.sp="Cannot contain spaces"),"_"===e.substring(0,1)&&(this.urlErrors.strtU="Cannot start with <code>_</code> (underscore)"),"."===e.substring(0,1)&&(this.urlErrors.strtDot="Cannot start with <code>.</code> (dot)"),"templates"===e.toLowerCase().substring(0,9)&&(this.urlErrors.templ='Cannot be "templates"'),"uibuilder"===e.toLowerCase()&&(this.urlErrors.uibname='Cannot be "uibuilder" (since v5)')),!0===this.urlDeployedDup&&(this.urlErrors.dup="Cannot be a URL already deployed"),!0===this.urlEditorDup&&(this.urlErrors.dup="Cannot be a URL already in use"),void 0!==e&&""!==e&&(this.folderExists=function(e){if(void 0===e)return!1;let o=!1;return $.ajax({type:"GET",async:!1,dataType:"json",url:"./uibuilder/admin/"+e,data:{cmd:"checkfolder"},success:function(e){o=e},error:function(e,t,i){"Not Found"!==i&&console.error("[uibuilder:queryFolderExists] Error "+t,i),o=!1}}),o}(e),!0===this.folderExists&&!0===this.urlChanged&&(i(">> folder already exists >>",this.url,this.id),RED.notify(`<b>WARNING</b>: <p>The folder for the chosen URL (${e}) is already exists.<br>It will be adopted by this node.</p>`,{type:"warning"})),!1===this.folderExists&&(this.urlErrors.fldNotExist="URL does not yet exist. You must Deploy first.<br>If changing a deployed URL, the folder will be renamed on Deploy")),this.isDeployed&&!0===this.deployedUrlChanged&&(i("[uib] >> deployed url changed >> this.url:",this.url,", this.oldUrl:",this.oldUrl,this.id),this.urlErrors.warnChange=`Renaming from ${this.url} to ${e}. <b>MUST</b> redeploy now`,RED.notify(`<b>NOTE</b>: <p>You are renaming the url from ${this.url} to ${e}.<br>You <b>MUST</b> redeploy before doing anything else.</p>`,{type:"warning"})),0<Object.keys(this.urlErrors).length?(this.urlValid=!1,m(this.urlErrors,!1)):(this.urlValid=!0,m(this.urlErrors,!0)),!(1!==Object.keys(this.urlErrors).length||!this.urlErrors.fldNotExist)||this.urlValid}},fwdInMessages:{value:!1},allowScripts:{value:!1},allowStyles:{value:!1},copyIndex:{value:!0},templateFolder:{value:r},extTemplate:{value:""},showfolder:{value:!1},oldUrl:{value:void 0},reload:{value:!1},sourceFolder:{value:"src",required:!0},deployedVersion:{validate:function(){return!(void 0!==this.url&&(void 0===this.deployedVersion?"0":this.deployedVersion)<RED.settings.uibuilderRedeployNeeded&&RED.settings.uibuilderCurrentVersion>RED.settings.uibuilderRedeployNeeded)||(RED.notify(`<i>uibuilder ${this.url}</i><br>uibuilder has been updated since you last deployed this instance. Please deploy now.`,{modal:!1,fixed:!1,type:"warning"}),!(this.mustChange=!0))}}},credentials:{jwtSecret:{type:"password"}},inputs:1,inputLabels:"Msg to send to front-end",outputs:2,outputLabels:["Data from front-end","Control Msgs from front-end"],icon:"ui_template.png",paletteLabel:"uibuilder",label:function(){var e=this.url?`<${this.url}>`:"<no url>";return(this.name?this.name+" ":"")+e},oneditprepare:function(){k(this)},oneditsave:function(){i("[uib] >> this >>",this),!0===u.editorLoaded&&(u.editor.destroy(),delete u.editor,u.editorLoaded=!1);let e;(e=""!==$("#node-input-url").val()?$("#node-input-url").val():e)!==this.url?(this.oldUrl=this.url,i(`>> oneditsave URL CHANGED >> New=${$("#node-input-url").val()}, Old=`+this.url)):void 0!==this.oldUrl&&(this.oldUrl=void 0),(this.changed||this.mustChange)&&(this.deployedVersion=RED.settings.uibuilderCurrentVersion)},oneditcancel:function(){!0===u.editorLoaded&&(u.editor.destroy(),delete u.editor,u.editorLoaded=!1)},oneditresize:function(){s();try{$("#node-input-packageList").editableList("height",v())}catch(e){}},oneditdelete:function(){if(b(this),i("[uib] >> deleting >> isDeployed? ",this.isDeployed,void 0!==n[this.id]),this.isDeployed){const t=this;let e=RED.notify(`<b>DELETE</b>: <p>You are deleting a uibuilder instance with url <i>${this.url}</i>.<br>Would you like to also delete the folder?<br><b>WARNING</b>: This cannot be undone.</p>`,{modal:!0,fixed:!0,type:"warning",buttons:[{text:"Yes",click:function(){$.ajax({type:"PUT",dataType:"json",url:"./uibuilder/admin/"+t.url,data:{cmd:"deleteondelete"}}).fail(function(e,t,i){console.error("[uibuilder:oneditdelete:PUT] Error "+t,i),RED.notify("uibuilder: Request url folder delete - error.<br>Folder will not be deleted, please delete manually.<br>"+i,{type:"error"})}),e.close(),RED.notify(`The folder <i>${t.url}</i> will be deleted when you redeploy.`,{type:"compact"})}},{text:"NO",class:"primary",click:function(){e.close()}}]})}}})}();</script><script type="text/html" data-help-name="uibuilder"><p>Easily create a data-driven web user interface (UI)<br><br>Create dynamic, data-driven user interfaces that send and receive messages to/from Node-RED. Creates a file/folder structure that is used to deliver static resources (html, css, js, images, etc) and manages the delivery of vendor library resources (VueJS, jQuery, etc).</p><p id="uib_help_docs">Detailed technical documentation can be found <a href="./uibuilder/techdocs" target="_blank">HERE</a>.</p><p>Specific information on how to use the front-end library: <a href="./uibuilder/techdocs/#/front-end-library" target="_blank">uibuilderfe</a></p><p>Still more information is available in the <a href="https://github.com/TotallyInformation/node-red-contrib-uibuilder/wiki/" target="_blank">uibuilder WIKI</a>.</p><h3>Status display</h3><p>Each instance (node) of uibuilder has a status display. Normally, the icon is blue. When 1 or more clients are connected, the text will show how many clients are connected.</p><h3>Inputs</h3><dl class="message-properties"><dt class="optional">payload <span class="property-type">string | buffer</span></dt><dd>Optionally, the payload of the message to send to all connected client browser tabs.</dd><dt class="optional">_uib <span class="property-type">object</span></dt><dd>Optionally, trigger low-code front-end events such as showing a "toast". See the <a href="./uibuilder/techdocs/#/security?id=msg_uib-object-uibuilder-v3" target="_blank">Using uibuilder page in the technical docs</a> for specifics.<br>Also used to <a href="uibuilder/techdocs/#/pre-defined-msgs?id=browser-client-reload-page" target="_blank">signal to the front-end that the page should reload automatically</a>. Useful when developing front-end code via the node's editor.</dd><dt class="optional">topic <span class="property-type">string</span></dt><dd>Optionally, the MQTT topic to use. Takes preference over the topic defined in settings.</dd><dt class="optional">script <span class="property-type">string | string[]</span></dt><dd>Optionally, a string or array of strings containing valid JavaScript. This will be added to the web page dynamically. Currently contains minimal validation so care is required. This feature is <b>off</b> by default, turn on in the Advanced Settings.</dd><dt class="optional">style <span class="property-type">string | string[]</span></dt><dd>Optionally, a string or array of strings containing valid CSS for styling the front-end page. This will be added to the web page dynamically. Currently contains minimal validation so care is required. This feature is <b>off</b> by default, turn on in the Advanced Settings.</dd></dl><h3>Outputs</h3><ol class="node-ports"><li>Standard output (data from front-end)<dl class="message-properties"><dt>payload <span class="property-type">string | buffer</span></dt><dd>Data sent by the front-end page.</dd><dt class="optional">uibDomEvent <span class="property-type">object</span></dt><dd>Used by the <code>uibuilder.eventSend()</code> front-end function. See the <a href="./uibuilder/techdocs/#/security?id=msguibdomevent-object-uibuilder-v32" target="_blank">Using uibuilder page in the technical docs</a> for specifics.</dd><dt>topic <span class="property-type">string</span></dt><dd>A copy of the last inbound topic if present. Otherwise, the topic from the node's settings. Could also be changed by the front-end.</dd><dt>_socketId <span class="property-type">string</span></dt><dd>Identifies the sending browser/tab. Retain this if needing to send a reply back to the originator. Remove if needing to send a reply to all connected broweser/tabs.<br>Notes:<table><tr><td>The initial part of the ID contains the source URI.</td></tr><tr><td>The socket id may change if the client temporarily looses the connection or if the user reloads the page.</td></tr></table></dd><dt>other</dt><dd>Note that any inbound msg.script or msg.style is stripped and not sent to the output.</dd></dl><p>Note that input messages are not forwarded to the output unless the flag is set in the advanced settings.</p></li><li>Control output (controls from front-end or server)<dl class="message-properties"><dt>uibuilderCtrl <span class="property-type">string</span></dt><dd>The name/id of the control message. See the <a href="https://github.com/TotallyInformation/node-red-contrib-uibuilder/wiki/Control-Message-Structure" target="_blank">WIKI page</a> for details.</dd><dt>cacheControl <span class="property-type">string</span></dt><dd>Use in your flow to control the sending or clearing of a cache of messages to be sent to new/refreshed clients.<br>This requires a separate function node to capture and replay inbound messages.<table><tr><th>REPLAY</th><td>Indicate to the back-end flow that a copy of the cached messages should be dumped to the front-end. Retaining the <code>_socket.id</code> will send the cache contents back to the requesting client.<hr></td></tr><tr><th>CLEAR</th><td>Indicate to the back-end flow that any cache should be completely cleared for everyone.</td></tr></table>See the <a href="https://github.com/TotallyInformation/node-red-contrib-uibuilder/wiki/Message-Caching" target="_blank">WIKI</a> for details.</dd><dt>from <span class="property-type">string</span></dt><dd>Identifies the source of the msg since both <i>server</i> (back-end) and <i>client</i> (front-end) control messages will appear out of port #2.</dd><dt>_socketId <span class="property-type">string</span></dt><dd>Identifies the sending browser/tab. Retain this if needing to send a reply back to the originator. Remove if needing to send a reply to all connected broweser/tabs.<br>Notes:<table><tr><td>The initial part of the ID contains the source URI.</td></tr><tr><td>The socket id may change if the client temporarily looses the connection or if the user reloads the page.</td></tr></table></dd></dl></li></ol><h3>Node Settings</h3><dl class="message-properties"><dt>Name <span class="property-type">string</span></dt><dd>A short description shown in the admin interface</dd><dt>Topic <span class="property-type">string</span></dt><dd>A topic name to use if the incoming msg does not contain one.</dd><dt>URL <span class="property-type">string</span></dt><dd>The URL path that the resulting page and other resources will be served from. Must be unique across Node-RED. Will also use the Node-RED scheme (http/https) and port. Will also be prefixed by the Node-RED setting <i>httpNodeRoot</i>.<br>The default URL is <a href="/uibuilder" target="_blank">/uibuilder</a>.<br>The url is also used to define the server filing system path for front-end code files.<br>The url must be valid as a filename as well as a url path. It may not exceed 20 characters.</dd><dt>Edit Source Files <span class="property-type">button</span></dt><dd>Clicking this button will hide the above settings and display a file editor allowing you to edit the front-end files that define your user interface.<br>All text-based files in the <code>&lt;uibRoot>/&lt;url>/</code> folder on the server's filing system will be available to edit.<br>To return back, click the red <kbd class="help-key">Done</kbd> or grey <kbd class="help-key">Cancel</kbd> buttons.<p>Note that you can expand the edit panel by clicking on the <kbd class="help-key">&#x2921;</kbd> arrow button underneath the panel. To exit fullscreen, press the same button (now highlighted) or the <kbd class="help-key">Esc</kbd> key.</p></dd><dt>Manage Front-End Libraries <span class="property-type">button</span></dt><dd>Clicking this button will hide the above settings and display a list of currently available front-end library packages. This interface allows you to add, remove and update any library that can be installed via <a href="https://www.npmjs.com/" target="_blank">npm</a>.<br>Libraries will be loaded into your <code>&lt;userDir>/</code> folder in the same place as custom nodes. uibuilder retains an internal list of front-end libraries loaded this way. Each library will be served so that you can use it in your front-end html.</dd></dl><h4>Template Settings</h4><dl class="message-properties"><dt>Template <span class="property-type">drop-down</span></dt><dd>Select one of the built-in templates or load an external template.</dd><dt>Ext. Template <span class="property-type">text</span></dt><dd>Only if "Load an external template using Degit" is selected. <a href="https://github.com/Rich-Harris/degit" target="_blank">Degit</a> is used to load a template from an external <code>git</code> repository.<br>Try "totallyinformation/uib-template-test" as an example.</dd><dt>Load & Overwrite <span class="property-type">button</span></dt><dd>Clicking the button will display a warning dialog. If you accept the warning, all of your current front-end code will be replaced with the template.</dd></dl><h4>Advanced Settings</h4><dl class="message-properties"><dt>Serve <span class="property-type">drop-down</span></dt><dd>Choose which folder to serve files from. Only <code>src</code> and <code>dist</code> are available at the moment. This can now be changed simply by redeploying your flow, you don't need to restart Node-RED.</dd><dt>Show web view of source files <span class="property-type">check box</span></dt><dd>If on, an extra web page is dynamically created at the indicated URL. That page shows an index listing of all files and folders on the server for this node. As this could be a security issue, it is turned off by default.<br><code>USE WITH EXTREME CAUTION</code><br>A button is exposed if this flag is on. Clicking the button will take you to the index view in a separate tab.</dd><dt>Allow scripts to be passed to front-end? <span class="property-type">check box</span></dt><dd>If on, any string(s) in <code>msg.script</code> will be dynamically added to the scripts of the web page. Turn off to prevent scripts from being dynamically added and executed.</dd><dt>Allow styles to be passed to front-end? <span class="property-type">check box</span></dt><dd>If on, any string(s) in <code>msg.style</code> will be dynamically added to the styles of the web page. Turn off to prevent styles from being dynamically added.</dd><dt>Forward input to output? <span class="property-type">check box</span></dt><dd>Forwards a copy of every received message direct to the output. Adds the topic from the above setting if one isn't present in the msg.<p><i>Note</i> that this may result in multiple output messages if your front-end code also auto-sends inbound messages.</p></dd></dl><h4>Button Row</h4><dl class="message-properties"><dt>Open xxxx <span class="property-type">link</span></dt><dd>The web app url for this instance. Click to see the app page in a new tab.</dd><dt>uibuilder details <span class="property-type">link</span></dt><dd>Shows a web page with detailed information about the overall uibuilder configuration. Including details of all of the vendor modules that are available and all of the uibuilder endpoints along with both server and URL paths.</dd><dt>Instance Details <span class="property-type">link</span></dt><dd>Shows a web page with detailed information relavent just for this instance (node) of uibuilder. May be easier to read than the full details.</dd><dt>Tech Docs <span class="property-type">link</span></dt><dd>Opens the technical documentation for uibuilder in a separate tab. This does not require an Internet connection, the local docs are used.</dd></dl><h4>Information Box</h4><p>The final display on the settings panel shows information about whether uibuilder is using Node-RED's internal ExpressJS server or is using its own custom server. It also shows the url.</p><h3>File/Folder Structure</h3><p>For more information, see the GitHub page for <a href="https://github.com/TotallyInformation/node-red-contrib-uibuilder" target="_blank">node-red-contrib-uibuilder</a></p><h3>Details</h3><p>For more information, see the GitHub page for <a href="https://github.com/TotallyInformation/node-red-contrib-uibuilder" target="_blank">node-red-contrib-uibuilder</a></p><p>There are also examples of how to use uibuilder in the <a href="https://github.com/TotallyInformation/node-red-contrib-uibuilder/wiki" target="_blank">GitHub WIKI</a>.</p><p>uibuilder can be discussed in the <a href="https://discourse.nodered.org/" target="_blank">Node-RED Forum</a> and in the <a href="https://node-red.slack.com/messages/C7K77MG06" target="_blank">Node-RED #uibuilder Slack channel</a>. Issues/bugs can be raised in <a href="https://github.com/TotallyInformation/node-red-contrib-uibuilder/issues" target="_blank">GitHub</a>.</p><h3>Admin Index (Details) page</h3><p>The <a href="uibindex" target="_blank">&lt;admin url&gt;/uibindex</a> page lists all of the uibuilder endpoints and other details. You can use the following parameters:</p><dl class="message-properties"><dt>type <span class="property-type">(string)</span></dt><dd>The type of the data returned.<dl class="message-properties"><dt>html <span class="property-type">(default)</span></dt><dd>Also used if no type parameter is given. Returns an HTML page showing the details for all deployed uibuilder nodes. Shows the server file locations of the instance and for vendor libraries.</dd><dt>json</dt><dd>Returns JSON data with both the source node ID's and matching URL's.</dd><dt>urls</dt><dd>Returns a JSON array of just the URL's in use from deployed uibuilder nodes. Used internally to ensure that new nodes use unique url's.</dd></dl></dd><dt>check <span class="property-type">(string)</span></dt><dd>Passing a uibuilder instance name to the check parameter will result in a boolean (true/false) return. True if it is being delivered by a uibuilder instance, false otherwise. e.g. <code>?check=uibuilder</code></dd></dl><ul></ul></script>
</div><div><!-- --- [red-module:node-red-contrib-uibuilder/uib-sender] --- -->
<script type="text/javascript">/* eslint-disable strict */

// Isolate this code
(function () {
    'use strict'

    /** Module name must match this nodes html file @constant {string} moduleName */
    const moduleName  = 'uib-sender'
    /** Node's label @constant {string} paletteCategory */
    const nodeLabel  = 'uib-sender'
    /** Node's palette category @constant {string} paletteCategory */
    const paletteCategory  = 'uibuilder'
    /** Node's background color @constant {string} paletteColor */
    const paletteColor  = '#E6E0F8'

    /** Get all of the current uibuilder URL's */
    function getUrls() {
        $.ajax({
            type: 'GET',
            async: false,
            dataType: 'json',
            url: './uibuilder/admin/dummy',
            data: {
                'cmd': 'listinstances',
            },
            success: function(instances) {
                //console.log('>>>>', instances)

                Object.keys(instances).forEach( (val, i, arr) =>{
                    $('#node-input-url').append($('<option>', { 
                        value: instances[val],
                        text : instances[val],
                    }))    
                })
        
            }
        })

    } // ---- end of getUrls ---- //

    /** Prep for edit
     * @param {*} node A node instance as seen from the Node-RED Editor
     */
    function onEditPrepare(node) {
        // initial checkbox states
        if (!node.passthrough) node.passthrough = false
        $('#node-input-passthrough')
            // Initial setting
            .prop('checked', node.passthrough)
            // If the setting changes, change the number of output ports
            .on('change', function passthroughChange() {
                if ( $(this).prop('checked') === true ) {
                    node.outputs = 1
                    $('#node-input-return').prop('checked', false)
                } else if ( $('#node-input-return').prop('checked') === false ) {
                    node.outputs = 0
                }
            })
        if (!node.return) node.return = false
        $('#node-input-return')
            // Initial setting
            .prop('checked', node.return)
            // If the setting changes, change the number of output ports
            .on('change', function returnChange() {
                if ( $(this).prop('checked') === true ) {
                    node.outputs = 1
                    $('#node-input-passthrough').prop('checked', false)
                } else if ( $('#node-input-passthrough').prop('checked') === false ) {
                    node.outputs = 0
                }
            })
            
        // Deal with the url
        getUrls()
        // $('#node-input-url')
        //     .on('change', function() {
        //         console.log('>>>>', this.value)
        //     })
        if ( node.url && node.url.length > 0 ) {
            $(`#node-input-url option[value="${node.url}"]`).prop('selected', true)
            $('#node-input-url').val(node.url)
        }

    } // ----- end of onEditPrepare() ----- //

    RED.nodes.registerType(moduleName, {
        category: paletteCategory,
        color: paletteColor,
        defaults: {
            url: { value: '', required: true },
            name: { value: '' },
            topic: { value: '' },
            passthrough: { value: false },
            return: { value: false },
            outputs: { value: 0 },
        },
        align:'right',
        inputs: 1,
        inputLabels: 'Msg with topic property',
        outputs: 0,
        outputLabels: ['Input msg with node ID added'],
        icon: 'link-out.svg',
        paletteLabel: nodeLabel,
        label: function () { return this.url || this.name || nodeLabel },

        oneditprepare: function() { onEditPrepare(this) },
        
    }) // ---- End of registerType() ---- //

}())</script><script type="text/html" data-template-name="uib-sender"><div aria-label="uibuilder URL to associate with" class="form-row" title="uibuilder URL to associate with">
    <label for="node-input-url"><i class="fa fa-globe"></i> URL</label>
    <select id="node-input-url">
        <option value="">--choose a uibuilder instance--</option>
    </select>
</div>

<div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name">
</div>
<div class="form-row">
    <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
    <input type="text" id="node-input-topic">
</div>

<div class="form-row">
    <input type="checkbox" id="node-input-passthrough" style="display:inline-block; width:15px; vertical-align:baseline;">
    <label for="node-input-passthrough" style="width: 90%;">Pass input msg to output?</label>
</div>

<div class="form-row">
    <input type="checkbox" id="node-input-return" style="display:inline-block; width:15px; vertical-align:baseline;">
    <label for="node-input-return" style="width: 90%;">Allow return messages?</label>
</div></script><script type="text/html" data-help-name="uib-sender"><p>
    An easy method of sending messages to your uibuilder front-end from anywhere in your flows 
    and a method of easily getting a response back again.
</p>
<p>
    See <a href="./uibuilder/techdocs/#/sender-node" target="_blank">Tech Docs: Using the sender node</a> for more detail.
</p>

<h3>Inputs</h3>
<dl class="message-properties">
    <dt class="optional">payload <span class="property-type">string | buffer</span></dt>
    <dd> Optionally, the payload of the message to send to all connected client browser tabs. </dd>

    <dt class="optional">topic <span class="property-type">string</span></dt>
    <dd> Optionally, the MQTT topic to use. Takes preference over the topic defined in settings.</dd>
</dl>

<h3>Outputs</h3>
<p>
    If <code>Pass input msg to output?</code> is set, the input message is sent to the output.
</p>
<p>
    If <code>Allow return messages?</code> is set, any message send from the matching uibuilder front-end app
    and containing the right <code>_uib.originator</code> property is sent to the output.
</p>

<h3>Node Settings</h3>
<dl class="message-properties">
    <dt>URL <span class="property-type">string (dropdown)</span></dt>
    <dd>An existing uibuilder node.</dd>

    <dt>Name <span class="property-type">string</span></dt>
    <dd>A short description shown in the admin interface.</dd>

    <dt>Topic <span class="property-type">string</span></dt>
    <dd>A topic name to use if the incoming msg does not contain one.</dd>

    <dt>Pass input msg to output? <span class="property-type">boolean</span></dt>
    <dd>
        If selected, an output port will appear and any input msg will be also delivered to the output.
        This allows you to use the node in-line with a flow.
    </dd>

    <dt>Allow return messages? <span class="property-type">boolean</span></dt>
    <dd>
        If selected, an output port will appear.
        This allows you to get return messages back from your uibuilder front-end app.
        When returning a message, include the <code>_uib.originator</code> property with a value of
        the sender node's node ID. You can get that by sending a message through the sender node.
    </dd>
</dl></script>
</div><div><!-- --- [red-module:node-red-contrib-uibuilder/uib-cache] --- -->
<script type="text/javascript">/* eslint-disable strict */

// Isolate this code
(function () {
    'use strict'

    /** Module name must match this nodes html file @constant {string} moduleName */
    const moduleName  = 'uib-cache'
    /** Node's label @constant {string} paletteCategory */
    const nodeLabel  = moduleName
    /** Node's palette category @constant {string} paletteCategory */
    const paletteCategory  = 'uibuilder'
    /** Node's background color @constant {string} paletteColor */
    const paletteColor  = '#F6E0F8' //'#E6E0F8'

    /** Populate the store dropdown
     * @param {string} item Context store name
     */
    function addStoreSelect(item){
        $('#node-input-storeName').append(`<option value="${item}">${item}</option>`)
    }

    /**
     * 
     * @returns {string} Text to show if "Cache By" is set
     */
    function helpTextNumMsgsCacheBy(){
        return ` <b>for each msg.${ $('#node-input-cacheKey').val() } value</b>`
    }

    /** If caching my a msg.xxxxx value, show/hide bits of help text
     * @param {boolean} isVisible Whether the Cache By field is visible
     */
    function keyVisibility(isVisible) {
        if (isVisible === true) {

            $('#cacheKey-row').show()
            $('#help-per').show()
            $('#caspan').hide()
        } else {
            $('#cacheKey-row').hide()
            $('#help-per').hide()
            $('#caspan').show()
        }
    }

    /** Prep for edit
     * @param {*} node A node instance as seen from the Node-RED Editor
     */
    function onEditPrepare(node) {
        // initial checkbox states
        //if (!node.persistence) node.persistence = false
        if (!node.cacheall) node.persistence = false

        // Make sure that the key always as a value - default to msg.topic
        if (!node.cacheKey || node.cacheKey === '' ) node.cacheKey = 'topic'

        // Set up context store select drop-down
        RED.settings.context.stores.forEach(addStoreSelect)

        // Update help text if Cache By value changes
        $('#node-input-cacheKey').on('change', function(){
            $('#help-per').html( helpTextNumMsgsCacheBy() )
        })

        // Either all or by prop, not both
        $('#node-input-cacheall').on('change', function(){
            keyVisibility(!$(this).is(':checked'))
        })

        // Set storeName dropdown
        $(`#node-input-storeName option[value="${node.storeName || 'default'}"]`).prop('selected', true)
        $('#node-input-storeName').val(node.storeName || 'default')

    } // ----- end of onEditPrepare() ----- //

    RED.nodes.registerType(moduleName, {
        category: paletteCategory,
        color: paletteColor,
        defaults: {
            cacheall: { value: false },
            cacheKey: { value: 'topic' },
            num: { value: 1, required: true },
            //persistence: { value: false },
            storeName: { value: 'default', required: true },
            name: { value: ''},
        },
        //align:'right',
        inputs: 1,
        inputLabels: 'Msg to cache or cache control msg',
        outputs: 1,
        outputLabels: ['Through msg or msg from cache'],
        icon: 'parser-json.svg',
        paletteLabel: nodeLabel,
        label: function () { 
            if ( this.cacheall === true ) return this.name || `Cache All (${this.num})`
            return this.name || `Cache by msg.${this.cacheKey} (${this.num})`
        },

        oneditprepare: function() { onEditPrepare(this) },
        
    }) // ---- End of registerType() ---- //

}())</script><script type="text/html" data-template-name="uib-cache"><div aria-label="Choose what msg property to group cache by" id="cacheKey-row" class="form-row">
    <label for="node-input-cacheKey"><i class="fa fa-tag"></i> Cache by</label>
    msg.<input type="text" id="node-input-cacheKey" placeholder="Enter a msg property. ">
</div>
<div aria-label="Cache all or group by" title="Turn off cache by and record all msgs up to #" class="form-row">
    <input type="checkbox" id="node-input-cacheall" style="display: inline-block; width: auto; vertical-align: top;">
    <label for="node-input-cacheall" style="width: 90%;">Cache all messages individually?<span id="caspan"> (Up to # given below)</span></label>
</div>
<div aria-label="How many msgs to cache" title="Use 0 for unlimited (up to memory availability)" class="form-row">
    <label for="node-input-num"><i class="fa fa-tag"></i> # msgs</label>
    <input type="number" id="node-input-num">
</div>
<div aria-label="Info for cache settings" class="form-row form-tips node-help">
    Number of msgs to cache<span id="help-per"> per topic</span>.<br>
    Messages are dropped off front of queue once limit is reached.<br>
    Use 0 for unlimited but take care not to run out of memory.
</div>

<div aria-label="Select which context store to use" class="form-row">
    <label for="node-input-storeName"><i class="fa fa-database"></i> Use Store</label>
    <select id="node-input-storeName"></select>
</div>
<div aria-label="Info for context store" class="form-row form-tips node-help">
    Select a context store to use if you have more than one set up.<br>
    Use a persistent store if you want the cache to survive a system reset.<br>
    If you change the store, you will have to manually delete the old one.
</div>

<div aria-label="Name label" title="Only used for labelling in the flow" class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name">
</div></script><script type="text/html" data-help-name="uib-cache"><p>
    A simple caching node that works with uibuilder.
</p>
<p>
    See <a href="./uibuilder/techdocs/#/cache-node" target="_blank">Tech Docs: Using the cache node</a> for more detail.
</p>

<h3>Inputs</h3>
<p>
    Any msg can be sent into the node.
</p>
<p>
    In addition, the node recognises uibuilder control messages for cache replay and cache clear.<br>
    See <a href="./uibuilder/techdocs/#/pre-defined-msgs" target="_blank">Tech Docs: pre-defined messages</a> 
    for the structure of those messages.
</p>

<h3>Outputs</h3>
<p>
    Any non-uibuilder-control message is passed to the output.
</p>
<p>
    If the node receives a REPLAY control message, all of the cached messages are sent to the output.
</p>
<p>
    Upon replay, the output messages will have the socket id of the control message (if present) added
    so that the replayed messages are sent to the correct client. Any socket id saved in the cached messages
    is ignored.
</p>
<p>
    Upon replay, the output messages will also get a <code>_uib.cache</code> property added with a value of "REPLAY".
    This can be used in your front-end code if you need to differentiate between original and replayed messages.
</p>
<p>
    If the node receives a CLEAR control message, all of the cached messages are deleted and nothing is sent to the output.
</p>

<h3>Node Settings</h3>
<dl class="message-properties">
    <dt>Cache by <span class="property-type">string</span></dt>
    <dd>
        Enter an incoming message property to group cached entries by.<br>
        When choosing a property to group by, be mindful of the number of messages
        that may end up in the cache. If too many large messages are cached, Node-RED <b>WILL</b> crash.<br>
        The default entry is "topic".
    </dd>

    <dt>Cache individually? <span class="property-type">boolean</span></dt>
    <dd>
        If selected, the "Cache by" field will be hidden. All messages will be
        cached as a single group.
    </dd>

    <dt># messages <span class="property-type">integer</span></dt>
    <dd>
        The maximum number of messages <b>per group</b> that will be cached.<br>
        Once the max number is reached, the oldest messages will be dropped.<br>
        If you change this number and re-deploy, the node will automatically trim
        the number of messages cached.<br>
        You can use a number of zero to allow an infinite number of cached entries,
        however, you need to take great care in that case not to exceede the available
        memory, the node will not check for you.<br>
        The default number is one. This means that the last recorded message for each group
        will be replayed which is generally the expected result.
    </dd>

    <dt>Use Store <span class="property-type">string (drop-down)</span></dt>
    <dd>
        The drop-down is pre-populated with the <code>contextStorage</code> modules you define in <code>settings.js</code>.
        You can use this to choose a persistent context store if desired so that the cache survives system restarts.<br>
        If you change this value, you may need to manually delete the old version of the node context variable to avoid confusion.
        Select the node, view the Context Data side-panel, refresh the entries and delete the appropriate <code>uib_cache</code> entry.
    </dd>

    <dt>Name <span class="property-type">string</span></dt>
    <dd>A short description shown in the admin interface.</dd>
</dl>

<p>
    <b>NOTE</b> that there is an example flow in the examples library that demonstrates the use of this node.
    Use the Editor's menu, import, Examples, node-red-contrib-uibuilder and import the <code>uib-cache-test</code> example.
</p></script>
</div><div><!-- --- [red-module:node-red-contrib-viseo-google-authentication/google-service-account] --- -->
<script type="text/javascript">
    RED.nodes.registerType('google-service-account',{
        category: 'config',
        defaults: {
            name:         { value: undefined, required: true  },
            scope:        { value: undefined, required: false },
            way:          { value: "fields",  required: false },
            check_dialogflow:   { value: false},
            check_speech:       { value: false}
        },
        credentials: {
            projectId:    { value: undefined },
            client_email: { value: undefined },
            private_key:  { value: undefined },
            json:         { value: undefined }
        },
        label: function() {
            return this.name || "Google API credential";
        },
        oneditprepare: function() {
            
            if (this.scope && typeof (this.scope) !== "object") {
                this.scope = this.scope.split('\n');
            }

            $("#node-config-input-projectId").typedInput({      default: 'str',  types: ['str'],   type: 'str'  });
            $("#node-config-input-client_email").typedInput({   default: 'str',  types: ['str'],   type: 'str'  });
            $("#node-config-input-private_key").typedInput({    default: 'str',  types: ['str'],   type: 'str'  });
            $("#node-config-input-json").typedInput({           default: 'json', types: ['json'],  type: 'json' });

            $("#node-config-input-way").change(function() {
                $(".display_fields").hide();
                $(".display_json").hide();
                if ($(this).val() === "json") {
                    $(".display_json").show();
                    $("#node-config-input-json").typedInput('show');
                }
                else {
                    $(".display_fields").show();
                    $("#node-config-input-projectId").typedInput('show');
                    $("#node-config-input-client_email").typedInput('show');
                    $("#node-config-input-private_key").typedInput('show');
                }
            });

            $("#node-config-input-check_dialogflow, #node-config-input-check_speech").click( function() {
                let url = "https://www.googleapis.com/auth/cloud-platform";
                if (!inList(url)) $("#node-input-container").editableList('addItem', { scope: url, i:i });
            }); 
            $("#node-config-input-check_sheets").click( function() {
                let url = "https://www.googleapis.com/auth/spreadsheets";
                if (!inList(url)) $("#node-input-container").editableList('addItem', { scope: url, i:i });
            }); 

            function inList (param) {
                let items = $("#node-input-container").editableList('items');
                let array = [];

                items.each(function(i) {
                    array.push($(this).find('.node-input-scope-name').val());
                });

                for (let item of array) if (item === param) return true;
                return false;
            }

            $("#node-input-container").css('min-height','100px').editableList({
                addItem: function ( row, index, data ) {
                    var newScope = data.scope,
                        scope = '';
                    if (newScope) scope =  newScope;
                    var hiddenField = $('<span/>', {}).appendTo(row);
                    var titleField =  $('<input/>', { class:"node-input-scope-name",  type:"text", style:"width:100%; ", value: scope})
                                                    .appendTo(row)
                                                    .typedInput({default: 'str' , types:['str'], type: 'str' });
                },
                sortable: false,
                removable: true
            });

            this.scope = this.scope || new Array();

            for (var i=0; i<this.scope.length; i++) {      
                var infos = this.scope[i];
                $("#node-input-container").editableList('addItem', { scope: this.scope[i], i:i });
            }
        },
        oneditsave: function(){
            // Scopes
            let results = new Array();
            let scope = $("#node-input-container").editableList('items');
            scope.each(function(i) {
                let newScope = $(this).find('.node-input-scope-name').val();
                if (newScope) results.push(newScope);
            });
            this.scope = results; 
        }
    });
</script>

<style>
    .input-info { font-size: 12px; padding-left: 104px; font-style: italic; }
</style>

<script type="text/x-red" data-template-name="google-service-account">
    <div class="form-row">
        <label for="node-config-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-config-input-name" placeholder="">
    </div>
    <br>

    <div class="form-row">
        <label for="node-config-input-way"><i class="fa fa-tasks"></i> Config</label>
        <select id="node-config-input-way" style="width:70%;">
            <option value="fields" selected>Copy/Paste fields</option>
            <option value="json" >Copy/Paste JSON file</option>
        </select>
    </div>

    <br>
    <p class="input-info display_fields" style="min-width:500px;">
        Create a Project in Google Cloud Platform with required APIs.<br/> 
        Then create a "Service Account" in Credential tab.<br/> 
        Download the credentials JSON file, and copy-paste the following fields:
    </p>
    <div class="form-row display_fields">
        <label for="node-config-input-projectId"><i class="fa fa-lock"></i> project_id</label>
        <input type="text" id="node-config-input-projectId" placeholder="" style="width:70%">
    </div>
    <div class="form-row display_fields">
        <label for="node-config-input-private_key"><i class="fa fa-lock"></i> private_key</label>
        <input type="text" id="node-config-input-private_key" placeholder="-----BEGIN PRIVATE KEY-----\nXXX...XXX\n-----END PRIVATE KEY-----\n" style="width:70%">
    </div>
    <div class="form-row display_fields">
        <label for="node-config-input-client_email"><i class="fa fa-lock"></i> client_email</label>
        <input type="text" id="node-config-input-client_email" placeholder="{user}@{project}.iam.gserviceaccount.com" style="width:70%">
    </div>

    <p class="input-info display_json" style="min-width:450px;">
        Create a Project in Google Cloud Platform with required APIs.<br/> 
        Then create a "Service Account" in Credential tab.<br/> 
        Download the credentials JSON file, and copy-paste the content:
    </p>
    <div class="form-row display_json">
        <label for="node-config-input-json"><i class="fa fa-lock"></i> JSON</label>
        <input type="text" id="node-config-input-json" style="width:70%">
    </div>



    <br>
    <div class="form-row">
        <label><i class="fa fa-globe"></i> Scopes</label>
        <p class="input-info" style="display:inline-block; padding-left: 0px;"> 
            Scopes that you might need to request to access Google APIs, <br/> 
            depending on the level of access you need (not required):    </p><br/>

        <button style="margin-left:105px;" id="node-config-input-check_dialogflow">Dialogflow</button>
        <button style="margin-left:10px;"  id="node-config-input-check_speech">Speech</button><br/>
        <button style="margin-left:10px;"  id="node-config-input-check_sheets">Sheets</button><br/> 
    </div>

    <div class="form-row" style="width:70%; margin-left:105px;">
        <ol id="node-input-container"></ol>
    </div>

</script>

<script type="text/x-red" data-help-name="google-service-account">
    <p>Complete with data from a Google Service Account. </p>

    <h3>Details</h3>
    <p>The simplier way to complete data is to copy/paste the content of the JSON key file given by Google (Google service account key).
       The needes scopes are given in Google documentations.</p>
       
    <h3>References</h3>
    <ul>
        <li><a href="https://github.com/googleapis/google-auth-library-nodejs#readme">Google auth library</a> - the github repository</li>
        <li><a href="https://github.com/NGRP/node-red-contrib-viseo/">VISEO BotMaker</a> - the nodes github repository</li>
    </ul>
</script>
</div><div><!-- --- [red-module:node-red-contrib-viseo-google-authentication/google-api-key] --- -->
<script type="text/javascript">
    RED.nodes.registerType('google-api-key',{
        category: 'config',
        defaults: { 
            name:       { value: undefined },
        },
        credentials: {
            key:        { value: undefined }
        },
        label: function() { return this.name || 'Google API key'; }
    });
</script>

<script type="text/x-red" data-template-name="google-api-key">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-config-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-config-input-key"><i class="fa fa-tag"></i> API Key</label>
        <input type="text" id="node-config-input-key" placeholder="Your API key">
    </div>
</script>

<script type="text/x-red" data-help-name="google-api-key">
   <p>Set a Google API key.</p>
      
   <h3>References</h3>
   <ul>
       <li><a href="https://github.com/NGRP/node-red-contrib-viseo/">VISEO BotMaker</a> - the nodes github repository</li>
   </ul>
</script>
</div><div><!-- --- [red-module:node-red-contrib-viseo-google-spreadsheet/google-spreadsheet] --- -->
<script type="text/javascript">
    RED.nodes.registerType('google-spreadsheet',{
        category: '_data',
        color: '#bce4d0',
        defaults: { 
            name:    { value: undefined },
            auth:    { value: undefined, type: 'google-service-account', required: true },
            sheet:   { value: undefined },
            range:   { value: undefined },
            method:  { value: 'append' },
            direction: {value: 'line' },
            action:   { value: 'set' },
            clear:    {value: false},
            line:    { value: false},
            column:  { value: false},
            fields:  { value: 'all' },
            save:    { value: '_sheet'},
            selfields: {value: [""]},
            cell_l: { value: undefined},
            cell_c: { value: undefined},
            input:   { value: undefined, required: false },
            output:  { value: undefined, required: false },
            saveType:  {value: 'global'},
            inputType:  {value: 'msg'},
            outputType: {value: 'msg'},
            sheetType:  {value: 'str'},
            rangeType:  {value: 'str'},
            cell_lType: {value: 'str'},
            cell_cType: {value: 'str'}
        },
        inputs:  1,
        outputs: 2,
        icon: "sheets.png",
        align: "left",
        paletteLabel: 'Sheets',
        label: function() { return this.name || "Google Sheets"; },
        oneditprepare: function() {
            $("#node-input-name").typedInput({  default: 'str',  types: ['str'],  type:'str' });
            $("#node-input-sheet").typedInput({  default: 'str',  types: ['str','msg','global'],  typeField: $("#node-input-sheetType") });
            $("#node-input-range").typedInput({  default: 'str',  types: ['str','msg','global'],  typeField: $("#node-input-rangeType") });
            $("#node-input-cell_l").typedInput({  default: 'str',  types: ['str','msg','global'],  typeField: $("#node-input-cell_lType") });
            $("#node-input-cell_c").typedInput({  default: 'str',  types: ['str','msg','global'],  typeField: $("#node-input-cell_cType") });
            $("#node-input-save").typedInput({  default: 'global',  types: ['msg','global'],  typeField: $("#node-input-saveType") });
            $("#node-input-input").typedInput({  default: 'msg',  types: ['msg','global'], typeField: $("#node-input-inputType")  });
            $("#node-input-output").typedInput({  default: 'msg',  types: ['msg','global'], typeField: $("#node-input-outputType")  });

            $("#node-input-action").change(function() {
                $(".set, .get, .ctn, .cell").hide();
                if ($(this).val() === "set") {
                    $(".set").show();
                    if ($("#node-input-fields").val() === "select") $(".ctn").show();
                    if ($("#node-input-method").val() === "new") $(".new").show();
                    $("#node-input-input").typedInput('show');
                }
                else if ($(this).val() === "get") $(".get").show();
                else if ($(this).val() === "cell") {
                    $(".cell").show();
                    $("#node-input-cell_c").typedInput('show');
                    $("#node-input-cell_l").typedInput('show');
                }
            });

            $("#node-input-fields").change(function() {
                $(".ctn").hide();
                if ($(this).val() === "select") $(".ctn").show();
            });

            $("#node-input-method").change(function(){
                $(".new").hide();
                if ($(this).val() === "new") $(".new").show();
            })

            $("#node-input-selfields-ctn").css('min-height','100px').editableList({
                addItem: function ( row, index, data ) {
                    var content = data.field || '';
                    var hiddenField = $('<span/>', {}).appendTo(row);
                    var titleField =  $('<input/>',  { class:"node-input-property-ctn",  type:"text", style:"width:90%", value: content,  placeholder:"Key"}).appendTo(row);
                },
                sortable: true,
                removable: true
            });

            for (var i=0; i<this.selfields.length; i++) {      
                var field = this.selfields[i];
                $("#node-input-selfields-ctn").editableList('addItem', { field: field, i:i });
            }
        },
        oneditsave: function(){
            let fields = $("#node-input-selfields-ctn").editableList('items'),
                results = new Array();

            fields.each(function(i) {
                var content = $(this).find('.node-input-property-ctn').val();
                if (content) results.push(content);
            });
            this.selfields = (results.length === 0) ? [""] : results;
            
        }
    });
</script>

<style>
    .input-info { font-size: 12px; padding-left: 104px; font-style: italic; }
    textarea { resize: vertical; }
</style>

<script type="text/x-red" data-template-name="google-spreadsheet">
    <div class="form-row" style="min-width:600px;">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" style="width:70%;" placeholder="Name">
    </div>

    <br>
    <b>Google Spreadsheet settings</b>

    <div class="form-row">
        <br>
        <label for="node-input-auth"><i class="fa fa-lock"></i> Credentials</label>
        <input type="text" id="node-input-auth" style="width: 70%" placeholder="">
    </div>
    <div class="form-row">
        <label for="node-input-sheet"><i class="fa fa-table"></i> ID</label>
        <input type="text" id="node-input-sheet" style="width: 70%" placeholder="ID">
        <input type="hidden" id="node-input-sheetType">
    </div>
    <div class="form-row">
        <label for="node-input-range"><i class="fa fa-table"></i> Range</label>
        <input type="text" id="node-input-range" style="width: 70%" placeholder="Tab label at least">
        <input type="hidden" id="node-input-rangeType">
    </div>
    <div class="form-row">
        <label for="node-input-save"><i class="fa fa-save"></i> Save</label>
        <input type="text" id="node-input-save" style="width: 70%" placeholder="Saved data from spreadsheet">
        <input type="hidden" id="node-input-saveType">
    </div>

    <br>
    <b>Request settings</b>

    <div class="form-row">
        <br>
        <label for="node-input-action"><i class="fa fa-tasks"></i> Action</label>
        <select id="node-input-action" style="width: 34%">
            <option value="set">Set data</option>
            <option value="get">Get data</option>
            <option value="cell">Get cell</option>
            <option value="clear">Clear data</option>
        </select>
        <select class="set" id="node-input-method" style="width: 35%">
            <option value="append">Append</option>
            <option value="update">Update</option>
            <option value="new">New</option>
        </select>
        <select class="get" id="node-input-direction" style="width: 35%">
            <option value="line">By line</option>
            <option value="column">By column</option>
        </select>
    </div>

    <div class="form-row new get">
        <label for="node-input-column"><i class="fa fa-tags"></i> Labels</label>
        <input type="checkbox" style="width: auto; vertical-align:top;" id="node-input-line"> <span>First line for labels</span>
        <input type="checkbox" style="width: auto; vertical-align:top;  margin-left:25px;" id="node-input-column"> <span>First column for labels</span>
    </div>

    <div class="form-row set">
        <label for="node-input-input"><i class="fa fa-sign-in"></i> Input</label>
        <input type="text" id="node-input-input" style="width: 70%" placeholder="payload"/> 
        <input type="hidden" id="node-input-inputType">
    </div>

    <div class="form-row set">
        <label for="node-input-fields"><i class="fa fa-tags"></i> Fields</label>
        <select id="node-input-fields" style="width: 70%">
            <option value="all">All</option>
            <option value="select">Select</option>
        </select>
    </div>

    <div class="form-row cell">
        <label for="node-input-cell_c"><i class="fa fa-table"></i> Cell</label>
        <input type="text" id="node-input-cell_c" style="width: 35%" placeholder="Column"/>
        <input type="text" id="node-input-cell_l" style="width: 34%" placeholder="Line"/> 
        <input type="hidden" id="node-input-cell_lType">
        <input type="hidden" id="node-input-cell_cType">
    </div>

    <div class="form-row ctn" style="width:70%; margin-left: 105px;">
        <ol id="node-input-selfields-ctn"></ol>
        <!-- <textarea id="node-input-selfields" rows="5" style="width:70%; margin-left: 105px;" placeholder="path.to.field"></textarea> -->
    </div>

    <div class="form-row">
        <label for="node-input-output"><i class="fa fa-sign-out"></i> Output</label>
        <input type="text" id="node-input-output" style="width: 70%" placeholder="payload"/>
        <input type="hidden" id="node-input-outputType">
        <!-- <div class="input-info">Output rows of the given range OR Input action results</div>-->
    </div>
</script>

<script type="text/x-red" data-help-name="google-spreadsheet">

    <p>Manipulate a Google spreadhseet with Sheets API. </p>

    <h3>Details</h3>
    <p>Properties</p>
    <dl class="message-properties">
        <dt>Credentials <span class="property-type">config</span></dt>
        <dd>information from a Google service account</dd>
        <dt>ID <span class="property-type">string</span></dt>
        <dd>spreadsheet ID such as <i>https://docs.google.com/spreadsheets/d/<b>{ID}</b>/edit#gid=0</i></dd>
        <dt>Range <span class="property-type">string</span></dt>
        <dd>should at least be set as the name of the targeted spreadhseet's tab; ex: <i>Sheet1</i> or <i>Sheet1!A5:B8</i></dd>
        <dt>Save <span class="property-type">string</span></dt>
        <dd>where to save the data in order to avoid multiple calls to Sheets API</dd>
        <dt>Output <span class="property-type">string</span></dt>
        <dd>where to store the results</dd>
    </dl>
    <p><b>Note:</b> Please delete the content of the <i>Save</i> location every time the sheet's data has been changed!
        This can be done with a simple "inject" node followed by a "change" node (delete <code>global._sheet</code>).
    </p>
    <p>
        <code>Set data</code> updates or replaces (new) the value of the range, or append after. The <i>input</i> has to be an <b>array</b> or a <b>JSON object</b>. If the input
        is an object, it is possible to use the object keys as labels, eg first line and/or column. If you chose the 'append' method, this will not impact the result. 
    </p>
    <p>
        <code>Get data</code> gets the value of the range. Check <i>labels</i> for line and/or column if the first line and/or the first column in your 
        spreadsheet is used for labels. The keys of the resulting objects will be adjusted accordingly.
    </p>
    <p>
        <code>Get cell</code> gets the value of a cell. Precise line and column labels. Both should be precised. If nothing is found, the result is "Not found".
    </p>

    <h3>References</h3>
    <ul>
        <li><a href="https://developers.google.com/sheets/api/guides/concepts">Google Sheets</a> - reference</li>
        <li><a href="https://github.com/NGRP/node-red-contrib-viseo/">VISEO BotMaker</a> - the nodes github repository</li>
    </ul>

    <h3>Tracking</h3>
    <p>This node is likely to display an error message if no key is configured in the VISEO Bot Maker project.
        If such an error appears, please get a key <a href="https://key.bot.viseo.io/">here</a>.  
    </p>

</script>
</div><div><!-- --- [red-module:node-red-contrib-writeexif/node-red-writeexif.js] --- -->
<script type="text/javascript">
    RED.nodes.registerType('write-exif',{
        category: 'image',
        color: '#cc99ff',
        defaults: {
            image: {
                value:"", 
                required: true,
            },
            imageType: { value:"msg" },
            exif: {
                value:"payload", 
                required: true,
            },
            exifType: { value:"msg" },
            deleteOriginal: {value:false},
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-address-card",
        label: function() {
            return this.name || "write-exif";
        },
        oneditprepare: function() {
            $("#node-input-image").typedInput({
                default: this.imageType  || 'msg', 
                types:['msg','flow','global','str','jsonata'],
                typeField: $("#node-input-imageType")
            });
            $("#node-input-exif").typedInput({
                default: this.exifType  || 'msg', 
                types:['msg','flow','global','jsonata','json'],
                typeField: $("#node-input-exifType")
            });
            
        },
        oneditsave: function() { 
            this.imageType = $("#node-input-imageType").val()
            this.exifType = $("#node-input-exifType").val()
        }
    });
</script>

<script type="text/html" data-template-name="write-exif">
    <div class="form-row">
        <label for="node-input-image"><i class="fa fa-image"></i> Image</label>
        <input type="text" id="node-input-image"  style="width: 70%;" placeholder="Path to image">
        <input type="hidden" id="node-input-imageType">
    </div>
    <div class="form-row" >
        <label for="node-input-exif"><i class="fa fa-info"></i> Exif object</label>
        <input type="text" id="node-input-exif" style="width: 70%;" placeholder='{"XPComment":commentVar, "XPAuthor": "FatOldSun"}'>
        <input type="hidden" id="node-input-exifType">
    </div>
    <div class="form-row">
        <label for="node-input-deleteOriginal">&nbsp;</label>            
        <input type="checkbox" id="node-input-deleteOriginal" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-deleteOriginal" style="width: auto"><i class="fa fa-trash-o" style="transform: scaleX(-1);"></i> Delete original after writing exif (dangerous)</label>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span>Name</span></label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>


<script type="text/html" data-help-name="write-exif">
    <p>A simple node that converts the message payloads into all write-exif characters</p>
</script>
</div><div><!-- --- [red-module:node-red-dashboard/ui_base] --- -->
<style>
    :root {
        --nr-db-dark-text: #444;
        --nr-db-light-text: #eee;
        --nr-db-disabled-text: #999;
        --nr-db-mid-grey: #7f7f7f;
    }
    .nr-db-sb {
        position: absolute;
        top: 1px;
        bottom: 2px;
        left: 1px;
        right: 1px;
        overflow-y: scroll;
        padding: 10px;
    }
    .nr-db-sb .form-row label {
        display: block;
        width: auto;
    }
    .nr-db-sb .form-row input,
    .nr-db-sb .form-row select {
        width: calc(100% - 100px);
        margin-bottom:0;
    }
    .nr-db-sb .compact {
        margin-bottom: 8px !important;
    }
    .nr-db-sb .red-ui-editableList-container {
        padding: 0;
        min-height: 250px;
        height: auto;
    }
    .nr-db-sb-tab-list {
        min-height: 250px;
        height: auto;
    }
    .nr-db-sb-tab-list li {
        padding: 0;
    }
    .nr-db-sb-tab-list-item {
        border-radius: 4px;
        color: var(--nr-db-dark-text);
    }
    .nr-db-sb-list-header {
        cursor: pointer;
        position:relative;
        color: var(--nr-db-dark-text);
        padding:3px;
        white-space: nowrap;
    }
    .nr-db-sb-list-header:hover {
        color: var(--nr-db-dark-text);
    }
    .nr-db-sb-title-hidden {
        text-decoration: line-through;
    }
    .nr-db-sb-title-disabled {
        color: var(--nr-db-disabled-text);
    }
    .nr-db-sb-tab-list-header {
        background: var(--nr-db-light-text);
        padding:5px;
    }
    .nr-db-sb-group-list-header:hover,
    .nr-db-sb-widget-list-header:hover {
        background: var(--nr-db-light-text);
    }
    .nr-db-sb-list-chevron {
        width: 15px;
        text-align: center;
        margin: 3px 5px 3px 5px;
    }
    .nr-db-sb-tab-list-item .red-ui-editableList-container {
        border-radius: 0;
        border: none;
        height: auto !important;
        min-height: unset;
    }
    .nr-db-sb-list-handle {
        vertical-align: top;
        opacity: 0;
        cursor: move;
    }
    .nr-db-sb-list-header:hover>.nr-db-sb-list-handle,
    .nr-db-sb-list-header:hover>.nr-db-sb-list-header-button-group {
        opacity: 1;
    }
    .nr-db-sb-list-header-button-group {
        opacity: 0;
    }
    .nr-db-sb-list-handle  {
        color: var(--nr-db-light-text);
        padding:5px;
    }
    .nr-db-sb-tab-list-header>.nr-db-sb-list-chevron  {
        margin-left: 0px;
        transition: transform 0.2s ease-in-out;
    }
    .nr-db-sb-group-list-header>.nr-db-sb-list-chevron {
        margin-left: 20px;
        transition: transform 0.2s ease-in-out;
    }
    .nr-db-sb-group-list {
        min-height: 10px;
    }
    .nr-db-sb-group-list li {
        border-bottom-color: var(--nr-db-light-text);
    }
    .nr-db-sb-group-list>li.ui-sortable-helper {
        border-top: 1px solid var(--nr-db-light-text);
    }
    .nr-db-sb-group-list>li:last-child {
        border-bottom: none;
    }
    .nr-db-sb-widget-list>li {
        border: none !important;
    }
    .nr-db-sb-group-list>li>.red-ui-editableList-item-handle {
        left: 10px;
    }
    .nr-db-sb-list-button-group {
        position: absolute;
        right: 3px;
        top: 0px;
        z-index: 2;
    }
    .nr-db-sb-list-header-button-group {
        position: absolute;
        right: 3px;
        top: 4px;
    }
    .nr-db-sb-list-header-button {
        margin-left: 5px;
    }
    .nr-db-sb li.ui-sortable-helper {
        opacity: 0.9;
    }
    .nr-db-sb-widget-icon {
        margin-left: 56px;
    }
    .nr-db-sb-icon {
        margin-right: 10px;
    }
    .nr-db-sb-link {
        display: inline-block;
        padding-left: 20px;
    }
    .nr-db-sb-link-name-container .fa-external-link {
      margin-right: 10px;
    }
    .nr-db-sb-link-url {
        font-size: 0.8em;
        color: var(--nr-db-mid-grey);
    }
    span.nr-db-color-pick-container {
        max-width: 50px;
        border-radius: 3px;
        margin-left: 15px;
    }
    input.nr-db-field-themeColor[type="color"] {
        width: 60px !important;
        padding: 0px;
        height: 20px;
        box-shadow: none;
        position: absolute;
        right: 36px;
        border-radius: 3px !important;
        border: solid 1px #ccc;
        -webkit-appearance: none;
        font-size: smaller;
        text-align: center;
    }
    input.nr-db-field-themeColor::-webkit-color-swatch {
        border: none;
    }
    .red-ui-tabs {
        margin-bottom: 15px;
    }
    .red-ui-tab.hidden {
        display: none;
    }
    #dashboard-tabs-list li a:hover {
        cursor: pointer;
    }
    #dash-link-button {
        background: none;
        border: none;
        margin-top: 3px;
        display: inline-block;
        margin: 3px 0px 0px 3px;
        height: 32px;
        line-height: 29px;
        max-width: 200px;
        overflow: hidden;
        white-space: nowrap;
        position: relative;
        padding: 0px 7px 0px 7px;
    }
    ul.red-ui-dashboard-theme-styles {
        list-style: none;
    }
    ul.red-ui-dashboard-theme-styles li {
        margin-bottom: 6px;
    }
    .nr-db-resetIcon {
        margin: 3px 6px 0px 6px;
        float: right;
        color: var(--nr-db-mid-grey);
        opacity: 0.8;
        display: block;
    }
    .nr-db-resetIcon:hover {
        cursor: pointer;
    }
    #nr-db-field-font {
        margin-left: 2em;
        width: calc(100% - 81px);
    }
    .nr-db-theme-label {
        font-weight: bold;
    }
    #custom-theme-library-container .btn-group {
        margin-bottom: 10px;
    }
</style>

<!-- Dashboard layout tool -->
<link rel="stylesheet" href="Node-RED_files/gridstack.min.css">
<link rel="stylesheet" href="Node-RED_files/gridstack-extra.min.css">
<style>
.grid-stack {
    background-color: #f8f8f8;
    border: solid 2px #C0C0C0;
    margin: auto;
    min-height: 42px;
    display: table-cell;
    background-image: linear-gradient(#C0C0C0 1px, transparent 0),
                      linear-gradient(90deg, #C0C0C0 1px, transparent 0);
    background-size: 40px 43px;
}
.grid-stack>.grid-stack-item>.grid-stack-item-content {
    top: 3px;
    left: 5px;
    right: 5px;
    bottom: 3px;
}
.grid-stack-item-content {
    color: #2c3e50;
    text-align: center;
    background-color: #b0dfe3;
    border-radius: 2px;
    font-family: 'Helvetica Neue', Arial, Helvetica, sans-serif;
    white-space: nowrap;
    font-size: 12px;
    opacity: 0.7;
}
.grid-stack-item {
    cursor: move;
}
.nr-dashboard-layout-container-fluid {
  width: 100%;
  padding-right: 0px;
  padding-left: 0px;
  margin-right: 0px;
  margin-left: 0px;
}
.nr-dashboard-layout-row {
  width: 100%;
  display: -ms-flexbox;
  display: flex;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  margin-right: 0px;
  margin-left: 0px;
}
.nr-dashboard-layout-span12 {
  width: 98.4%;
  padding: 2px;
  margin-left: 2px;
}
.nr-dashboard-layout-span6 {
  width: 49.2%;
  padding: 2px;
  margin-left: 2px;
}
.nr-dashboard-layout-span4 {
  width: 32.7%;
  padding: 2px;
  margin-left: 2px;
}
.nr-dashboard-layout-span3 {
  width: 24.3%;
  padding: 2px;
  margin-left: 2px;
}
.nr-dashboard-layout-span2 {
  width: 16.0%;
  padding: 2px;
  margin-left: 2px;
}
.nr-dashboard-layout-resize-disable {
    cursor: pointer;
    float: right;
    position: relative;
    z-index: 90;
    margin-right: 4px;
}
.nr-dashboard-layout-resize-enable {
    cursor: pointer;
    float: right;
    position: relative;
    z-index: 90;
    margin-right: 1px;
}
.grid-stack>.ui-state-disabled {
    opacity: 1;
    background-image: none;
}
.grid-stack>.grid-stack-item>.ui-resizable-handle {
    z-index: 90;
    margin-right: -7px;
}
</style>


<script type="text/javascript">
(function($) {
    var editSaveEventHandler;
    var nodesAddEventHandler;
    var nodesRemoveEventHandler;
    var layoutUpdateEventHandler; // Dashboard layout tool
    var uip = 'ui';
    var attemptedVendorLoad = false;
    var ensureDashboardNode;

    var loadTinyColor = function(path) {
        $.ajax({ url: path,
            success: function (data) {
                var jsScript = document.createElement("script");
                jsScript.type = "application/javascript";
                jsScript.src = path;
                document.body.appendChild(jsScript);
                //console.log('Tiny Color Loaded:',path);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                if (xhr.status === 404 && !attemptedVendorLoad) {
                    loadTinyColor('/'+uip+'/vendor/tinycolor2/dist/tinycolor-min.js');
                    attemptedVendorLoad = true;
                }
                //console.log('Tiny Color Failed to load:',path);
            }
        });
    }

    // convert to i18 text
    function c_(x) {
        return RED._("node-red-dashboard/ui_base:ui_base."+x);
    }

    // Try to load dist version first
    // then if fails, load non dist version
    loadTinyColor('ui_base/js/tinycolor-min.js');
    //loadTinyColor('ui_base/tinycolor2/dist/tinycolor-min.js');

    // Dashboard layout tool
    // Load gridstack library
    var loadGsLib = function(path, callback) {
        $.ajax({ url: path,
            success: function (data) {
                var jsScript = document.createElement("script");
                jsScript.type = "application/javascript";
                jsScript.src = path;
                document.body.appendChild(jsScript);
                if (callback) { callback(); }
            },
            error: function (xhr, ajaxOptions, thrownError) {
                // TODO
            }
        });
    };

    loadGsLib('ui_base/gs/gridstack.min.js', function() {
        loadGsLib('ui_base/gs/gridstack.jQueryUI.min.js', null)
    });

    var tabDatas; // Layout editing tab data
    var oldSpacer; // Spacer not needed after editing
    var widthChange; // Group width change
    var widgetResize; // Change widget event
    var widgetDrag; // Drag wiget event

    var MAX_GROUP_WIDTH = 50; // The maximum width is 30

    /////////////////////////////////////////////////////////
    // Get widget under specified tab from node information
    /////////////////////////////////////////////////////////
    function getTabDataFromNodes(tabID) {
        var nodes = RED.nodes.createCompleteNodeSet(false);
        var tab = {};
        // Tab information
        for (var cnt = 0; cnt < nodes.length; cnt++) {
            if (nodes[cnt].type == "ui_tab" && nodes[cnt].id == tabID) {
                tab = {
                    id: nodes[cnt].id,
                    name: nodes[cnt].name,
                    type: nodes[cnt].type,
                    order: nodes[cnt].order,
                    groups: []
                };
                break;
            }
        }
        // Group information
        for (var cnt = 0; cnt < nodes.length; cnt++) {
            if (nodes[cnt].type == "ui_group" && nodes[cnt].tab == tabID) {
                var group = {
                    id: nodes[cnt].id,
                    name: nodes[cnt].name,
                    type: nodes[cnt].type,
                    order: nodes[cnt].order,
                    width: nodes[cnt].width,
                    widgets: []
                };
                tab.groups.push(group);
            }
        }
        // Widget information
        var groupsIdx = {};
        for  (var cnt = 0; cnt < tab.groups.length; cnt++) {
            groupsIdx[tab.groups[cnt].id] = tab.groups[cnt];
        }
        for (var cnt = 0; cnt < nodes.length; cnt++) {
            var group = groupsIdx[nodes[cnt].group];
            if (group != null && (/^ui_/.test(nodes[cnt].type) && nodes[cnt].type !== 'ui_link' && nodes[cnt].type !== 'ui_toast' && nodes[cnt].type !== 'ui_ui_control' && nodes[cnt].type !== 'ui_audio' && nodes[cnt].type !== 'ui_base' && nodes[cnt].type !== 'ui_group' && nodes[cnt].type !== 'ui_tab')) {
                var widget = {
                    id: nodes[cnt].id,
                    type: nodes[cnt].type,
                    order: nodes[cnt].order,
                    width: nodes[cnt].width,
                    height: nodes[cnt].height,
                    auto: nodes[cnt].width == 0 ? true : false
                };
                group.widgets.push(widget);

                if (!isLayoutToolSupported(nodes[cnt].type)) {
                    console.log("LayoutTool warning: Unsupported widget. Widget="+JSON.stringify(widget));
                }
            }
        }
        return tab;
    }

    //////////////////////////////////////////////////
    // Update node information in the edited widget
    ////////////////////////////////////////////////////
    function putTabDataToNodes() {
        // Delete old flow spacer node
        for (var cnt = 0; cnt < oldSpacer.length; cnt++) {
            RED.nodes.remove(oldSpacer[cnt]);
            RED.nodes.dirty(true);
            RED.view.redraw(true);
        }

        var t_groups = tabDatas.groups;
        for (var cnt1 = 0; cnt1 < t_groups.length; cnt1++) {
            var n_group = RED.nodes.node(t_groups[cnt1].id);
            n_group.width = t_groups[cnt1].width;
            var t_widgets = t_groups[cnt1].widgets;
            for (var cnt2 = 0; cnt2 < t_widgets.length; cnt2++) {
                var n_widget = RED.nodes.node(t_widgets[cnt2].id);
                if (n_widget != null) {
                    if (n_widget.group !== n_group.id) {
                        var oldGroupNode = RED.nodes.node(n_widget.group);
                        if (oldGroupNode) {
                            var index = oldGroupNode.users.indexOf(n_widget);
                            oldGroupNode.users.splice(index,1);
                        }
                        n_widget.group = n_group.id;
                        n_group.users.push(n_widget);
                    }
                    n_widget.order = t_widgets[cnt2].order;
                    if (t_widgets[cnt2].auto === true ) {
                        n_widget.width = 0;
                        n_widget.height = 0;
                    } else {
                        n_widget.width = t_widgets[cnt2].width;
                        n_widget.height = t_widgets[cnt2].height;
                    }

                    n_widget.changed = true;
                    n_widget.dirty = true;
                    RED.editor.validateNode(n_widget);
                    RED.events.emit("layout:update",n_widget);
                    RED.nodes.dirty(true);
                    RED.view.redraw(true);
                }
                else {
                    // Add a spacer node
                    if (t_widgets[cnt2].type === 'ui_spacer') {
                        var spaceNode = {
                            _def: RED.nodes.getType("ui_spacer"),
                            type: "ui_spacer",
                            hasUsers: false,
                            users: [],
                            id: RED.nodes.id(),
                            tab: tabDatas.id,
                            group: n_group.id,
                            order: t_widgets[cnt2].order,
                            name: "spacer",
                            width: t_widgets[cnt2].width,
                            height: t_widgets[cnt2].height,
                            z: RED.workspaces.active(),
                            label: function() { return this.name + " " + this.width + "x" + this.height; }
                        };
                        RED.nodes.add(spaceNode);
                        RED.editor.validateNode(spaceNode);
                        RED.nodes.dirty(true);
                        RED.view.redraw(true);
                    }
                }
            };
        }
        RED.sidebar.info.refresh();
    }

    ////////////////////////////////////////
    // Sort by order
    ////////////////////////////////////////
    function compareOrder(a, b) {
        var r = 0;
        if (a.order < b.order) { r = -1; }
        else if (a.order > b.order) { r = 1; }
        return r;
    }

    ////////////////////////////////////////
    // Sort by XY
    ////////////////////////////////////////
    function compareXY(a, b) {
        var r = 0;
        if (a.y < b.y) { r = -1; }
        else if (a.y > b.y) { r = 1; }
        else if (a.x < b.x) { r = -1; }
        else if (a.x > b.x) { r = 1; }
        return r;
    }

    ///////////////////////////////////////////////////////
    // Placeable location search (placed in the upper left)
    ///////////////////////////////////////////////////////
    function search_point(width, height, maxWidth, maxHeight, tbl) {
        for (var y=0; y < maxHeight; y++) {
            for (var x=0; x < maxWidth; x++) {
                if (check_matrix(x, y, width, height, maxWidth, tbl)) {
                    fill_matrix(x, y, width, height, maxWidth, tbl);
                    return  {x:x, y:y};
                }
            }
        }
        return false;
    }
    // Check placement position
    function check_matrix(px, py, width, height, maxWidth, tbl) {
        if (px+width > maxWidth) return false;
        for (var y=py; y < py+height; y++) {
            for (var x=px; x<px+width; x++) {
                if (tbl[maxWidth*y+x]) return false;
            }
        }
        return true;
    }
    // Mark the placement position
    function fill_matrix(px, py, width, height, maxWidth, tbl) {
        for (var y=py; y < py+height; y++) {
            for (var x=px; x < px+width; x++) {
                tbl[maxWidth*y+x] = 1;
            }
        }
    }

    ////////////////////////////////////////////////////
    // Apply edit result to tab information for editing
    ////////////////////////////////////////////////////
    function saveGridDatas() {
        var groups = tabDatas.groups;
        for (var cnt = 0; cnt < groups.length; cnt++) {
            // Get layout editing results
            var gridID = '#grid'+cnt;
            var serializedData = [];
            $(gridID+'.grid-stack > .grid-stack-item:visible').each( function (index) {
                el = $(this);
                var node = el.data('_gridstack_node');
                serializedData.push({
                    id: el[0].dataset.noderedid,
                    type: el[0].dataset.noderedtype,
                    group: groups[cnt].id,
                    width: Number(node.width),
                    height: Number(node.height),
                    x: node.x,
                    y: node.y,
                    auto: (el[0].dataset.noderedsizeauto == 'true') ? true : false
                });
            });

            var width = Number(groups[cnt].width);
            var height = 0;

            // Search group height
            for (var i=0; i < serializedData.length; i++) {
                var wd = serializedData[i];
                if (height < wd.y + wd.height) {
                    height = wd.y + wd.height;
                }
            }

            // Place widget on table
            var tbl = new Array(width * height);
            for (var i = 0; i< tbl.length; i++) {
                tbl[i]=0;
            }
            for (var i = 0; i < serializedData.length; i++) {
                var wd = serializedData[i];
                for (var y = wd.y; y < wd.y+wd.height; y++) {
                    for (var x = wd.x; x < wd.x+wd.width; x++) {
                        tbl[width*y+x]=1;
                    }
                }
            }

            // Add Spacer to Blank
            for (var y = 0; y < height; y++) {
                var spacerAdded = false;
                for (var x = 0; x < width; x++) {
                    if (tbl[width*y+x]===0) {
                        if (!spacerAdded) {
                            // Add 1x1 spacer
                            serializedData.push({
                                x: x,
                                y: y,
                                z: RED.workspaces.active(),
                                width: 1,
                                height: 1,
                                name: 'spacer',
                                type: 'ui_spacer'
                            });
                            spacerAdded = true;
                        } else {
                            // Extend the spacer width by 1
                            serializedData[serializedData.length-1].width += 1;
                        }
                    } else {
                        spacerAdded = false;
                    }
                }
            }

            // Sort Gridstack objects by x, y information
            serializedData.sort(compareXY);

            // Delete x and y elements as information for sorting, and give order
            var order = 0;
            for (i in serializedData) {
                order++;
                delete serializedData[i].x;
                delete serializedData[i].y;
                serializedData[i].order = order;
            }

            // Update widget information in group with edited data
            var group = groups[cnt];
            delete group.widgets;
            group.widgets = serializedData;
        }

        // Save process call
        putTabDataToNodes();
    };

    ////////////////////////////////////////////////////
    // Get default height for automatic settings
    ////////////////////////////////////////////////////
    function getDefaultHeight(nodeID, groupWidth) {
        var redNode = RED.nodes.node(nodeID);
        var height = 1;

        if (redNode.type === 'ui_gauge') {
            if (redNode.gtype === 'gage') {
                height = Math.round(groupWidth/2)+1;
            } else if (redNode.gtype === 'wave') {
                if (groupWidth < 3) {
                    height = 1;
                } else {
                    height = Math.round(groupWidth*0.75);
                }
            } else { // donut or compass
                if (groupWidth < 3) {
                    height = 1;
                } else if (groupWidth < 11) {
                    height = groupWidth - 1;
                } else {
                    height = Math.round(groupWidth*0.95);
                }
            }
        } else if (redNode.type === 'ui_chart') {
            height = Math.floor(groupWidth/2)+1;
        } else if (redNode.type === 'ui_form') {
            // var optNum = redNode.options.length; // Sub widget number
            // if (redNode.label) {
            //     height = optNum + 2; // Label and Button
            // } else {
            //     height = optNum + 1; // Button only
            // }
            height = redNode.rowCount
        } else if (redNode.type === 'ui_lineargauge') {
            if (redNode.unit && redNode.name) {
                height = 5;
            } else {
                height = 4;
            }
        } else if (redNode.type === 'ui_list') {
            height = 5;
        } else if (redNode.type === 'ui_vega') {
            height = 5;
        }
        return height;
    }

    /////////////////////////////
    // Grid width change
    ////////////////////////////
    var changeGroupWidth = function(id) {
        var widthID = '#change-width'+id;
        var gridID = '#grid'+id;
        $(widthID).spinner( {
            min: 1,
            max: MAX_GROUP_WIDTH,
            spin: function(event, ui) {
                // Search current maximum width
                var serializedData = [];
                $(gridID+'.grid-stack > .grid-stack-item:visible').each( function (index) {
                    el = $(this);
                    var node = el.data('_gridstack_node');
                    serializedData.push({
                        width: Number(node.width),
                        x: node.x,
                        auto: (el[0].dataset.noderedsizeauto == 'true') ? true : false
                    });
                });
                var maxWidth = 0;
                for (var i=0; i < serializedData.length; i++) {
                    var wd = serializedData[i];
                    if (wd.auto == false) {
                        if (maxWidth < wd.x + wd.width) {
                            maxWidth = wd.x + wd.width;
                        }
                    }
                }
                var width = ui.value;
                if (width < maxWidth) {
                    width = maxWidth;
                }

                var grid = $(gridID+'.grid-stack').data('gridstack');
                $(gridID+'.grid-stack').css("width", width * 40);
                $(gridID+'.grid-stack').css("background-size", 100/width+"% 43px");
                grid.setColumn(tabDatas.groups[id].width, true);
                grid.setColumn(width, true);
                tabDatas.groups[id].width = width;

                $(gridID+'.grid-stack > .grid-stack-item:visible').each( function(idx, el) {
                    el = $(el);
                    var node = el.data('_gridstack_node');
                    var auto = (el[0].dataset.noderedsizeauto == 'true') ? true : false;
                    var type = el[0].dataset.noderedtype;
                    grid.resizable(el, !auto);
                    if (auto === true) {
                        grid.resize(el, width, getDefaultHeight(node.id, width));
                    }
                });

                if (width !== ui.value) {
                    event.stopPropagation();
                    event.preventDefault();
                }
            }
        });
    };

    //////////////////////////////////
    // Move between groups of widgets
    //////////////////////////////////
    function handleMove(grid) {
        return function(ev, prevWidget, newWidget) {
            var elem = newWidget.el[0];
            if (elem.getAttribute("data-noderedsizeauto") === "true") {
                var id = elem.getAttribute("data-noderedid");
                var width = grid.grid.column;
                var height = getDefaultHeight(id, width);
                grid.move(elem, 0, newWidget.y);
                grid.resize(elem, width, height);

                var en = $(elem).find('.nr-dashboard-layout-resize-enable');
                en.off('click');
                en.on('click',layoutResizeEnable);
                en[0].setAttribute("title",c_("layout.auto"));
            }
            else {
                var ds = $(elem).find('.nr-dashboard-layout-resize-disable');
                ds.off('click');
                ds.on('click',layoutResizeDisable);
                ds[0].setAttribute("title",c_("layout.manual"));
            }
        };
    }

    //////////////////////////////////////////
    // Widget size change (start event)
    //////////////////////////////////////////
    var resizeGroupWidget = function(id) {
        var gridID = '#grid'+id;
        var grid = $(gridID+'.grid-stack').data('gridstack');
        $(gridID+'.grid-stack').on('resizestart', function(event, ui) {
            // Reset group width
            grid.setColumn(tabDatas.groups[id].width, true);
        });
    }

    //////////////////////////////////////////
    // Widget drag (start event)
    //////////////////////////////////////////
    var dragGroupWidget = function(id) {
        var gridID = '#grid'+id;
        var grid = $(gridID+'.grid-stack').data('gridstack');
        $(gridID+'.grid-stack').on('dragstart', function(event, ui) {
            // Reset group width
            grid.setColumn(tabDatas.groups[id].width, true);
        });
    }

    //////////////////////////////////////////
    // Layout resize Disable (Auto:false)
    //////////////////////////////////////////
    var layoutResizeDisable = function(e) {
        var target = $(e.target);
        var el = target.parents('.grid-stack-item:visible');
        var grid = target.parents('.grid-stack').data('gridstack');
        var node = el.data('_gridstack_node');
        var id = Number(target.parents('.grid-stack').attr('id').slice(4));
        var width = Number(tabDatas.groups[id].width);
        var nodeID = el[0].dataset.noderedid;
        var height = getDefaultHeight(nodeID, width);

        grid.move(el, 0, node.y);
        grid.resize(el, width, height);
        grid.resizable(el, false);
        el.find('.nr-dashboard-layout-resize-disable').off('click');
        el.attr({'data-noderedsizeauto':'true'});
        target.removeClass().addClass('fa fa-unlock nr-dashboard-layout-resize-enable');
        el.find('.nr-dashboard-layout-resize-enable')[0].setAttribute("title",c_("layout.auto"));
        el.find('.nr-dashboard-layout-resize-enable').on('click',layoutResizeEnable);
    }

    //////////////////////////////////////////
    // Layout resize Enable (Auto:true)
    //////////////////////////////////////////
    var layoutResizeEnable = function(e) {
        var target = $(e.target);
        var el = target.parents('.grid-stack-item:visible');
        var grid = target.parents('.grid-stack').data('gridstack');

        grid.resizable(el, true);
        el.find('.nr-dashboard-layout-resize-enable').off('click');
        el.attr({'data-noderedsizeauto':'false'});
        target.removeClass().addClass('fa fa-lock nr-dashboard-layout-resize-disable');
        el.find('.nr-dashboard-layout-resize-disable')[0].setAttribute("title",c_("layout.manual"));
        el.find('.nr-dashboard-layout-resize-disable').on('click',layoutResizeDisable);
    }

    //////////////////////////////////////////
    // Check dashboard layout tool supported
    //////////////////////////////////////////
    function isLayoutToolSupported(nodeType) {
        if (nodeType.indexOf("ui_") !== 0) {
            return false;
        }
        else {
            return true;
        }
    }

    RED.nodes.registerType('ui_base', {
            category: 'config',
            defaults: {
                name: {},
                theme: {},
                site: {}
            },
            hasUsers: false,
            paletteLabel: 'Dashboard',
            label: function() { return this.name || 'Node-RED Dashboard'; },
            labelStyle: function() { return this.name ? "node_label_italic" : ""; },
            onpaletteremove: function() {
                RED.sidebar.removeTab("dashboard");
                RED.events.off("editor:save",editSaveEventHandler);
                RED.events.off("nodes:add",nodesAddEventHandler);
                RED.events.off("nodes:remove",nodesRemoveEventHandler);
                RED.events.off("layout:update",layoutUpdateEventHandler); // Dashboard layout tool
            },
            onpaletteadd: function() {
                var globalDashboardNode = null;
                var editor;
                var baseStyles = ['base-color'];
                var configurableStyles = ['page-titlebar-backgroundColor', 'page-backgroundColor', 'page-sidebar-backgroundColor',
                'group-textColor', 'group-borderColor', 'group-backgroundColor',
                'widget-textColor', 'widget-backgroundColor','widget-borderColor'];
                var baseFontName = "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif";
                var aTheme = {primary:"indigo", accents:"blue", warn:"red", background:"grey", palette:"light"};
                // tiny colour implementation
                var colours = {
                    leastReadable: function(base, colours) {
                        var least = tinycolor.readability(base, colours[0]);
                        var leastColor = colours[0];
                        for (var i=1; i<colours.length; i++) {
                            var readability = tinycolor.readability(base, colours[i]);
                            if (readability < least) {
                                least = readability;
                                leastColor = colours[i];
                            }
                        }
                        return leastColor;
                    },
                    whiteGreyMostReadable: function (base) {
                        var rgb = tinycolor(base).toRgb();
                        var level = ((rgb.r*299) + (rgb.g*587) + (rgb.b*114))/1000;
                        var readable = (level >= 128) ? '#111111' : '#eeeeee';
                        return readable;
                    },
                    whiteBlackLeastReadable: function(base) {
                        return this.leastReadable(base, ["#000000", "#ffffff"]);
                    },
                    calculate_page_backgroundColor: function(base) {
                        var pageBackground = "#fafafa";
                        var theme = "light";
                        if (globalDashboardNode && globalDashboardNode.hasOwnProperty("theme") && globalDashboardNode.theme.hasOwnProperty("name")) {
                            theme = globalDashboardNode.theme.name.split('-')[1];
                        }
                        if (theme === "dark") {
                            pageBackground = "#111111";
                        }
                        else if (theme === "custom") {
                            var whiteOrBlack = this.whiteBlackLeastReadable(base);
                            if (whiteOrBlack === "#000000") { pageBackground = "#111111"; }
                        }
                        return pageBackground;
                    },
                    calculate_page_sidebar_backgroundColor: function(base) {
                        if (this.whiteBlackLeastReadable(base) === "#000000") { return "#333333"; }
                        else { return "#ffffff"; }
                    },
                    calculate_page_titlebar_backgroundColor: function(base) {
                        return base;
                    },
                    calculate_group_textColor: function(base) {
                        var groupTextColour = tinycolor(base).lighten(15).toHexString();
                        //if (this.whiteBlackLeastReadable(base) === "#ffffff") { groupTextColour = "#000000"; }
                        return groupTextColour;
                    },
                    calculate_group_backgroundColor: function(base) {
                        var groupBackground = "#ffffff";
                        var theme = "light";
                        if (globalDashboardNode && globalDashboardNode.hasOwnProperty("theme") && globalDashboardNode.theme.hasOwnProperty("name")) {
                            theme = globalDashboardNode.theme.name.split('-')[1];
                        }
                        if (theme === "dark") {
                            groupBackground = "#333333";
                        }
                        else if (theme === "custom") {
                            var whiteOrBlack = this.whiteBlackLeastReadable(base);
                            if (whiteOrBlack === "#000000") { groupBackground = "#333333"; }
                        }
                        return groupBackground;
                    },
                    calculate_group_borderColor: function(base) {
                        var groupBackground = this.calculate_group_backgroundColor(base);
                        return this.leastReadable(groupBackground, ["#ffffff", "#555555"]);
                    },
                    calculate_widget_textColor: function(base) {
                        //most readable against group background
                        var groupBackground = this.calculate_group_backgroundColor(base);
                        return tinycolor.mostReadable(groupBackground, ["#111111", "#eeeeee"]).toHexString();
                    },
                    calculate_widget_backgroundColor: function(base) {
                        //return tinycolor(base).darken(5).toHexString()
                        return tinycolor(base).toHexString();
                    },
                    calculate_widget_borderColor: function(base) {
                        var widgetBorder = "#ffffff";
                        var theme = "light";
                        if (globalDashboardNode && globalDashboardNode.hasOwnProperty("theme") && globalDashboardNode.theme.hasOwnProperty("name")) {
                            theme = globalDashboardNode.theme.name.split('-')[1];
                        }
                        if (theme === "dark") {
                            widgetBorder = "#333333";
                        }
                        else if (theme === "custom") {
                            var whiteOrBlack = this.whiteBlackLeastReadable(base);
                            if (whiteOrBlack === "#000000") { widgetBorder = "#333333"; }
                        }
                        return widgetBorder;
                    },
                    calculate_base_font: function(base) {
                        return baseFontName;
                    }
                }
                var sizes = {
                    sx: 48, // width of <1> grid square
                    sy: 48, // height of <1> grid square
                    gx: 6, // gap between groups
                    gy: 6, // gap between groups
                    cx: 6, // gap between components
                    cy: 6, // gap between components
                    px: 0, // padding of group's cards
                    py: 0  // padding of group's cards
                };

                ensureDashboardNode = function(createMissing) {
                    if (globalDashboardNode !== null) {
                        // Check if it has been deleted beneath us
                        var n = RED.nodes.node(globalDashboardNode.id);
                        if (n === null) { globalDashboardNode = null; }
                    }

                    // Find the old dashboard node
                    if (globalDashboardNode === null) {
                        var bases = [];
                        RED.nodes.eachConfig(function(n) {
                            if (n.type === 'ui_base') { bases.push(n); }
                        });

                        // make sure we only have one ui_base node
                        // at the moment this will just use our existing one - deleting any new base node and theme
                        // at some point we may want to make this an option to select one or the other.
                        while (bases.length > 1) {
                            var n = bases.pop();
                            console.log("Removing ui_base node "+n.id);
                            RED.nodes.remove(n.id);
                            RED.nodes.dirty(true);
                        }

                        if (bases.length === 1) { globalDashboardNode = bases[0]; }

                        // If there is no dashboard node, ensure we create it after
                        // initialising
                        var noDashboardNode = (globalDashboardNode === null);

                        // set up theme state
                        var themeState = {};
                        var baseColor = "#0094CE"
                        for (var i=0; i<baseStyles.length; i++) {
                            themeState[baseStyles[i]] = { default:baseColor, value:baseColor, edited:false };
                        }
                        for (var j = 0; j < configurableStyles.length; j++) {
                            var underscore = configurableStyles[j].split("-").join("_");
                            var colour = colours['calculate_'+underscore](baseColor);
                            themeState[configurableStyles[j]] = {value:colour, edited:false};
                        }
                        themeState["base-font"] = {value:baseFontName};

                        var missingFields = (!globalDashboardNode || !globalDashboardNode.theme || !globalDashboardNode.site || !globalDashboardNode.site.sizes );

                        if (missingFields && createMissing) {
                            var lightTheme = {
                                default: baseColor,
                                baseColor: baseColor,
                                baseFont: baseFontName,
                                edited: false
                            }
                            var darkTheme = {
                                default: "#097479",
                                baseColor: "#097479",
                                baseFont: baseFontName,
                                edited: false
                            }
                            var customTheme = {
                                name: 'Untitled Theme 1',
                                default: "#4B7930",
                                baseColor: "#4B7930",
                                baseFont: baseFontName
                            }
                            var oldThemeName;
                            if (globalDashboardNode && typeof(globalDashboardNode.theme === 'string')) { oldThemeName = globalDashboardNode.theme; }

                            var theme = {
                                name: oldThemeName || "theme-light",
                                lightTheme: lightTheme,
                                darkTheme: darkTheme,
                                customTheme: customTheme,
                                themeState: themeState,
                                angularTheme: aTheme
                            }

                            var site_name = c_("site.title");
                            var site_date_format = c_("site.date-format");
                            var site = { name:site_name, hideToolbar:"false", allowSwipe:"false", lockMenu:"false", allowTempTheme:"true", dateFormat:site_date_format, sizes:sizes };
                            if (globalDashboardNode !== null) {
                                if (typeof globalDashboardNode.site !== "undefined") {
                                    site = {
                                        name: globalDashboardNode.site.name || globalDashboardNode.name,
                                        hideToolbar: globalDashboardNode.site.hideToolbar,
                                        lockMenu: globalDashboardNode.site.lockMenu,
                                        allowSwipe: globalDashboardNode.site.allowSwipe,
                                        allowTempTheme: globalDashboardNode.site.allowTempTheme,
                                        dateFormat: globalDashboardNode.site.dateFormat,
                                        sizes: globalDashboardNode.site.sizes
                                    }
                                }
                                if (globalDashboardNode.theme.hasOwnProperty("angularTheme")) {
                                    aTheme = globalDashboardNode.theme.angularTheme;
                                }
                                else { globalDashboardNode.theme.angularTheme = aTheme; }
                            }

                            if (noDashboardNode) {
                                globalDashboardNode = {
                                    id: RED.nodes.id(),
                                    _def: RED.nodes.getType("ui_base"),
                                    type: "ui_base",
                                    site: site,
                                    theme: theme,
                                    users: []
                                }
                                RED.nodes.add(globalDashboardNode);
                                RED.editor.validateNode(globalDashboardNode);
                            }
                            else {
                                globalDashboardNode["_def"] = RED.nodes.getType("ui_base");
                                globalDashboardNode.site = site;
                                globalDashboardNode.theme = theme;
                                delete globalDashboardNode.name;
                            }
                            $("#nr-db-field-font").val(baseFontName);
                            RED.nodes.dirty(true);
                        }
                    }
                }

                var content = $("<div>").css({"position":"relative","height":"100%"});
                var mainContent = $("<div>",{class:"nr-db-sb"}).appendTo(content);
                var form = $('<form class="dialog-form">').appendTo(mainContent);

                // Dashboard Tabs markup
                var divTab = $('<div class="red-ui-tabs">').appendTo(form);
                var ulDashboardTabs = $('<ul id="dashboard-tabs-list"></ul>').appendTo(divTab);
                var layout_label = c_("label.layout");
                var site_label = c_("label.site");
                var theme_label = c_("label.theme");
                var angular_label = c_("label.angular");
                var liLayoutTab = $('<li class="red-ui-tab" style="width:70px;"><a class="red-ui-tab-label" title="Layout"><span>'+layout_label+'</span></a></li>').appendTo(ulDashboardTabs);
                var liSiteTab = $('<li class="red-ui-tab" style="width:70px;"><a class="red-ui-tab-label" title="Site" style="width:60px;"><span>'+site_label+'</span></a></li>').appendTo(ulDashboardTabs);
                var liThemeTab = $('<li class="red-ui-tab" style="width:70px;"><a class="red-ui-tab-label" title="Theme" style="width:80px;"><span>'+theme_label+'</span></a></li>').appendTo(ulDashboardTabs);
                var liAngularTab = $('<li class="red-ui-tab" style="width:70px;"><a class="red-ui-tab-label" title="Angular" style="width:80px;"><span>'+angular_label+'</span></a></li>').appendTo(ulDashboardTabs);

                // Link out to dashboard
                $.getJSON('uisettings',function(data) {
                    if (data.hasOwnProperty("path")) { uip = data.path; }
                    var lnk = document.location.host+RED.settings.httpNodeRoot+"/"+uip;
                    var re = new RegExp('\/{1,}','g');
                    lnk = lnk.replace(re,'/');
                    if (!RED.hasOwnProperty("actions")) {
                        RED.keyboard.add("*",/* d */ 68,{ctrl:true, shift:true},function() { window.open(document.location.protocol+"//"+lnk, "nr-dashboard") });
                    }
                    else {
                        RED.actions.add("dashboard:show-dashboard",function() { window.open(document.location.protocol+"//"+lnk, "nr-dashboard") });
                        RED.keyboard.add("*","ctrl-shift-d","dashboard:show-dashboard");
                    }
                    $('<span id="dash-link-button" class="editor-button" style="position:absolute; right:0px;"><i class="fa fa-external-link"></i></span>')
                    .click(function(evt) {
                        window.open(document.location.protocol+"//"+lnk);
                        evt.preventDefault();
                    })
                    .appendTo(ulDashboardTabs);
                });

                // Dashboard Tab containers
                var layoutTab = $('<div id="dashboard-layout" style="height:calc(100% - 48px)">').appendTo(form);
                var siteTab = $('<div id="dashboard-site" style="display:none;">').appendTo(form);
                var themeTab = $('<div id="dashboard-theme" style="display:none;">').appendTo(form);
                var angularTab = $('<div id="dashboard-angular" style="display:none;">').appendTo(form);

                ulDashboardTabs.children().first().addClass("active");

                // Tab logic
                var onTabClick = function() {
                    //Toggle tabs
                    ulDashboardTabs.children().removeClass("active");
                    ulDashboardTabs.children().css({"transition": "width 100ms"});
                    $(this).parent().addClass("active");

                    var selectedTab = $(this)[0].title;
                    if (selectedTab === 'Layout') {
                        themeTab.hide();
                        siteTab.hide();
                        angularTab.hide();
                        layoutTab.show();
                    }
                    else if (selectedTab === 'Angular') {
                        themeTab.hide();
                        siteTab.hide();
                        angularTab.show();
                        layoutTab.hide();
                    }
                    else if (selectedTab === 'Theme') {
                        layoutTab.hide();
                        siteTab.hide();
                        angularTab.hide();
                        themeTab.show();
                        if ($("#nr-db-field-theme option:selected").val() === 'theme-custom') { themeSettingsContainer.show(); }
                        else { themeSettingsContainer.hide(); }
                    }
                    else {
                        layoutTab.hide();
                        themeTab.hide();
                        angularTab.hide();
                        siteTab.show();
                    }
                }

                ulDashboardTabs.find("li.red-ui-tab a").on("click",onTabClick)

                // Site Tab
                var divTitle = $('<div>',{class:"form-row compact"}).appendTo(siteTab);
                $('<div>').html('<b>'+c_("label.title")+'</b>').appendTo(divTitle);
                $('<input type="text" id="nr-db-field-title">').val(site_name).css("width","100%")
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.site.name !== $(this).val()) {
                        //ensureDashboardNode(true);
                        globalDashboardNode.site.name = $(this).val();
                    }
                    RED.nodes.dirty(true);
                })
                .appendTo(divTitle);

                var divHideToolbar = $('<div>',{class:"form-row compact"}).appendTo(siteTab);
                $('<div>').html('<b>'+c_("label.options")+'</b>').appendTo(divHideToolbar);
                $('<select id="nr-db-field-hideToolbar">')
                .css("width","100%")
                .append($('<option>', { value:"false", text:c_("title-bar.show"), selected:true }))
                .append($('<option>', { value:"true", text:c_("title-bar.hide") }))
                .val("false")
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.site.hideToolbar !== $(this).val()) {
                        //ensureDashboardNode(true);
                        globalDashboardNode.site.hideToolbar = $(this).val();
                    }
                    RED.nodes.dirty(true);
                })
                .appendTo(divHideToolbar);

                var divLockMenu = $('<div>',{class:"form-row compact"}).appendTo(siteTab);
                $('<select id="nr-db-field-lockMenu">')
                .css("width","100%")
                .append($('<option>', { value:"false", text:c_("lock.clicked"), selected:true }))
                .append($('<option>', { value:"true", text:c_("lock.locked") }))
                .append($('<option>', { value:"icon", text:c_("lock.locked-icon") }))
                .val("false")
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.site.lockMenu !== $(this).val()) {
                        //ensureDashboardNode(true);
                        globalDashboardNode.site.lockMenu = $(this).val();
                    }
                    RED.nodes.dirty(true);
                })
                .appendTo(divLockMenu);

                var divAllowSwipe = $('<div>',{class:"form-row compact"}).appendTo(siteTab);
                $('<select id="nr-db-field-allowSwipe">')
                .css("width","100%")
                .append($('<option>', { value:"false", text:c_("swipe.no-swipe"), selected:true }))
                .append($('<option>', { value:"true", text:c_("swipe.allow-swipe") }))
                .append($('<option>', { value:"mouse", text:c_("swipe.allow-swipe-mouse") }))
                .append($('<option>', { value:"menu", text:c_("swipe.show-menu") }))
                .val("false")
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.site.allowSwipe !== $(this).val()) {
                        //ensureDashboardNode(true);
                        globalDashboardNode.site.allowSwipe = $(this).val();
                        RED.nodes.dirty(true);
                    }
                })
                .appendTo(divAllowSwipe);

                var divAllowTempTheme = $('<div>',{class:"form-row compact"}).appendTo(siteTab);
                $('<select id="nr-db-field-allowTempTheme">')
                .css("width","100%")
                .append($('<option>', { value:"true", text:c_("temp.allow-theme"), selected:true }))
                .append($('<option>', { value:"false", text:c_("temp.no-theme") }))
                .append($('<option>', { value:"none", text:c_("temp.none") }))
                .val("true")
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.site.allowTempTheme !== $(this).val()) {
                        //ensureDashboardNode(true);
                        globalDashboardNode.site.allowTempTheme = $(this).val();
                    }
                    if ($('#nr-db-field-allowTempTheme').val() === "none") {
                        ulDashboardTabs.children().eq(2).addClass("hidden");
                        ulDashboardTabs.children().eq(3).removeClass("hidden");
                    }
                    else {
                        ulDashboardTabs.children().eq(2).removeClass("hidden");
                        ulDashboardTabs.children().eq(3).addClass("hidden");
                    }
                    RED.nodes.dirty(true);
                })
                .appendTo(divAllowTempTheme);

                var site_name = c_("site.title");
                var site_date_format = c_("site.date-format");
                var divDateFormat = $('<div>',{class:"form-row"}).appendTo(siteTab);
                $('<div>').html('<b>'+c_("label.date-format")+'</b>')
                .css("width","80%")
                .css("display","inline-block")
                .appendTo(divDateFormat);
                $('<div>').html("<a href='https://momentjs.com/docs/#/displaying/format/' target='_new'><i class='fa fa-info-circle' style='color:grey;'></i></a>")
                .css("display","inline-block")
                .css("margin-right","6px")
                .css("float","right")
                .appendTo(divDateFormat);
                $('<input type="text" id="nr-db-field-dateFormat">').val(site_date_format).css("width","100%")
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.site.dateFormat !== $(this).val()) {
                        //ensureDashboardNode(true);
                        globalDashboardNode.site.dateFormat = $(this).val();
                    }
                    RED.nodes.dirty(true);
                })
                .appendTo(divDateFormat);

                var divSetSizes = $('<div>',{class:"form-row"}).appendTo(siteTab);
                $('<span style="width:45%; display:inline-block">').html('<b>'+c_("label.sizes")+'</b>').appendTo(divSetSizes);
                $('<span style="width:25%; display:inline-block; font-size:smaller">').text(c_("label.horizontal")).appendTo(divSetSizes);
                $('<span style="width:20%; display:inline-block; font-size:smaller">').text(c_("label.vertical")).appendTo(divSetSizes);
                $('<i id="sizes-reset" class="fa fa-undo nr-db-resetIcon"></i>')
                .css({opacity:1.0})
                .click(function(e) {
                    $("#nr-db-field-sx").val(sizes.sx); globalDashboardNode.site.sizes.sx = sizes.sx;
                    $("#nr-db-field-sy").val(sizes.sy); globalDashboardNode.site.sizes.sy = sizes.sy;
                    $("#nr-db-field-px").val(sizes.px); globalDashboardNode.site.sizes.px = sizes.px;
                    $("#nr-db-field-py").val(sizes.py); globalDashboardNode.site.sizes.py = sizes.py;
                    $("#nr-db-field-gx").val(sizes.gx); globalDashboardNode.site.sizes.gx = sizes.gx;
                    $("#nr-db-field-gy").val(sizes.gy); globalDashboardNode.site.sizes.gy = sizes.gy;
                    $("#nr-db-field-cx").val(sizes.cx); globalDashboardNode.site.sizes.cx = sizes.cx;
                    $("#nr-db-field-cy").val(sizes.cy); globalDashboardNode.site.sizes.cy = sizes.cy;
                    RED.nodes.dirty(true);
                })
                .appendTo(divSetSizes);

                $('<br/><span style="width:45%; display:inline-block">').text(c_("label.widget-size")).appendTo(divSetSizes);
                $('<input type="number" name="sx" min="24" id="nr-db-field-sx">').val(48).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.sx=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);
                $('<span style="width:5%; display:inline-block">').text(' ').appendTo(divSetSizes);
                $('<input type="number" name="sy" min="24" id="nr-db-field-sy">').val(48).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.sy=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);

                $('<br/><span style="width:45%; display:inline-block">').text(c_("label.widget-spacing")).appendTo(divSetSizes);
                $('<input type="number" name="cx" min="0" id="nr-db-field-cx">').val(6).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.cx=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);
                $('<span style="width:5%; display:inline-block">').text(' ').appendTo(divSetSizes);
                $('<input type="number" name="cy" min="0" id="nr-db-field-cy">').val(6).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.cy=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);

                $('<br/><span style="width:45%; display:inline-block">').text(c_("label.group-padding")).appendTo(divSetSizes);
                $('<input type="number" name="px" min="0" id="nr-db-field-px">').val(0).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.px=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);
                $('<span style="width:5%; display:inline-block">').text(' ').appendTo(divSetSizes);
                $('<input type="number" name="py" min="0" id="nr-db-field-py">').val(0).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.py=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);

                $('<br/><span style="width:45%; display:inline-block">').text(c_("label.group-spacing")).appendTo(divSetSizes);
                $('<input type="number" name="gx" min="0" id="nr-db-field-gx">').val(6).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.gx=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);
                $('<span style="width:5%; display:inline-block">').text(' ').appendTo(divSetSizes);
                $('<input type="number" name="gy" min="0" id="nr-db-field-gy">').val(6).css("width","20%")
                .on("change", function() {
                    //ensureDashboardNode(true);
                    globalDashboardNode.site.sizes.gy=Number($(this).val()); RED.nodes.dirty(true); } )
                .appendTo(divSetSizes);

                // Angular Theme Tab
                var changed = function() {
                    ensureDashboardNode(true);
                    globalDashboardNode.theme.angularTheme = aTheme;
                    RED.nodes.dirty(true);
                }

                var angColorList = ["red", "pink", "purple", "deep-purple", "indigo", "blue", "light-blue", "cyan", "teal", "green", "light-green", "lime", "yellow", "amber", "orange", "deep-orange", "brown", "grey", "blue-grey"];
                var angColors = "";
                angColorList.forEach(function(c) { angColors += '<option value="' + c + '">' + c + '</option>'; });

                var divPrimStyle = $('<div>',{class:"form-row"}).appendTo(angularTab);
                $('<span style="width:45%; display:inline-block">')
                    .html('<b>'+c_("style.primary")+'</b>')
                    .appendTo(divPrimStyle);
                $('<i id="ang-reset" class="fa fa-undo nr-db-resetIcon"></i>')
                    .css({opacity:1.0})
                    .click(function(e) {
                        $("#nr-db-field-angPrimary").val("indigo");
                        globalDashboardNode.theme.angularTheme.primary = "indigo";
                        RED.nodes.dirty(true);
                    })
                    .appendTo(divPrimStyle);
                $('<select id="nr-db-field-angPrimary">'+angColors+'</select>')
                    .css("width","100%")
                    .val(aTheme.primary)
                    .on("change", function() { aTheme.primary = $(this).val(); changed(); })
                    .appendTo(divPrimStyle);

                var divAccStyle = $('<div>',{class:"form-row"}).appendTo(angularTab);
                $('<span style="width:45%; display:inline-block">')
                    .html('<b>'+c_("style.accents")+'</b>')
                    .appendTo(divAccStyle);
                $('<i id="ang-reset" class="fa fa-undo nr-db-resetIcon"></i>')
                    .css({opacity:1.0})
                    .click(function(e) {
                        $("#nr-db-field-angAccents").val("blue");
                        globalDashboardNode.theme.angularTheme.accents = "blue";
                        RED.nodes.dirty(true);
                    })
                    .appendTo(divAccStyle);
                $('<select id="nr-db-field-angAccents">'+angColors+'</select>')
                    .css("width","100%")
                    .val(aTheme.accents)
                    .on("change", function() { aTheme.accents = $(this).val(); changed(); })
                    .appendTo(divAccStyle);

                var divWarnStyle = $('<div>',{class:"form-row"}).appendTo(angularTab);
                $('<span style="width:45%; display:inline-block">')
                    .html('<b>'+c_("style.warnings")+'</b>')
                    .appendTo(divWarnStyle);
                $('<i id="ang-reset" class="fa fa-undo nr-db-resetIcon"></i>')
                    .css({opacity:1.0})
                    .click(function(e) {
                        $("#nr-db-field-angWarn").val("red");
                        globalDashboardNode.theme.angularTheme.warn = "red";
                        RED.nodes.dirty(true);
                    })
                    .appendTo(divWarnStyle);
                $('<select id="nr-db-field-angWarn">'+angColors+'</select>')
                    .css("width","100%")
                    .val(aTheme.warn)
                    .on("change", function() { aTheme.warn = $(this).val(); changed(); })
                    .appendTo(divWarnStyle);

                var divBackStyle = $('<div>',{class:"form-row"}).appendTo(angularTab);
                $('<span style="width:45%; display:inline-block">')
                    .html('<b>'+c_("style.background")+'</b>')
                    .appendTo(divBackStyle);
                $('<i id="ang-reset" class="fa fa-undo nr-db-resetIcon"></i>')
                    .css({opacity:1.0})
                    .click(function(e) {
                        $("#nr-db-field-angBackground").val("grey");
                        globalDashboardNode.theme.angularTheme.background = "grey";
                        RED.nodes.dirty(true);
                    })
                    .appendTo(divBackStyle);
                $('<select id="nr-db-field-angBackground">'+angColors+'</select>')
                    .css("width","100%")
                    .val(aTheme.background)
                    .on("change", function() { aTheme.background = $(this).val(); changed(); })
                    .appendTo(divBackStyle);

                var divPalStyle = $('<div>',{class:"form-row"}).appendTo(angularTab);
                $('<span style="width:45%; display:inline-block">')
                    .html('<b>'+c_("style.palette")+'</b>')
                    .appendTo(divPalStyle);
                var lightdark = '<option value="light">' +c_("style.light")+ '</option>';
                lightdark += '<option value="dark">' +c_("style.dark")+ '</option>';
                $('<select id="nr-db-field-angLook">'+lightdark+'</select>')
                    .css("width","100%")
                    .val(aTheme.palette)
                    .on("change", function() { aTheme.palette = $(this).val(); changed(); })
                    .appendTo(divPalStyle);

                // Theme Tab
                // For all customisable styles, generate and apply the css
                var generateColours = function(base) {
                    var theme = globalDashboardNode.theme.name.split('-')[1];
                    if (!globalDashboardNode.theme.themeState.hasOwnProperty["base-font"]) {
                        if (globalDashboardNode.theme[theme+"Theme"].baseFont === "Helvetica Neue") {
                            globalDashboardNode.theme[theme+"Theme"].baseFont = baseFontName;
                        }
                        globalDashboardNode.theme.themeState["base-font"] = {value:globalDashboardNode.theme[theme+"Theme"].baseFont};
                        $("#nr-db-field-font").val(globalDashboardNode.theme[theme+"Theme"].baseFont);
                    }
                    for (var i=0; i<configurableStyles.length; i++) {
                        var styleID = configurableStyles[i];
                        var underscore = styleID.split("-").join("_");
                        if (!globalDashboardNode.theme.themeState.hasOwnProperty(styleID)) {
                            globalDashboardNode.theme.themeState[styleID] = {value:"#fff",edited:false};
                        }
                        if (!globalDashboardNode.theme.themeState[styleID].edited || globalDashboardNode.theme[theme+'Theme'].reset) {
                            var colour = colours['calculate_'+underscore](base);
                            globalDashboardNode.theme.themeState[styleID].value = colour;
                        }
                        setColourPickerColour(styleID, globalDashboardNode.theme.themeState[styleID].value, globalDashboardNode.theme.themeState[styleID].edited);
                    }
                    globalDashboardNode.theme[theme+'Theme'].reset = false;
                }

                var divThemeStyle = $('<div>',{class:"form-row"}).appendTo(themeTab);
                $('<label class="nr-db-theme-label">').text(c_("theme.style")).appendTo(divThemeStyle);
                var themeSelection = $('<select id="nr-db-field-theme">'+
                    '<option value="theme-light">'+c_("style.light")+'</option>'+
                    '<option value="theme-dark">'+c_("style.dark")+'</option>'+
                    '<option value="theme-custom">'+c_("style.custom")+'</option>'+
                    '</select>')
                .css("width","100%")
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.theme.name !== $(this).val()) {
                        //ensureDashboardNode(true);
                        var theme = globalDashboardNode.theme.name.split('-')[1];
                        var baseColour = globalDashboardNode.theme[theme+'Theme'].baseColor;
                        var baseFont = globalDashboardNode.theme[theme+'Theme'].baseFont;
                        globalDashboardNode.theme.name = $(this).val();
                        theme = globalDashboardNode.theme.name.split('-')[1];
                        if (theme !== "custom") {
                            baseColour = globalDashboardNode.theme[theme+'Theme'].default;
                        }
                        else { baseColour = globalDashboardNode.theme[theme+'Theme'].baseColor; }
                        setColourPickerColour("base-color", baseColour);
                        globalDashboardNode.theme.themeState['base-color'].value = baseColour;
                        globalDashboardNode.theme.themeState['base-color'].default = baseColour;
                        globalDashboardNode.theme.themeState['base-font'] = {value:baseFont};
                        $("#nr-db-field-font").val(baseFont);
                        globalDashboardNode.theme[theme+'Theme'].reset = true;
                        //generate colours for all colour settings from base colour
                        generateColours(baseColour);
                        RED.nodes.dirty(true);
                    }
                    $('#base-color-reset').remove();
                    if ($(this).val() === 'theme-custom') {
                        $("#custom-theme-library-container").show(); //TODO undo this at some point
                        $("#custom-theme-settings").show();
                        //addResetButton('base-color', baseSettingsUl.children());
                    }
                    else {
                        $("#custom-theme-library-container").hide();
                        $("#custom-theme-settings").hide();
                        addLightAndDarkResetButton('base-color', baseSettingsUl.children().first());
                    }
                })
                .appendTo(divThemeStyle);

                var customThemeLibraryContainer = $('<div id="custom-theme-library-container">').appendTo(themeTab);
                $('<label class="nr-db-theme-label">').text(c_("theme.custom-profile")).appendTo(customThemeLibraryContainer);
                $('<input type="text" id="ui-sidebar-name" style="vertical-align:top;" placeholder="profile name (not blank)">')
                .val(c_("theme.custom-profile-name"))
                .on("change", function() {
                    if (!globalDashboardNode || globalDashboardNode.theme.customTheme.name !== $(this).val()) {
                        //ensureDashboardNode(true);
                        globalDashboardNode.theme.customTheme.name = $(this).val();
                        if (editor) {
                            editor.setValue(JSON.stringify({theme:globalDashboardNode.theme.themeState, site:globalDashboardNode.site}),1);
                            RED.nodes.dirty(true);
                        }
                    }
                })
                .keyup(function() {
                    if ($(this).val().length === 0) {
                        $("#custom-theme-library-container div").css("pointer-events","none");
                    }
                    else { $("#custom-theme-library-container div").css("pointer-events","inherit"); }
                })
                .appendTo(customThemeLibraryContainer);
                $('<input type="hidden" id="nr-db-field-format">').appendTo(customThemeLibraryContainer);
                $('<div style="display:none;" class="node-text-editor" id="nr-db-field-format-editor"></div>').appendTo(customThemeLibraryContainer);

                var baseThemeSettingsContainer = $('<div id="base-theme-settings">').appendTo(themeTab);

                var baseSettings = $('<div>',{class:"form-row"}).appendTo(baseThemeSettingsContainer);
                $('<label class="nr-db-theme-label">').text(c_("theme.base-settings")).appendTo(baseSettings);
                var baseSettingsUl = $('<ul id="base-settings-ul" class="red-ui-dashboard-theme-styles"></ul>').appendTo(baseSettings);

                var baseColourItem = $('<li class="red-ui-dashboard-theme-item"><span>'+c_("base.colour")+'</span></li>').appendTo(baseSettingsUl);
                var spanColorContainer = $('<span class="nr-db-color-pick-container"></span>').appendTo(baseColourItem);

                $('<input id="base-color" class="nr-db-field-themeColor" type="color" value="#ffffff"/>')
                .on("change", function() {
                    //ensureDashboardNode(true);
                    var value = $(this).val();
                    var lightThemeMatch = globalDashboardNode.theme.lightTheme.baseColor === value;
                    var darkThemeMatch = globalDashboardNode.theme.darkTheme.baseColor === value;
                    var customThemeMatch = globalDashboardNode.theme.customTheme.baseColor === value;
                    if (!globalDashboardNode || !lightThemeMatch || !darkThemeMatch || !customThemeMatch) {
                        var theme = globalDashboardNode.theme.name.split('-')[1];
                        globalDashboardNode.theme[theme+'Theme'].baseColor = value;
                        if (globalDashboardNode.theme.name === 'theme-light' || globalDashboardNode.theme.name === 'theme-dark') {
                            //for light and dark themes, reset the colours
                            globalDashboardNode.theme[theme+'Theme'].reset = true;
                        }
                        generateColours(value);
                        editor.setValue(JSON.stringify({theme:globalDashboardNode.theme.themeState, site:globalDashboardNode.site}),1);
                        colourPickerChangeHandler($(this).attr('id'), value);
                    }
                })
                .appendTo(spanColorContainer);

                var baseFontItem = $('<li class="red-ui-dashboard-theme-item"><span>'+c_("base.font")+'</span></li>').appendTo(baseSettingsUl);
                var fontSelector = $('<select id="nr-db-field-font">'+
                    '<option value="'+baseFontName+'" style="font-family:'+baseFontName+'">'+c_("font.system")+'</option>'+
                    '<option value="Arial,Arial,Helvetica,sans-serif" style="font-family:Arial,Arial,Helvetica,sans-serif">Arial</option>'+
                    '<option value="Arial Black,Arial Black,Gadget,sans-serif" style="font-family:Arial Black,Arial Black,Gadget,sans-serif">Arial Black</option>'+
                    '<option value="Arial Narrow,Nimbus Sans L,sans-serif" style="font-family:Arial Narrow,Nimbus Sans L,sans-serif">Arial Narrow</option>'+
                    '<option value="Century Gothic,CenturyGothic,AppleGothic,sans-serif" style="font-family:Century Gothic,CenturyGothic,AppleGothic,sans-serif">Century Gothic</option>'+
                    '<option value="Copperplate,Copperplate Gothic Light,fantasy" style="font-family:Copperplate,Copperplate Gothic Light,fantasy;">Copperplate</option>'+
                    '<option value="Courier,monospace" style="font-family:Courier,monospace;">Courier</option>'+
                    '<option value="Georgia,Georgia,serif" style="font-family:Georgia,Georgia,serif">Georgia</option>'+
                    '<option value="Gill Sans,Geneva,sans-serif" style="font-family:Gill Sans,Geneva,sans-serif;">Gill Sans</option>'+
                    //'<option value="Helvetica Neue,Helvetica,sans-serif" style="font-family:Helvetica Neue,Helvetica,sans-serif">Helvetica Neue</option>'+
                    '<option value="Impact,Impact,Charcoal,sans-serif" style="font-family:Impact,Impact,Charcoal,sans-serif">Impact</option>'+
                    '<option value="Lucida Sans Typewriter,Lucida Console,Monaco,monospace" style="font-family:Lucida Console,Monaco,monospace">Lucida Console</option>'+
                    '<option value="Lucida Sans Unicode,Lucida Grande,sans-serif" style="font-family:Lucida Sans Unicode,Lucida Grande,sans-serif">Lucida Sans</option>'+
                    '<option value="Palatino Linotype,Palatino,Book Antiqua,serif" style="font-family:Palatino Linotype,Palatino,Book Antiqua,serif">Palatino Linotype</option>'+
                    '<option value="Tahoma,Geneva,sans-serif" style="font-family:Tahoma,Geneva,sans-serif">Tahoma</optionstyle="font-family:>'+
                    '<option value="Times New Roman,Times,serif" style="font-family:Times New Roman,Times,serif">Times New Roman</option>'+
                    '<option value="Trebuchet MS,Helvetica,sans-serif" style="font-family:Trebuchet MS,Helvetica,sans-serif">Trebuchet MS</option>'+
                    '<option value="Verdana,Verdana,Geneva,sans-serif" style="font-family:Verdana,Verdana,Geneva,sans-serif">Verdana</option>'+
                    '</select>')
                    .on("change", function() {
                        //ensureDashboardNode(true);
                        var theme = globalDashboardNode.theme.name.split('-')[1];
                        globalDashboardNode.theme[theme+'Theme'].baseFont = $(this).val();
                        globalDashboardNode.theme.themeState['base-font'] = {value:$(this).val()};
                        RED.nodes.dirty(true);
                    })
                    .appendTo(baseFontItem);

                var themeSettingsContainer = $('<div id="custom-theme-settings">').appendTo(themeTab);

                // Markup
                // Page styles
                var divPageStyle = $('<div>',{class:"form-row"}).appendTo(themeSettingsContainer);
                $('<label class="nr-db-theme-label">').text(c_("theme.page-settings")).appendTo(divPageStyle);
                var pageStyles = $('<ul class="red-ui-dashboard-theme-styles"></ul>').appendTo(themeSettingsContainer);
                addCustomisableStyle('page-titlebar-backgroundColor', c_("theme.page.title"), pageStyles);
                addCustomisableStyle('page-backgroundColor', c_("theme.page.page"), pageStyles);
                addCustomisableStyle('page-sidebar-backgroundColor', c_("theme.page.side"), pageStyles);

                // Group styles
                var divGroupStyle = $('<div>',{class:"form-row"}).appendTo(themeSettingsContainer);
                $('<label class="nr-db-theme-label">').text(c_("theme.group-settings")).appendTo(divGroupStyle);
                var groupStyles = $('<ul class="red-ui-dashboard-theme-styles"></ul>').appendTo(themeSettingsContainer);
                addCustomisableStyle('group-textColor', c_("theme.group.text"), groupStyles);
                addCustomisableStyle('group-borderColor', c_("theme.group.border"), groupStyles);
                addCustomisableStyle('group-backgroundColor', c_("theme.group.background"), groupStyles);

                // Widget styles
                var divWidgetStyle = $('<div>',{class:"form-row"}).appendTo(themeSettingsContainer);
                $('<label class="nr-db-theme-label">').text(c_("theme.widget-settings")).appendTo(divWidgetStyle);
                var widgetStyles = $('<ul class="red-ui-dashboard-theme-styles"></ul>').appendTo(themeSettingsContainer);
                addCustomisableStyle('widget-textColor', c_("theme.widget.text"), widgetStyles);
                addCustomisableStyle('widget-backgroundColor', c_("theme.widget.colour"), widgetStyles);
                addCustomisableStyle('widget-borderColor', c_("theme.widget.background"), widgetStyles);

                function addCustomisableStyle(id, name, parentUl) {
                    var styleLi = $('<li class="red-ui-dashboard-theme-item"><span>'+name+'</span></li>').appendTo(parentUl);
                    var spanColorContainer = $('<span class="nr-db-color-pick-container"></span>').appendTo(styleLi);
                    $('<input id="'+id+'" class="nr-db-field-themeColor" type="color" value="#ffffff"/>')
                    .on("change", function() {
                        colourPickerChangeHandler($(this).attr('id'), $(this).val());
                    })
                    .appendTo(spanColorContainer);
                    addResetButton(id, styleLi);
                }

                function colourPickerChangeHandler(id, value) {
                    $("#"+id).css("background-color", value);
                    $("#"+id+"-reset").css({opacity:1});
                    globalDashboardNode.theme.themeState[id].edited = true;
                    globalDashboardNode.theme.themeState[id].value = value;
                    if (editor) {
                        editor.setValue(JSON.stringify({theme:globalDashboardNode.theme.themeState, site:globalDashboardNode.site}),1);
                    }
                    RED.nodes.dirty(true);
                }

                function addResetButton(id, parent) {
                    var resetToDefault = $('<i id="'+id+'-reset" class="fa fa-undo nr-db-resetIcon"></i>')
                    .css({opacity:0.2})
                    .click(function(e) { resetClick(e); })
                    .appendTo(parent);
                }

                function addLightAndDarkResetButton(id, parent) {
                    if ($("#" + id + "-reset").length === 0) {
                        var resetToDefault = $('<i id="'+id+'-reset" class="fa fa-undo nr-db-resetIcon"></i>')
                        .css({opacity:1})
                        .click(function(e) { lightAndDarkResetClick(e); })
                        .appendTo(parent);
                        globalDashboardNode.theme[globalDashboardNode.theme.name.split('-')[1] + 'Theme'].edited = true;
                    }
                }

                function lightAndDarkResetClick(e) {
                    var elementID = e.target.id.split('-reset')[0];
                    var key = globalDashboardNode.theme.name.split('-')[1] + 'Theme';
                    //sanity check - light and dark only allow base-color-reset
                    if (elementID === 'base-color') { // && globalDashboardNode.theme[key].edited) {
                        var defaultColor = globalDashboardNode.theme[key].default;
                        globalDashboardNode.theme[key].reset = true;
                        generateColours(defaultColor);
                        setColourPickerColour(elementID, defaultColor);
                        $("#"+elementID+"-reset").css({opacity:0.2});
                        globalDashboardNode.theme.themeState[elementID].value = defaultColor;
                        globalDashboardNode.theme[key].baseColor = defaultColor;
                        globalDashboardNode.theme[key].edited = false;
                        RED.nodes.dirty(true);
                    }
                }

                function resetClick(e) {
                    //take off -reset
                    var elementID = e.target.id.split('-reset')[0];
                    if (globalDashboardNode.theme.themeState[elementID].edited) {
                        var defaultColor = globalDashboardNode.theme.themeState['base-color'].value;
                        var colour;
                        //set colour
                        if (elementID === 'base-color') {
                            colour = defaultColor;
                            generateColours(colour);
                        }
                        else {
                            var underscore = elementID.split('-').join('_');
                            colour = colours['calculate_'+underscore](defaultColor);
                        }
                        setColourPickerColour(elementID, colour);
                        $("#"+elementID+"-reset").css({opacity:0.2});
                        globalDashboardNode.theme.themeState[elementID].edited = false;
                        globalDashboardNode.theme.themeState[elementID].value = colour;
                        RED.nodes.dirty(true);
                    }
                }

                function setColourPickerColour(id, val, ed) {
                    $("#"+id).val(val);
                    $("#"+id).css("background-color", val);
                    //call mostReadableGreyWhite to set text colour
                    var textColor = colours.whiteGreyMostReadable(val);
                    $("#"+id).css("color", textColor);
                    if (ed === true) { $("#"+id+"-reset").css({opacity:1}); }
                    else { $("#"+id+"-reset").css({opacity:0.2}); }
                }

                //Layout Tab
                var divTabs = $('<div>',{class:"form-row",style:"position:relative"}).appendTo(layoutTab);
                $('<label>').html('<b>'+c_("layout.tab-and-link")+'</b>').appendTo(divTabs);

                var buttonGroup = $('<div>',{class:"nr-db-sb-list-button-group"}).appendTo(divTabs);

                //Toggle expand buttons
                $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-angle-double-up"></i></a>')
                .click(function(evt) {
                    tabContainer.find(".nr-db-sb-group-list-container").slideUp().addClass('nr-db-sb-collapsed');
                    tabContainer.find(".nr-db-sb-tab-list-header>.nr-db-sb-list-chevron").css({"transform":"rotate(-90deg)"});
                    evt.preventDefault();
                })
                .appendTo(buttonGroup);
                $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-angle-double-down"></i></a>')
                .click(function(evt) {
                    tabContainer.find(".nr-db-sb-group-list-container").slideDown().removeClass('nr-db-sb-collapsed');
                    tabContainer.find(".nr-db-sb-tab-list-header>.nr-db-sb-list-chevron").css({"transform":""});
                    evt.preventDefault();
                })
                .appendTo(buttonGroup);

                //Add item button
                $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> '+c_("layout.tab")+'</a>')
                .click(function(evt) {
                    tabContainer.editableList('addItem',{type: 'ui_tab'});
                    evt.preventDefault();
                })
                .appendTo(buttonGroup);
                $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> '+c_("layout.link")+'</a>')
                .click(function(evt) {
                    tabContainer.editableList('addItem',{type: 'ui_link'});
                    evt.preventDefault();
                })
                .appendTo(buttonGroup);

                var tabLists = {};
                var groupLists = {};

                // toggle slide tab group content
                var titleToggle = function (id,content,chevron) {
                    return function(evt) {
                        if (content.is(":visible")) {
                            content.slideUp();
                            chevron.css({"transform":"rotate(-90deg)"});
                            content.addClass('nr-db-sb-collapsed');
                            listStates[id] = false;
                        }
                        else {
                            content.slideDown();
                            chevron.css({"transform":""});
                            content.removeClass('nr-db-sb-collapsed');
                            listStates[id] = true;
                        }
                    };
                }

                var addTabOrLinkItem = function(container,i,item) {
                    ensureDashboardNode(true);
                    // create node if needed
                    if (!item.node) {
                        var defaultItem = {
                            'ui_tab': {
                                _def: RED.nodes.getType('ui_tab'),
                                type: 'ui_tab',
                                users: [],
                                icon: 'dashboard',
                                name: 'Tab'
                            },
                            'ui_link': {
                                _def: RED.nodes.getType('ui_link'),
                                type: 'ui_link',
                                users: [],
                                icon: 'open_in_browser',
                                name: 'Link',
                                target: 'newtab'
                            }
                        }
                        item.node = defaultItem[item.type]
                        item.node.id = RED.nodes.id()
                        item.node.order = i+1
                        item.node.name += ' '+item.node.order
                        listElements[item.node.id] = container;
                        if (item.type === 'ui_tab') {
                            item.groups = [];
                        }
                        RED.nodes.add(item.node);
                        RED.editor.validateNode(item.node);
                        RED.history.push({
                            t:'add',
                            nodes:[item.node.id],
                            dirty:RED.nodes.dirty()
                        });
                        RED.nodes.dirty(true);
                    }
                    else if (item.type === undefined) {
                        item.type = item.node.type
                    }

                    listElements[item.node.id] = container;
                    if (RED.nodes.hasOwnProperty('updateConfigNodeUsers')) {
                        RED.nodes.updateConfigNodeUsers(item.node);
                    }

                    // title
                    var titleRow = $('<div>',{class:"nr-db-sb-list-header nr-db-sb-tab-list-header"}).appendTo(container);
                    switch (item.type) {
                        case 'ui_tab': {
                            container.addClass("nr-db-sb-tab-list-item");
                            $('<i class="nr-db-sb-list-handle nr-db-sb-tab-list-handle fa fa-bars"></i>').appendTo(titleRow);
                            var chevron = $('<i class="fa fa-angle-down nr-db-sb-list-chevron">',{style:"width:10px;"}).appendTo(titleRow);
                            var tabicon = "fa-object-group";
                            //var tabicon = item.node.disabled ? "fa-window-close-o" : item.node.hidden ? "fa-eye-slash" : "fa-object-group";
                            $('<i>',{class:"nr-db-sb-icon nr-db-sb-tab-icon fa "+tabicon}).appendTo(titleRow);
                            var tabhide = item.node.hidden ? " nr-db-sb-title-hidden" : "";
                            var tabable = item.node.disabled ? " nr-db-sb-title-disabled" : "";
                            $('<span>',{class:"nr-db-sb-title"+tabhide+tabable}).text(item.node.name||"").appendTo(titleRow);
                            break;
                        }
                        case 'ui_link': {
                            $('<i class="nr-db-sb-list-handle fa fa-bars"></i>').appendTo(titleRow);
                            var title = $('<div class="nr-db-sb-link">').appendTo(titleRow);
                            var nameContainer = $('<div class="nr-db-sb-link-name-container">').appendTo(title);
                            $('<i class="fa fa-external-link"></i>').appendTo(nameContainer);
                            $('<span class="nr-db-sb-link-name">').text(item.node.name||"untitled").appendTo(nameContainer);
                            $('<div class="nr-db-sb-link-url">').text(item.node.link||"http://").appendTo(title);
                            break;
                        }
                    }
                    // buttons
                    var buttonGroup = $('<div>',{class:"nr-db-sb-list-header-button-group",id: item.node.id}).appendTo(titleRow);
                    if (item.type === 'ui_tab') {
                        var addGroupButton = $('<a href="#" class="nr-db-sb-tab-add-group-button editor-button editor-button-small nr-db-sb-list-header-button" ><i class="fa fa-plus"></i> '+c_("layout.group")+'</a>').appendTo(buttonGroup);
                    }
                    var editButton = $('<a href="#" class="nr-db-sb-tab-edit-button editor-button  editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> '+c_("layout.edit")+'</a>').appendTo(buttonGroup);
                    editButton.on('click',function(evt) {
                        RED.editor.editConfig("", item.type, item.node.id);
                        evt.stopPropagation();
                        evt.preventDefault();
                    });

                    // Dashboard layout tool
                    if (item.type === 'ui_tab') {
                        var layoutButton = $('<a href="#" class="nr-db-sb-tab-edit-layout-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> '+c_("layout.layout")+'</a>').appendTo(buttonGroup);
                        layoutButton.on('click',function(evt) {
                            var editTabName = item.node.name ? item.node.name : item.node.id;
                            var trayOptions = {
                                title: c_("layout.layout-editor") + " : " + editTabName,
                                width: Infinity,
                                buttons: [
                                    {
                                        id: "node-dialog-cancel",
                                        text: RED._("common.label.cancel"),
                                        click: function() {
                                            // clean editor
                                            RED.tray.close();
                                        }
                                    },
                                    {
                                        id: "node-dialog-ok",
                                        text: RED._("common.label.done"),
                                        class: "primary",
                                        click: function() {
                                            // Save data after editing
                                            saveGridDatas();
                                            RED.tray.close();
                                        }
                                    }
                                ],
                                resize: function(dimensions) {},
                                open: function(tray) {
                                    // Get widget of specified tab from node information
                                    tabDatas = getTabDataFromNodes(item.node.id);
                                    // The width that can be handled by Layout is up to MAX_GROUP_WIDTH
                                    // Groups exceeding the maximum width are not supported.
                                    var tmpGroups = tabDatas.groups;
                                    tmpGroups.sort(compareOrder);
                                    var groups = [];
                                    for (var cnt = 0; cnt < tmpGroups.length; cnt++) {
                                        if (tmpGroups[cnt].width <= MAX_GROUP_WIDTH) {
                                            groups.push(tmpGroups[cnt]);
                                        }
                                    }
                                    tabDatas.groups = groups;

                                    var editor = $('<div></div>',{addClass: 'nr-dashboard-layout-container-fluid'});
                                    var row =  $('<div></div>',{addClass: 'nr-dashboard-layout-row'});
                                    var span_num = Math.floor(12 / groups.length); // bootstrap grid 12 splits
                                    span_num = span_num < 2 ? 2 : span_num; // max 6 groups per row
                                    for (var cnt = 0; cnt < groups.length; cnt++) {
                                        if (cnt !=0 && (cnt % 6) == 0) {
                                            editor.append(row);
                                            editor.append('<div><br></div>');
                                            row = $('<div></div>',{addClass: 'nr-dashboard-layout-row'});
                                        }
                                        var span = $('<div></div>',{addClass: 'nr-dashboard-layout-span' + span_num});
                                        var groupName = groups[cnt].name ? groups[cnt].name : groups[cnt].id;
                                        var title = $('<div></div>', {
                                            style: "margin-top:2px; margin-bottom:2px;"
                                        });
                                        var title_group = $('<div></div>', {
                                            title: groupName,
                                            style: "margin-left:4px; margin-right:8px; overflow:hidden;"
                                        }).appendTo(title);
                                        $("<b/>").text(groupName).appendTo(title_group);
                                        var title_width = $('<div></div>', {
                                            style: "text-align:right; margin-right:8px;"
                                        }).appendTo(title);
                                        $("<span/>", {
                                            style: "margin_right: 8px;"
                                        }).text(c_("layout.width")+': ').appendTo(title_width);
                                        var changeWidth = $('<input>', {
                                            id: 'change-width' + cnt,
                                            value: groups[cnt].width,
                                            style: 'width:30px;',
                                            readonly: true,
                                            'node-id': groups[cnt].id,
                                        });
                                        title_width.append(changeWidth);

                                        title.css('white-space','nowrap');
                                        title.css('overflow','hidden');
                                        var gridstack = $('<div></div>', {
                                            id: 'grid'+cnt,
                                            addClass: 'grid-stack'
                                        });
                                        span.append(title);
                                        span.append(gridstack);
                                        row.append(span);
                                    }
                                    if (groups.length != 0) {
                                        editor.append(row);
                                    }

                                    // Show layout editor in tray
                                    var trayBody = tray.find('.red-ui-tray-body, .editor-tray-body');
                                    trayBody.css('overflow','auto');
                                    trayBody.append(editor);

                                    /////////////////////////////////////////
                                    // Editor screen generation
                                    /////////////////////////////////////////
                                    oldSpacer = [];
                                    widthChange = [];
                                    widgetResize = [];
                                    widgetDrag = [];
                                    for (var cnt=0; cnt < groups.length; cnt++) {
                                        // Gridstack.js option
                                        var options = {
                                            acceptWidgets: true,
                                            alwaysShowResizeHandle: true,
                                            cellHeight: 42,
                                            disableOneColumnMode : true,
                                            float: true,
                                            verticalMargin: 1
                                        };
                                        var gridID='#grid' + cnt;
                                        // gridstack generation
                                        $(gridID).gridstack(options);

                                        // Clear the contents of Grid
                                        var grid = $(gridID+'.grid-stack').data('gridstack');
                                        grid.removeAll();
                                        $(gridID).on("dropped", handleMove(grid));

                                        // Set the width of the display area of gridstack
                                        var groupWidth = Number(groups[cnt].width);
                                        $(gridID+'.grid-stack').css("width", groupWidth * 40);
                                        $(gridID+'.grid-stack').css("background-size", 100/groupWidth+"% 43px");
                                        $(gridID+'.grid-stack').attr("node-id", groups[cnt].id);
                                        $(gridID+'.grid-stack').attr("grid-column", groups[cnt].width);
                                        grid.setColumn(groupWidth, true);

                                        // Determination of placement position of widget of Grid
                                        var widgets = groups[cnt].widgets;
                                        widgets.sort(compareOrder);

                                        var tbl = {};
                                        for (var cnt2 = 0; cnt2 < widgets.length; cnt2++) {
                                            // Set default value when there is auto width
                                            if (widgets[cnt2].auto == true) {
                                                widgets[cnt2].width = groupWidth;
                                            // Adjust to the group width
                                            } else if (widgets[cnt2].width > groupWidth) {
                                                widgets[cnt2].width = groupWidth;
                                            }
                                            // Auto support
                                            if (widgets[cnt2].auto === true || widgets[cnt2].type === 'ui_form') {
                                                widgets[cnt2].height = getDefaultHeight(widgets[cnt2].id, groupWidth);
                                            }
                                            // Calculate coordinates to be placed
                                            var point = search_point(Number(widgets[cnt2].width), Number(widgets[cnt2].height), groupWidth, 256, tbl);
                                            if (point) {
                                                widgets[cnt2].x = point.x;
                                                widgets[cnt2].y = point.y;
                                            }
                                        }

                                        var items = GridStackUI.Utils.sort(widgets);
                                        items.forEach(function (node) {
                                            var minHeight = null;
                                            var maxHeight = null;
                                            // ui_form is fixed to height 2
                                            if (node.type === 'ui_form') {
                                                minHeight = node.height;
                                                maxHeight = node.height;
                                            }
                                            if (node.type !== 'ui_spacer') {
                                                var dispNode = RED.nodes.node(node.id);
                                                var dispType = dispNode._def.paletteLabel;
                                                var dispLabel = dispNode._def.label;
                                                try {
                                                    dispLabel = (typeof dispLabel === "function" ? dispLabel.call(dispNode) : dispLabel)||"";
                                                }
                                                catch(err) {
                                                    console.log("Definition error: " + node.type + ".label",err);
                                                    dispLabel = dispType;
                                                }

                                                var item = $('<div></div>', {
                                                    'data-noderedtype': node.type,
                                                    'data-noderedid': node.id,
                                                    'data-nodereddisptype': dispType,
                                                    'data-nodereddisplabel': dispLabel,
                                                    'data-noderedsizeauto': node.auto
                                                });
                                                var itemContent = $('<div></div>', {
                                                    addClass: 'grid-stack-item-content',
                                                    title: dispLabel + ':' + dispType
                                                });

                                                if (node.auto === true) {
                                                    itemContent.append('<i class="fa fa-unlock nr-dashboard-layout-resize-enable" title="'+c_("layout.auto")+'"></i>');
                                                } else {
                                                    itemContent.append('<i class="fa fa-lock nr-dashboard-layout-resize-disable" title="'+c_("layout.manual")+'"></i>');
                                                }
                                                itemContent.append('<b>'+ dispLabel +'</b><br/>'+ dispType);
                                                item.append(itemContent);
                                                grid.addWidget(
                                                    item,
                                                    node.x, node.y, node.width, node.height, false, null, null,
                                                    minHeight, maxHeight, node.id);
                                            } else {
                                                // Record the spacer node ID to be deleted
                                                oldSpacer.push(node.id);
                                            }
                                        });

                                        $(gridID+'.grid-stack > .grid-stack-item:visible').each( function(idx, el) {
                                            el = $(el);
                                            var node = el.data('_gridstack_node');
                                            var auto = (el[0].dataset.noderedsizeauto == 'true') ? true : false;
                                            grid.resizable(el, !auto);
                                        });

                                        // Group width change
                                        widthChange.push(new changeGroupWidth(cnt));
                                        // Resize widget in group (start event)
                                        widgetResize.push(new resizeGroupWidget(cnt));
                                        // Dragging widgets in a group (start event)
                                        widgetDrag.push(new dragGroupWidget(cnt));
                                    }
                                    $('.grid-stack>.grid-stack-item>.grid-stack-item-content>.nr-dashboard-layout-resize-disable').on('click',layoutResizeDisable);
                                    $('.grid-stack>.grid-stack-item>.grid-stack-item-content>.nr-dashboard-layout-resize-enable').on('click',layoutResizeEnable);
                                },
                                close: function() {},
                                show: function() {}
                            }
                            RED.tray.show(trayOptions);
                            evt.stopPropagation();
                            evt.preventDefault();
                        });
                    }

                    if (item.type === 'ui_tab') {
                        var content = $('<div>',{class:"nr-db-sb-group-list-container"}).appendTo(container);

                        // ui_tab group chevron
                        if (listStates.hasOwnProperty(item.node.id) && !listStates[item.node.id]) {
                            content.hide();
                            chevron.css({"transform":"rotate(-90deg)"});
                            content.addClass('nr-db-sb-collapsed');
                            listStates[item.node.id] = false;
                        }
                        else {
                            listStates[item.node.id] = true;
                        }
                        titleRow.click(titleToggle(item.node.id,content,chevron));

                        // ui_tab group list
                        var ol = $('<ol>',{class:"nr-db-sb-group-list"}).appendTo(content).editableList({
                            sortable:".nr-db-sb-group-list-header",
                            addButton: false,
                            height: 'auto',
                            connectWith: ".nr-db-sb-group-list",
                            addItem: function(container,i,group) {
                                if (!group.node) {
                                    group.node = {
                                        id: RED.nodes.id(),
                                        _def: RED.nodes.getType("ui_group"),
                                        type: "ui_group",
                                        users: [],
                                        tab: item.node.id,
                                        order: i+1,
                                        name: "Group "+(i+1),
                                        width: 6,
                                        disp: true
                                    };
                                    listElements[group.node.id] = container;
                                    RED.nodes.add(group.node);
                                    RED.editor.validateNode(group.node);
                                    group.widgets = [];
                                    RED.history.push({
                                        t:'add',
                                        nodes:[group.node.id],
                                        dirty:RED.nodes.dirty()
                                    });
                                    RED.nodes.dirty(true);
                                    if (RED.nodes.hasOwnProperty('updateConfigNodeUsers')) {
                                        RED.nodes.updateConfigNodeUsers(group.node);
                                    }
                                }
                                else {
                                    if (group.node.order === undefined) {
                                        group.node.order = i+1;
                                    }
                                }
                                var groupNode = group.node;
                                elementParents[groupNode] = item.node.id;
                                var titleRow = $('<div>',{class:"nr-db-sb-list-header nr-db-sb-group-list-header"}).appendTo(container);
                                $('<i class="nr-db-sb-list-handle nr-db-sb-group-list-handle fa fa-bars"></i>').appendTo(titleRow);
                                var chevron = $('<i class="fa fa-angle-down nr-db-sb-list-chevron">',{style:"width:10px;"}).appendTo(titleRow);
                                $('<i class="nr-db-sb-icon nr-db-sb-group-icon fa fa-table"></i>').appendTo(titleRow);
                                var title = $('<span class="nr-db-sb-title">').text(groupNode.name||groupNode.id||"").appendTo(titleRow);
                                listElements[groupNode.id] = container;
                                var buttonGroup = $('<div>',{class:"nr-db-sb-list-header-button-group",id:groupNode.id}).appendTo(titleRow);
                                var spacerButton = $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-plus"></i> '+c_("layout.spacer")+'</a>').appendTo(buttonGroup);
                                spacerButton.on('click',function(evt) {
                                    var spaceNode = {
                                        _def: RED.nodes.getType("ui_spacer"),
                                        type: "ui_spacer",
                                        hasUsers: false,
                                        users: [],
                                        id: RED.nodes.id(),
                                        tab: item.node.name,
                                        group: group.node.id,
                                        order: i+1,
                                        name: "spacer",
                                        width: 1,
                                        height:1,
                                        z: RED.workspaces.active(),
                                        label: function() { return "spacer " + this.width + "x" + this.height; }
                                    };
                                    RED.nodes.add(spaceNode);
                                    RED.editor.validateNode(spaceNode);
                                    RED.history.push({
                                        t:'add',
                                        nodes:[spaceNode.id],
                                        dirty:RED.nodes.dirty()
                                    });
                                    RED.nodes.dirty(true);
                                    RED.view.redraw();
                                    evt.stopPropagation();
                                    evt.preventDefault();
                                });
                                var editButton = $('<a href="#" class="nr-db-sb-edit-group-button editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> '+c_("layout.edit")+'</a>').appendTo(buttonGroup);
                                var content = $('<div>',{class:"nr-db-sb-widget-list-container"}).appendTo(container);
                                if (!listStates.hasOwnProperty(groupNode.id) || !listStates[groupNode.id]) {
                                    content.hide();
                                    chevron.css({"transform":"rotate(-90deg)"});
                                    content.addClass('nr-db-sb-collapsed');
                                    listStates[groupNode.id] = false;
                                }
                                else {
                                    listStates[groupNode.id] = true;
                                }

                                var ol = $('<ol>',{class:"nr-db-sb-widget-list"}).appendTo(content).editableList({
                                    sortable:".nr-db-sb-widget-list-header",
                                    addButton: false,
                                    height: 'auto',
                                    connectWith: ".nr-db-sb-widget-list",
                                    addItem: function(container,i,widgetNode) {
                                        elementParents[widgetNode.id] = groupNode.id;
                                        var titleRow = $('<div>',{class:"nr-db-sb-list-header nr-db-sb-widget-list-header"}).appendTo(container);
                                        $('<i class="nr-db-sb-list-handle nr-db-sb-widget-list-handle fa fa-bars"></i>').appendTo(titleRow);
                                        $('<i class="nr-db-sb-icon nr-db-sb-widget-icon fa fa-picture-o"></i>').click(function(e) { e.preventDefault(); RED.search.show(widgetNode.id); }).appendTo(titleRow);
                                        var l = widgetNode._def.label;
                                        try {
                                            l = (typeof l === "function" ? l.call(widgetNode) : l)||"";
                                        }
                                        catch(err) {
                                            console.log("Definition error: "+d.type+".label",err);
                                            l = d.type;
                                        }
                                        var title = $('<span class="nr-db-sb-title">').text(l).appendTo(titleRow);
                                        listElements[widgetNode.id] = container;
                                        var buttonGroup = $('<div>',{class:"nr-db-sb-list-header-button-group"}).appendTo(titleRow);
                                            var editButton = $('<a href="#" class="editor-button editor-button-small nr-db-sb-list-header-button"><i class="fa fa-pencil"></i> '+c_("layout.edit")+'</a>').appendTo(buttonGroup);
                                            container.on('mouseover',function() {
                                            widgetNode.highlighted = true;
                                            widgetNode.dirty = true;
                                            RED.view.redraw();
                                        });
                                        container.on('mouseout',function() {
                                            widgetNode.highlighted = false;
                                            widgetNode.dirty = true;
                                            RED.view.redraw();
                                        });
                                        editButton.on('click',function(evt) {
                                            RED.editor.edit(widgetNode);
                                            evt.stopPropagation();
                                            evt.preventDefault();
                                        });
                                    },
                                    sortItems: function(items) {
                                        var historyEvents = [];
                                        items.each(function(i,el) {
                                            var node = el.data('data');
                                            var hev = {
                                                t:'edit',
                                                node:node,
                                                changes:{
                                                    order:node.order,
                                                    group:node.group
                                                },
                                                dirty:node.dirty,
                                                changed:node.changed
                                            };
                                            historyEvents.push(hev);
                                            var changed = false;
                                            if (node.order !== i+1) {
                                                node.order = i+1;
                                                changed = true;
                                            }
                                            if (node.group !== group.node.id) {
                                                var oldGroupNode = RED.nodes.node(node.group);
                                                if (oldGroupNode) {
                                                    var index = oldGroupNode.users.indexOf(node);
                                                    oldGroupNode.users.splice(index,1);
                                                }
                                                node.group = group.node.id;
                                                group.node.users.push(node);
                                                changed = true;
                                            }
                                            if (changed) {
                                                node.dirty = true;
                                                node.changed = true;
                                            }
                                        })
                                        RED.history.push({
                                            t:'multi',
                                            events: historyEvents
                                        });
                                        RED.nodes.dirty(true);
                                        RED.view.redraw();
                                    }
                                });
                                ol.css("min-height","5px");
                                if (groupNode.id) {
                                    groupLists[groupNode.id] = ol;
                                }
                                titleRow.click(titleToggle(groupNode.id,content,chevron));
                                editButton.on('click',function(evt) {
                                    RED.editor.editConfig("", groupNode.type, groupNode.id);
                                    evt.stopPropagation();
                                    evt.preventDefault();
                                });
                                group.widgets.forEach(function(widget) {
                                    ol.editableList('addItem',widget);
                                })
                            },
                            sortItems: function(items) {
                                var historyEvents = [];
                                items.each(function(i,el) {
                                    var groupData = el.data('data');
                                    var node = groupData.node;
                                    var hev = {
                                        t:'edit',
                                        node:node,
                                        changes:{
                                            order:node.order,
                                            tab:node.tab
                                        },
                                        dirty:node.dirty,
                                        changed:node.changed
                                    };
                                    historyEvents.push(hev);
                                    var changed = false;
                                    if (node.order !== i+1) {
                                        node.order = i+1;
                                        changed = true;
                                    }
                                    if (changed) {
                                        node.dirty = true;
                                        node.changed = true;
                                    }
                                    if (node.tab !== item.node.id) {
                                        var oldTabNode = RED.nodes.node(node.tab);
                                        if (oldTabNode) {
                                            var index = oldTabNode.users.indexOf(node);
                                            oldTabNode.users.splice(index,1);
                                        }
                                        node.tab = item.node.id;
                                        item.node.users.push(node);
                                        changed = true;
                                    }
                                })
                                RED.history.push({
                                    t:'multi',
                                    events: historyEvents
                                });
                                RED.nodes.dirty(true);
                                RED.view.redraw();
                            }
                        })
                        tabLists[item.node.id] = ol;

                        addGroupButton.click(function(evt) {
                            ol.editableList('addItem',{});
                            evt.stopPropagation();
                            evt.preventDefault();
                        });
                        item.groups.forEach(function(group) {
                            ol.editableList('addItem',group);
                        });
                    }
                }

                var tabContainer = $('<ol>',{class:"nr-db-sb-tab-list"}).appendTo(divTabs).editableList({
                    sortable:".nr-db-sb-tab-list-header",
                    addButton: false,
                    addItem: addTabOrLinkItem,
                    sortItems: function(items) {
                        var historyEvents = [];
                        items.each(function(i,el) {
                            var itemData = el.data('data');
                            var node = itemData.node;
                            var hev = {
                                t:'edit',
                                node:node,
                                changes:{
                                    order:node.order
                                },
                                dirty:node.dirty,
                                changed:node.changed
                            }
                            historyEvents.push(hev);
                            var changed = false;
                            if (node.order !== i+1) {
                                node.order = i+1;
                                changed = true;
                            }
                            if (changed) {
                                node.dirty = true;
                                node.changed = true;
                            }
                        })
                        RED.history.push({
                            t:'multi',
                            events: historyEvents
                        });
                        RED.nodes.dirty(true);
                        RED.view.redraw();
                    }
                });

                var orphanedWidgets = $('<div>',{class:"form-row"}).appendTo(layoutTab);
                $('<span><i class="fa fa-info-circle"></i> There <span id="nr-db-missing-group-count"></span> not in a group. Click <a id="nr-db-add-missing-groups" href="#">here</a> to create the missing groups</span>').appendTo(orphanedWidgets);
                orphanedWidgets.find('a').click(function(event) {
                    var unknownGroups = {};
                    RED.nodes.eachNode(function(node) {
                        if (/^ui_/.test(node.type) && node.type !== 'ui_link' && node.type !== 'ui_toast' && node.type !== 'ui_ui_control') {
                            if (!RED.nodes.node(node.group)) {
                                var g = node.group || "_BLANK_";
                                unknownGroups[g] = unknownGroups[g] || [];
                                unknownGroups[g].push(node);
                            }
                        }
                    });
                    var tab = null;
                    var tabs = tabContainer.editableList('items');
                    tabs.first().each(function(i,el) {
                        var tabData = el.data('data');
                        tab = tabData.node;
                    });

                    var hev = [];
                    if (tab === null) {
                        tab = {
                            id: RED.nodes.id(),
                            _def: RED.nodes.getType("ui_tab"),
                            type: "ui_tab",
                            users: [],
                            order: 0,
                            name: "Tab",
                            icon: "dashboard"
                        };
                        RED.nodes.add(tab);
                        RED.editor.validateNode(tab);
                        hev.push(tab.id);
                    }
                    for (var groupId in unknownGroups) {
                        if (unknownGroups.hasOwnProperty(groupId)) {
                            var groupNode = {
                                id: RED.nodes.id(),
                                _def: RED.nodes.getType("ui_group"),
                                type: "ui_group",
                                users: [],
                                tab: tab.id,
                                order: i+1,
                                name: (groupId==="_BLANK_"?"Group":groupId),
                                width: 6,
                                disp: true
                            };
                            hev.push(groupNode.id);
                            RED.nodes.add(groupNode);
                            RED.editor.validateNode(groupNode);
                            if (RED.nodes.hasOwnProperty('updateConfigNodeUsers')) {
                                RED.nodes.updateConfigNodeUsers(groupNode);
                            }
                            var widgets = unknownGroups[groupId];
                            for (var i=0; i<widgets.length; i++) {
                                widgets[i].group = groupNode.id;
                                widgets[i].changed = true;
                                widgets[i].dirty = true;
                                if (RED.nodes.hasOwnProperty('updateConfigNodeUsers')) {
                                    RED.nodes.updateConfigNodeUsers(widgets[i]);
                                }
                                RED.editor.validateNode(widgets[i]);
                            }
                        }
                    }
                    RED.history.push({
                        t:'add',
                        nodes: hev,
                        dirty:RED.nodes.dirty()
                    });
                    RED.nodes.dirty(true);
                    refresh();
                    refreshOrphanedWidgets();
                    RED.view.redraw();
                    event.preventDefault();
                });

                var listElements = {};
                var dashboard = [];
                var listStates = {};
                var elementParents = {};
                var awaitingGroups = {};
                var awaitingTabs = {};

                function getCurrentList() {
                    var currentList = [];
                    var tabs = tabContainer.editableList('items');
                    var open = false;
                    tabs.each(function(i,el) {
                        var tabData = el.data('data');
                        var tab = [];
                        var groups = el.find('.nr-db-sb-group-list').editableList('items');
                        groups.each(function(j,el) {
                            var group = [];
                            var groupData = el.data('data');
                            var widgets = el.find('.nr-db-sb-widget-list').editableList('items');
                            widgets.each(function(k,el) {
                                var widgetData = el.data('data');
                                group.push(widgetData.id);
                            })
                            tab.push({id:groupData.node.id, widgets:group});
                        });
                        currentList.push({id:tabData.node.id,groups:tab});
                    });
                    return currentList;
                }

                function refreshOrphanedWidgets() {
                    var unknownGroups = {};
                    var count = 0;
                    RED.nodes.eachNode(function(node) {
                        if (/^ui_/.test(node.type) && node.type !== 'ui_link' && node.type !== 'ui_toast' && node.type !== 'ui_ui_control' && (node.type === 'ui_template' && node.templateScope !== 'global')) {
                            if (!RED.nodes.node(node.group)) {
                                var g = node.group || "_BLANK_";
                                unknownGroups[g] = unknownGroups[g] || [];
                                unknownGroups[g].push(node);
                                count++;
                            }
                        }
                    });

                    if (count > 0) {
                        orphanedWidgets.show();
                        $("#nr-db-missing-group-count").text((count===1?"is ":"are ")+count+" widget"+(count === 1?"":"s"))
                    }
                    else {
                        orphanedWidgets.hide();
                    }
                }

                function refresh() {
                    var currentList = getCurrentList();
                    dashboard = [];
                    var tabs = {};
                    var groups = {};
                    var elements = [];
                    var groupElements = {};
                    var tabGroups = {};
                    var groupId;
                    var group;
                    var tabId;
                    var tab;
                    var unknownGroups = 0;
                    // Find all the tabs and groups
                    RED.nodes.eachConfig(function(node) {
                        switch (node.type) {
                            case 'ui_tab':
                            case 'ui_link': {
                                tabs[node.id] = node;
                                //tabContainer.editableList('addItem',node);
                                break;
                            }
                            case 'ui_group': {
                                groups[node.id] = node;
                                break;
                            }
                            case 'ui_spacer': {
                                if (groups.hasOwnProperty(node.group)) {
                                    groupElements[node.group] = groupElements[node.group]||[];
                                    groupElements[node.group].push(node);
                                }
                                break;
                            }
                        }
                    });
                    for (groupId in groups) {
                        if (groups.hasOwnProperty(groupId)) {
                            group = groups[groupId];
                            if (tabs.hasOwnProperty(group.tab)) {
                                // This group belongs to a tab
                                tabGroups[group.tab] = tabGroups[group.tab]||[];
                                tabGroups[group.tab].push(group);
                            }
                            else {
                                unknownGroups++;
                            }
                        }
                    }
                    // Find all ui widgets - list them by their group id
                    RED.nodes.eachNode(function(node) {
                        if (/^ui_/.test(node.type)) {
                            if (groups.hasOwnProperty(node.group)) {
                                groupElements[node.group] = groupElements[node.group]||[];
                                groupElements[node.group].push(node);
                            }
                            else if ((node.type !== 'ui_toast')&&(node.type !== 'ui_ui_control')&&(node.type === 'ui_template' && node.templateScope !== 'global')) {
                                unknownGroups++;
                            }
                        }
                    });
                    if (unknownGroups > 0) {
                        $("#nr-db-missing-group-count").text((unknownGroups===1?"is ":"are ")+unknownGroups+" widget"+(unknownGroups === 1?"":"s"))
                        orphanedWidgets.show();
                    }
                    else {
                        orphanedWidgets.hide();
                    }
                    // Sort each group's array of widgets
                    for (groupId in groupElements) {
                        if (groupElements.hasOwnProperty(groupId)) {
                            group = groupElements[groupId];
                            groupElements[groupId] = group.map(function(v,i) { return {n:v,i:i} }).sort(function(A,B) {
                                if (A.n.order < B.n.order) { return A.n.order!==0?-1:1;}
                                if (A.n.order > B.n.order) { return B.n.order!==0?1:-1;}
                                return A.i - B.i;
                            }).map(function(v) { return v.n})
                        }
                    }
                    // Sort each tabs's array of groups
                    for (tabId in tabGroups) {
                        if (tabGroups.hasOwnProperty(tabId)) {
                            tab = tabGroups[tabId];
                            tabGroups[tabId] = tab.map(function(v,i) { return {n:v,i:i} }).sort(function(A,B) {
                                if (A.n.order < B.n.order) { return -1;}
                                if (A.n.order > B.n.order) { return 1;}
                                return A.i - B.i;
                            }).map(function(v) { return v.n})
                        }
                    }
                    var tabIds = Object.keys(tabs).map(function(v,i) { return {n:tabs[v],i:i} }).sort(function(A,B) {
                        if (A.n.order < B.n.order) { return -1;}
                        if (A.n.order > B.n.order) { return 1;}
                        return A.i - B.i;
                    }).map(function(v) { return v.n.id});
                    tabIds.forEach(function(tabId) {
                        var tab = {node:tabs[tabId],groups:[]};
                        if (tabGroups[tabId]) {
                            tabGroups[tabId].forEach(function(groupNode) {
                                var group = {node:groupNode,widgets:[]};
                                if (groupElements[groupNode.id]) {
                                    group.widgets = groupElements[groupNode.id];
                                }
                                tab.groups.push(group);
                            });
                        }
                        dashboard.push(tab);
                    });
                    var newList = dashboard.map(function(t) {
                        return {
                            id: t.node.id,
                            groups: t.groups.map(function(g) {
                                return {
                                    id: g.node.id,
                                    widgets: g.widgets.map(function(w) {
                                        return w.id;
                                    })
                                }
                            })
                        }
                    });
                    if (JSON.stringify(newList)!=JSON.stringify(currentList)) {
                        listElements = {};
                        groupLists = {};
                        tabLists = {};
                        tabs = {};
                        groups = {};
                        elementParents = {};
                        tabContainer.empty();
                        dashboard.forEach(function(tab) {
                            tabContainer.editableList('addItem',tab);
                        });
                    }
                    //ensureDashboardNode(true);
                    if (globalDashboardNode) {
                        $("#nr-db-field-title").val(globalDashboardNode.site.name);
                        $("#nr-db-field-allowSwipe").val(globalDashboardNode.site.allowSwipe || "false");
                        $("#nr-db-field-allowTempTheme").val(globalDashboardNode.site.allowTempTheme || "true");
                        $("#nr-db-field-hideToolbar").val(globalDashboardNode.site.hideToolbar || "false");
                        $("#nr-db-field-dateFormat").val(globalDashboardNode.site.dateFormat);

                        if (typeof globalDashboardNode.site.sizes !== "object") {
                            globalDashboardNode.site.sizes = sizes;
                        }
                        $("#nr-db-field-sx").val(globalDashboardNode.site.sizes.sx);
                        $("#nr-db-field-sy").val(globalDashboardNode.site.sizes.sy);
                        $("#nr-db-field-px").val(globalDashboardNode.site.sizes.px);
                        $("#nr-db-field-py").val(globalDashboardNode.site.sizes.py);
                        $("#nr-db-field-cx").val(globalDashboardNode.site.sizes.cx);
                        $("#nr-db-field-cy").val(globalDashboardNode.site.sizes.cy);
                        $("#nr-db-field-gx").val(globalDashboardNode.site.sizes.gx);
                        $("#nr-db-field-gy").val(globalDashboardNode.site.sizes.gy);

                        if (typeof globalDashboardNode.theme.angularTheme !== "object") {
                            globalDashboardNode.theme.angularTheme = aTheme;
                        }
                        $("#nr-db-field-angPrimary").val(globalDashboardNode.theme.angularTheme.primary || "indigo");
                        $("#nr-db-field-angAccents").val(globalDashboardNode.theme.angularTheme.accents || "blue");
                        $("#nr-db-field-angWarn").val(globalDashboardNode.theme.angularTheme.warn || "red");
                        $("#nr-db-field-angBackground").val(globalDashboardNode.theme.angularTheme.background || "grey");
                        $("#nr-db-field-angLook").val(globalDashboardNode.theme.angularTheme.palette || "light");

                        $("#nr-db-field-theme").val(globalDashboardNode.theme.name);
                        $("#ui-sidebar-name").val(globalDashboardNode.theme.customTheme.name);
                        if (globalDashboardNode.theme.name === 'theme-custom') {
                            $("#custom-theme-library-container").show();
                            $("#custom-theme-settings").show();
                        }
                        else {
                            $("#custom-theme-library-container").hide();
                            $("#custom-theme-settings").hide();
                        }
                        if ($('#nr-db-field-allowTempTheme').val() === "none") {
                            ulDashboardTabs.children().eq(2).addClass("hidden");
                            ulDashboardTabs.children().eq(3).removeClass("hidden");
                        }
                        else {
                            ulDashboardTabs.children().eq(2).removeClass("hidden");
                            ulDashboardTabs.children().eq(3).addClass("hidden");
                        }

                        //set colour start
                        if (typeof globalDashboardNode.theme.name !== "string") {
                            globalDashboardNode.theme.name = "theme-light";
                        }
                        var currentTheme = globalDashboardNode.theme.name.split("-")[1];
                        var startingValue = globalDashboardNode.theme[currentTheme+"Theme"].baseColor;
                        setColourPickerColour("base-color", startingValue);
                        $("#nr-db-field-font").val(globalDashboardNode.theme[currentTheme+"Theme"].baseFont);
                        generateColours(startingValue);
                        if (globalDashboardNode.theme.name === 'theme-light' || globalDashboardNode.theme.name === 'theme-dark') {
                            addLightAndDarkResetButton('base-color', $('#base-settings-ul').children().first());
                        }

                        if (editor === undefined) {
                            editor = RED.editor.createEditor({
                                id: 'nr-db-field-format-editor',
                                mode: 'ace/mode/javascript',
                                value: JSON.stringify({theme:globalDashboardNode.theme.themeState, site:globalDashboardNode.site})
                            });

                            RED.library.create({
                                url:"themes", // where to get the data from
                                type:"theme", // the type of object the library is for
                                editor: editor, // the field name the main text body goes to
                                mode:"ace/mode/javascript",
                                fields:['name'],
                                elementPrefix:"ui-sidebar-"
                            });
                        }

                        editor.on('input', function() {
                            // Check for any changes on the editor object
                            // i.e. has the theme been customised compared
                            // to what is stored
                            var editorObject = JSON.parse(editor.getValue());

                            //Update theme object if necessary
                            if (JSON.stringify(editorObject.theme) !== JSON.stringify(globalDashboardNode.theme.themeState)) {
                                globalDashboardNode.theme.themeState = editorObject.theme;
                                if ($("#ui-sidebar-name").val() !== globalDashboardNode.theme.customTheme.name) {
                                    globalDashboardNode.theme.customTheme.name = $("#ui-sidebar-name").val();
                                    globalDashboardNode.theme.customTheme.baseColor = globalDashboardNode.theme.themeState["base-color"].value;
                                    setColourPickerColour("base-color", globalDashboardNode.theme.customTheme.baseColor);
                                    generateColours(globalDashboardNode.theme.themeState["base-color"].value);
                                    RED.nodes.dirty(true);
                                }
                            }
                            if (JSON.stringify(aTheme) !== JSON.stringify(globalDashboardNode.theme.angularTheme)) {
                                globalDashboardNode.theme.angularTheme = aTheme;
                            }

                            //Update site object if necessary
                            if (JSON.stringify(editorObject.site) !== JSON.stringify(globalDashboardNode.site)) {
                                globalDashboardNode.site = editorObject.site;
                                $("#nr-db-field-title").val(globalDashboardNode.site.name);
                                $("#nr-db-field-hideToolbar").val(globalDashboardNode.site.hideToolbar);
                                $("#nr-db-field-allowSwipe").val(globalDashboardNode.site.allowSwipe);
                                $("#nr-db-field-allowTempTheme").val(globalDashboardNode.site.allowTempTheme);
                                $("#nr-db-field-dateFormat").val(globalDashboardNode.site.dateFormat);
                                $("#nr-db-field-sx").val(globalDashboardNode.site.sizes.sx);
                                $("#nr-db-field-sy").val(globalDashboardNode.site.sizes.sy);
                                $("#nr-db-field-px").val(globalDashboardNode.site.sizes.px);
                                $("#nr-db-field-py").val(globalDashboardNode.site.sizes.py);
                                $("#nr-db-field-gx").val(globalDashboardNode.site.sizes.gx);
                                $("#nr-db-field-gy").val(globalDashboardNode.site.sizes.gy);
                                $("#nr-db-field-cx").val(globalDashboardNode.site.sizes.cx);
                                $("#nr-db-field-cy").val(globalDashboardNode.site.sizes.cy);
                                RED.nodes.dirty(true);
                            }
                        });
                    }
                    awaitingGroups = {};
                    awaitingTabs = {};
                }

                RED.sidebar.addTab({
                    id: "dashboard",
                    label: c_("label.dashboard"),
                    name: "Dashboard",
                    content: content,
                    closeable: true,
                    pinned: true,
                    iconClass: "fa fa-bar-chart",
                    disableOnEdit: true,
                    onchange: function() { refresh(); }
                });

                editSaveEventHandler = function(node) {
                    if (/^ui_/.test(node.type)) {
                        if (node.type === "ui_tab" || node.type === "ui_group") {
                            if (listElements[node.id]) {
                                // Existing element
                                listElements[node.id].children(".nr-db-sb-list-header").find(".nr-db-sb-title").text(node.name||node.id);
                                if (node.type === "ui_group") {
                                    refresh();
                                }
                                else {
                                    if (node.hidden === true) { listElements[node.id].children(".nr-db-sb-list-header").find(".nr-db-sb-title").addClass('nr-db-sb-title-hidden'); }
                                    else { listElements[node.id].children(".nr-db-sb-list-header").find(".nr-db-sb-title").removeClass('nr-db-sb-title-hidden'); }
                                    if (node.disabled === true) { listElements[node.id].children(".nr-db-sb-list-header").find(".nr-db-sb-title").addClass('nr-db-sb-title-disabled'); }
                                    else { listElements[node.id].children(".nr-db-sb-list-header").find(".nr-db-sb-title").removeClass('nr-db-sb-title-disabled'); }
                                }
                            }
                            else if (node.type === "ui_tab") {
                                // Adding a tab
                                tabContainer.editableList('addItem',{node:node,groups:[]})
                            }
                            else {
                                // Adding a group
                                if (tabLists[node.tab]) {
                                    tabLists[node.tab].editableList('addItem',{node:node,widgets:[]})
                                }
                            }
                        }
                        else if (node.type === "ui_link") {
                            if (listElements[node.id]) {
                                var container = listElements[node.id];
                                container.find(".nr-db-sb-link-name").text(node.name||"untitled");
                                container.find(".nr-db-sb-link-url").text(node.link);
                            }
                        }
                        else {
                            refreshOrphanedWidgets();
                            if (listElements[node.id]) {
                                if (node.group != elementParents[node.id]) {
                                    // Moved to a different group
                                    if (groupLists[elementParents[node.id]]) {
                                        groupLists[elementParents[node.id]].editableList('removeItem',listElements[node.id].data('data'))
                                    }
                                    if (groupLists[node.group]) {
                                        groupLists[node.group].editableList('removeItem',node)
                                        groupLists[node.group].editableList('addItem',node);
                                    }
                                }
                                else {
                                    var l = node._def.label;
                                    try {
                                        l = (typeof l === "function" ? l.call(node) : l)||"";
                                    }
                                    catch(err) {
                                        console.log("Definition error: "+d.type+".label",err);
                                        l = d.type;
                                    }
                                    listElements[node.id].children(".nr-db-sb-list-header").find(".nr-db-sb-title").text(l);
                                }
                            }
                            else {
                                if (groupLists[node.group]) {
                                    if (node.order === 0) { node.order = groupLists[node.group].editableList('length'); }
                                    groupLists[node.group].editableList('addItem',node);
                                }
                            }
                        }
                    }
                };
                RED.events.on("editor:save",editSaveEventHandler);

                // Dashboard layout tool
                layoutUpdateEventHandler = function(node) {
                    if (/^ui_/.test(node.type) && node.type !== 'ui_link' && node.type !== 'ui_toast' && node.type !== 'ui_ui_control' && node.type !== 'ui_audio' && node.type !== 'ui_base' && node.type !== 'ui_group' && node.type !== 'ui_tab') {
                        if (listElements[node.id]) {
                            if (node.group != elementParents[node.id]) {
                                // Moved to a different group
                                if (groupLists[elementParents[node.id]]) {
                                    groupLists[elementParents[node.id]].editableList('removeItem',listElements[node.id].data('data'))
                                }
                                if (groupLists[node.group]) {
                                    groupLists[node.group].editableList('removeItem',node)
                                    groupLists[node.group].editableList('addItem',node);
                                    groupLists[node.group].editableList('sort',function(a,b) {return a.order-b.order;});
                                }
                            }
                            else {
                                groupLists[node.group].editableList('sort',function(a,b) {return a.order-b.order;});
                            }
                        }
                    }
                };
                RED.events.on("layout:update",layoutUpdateEventHandler);

                var pendingAdd = [];
                var pendingAddTimer = null;

                function handlePendingAdds() {
                    var hasTabs = false;
                    var hasGroups = false;
                    pendingAdd.sort(function(A,B) {
                        hasTabs = hasTabs || A.type === "ui_tab" || B.type === "ui_tab";
                        hasGroups = hasGroups || A.type === "ui_group" || B.type === "ui_group";
                        if (A.type === B.type) {
                            return 0;
                        }
                        if (A.type === "ui_tab") {
                            return -1;
                        }
                        else if (B.type === "ui_tab") {
                            return 1;
                        }
                        else if (A.type === "ui_group") {
                            return -1;
                        }
                        else if (B.type === "ui_group") {
                            return 1;
                        }
                        return 0
                    });
                    var updateList = {};
                    for (var i=0; i<pendingAdd.length; i++) {
                        var node = pendingAdd[i];
                        if (listElements[node.id]) {
                            continue;
                        }
                        if (node.type === "ui_tab") {
                            tabContainer.editableList('addItem',{node:node,groups:[]});
                        }
                        else {
                            if (hasTabs) {
                                // We've added some tabs, need to give jquery time to add the lists
                                pendingAdd = pendingAdd.slice(i);
                                pendingAddTimer = setTimeout(handlePendingAdds,50);
                                return;
                            }
                            if (node.type === "ui_group") {
                                if (tabLists[node.tab]) {
                                    tabLists[node.tab].editableList('addItem',{node:node,widgets:[]});
                                }
                            }
                            else {
                                if (hasGroups) {
                                    // We've added some tabs, need to give jquery time to add the lists
                                    pendingAdd = pendingAdd.slice(i);
                                    pendingAddTimer = setTimeout(handlePendingAdds,50);
                                    return;
                                }
                                if (groupLists[node.group]) {
                                    groupLists[node.group].editableList('addItem',node)
                                    if (node.order >= 0) {
                                        updateList[node.group] = true;
                                    }
                                }
                                else {
                                    refreshOrphanedWidgets();
                                }
                            }
                        }
                    }
                    Object.keys(updateList).forEach(function (group) {
                        var list = groupLists[group];
                        if (list) {
                            list.editableList("sort", function(a,b) {return a.order-b.order;});
                        }
                    });
                    pendingAdd = [];
                }

                nodesAddEventHandler = function(node) {
                    if (/^ui_/.test(node.type) && !listElements[node.id]) {
                        pendingAdd.push(node);
                        clearTimeout(pendingAddTimer);
                        pendingAddTimer = setTimeout(handlePendingAdds,100);
                    }
                };
                RED.events.on("nodes:add", nodesAddEventHandler);

                nodesRemoveEventHandler = function(node) {
                    if (/^ui_/.test(node.type)) {
                        if (node.type === "ui_tab" || node.type === "ui_link") {
                            if (listElements[node.id]) {
                                tabContainer.editableList('removeItem',listElements[node.id].data('data'));
                                delete tabLists[node.id];
                            }
                        }
                        else if (node.type === "ui_group") {
                            if (tabLists[node.tab] && listElements[node.id]) {
                                tabLists[node.tab].editableList('removeItem',listElements[node.id].data('data'));
                            }
                            delete groupLists[node.id];
                        }
                        else {
                            if (groupLists[node.group]) {
                                groupLists[node.group].editableList('removeItem',node)
                            }
                        }
                        refreshOrphanedWidgets();
                        delete listElements[node.id];
                    }
                };
                RED.events.on("nodes:remove", nodesRemoveEventHandler);
            }
        });

    $.widget("nodereddashboard.elementSizerByNum", {
        _create: function() {
            var that = this;
            var has_height = this.options.has_height;
            var pos = this.options.pos;
            var c_width = has_height ? '15%' : '6%';
            var container = $('<div>').css({
                position: 'absolute',
                background: 'white',
                padding: '10px 10px 10px 10px',
                border: '1px solid grey',
                zIndex: '20',
                borderRadius: "4px",
                display:"none",
                width: c_width
            }).appendTo(document.body);
            var box0 = $("<div>").css({
                fontSize: '13px',
                color: '#aaa',
                float: 'left',
                paddingTop: '1px'
            }).appendTo(container);

            var width = $(this.options.width).val();
            var height = has_height ? $(this.options.height).val() : undefined;
            var max_w = '';
            var groupNode = this.options.groupNode;
            if(groupNode) {
                max_w = 'max="'+groupNode.width+'"';
            }
            width = (width > 0) ? width : 1;
            height = (height > 0) ? height : 1;
            var in0 = $('<input type="number" min="1" '+max_w+'>')
                .css("width", has_height ? "40%" : "100%")
                .val(width)
                .appendTo(box0);
            if(has_height) {
                var pad = $('<span>')
                    .text(" x ")
                    .appendTo(box0);
                var in1 = $('<input type="number" min="1">')
                    .css("width", "40%")
                    .val(height)
                    .appendTo(box0);
            }
            var closeTimer;
            var closeFunc = function() {
                var w = in0.val();
                var h = has_height ? in1.val() : undefined;
                var label = that.options.label;
                label.text(w+(has_height ? (' x '+h) : ''));
                $(that.options.width).val(w).change();
                if(has_height) {
                    $(that.options.height).val(h).change();
                }
                that.destroy();
            };
            container.keypress(function(e) {
                if(e.which === 13) { // pressed ENTER
                    container.fadeOut(100, closeFunc);
                }
            });
            container.on('mouseleave', function(e) {
                closeTimer = setTimeout(function() {
                    container.fadeOut(200, closeFunc);
                }, 100);
            });
            container.on('mouseenter', function(e) {
                clearTimeout(closeTimer);
            });
            container.css({
                top: (pos.top -10)+"px",
                left: (pos.left +10)+"px"
            });
            container.fadeIn(200);
        }
    });

    $.widget( "nodereddashboard.elementSizer", {
        _create: function() {
            var that = this;
            var gridWidth = 6;
            var width = parseInt($(this.options.width).val()||0);
            var height = parseInt(this.options.hasOwnProperty('height')?$(this.options.height).val():"1")||0;
            var hasAuto = (!this.options.hasOwnProperty('auto') || this.options.auto);

            this.element.css({
                minWidth: this.element.height()+4
            });
            var auto_text = c_("auto");
            var sizeLabel = (width === 0 && height === 0)?auto_text:width+(this.options.hasOwnProperty('height')?" x "+height:"");
            this.element.text(sizeLabel).on('mousedown',function(evt) {
                evt.stopPropagation();
                evt.preventDefault();

                var width = parseInt($(that.options.width).val()||0);
                var height = parseInt(that.options.hasOwnProperty('height')?$(that.options.height).val():"1")||0;
                var maxWidth = 0;
                var maxHeight;
                var fixedWidth = false;
                var fixedHeight = false;
                var group = $(that.options.group).val();
                if (group) {
                    var groupNode = RED.nodes.node(group);
                    if (groupNode) {
                        gridWidth = Math.max(6,groupNode.width,+width);
                        maxWidth = groupNode.width || gridWidth;
                        fixedWidth = true;
                    }
                    maxHeight = Math.max(6,+height+1);
                }
                else {
                    gridWidth = Math.max(12,+width);
                    maxWidth = gridWidth;
                    maxHeight = 1;
                    fixedHeight = true;
                }

                var pos = $(this).offset();
                var container = $('<div>').css({
                    position: 'absolute',
                    background: 'white',
                    padding: '5px 10px 10px 10px',
                    border: '1px solid grey',
                    zIndex: '20',
                    borderRadius: "4px",
                    display:"none"
                }).appendTo(document.body);

                var closeTimer;
                container.on('mouseleave',function(evt) {
                    closeTimer = setTimeout(function() {
                        container.fadeOut(200, function() { $(this).remove(); });
                    },100)
                });
                container.on('mouseenter',function() {
                    clearTimeout(closeTimer);
                })

                var label = $("<div>").css({
                    fontSize: '13px',
                    color: '#aaa',
                    float: 'left',
                    paddingTop: '1px'
                }).appendTo(container).text((width === 0 && height === 0)?auto_text:(width+(that.options.hasOwnProperty('height')?" x "+height:"")));
                label.hover(function() {
                    $(this).css('text-decoration', 'underline');
                }, function() {
                    $(this).css('text-decoration', 'none');
                });

                label.click(function(e) {
                    var group = $(that.options.group).val();
                    var groupNode = null;
                    if(group) {
                        groupNode = RED.nodes.node(group);
                        if(groupNode === null) {
                            return;
                        }
                    }
                    $(that).elementSizerByNum({
                        width: that.options.width,
                        height: that.options.height,
                        groupNode: groupNode,
                        pos: pos,
                        label: that.element,
                        has_height: that.options.hasOwnProperty('height')
                    });
                    closeTimer = setTimeout(function() {
                        container.fadeOut(200, function() {
                            $(this).remove();
                        });
                    },100)
                });

                var buttonRow = $('<div>',{style:"text-align:right; height:25px;"}).appendTo(container);

                if (hasAuto) {
                    var button = $('<a>',{href:"#",class:"editor-button editor-button-small",style:"margin-bottom:5px"})
                    .text(auto_text)
                    .appendTo(buttonRow)
                    .on('mouseup',function(evt) {
                        that.element.text(auto_text)
                        $(that.options.width).val(0).change();
                        $(that.options.height).val(0).change();
                        evt.preventDefault();
                        container.fadeOut(200, function() { $(this).remove(); });
                    });
                }

                var cellBorder = "1px dashed lightGray";
                var cellBorderExisting = "1px solid gray";
                var cellBorderHighlight = "1px dashed black";
                var rows = [];
                function addRow(i) {
                    var row = $('<div>').css({padding:0,margin:0,height:"25px","box-sizing":"border-box"}).appendTo(container);
                    rows.push(row);
                    cells.push([])
                    for (var j=0; j<gridWidth; j++) {
                        addCell(i,j);
                    }
                }
                function addCell(i,j) {
                    var row = rows[i];
                    var cell = $('<div>').css({
                        display:"inline-block",
                        width: "25px",
                        height: "25px",
                        borderRight: (j===(width-1)&&i<height)?cellBorderExisting:cellBorder,
                        borderBottom: (i===(height-1)&&j<width)?cellBorderExisting:cellBorder,
                        boxSizing: "border-box",
                        cursor:"pointer",
                        background: (j<maxWidth)?"#fff":"#eee"
                    }).appendTo(row);
                    cells[i].push(cell);
                    if (j===0) {
                        cell.css({borderLeft:((i<=height-1)?cellBorderExisting:cellBorder)});
                    }
                    if (i===0) {
                        cell.css({borderTop:((j<=width-1)?cellBorderExisting:cellBorder)});
                    }
                    if (j<maxWidth) {
                        cell.data("w",j);
                        cell.data("h",i);
                        cell.on("mouseup",function() {
                            that.element.text(($(this).data("w")+1)+(that.options.hasOwnProperty('height')?" x "+($(this).data("h")+1):""))
                            $(that.options.width).val($(this).data("w")+1).change();
                            $(that.options.height).val($(this).data("h")+1).change();
                            container.fadeOut(200, function() { $(this).remove(); });
                        });
                        cell.on("mouseover",function() {
                            var w = $(this).data("w");
                            var h = $(this).data("h");
                            label.text((w+1)+(that.options.hasOwnProperty('height')?" x "+(h+1):""));
                            for (var y = 0; y<maxHeight; y++) {
                                for (var x = 0; x<maxWidth; x++) {
                                    cells[y][x].css({
                                        background: (y<=h && x<=w)?'#ddd':'#fff',
                                        borderLeft: (x===0&&y<=h)?cellBorderHighlight:(x===0)?((y<=height-1)?cellBorderExisting:cellBorder):'',
                                        borderTop: (y===0&&x<=w)?cellBorderHighlight:(y===0)?((x<=width-1)?cellBorderExisting:cellBorder):'',
                                        borderRight: (x===w&&y<=h)?cellBorderHighlight:((x===width-1&&y<=height-1)?cellBorderExisting:cellBorder),
                                        borderBottom: (y===h&&x<=w)?cellBorderHighlight:((y===height-1&&x<=width-1)?cellBorderExisting:cellBorder)
                                    })
                                }
                            }
                            if (!fixedHeight && h === maxHeight-1) {
                                addRow(maxHeight++)
                            }
                            if (!fixedWidth && w === maxWidth-1) {
                                maxWidth++;
                                gridWidth++;
                                for (var r=0; r<maxHeight; r++) {
                                    addCell(r,maxWidth-1);
                                }
                            }
                        })
                    }
                }
                var cells = [];
                for (var i=0; i<maxHeight; i++) {
                    addRow(i);
                }
                container.css({
                    top:(pos.top)+"px",
                    left:(pos.left)+"px"
                });
                container.fadeIn(200);
            })
        }
    });
})(jQuery);
</script>

<script type="text/html" data-template-name="ui_base">
    <div class='form-row'>
        This <i>ui_base</i> node is the main node that all<br/>other dashboard widget nodes communicate to.<br/>
        <br/>One instance is required to support the dashboard.<br/>
        <br/>If you have no dashboard you can delete this node.<br/>
        It will be re-created automatically if required.<br/>
    </div>
</script>
<script type="text/html" data-help-name="ui_base">
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_button] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_button',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            passthru: {value: false},
            label: {value: 'button'},
            tooltip: {value: ''},
            color: {value: ''},
            bgcolor: {value: ''},
            className: {value: ''},
            icon: {value: ''},
            payload: {value: '',validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('payloadType'):function(v) { return true})},
            payloadType: { value: 'str'},
            topic:  {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'}
        },
        inputs:1,
        outputs:1,
        outputLabels: function() { if (this.payloadType === "str") {
            return this.payload;
        } else {return this.payloadType; } },
        icon: "ui_button.png",
        paletteLabel: 'button',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'button'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $('#node-input-payload').typedInput({
                default: 'str',
                typeField: $("#node-input-payloadType"),
                types: ['str','num','bool','json','bin','date','flow','global']
            });
            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });
        }
    });
</script>

<script type="text/html" data-template-name="ui_button">
	<div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui_button.label.group"></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui_button.label.size"></label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-icon"><i class="fa fa-picture-o"></i> <span data-i18n="ui_button.label.icon"></label>
        <input type="text" id="node-input-icon" data-i18n="[placeholder]ui_button.label.optionalIcon">
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> <span data-i18n="ui_button.label.label"></label>
        <input type="text" id="node-input-label" data-i18n="[placeholder]ui_button.label.optionalLabel">
    </div>
    <div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> <span data-i18n="ui_button.label.tooltip"></label>
        <input type="text" id="node-input-tooltip" data-i18n="[placeholder]ui_button.label.optionalTooltip">
    </div>
    <div class="form-row">
        <label for="node-input-color"><i class="fa fa-tint"></i> <span data-i18n="ui_button.label.color"></label>
        <input type="text" id="node-input-color" data-i18n="[placeholder]ui_button.label.optionalColor">
    </div>
    <div class="form-row">
        <label for="node-input-bgcolor"><i class="fa fa-tint"></i>  <span data-i18n="ui_button.label.background"></label>
        <input type="text" id="node-input-bgcolor" data-i18n="[placeholder]ui_button.label.optionalBackgroundColor">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-payload"><i class="fa fa-envelope-o"></i> <span data-i18n="ui_button.label.whenClicked"></label>
    </div>
    <div class="form-row">
        <label for="node-input-payload" style="padding-left: 25px; margin-right: -25px"><span data-i18n="ui_button.label.payload"></label>
        <input type="text" id="node-input-payload" style="width:70%">
        <input type="hidden" id="node-input-payloadType">
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left: 25px; margin-right: -25px"><span data-i18n="ui_button.label.topic"></label>
        <input type="text" id="node-input-topic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> <span data-i18n="ui_button.label.emulateClick"></label>
        <input type="checkbox" id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  <span data-i18n="ui_button.label.className"></label>
        <input type="text" id="node-input-className" data-i18n="[placeholder]ui_button.label.classNamePlaceholder"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script>
<script type="text/html" data-help-name="ui_button">
    <p>Adds a button to the user interface.</p>
    <p>Clicking the button generates a message with <code>msg.payload</code> set to the <b>Payload</b> field.
    If no payload is specified, the node id is used.</p>
	<p>The <b>Size</b> defaults to  3 by 1.</p>
    <p>The <b>Icon</b> can be defined, as either a <a href="https://klarsys.github.io/angular-material-icons/" target="_blank">Material Design icon</a>
    <i>(e.g. 'check', 'close')</i> or a <a href="https://fontawesome.com/v4.7.0/icons/" target="_blank">Font Awesome icon</a>
    <i>(e.g. 'fa-fire')</i>, or a <a href="https://github.com/Paul-Reed/weather-icons-lite/blob/master/css_mappings.md">Weather icon</a>.
    You can use the full set of google material icons if you add 'mi-' to the icon name. e.g. 'mi-videogame_asset'.</p>
    <p>The colours of the text and background may be set. They can also be set by a message property by setting
    the field to the name of the property, for example <code>{{background}}</code>.
    You don't need to prepend the <i>msg.</i> part of the property name.</p>
    <p>The label and icon can also be set by a message property by setting
    the field to the name of the property, for example <code>{{topic}}</code> or <code>{{myicon}}</code>.</p>
    <p>If set to pass through mode a message arriving on the input will act like pressing the button.
    The output payload will be as defined in the node configuration.</p>
    <p>The incoming <b>topic</b> field can be used to set the <code>msg.topic</code> property that is output.</p>
    <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the button.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_dropdown] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_dropdown',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: ''},
            tooltip: {value: ''},
            place: {value: 'Select option'},
            group: {type: 'ui_group', required:true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            passthru: {value: true},
            multiple: {value: false},
            options: {value:[{value: '', label : ''}],
                validate:function(v) {
                    var unique = new Set(v.map(function(o) {return o.value;}));
                    return v.length == unique.size;
                }},
            payload: {value: ''},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        icon: "ui_dropdown.png",
        paletteLabel: 'dropdown',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'dropdown'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            if (this.multiple === undefined) {
                $("#node-input-multiple").prop('checked', false);;
            }
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            var un = new Set(this.options.map(function(o) {return o.value}));
            if (this.options.length == un.size) { $("#valWarning").hide(); }
            else { $("#valWarning").show(); }

            function generateOption(i, option) {
                var container = $('<li/>',{style:"background: #fff; margin:0; padding:8px 0px 0px; border-bottom: 1px solid #ccc;"});
                var row = $('<div/>').appendTo(container);
                var row2 = $('<div/>',{style:"padding-top:5px; padding-left:175px;"}).appendTo(container);
                var row3 = $('<div/>',{style:"padding-top:5px; padding-left:120px;"}).appendTo(container);

                $('<i style="color:#eee; cursor:move; margin-left:3px;" class="node-input-option-handle fa fa-bars"></i>').appendTo(row);

                var valueField = $('<input/>',{class:"node-input-option-value",type:"text",style:"margin-left:7px; width:calc(50% - 32px);", placeholder: 'Value',value:option.value}).appendTo(row).typedInput({default:option.type||'str',types:['str','num','bool']});
                var labelField = $('<input/>',{class:"node-input-option-label",type:"text",style:"margin-left:7px; width:calc(50% - 32px);", placeholder: 'Label', value:option.label}).appendTo(row);

                var finalspan = $('<span/>',{style:"float:right; margin-right:8px;"}).appendTo(row);
                var deleteButton = $('<a/>',{href:"#",class:"editor-button editor-button-small", style:"margin-top:7px; margin-left:5px;"}).appendTo(finalspan);
                $('<i/>',{class:"fa fa-remove"}).appendTo(deleteButton);

                deleteButton.click(function() {
                    container.css({"background":"#fee"});
                    container.fadeOut(300, function() {
                        $(this).remove();
                    });
                });

                $("#node-input-option-container").append(container);
            }

            $("#node-input-add-option").click(function() {
                generateOption($("#node-input-option-container").children().length+1, {});
                $("#node-input-option-container-div").scrollTop($("#node-input-option-container-div").get(0).scrollHeight);
            });

            for (var i=0; i<this.options.length; i++) {
                var option = this.options[i];
                generateOption(i+1,option);
            }

            $( "#node-input-option-container" ).sortable({
                axis: "y",
                handle:".node-input-option-handle",
                cursor: "move"
            });

            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });
        },
        oneditsave: function() {
            var options = $("#node-input-option-container").children();
            var node = this;
            node.options = [];
            options.each(function(i) {
                var option = $(this);
                var o = {
                    label: option.find(".node-input-option-label").val(),
                    value: option.find(".node-input-option-value").typedInput('value'),
                    type: option.find(".node-input-option-value").typedInput('type')
                };
                if (option.find(".node-input-option-value").typedInput('type') === "num") {
                    o.value = Number(o.value);
                }
                if (option.find(".node-input-option-value").typedInput('type') === "bool") {
                    o.value = (o.value == "true");
                }
                node.options.push(o);
            });
        },
        oneditresize: function() {
        }
    });
</script>

<script type="text/html" data-template-name="ui_dropdown">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-tag"></i> Label</label>
        <input type="text" id="node-input-label" placeholder="optional label">
    </div>
    <div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> Tooltip</label>
        <input type="text" id="node-input-tooltip" placeholder="optional tooltip">
    </div>
    <div class="form-row">
        <label for="node-input-place"><i class="fa fa-tag"></i> Placeholder</label>
        <input type="text" id="node-input-place" placeholder="optional placeholder">
    </div>
    <div class="form-row node-input-option-container-row" style="margin-bottom: 0px;width: 100%">
        <label for="node-input-width" style="vertical-align:top"><i class="fa fa-list-alt"></i> Options</label>
        <div id="node-input-option-container-div" style="box-sizing:border-box; border-radius:5px; height:257px; padding:5px; border:1px solid #ccc; overflow-y:scroll; display:inline-block; width:calc(70% + 15px);">
            <span id="valWarning" style="color:#910000"><b>All Values must be unique.</b></span>
            <ol id="node-input-option-container" style="list-style-type:none; margin:0;"></ol>
        </div>
    </div>
    <div class="form-row">
        <a href="#" class="editor-button editor-button-small" id="node-input-add-option" style="margin-top:4px; margin-left:103px;"><i class="fa fa-plus"></i> <span>option</span></a>
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-multiple"><i class="fa fa-th-list"></i> Allow multiple selections from list: </label>
        <input type="checkbox" checked id="node-input-multiple" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic" placeholder="optional msg.topic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>
<script type="text/html" data-help-name="ui_dropdown">
    <p>Adds a dropdown select box to the user interface.</p>
    <p>Multiple value / label pairs can be added as required. If the label is not specified the
    value will be used for both.</p>
    <p>The configured value of the selected item will be returned as <code>msg.payload</code>.</p>
    <p>Setting <code>msg.payload</code> to one of the item values will preset the choice in the dropdown.
    If using the multi-select option then the payload should be an array of values.</p>
    <p>Optionally the <b>Topic</b> field can be used to set the <code>msg.topic</code> property.</p>
    <p>The Options may be configured by inputting <code>msg.options</code> containing an array.
    If just text then the value will be the same as the label, otherwise you can specify both by
    using an object of <code>"label":"value"</code> pairs :</p>
    <code>[ "Choice 1", "Choice 2", {"Choice 3":"3"} ]</code>
    <p></p>
    <p>If the "Allow multiple selections" output option is enabled - the result will be returned as an array instead of a string.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_switch] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_switch',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: 'switch'},
            tooltip: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            passthru: {value: true},
            decouple: {value: "false"},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'},
            style: {value: ''},
            onvalue: {value: true, required:true, validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('onvalueType'):function(v) { return true})},
            onvalueType: {value: 'bool'},
            onicon: {value: '' },
            oncolor: {value: ''},
            offvalue: {value: false, required:true, validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('offvalueType'):function(v) { return true})},
            offvalueType: {value: 'bool'},
            officon: {value: ''},
            offcolor: {value: ''},
            animate: {value: false},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        icon: "ui_switch.png",
        paletteLabel: 'switch',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'switch'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $('#node-input-custom-icons').on("change", function() {
                if ($('#node-input-custom-icons').val() === "default") {
                    $(".form-row-custom-icons").hide();
                }
                else {
                    $(".form-row-custom-icons").show();
                }
            });

            if (this.onicon !== "" || this.oncolor !== "" || this.officon !=="" || this.offcolor !== "") {
                $('#node-input-custom-icons').val('custom');
            }
            else {
                $(".form-row-custom-icons").hide();
                $('#node-input-custom-icons').change();
            }

            $('#node-input-onvalue').typedInput({
                default: 'str',
                typeField: $("#node-input-onvalueType"),
                types: ['str','num','bool','json','bin','date','flow','global']
            });

            $('#node-input-offvalue').typedInput({
                default: 'str',
                typeField: $("#node-input-offvalueType"),
                types: ['str','num','bool','json','bin','date','flow','global']
            });

            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });

            $('#node-input-passthru').on("change", function() {
                if (this.checked) {
                    $('.form-row-decouple').hide();
                    $('#node-input-decouple').val("false");
                }
                else {
                    $('.form-row-decouple').show();
                }
            });
        },
        oneditsave: function() {
            if ($('#node-input-custom-icons').val() === 'default') {
                $('#node-input-onicon').val('');
                $('#node-input-officon').val('');
                $('#node-input-oncolor').val('');
                $('#node-input-offcolor').val('');
            }
        }
    });
</script>

<script type="text/html" data-template-name="ui_switch">
	<div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> Tooltip</label>
        <input type="text" id="node-input-tooltip" placeholder="optional tooltip">
    </div>
    <div class="form-row">
        <label for="node-input-custom-icons"><i class="fa fa-picture-o"></i> Icon</label>
        <select id="node-input-custom-icons" style="width:35%">
            <option value="default">Default</option>
            <option value="custom">Custom</option>
        </select>
        <span style="width:auto; padding-left:20px" class="form-row-custom-icons" for="node-input-animate"> Animate
        <input type="checkbox" checked id="node-input-animate" style="display:inline-block; width:auto; vertical-align:baseline;"></span>
    </div>
    <div class="form-row form-row-custom-icons">
        <label for="node-input-onicon" style="text-align:right;"><i class="fa fa-toggle-on"></i> On Icon</label>
        <input type="text" id="node-input-onicon" style="width:120px">
        <label for="node-input-oncolor" style="width:50px; text-align:right;">Colour</label>
        <input type="text" id="node-input-oncolor" style="width:120px">
    </div>
    <div class="form-row form-row-custom-icons">
        <label for="node-input-officon" style="text-align:right;"><i class="fa fa-toggle-off"></i> Off Icon</label>
        <input type="text" id="node-input-officon" style="width:120px">
        <label for="node-input-offcolor" style="width:50px; text-align:right;">Colour</label>
        <input type="text" id="node-input-offcolor" style="width:120px">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> Pass through <code>msg</code> if payload matches valid state: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row form-row-decouple">
        <label for="node-input-decouple"><i class="fa fa-toggle-on"></i> Indicator</label>
        <select id="node-input-decouple" style="display: inline-block; vertical-align: middle; width:70%;">
            <option value="false">Switch icon shows state of the output</option>
            <option value="true">Switch icon shows state of the input</option>
        </select>
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-onvalue"><i class="fa fa-envelope-o"></i> When clicked, send:</label>
    </div>
    <div class="form-row">
        <label for="node-input-onvalue" style="padding-left:25px; margin-right:-25px">On Payload</label>
        <input type="text" id="node-input-onvalue" style="width:70%">
        <input type="hidden" id="node-input-onvalueType">
    </div>
    <div class="form-row">
        <label for="node-input-offvalue" style="padding-left:25px; margin-right:-25px">Off Payload</label>
        <input type="text" id="node-input-offvalue" style="width:70%">
        <input type="hidden" id="node-input-offvalueType">
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left:25px; margin-right:-25px">Topic</label>
        <input type="text" id="node-input-topic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>
<script type="text/html" data-help-name="ui_switch">
    <p>Adds a switch to the user interface.</p>
	<p>Each change in the state of the switch will generate
    a <code>msg.payload</code> with the specified <b>On</b> and <b>Off</b> values.</p>
    <p>The <b>On/Off Color</b> and <b>On/Off Icon</b> are optional fields. If they are all present, the default
    toggle switch will be replaced with the relevant icons and their respective colors.</p>
    <p>The <b>On/Off Icon</b> field can be either a <a href="https://klarsys.github.io/angular-material-icons/" target="_blank">Material Design icon</a>
    <i>(e.g. 'check', 'close')</i> or a <a href="https://fontawesome.com/v4.7.0/icons/" target="_blank">Font Awesome icon</a>
    <i>(e.g. 'fa-fire')</i>, or a <a href="https://github.com/Paul-Reed/weather-icons-lite/blob/master/css_mappings.md">Weather icon</a>.
    You can use the full set of google material icons if you add 'mi-' to the icon name. e.g. 'mi-videogame_asset'.</p>
    <p>In pass through mode the switch state can be updated by an incoming <code>msg.payload</code> with the specified values,
    that must also match the specified type (number, string, etc). When not in passthrough mode then the icon can either
    track the state of the output - or the input msg.payload, in order to provide a closed loop feedback.</p>
    <p>The label can also be set by a message property by setting
    the field to the name of the property, for example <code>{{msg.topic}}</code>.</p>
    <p>If a <b>Topic</b> is specified, it will be added to the output as <code>msg.topic</code>.</p>
    <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the switch widget.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_slider] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_slider',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: 'slider'},
            tooltip: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            passthru: {value: true},
            outs: {value: 'all'},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'},
            min: {value: 0, required:true, validate:RED.validators.number()},
            max: {value: 10, required:true, validate:RED.validators.number()},
            step: {value: 1},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        outputLabels: function() { return this.min+" - "+this.max; },
        icon: "ui_slider.png",
        paletteLabel: 'slider',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'slider'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });
            if (!$("#node-input-outs").val()) { $("#node-input-outs").val("all") }
        }
    });
</script>

<script type="text/html" data-template-name="ui_slider">
	<div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> Tooltip</label>
        <input type="text" id="node-input-tooltip" placeholder="optional tooltip">
    </div>
    <div class="form-row">
        <label for="node-input-min"><i class="fa fa-arrows-h"></i> Range</label>
        <span for="node-input-min">min</span>
        <input type="text" id="node-input-min" style="width:60px">
        <span for="not-input-max" style="margin-left:22px;">max</span>
        <input type="text" id="node-input-max" style="width:60px">
        <span for="not-input-step" style="margin-left:22px;">step</span>
        <input type="text" id="node-input-step" style="width:60px">
    </div>
    <div class="form-row">
        <label for="node-input-outs"><i class="fa fa-sign-out"></i> Output</label>
        <select id="node-input-outs" style="width:204px">
            <option value="all">continuously while sliding</option>
            <option value="end">only on release</option>
        </select>
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-payload"><i class="fa fa-envelope-o"></i> When changed, send:</label>
    </div>
    <div class="form-row">
        <label style="padding-left:25px; margin-right:-25px">Payload</label>
        <label style="width:auto">Current value</label>
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left:25px; margin-right:-25px">Topic</label>
        <input type="text" id="node-input-topic">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
        <input type="hidden" id="node-input-topicType">
    </div>
</script>
<script type="text/html" data-help-name="ui_slider">
    <p>Adds a slider widget to the user interface.</p>
	<p>The user can change its value between the limits (<b>min</b> and <b>max</b>). Each value change
    will generate a message with the value set as <b>payload</b>.</p>
    <p>A vertical slider can be created by setting the size so that the height is greater than the width.</p>
    <p>The slider can be reversed by setting the min value larger than the max value. e.g. min 100, max 0.</p>
    <p>If a <b>Topic</b> is specified, it will be added as <code>msg.topic</code>.</p>
    <p>An input <code>msg.payload</code> will be converted to a number, and used to preset a value.
    The <b>min</b> value will be used if conversion fails,
    and it will update the user interface. If the value changes, it will also be passed to the output.</p>
    <p>The label can also be set by a message property by setting
    the field to the name of the property, for example <code>{{msg.topic}}</code>.</p>
    <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the slider output.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_numeric] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_numeric',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: 'numeric'},
            tooltip: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            wrap: {value: false},
            passthru: {value: true},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'},
            format: {value: '{{value}}'},
            min: {value: 0, required: true, validate: RED.validators.number()},
            max: {value: 10, required: true, validate: RED.validators.number()},
            step: {value: 1},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        outputLabels: function() { return this.min+" - "+this.max; },
        icon: "ui_numeric.png",
        paletteLabel: 'numeric',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'numeric'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });
        }
    });
</script>

<script type="text/html" data-template-name="ui_numeric">
	<div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> Tooltip</label>
        <input type="text" id="node-input-tooltip" placeholder="optional tooltip">
    </div>
    <div class="form-row">
        <label for="node-input-format"><i class="fa fa-i-cursor"></i> Value Format</label>
        <input type="text" id="node-input-format" placeholder="{{value}}">
    </div>
    <div class="form-row">
        <label for="node-input-min"><i class="fa fa-arrows-h"></i> Range</label>
        <span for="node-input-min">min</span>
        <input type="text" id="node-input-min" style="width:60px">
        <span for="not-input-max" style="margin-left:22px;">max</span>
        <input type="text" id="node-input-max" style="width:60px">
        <span for="not-input-step" style="margin-left:22px;">step</span>
        <input type="text" id="node-input-step" style="width:60px">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-wrap"><i class="fa fa-refresh"></i> Wrap value from max to min and min to max.</label>
        <input type="checkbox" id="node-input-wrap" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-payload"><i class="fa fa-envelope-o"></i> When changed, send:</label>
    </div>
    <div class="form-row">
        <label style="padding-left:25px; margin-right:-25px">Payload</label>
        <label style="width:auto">Current value</label>
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left:25px; margin-right:-25px">Topic</label>
        <input type="text" id="node-input-topic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>
<script type="text/html" data-help-name="ui_numeric">
    <p>Adds a numeric input widget to the user interface.</p>
	<p>The user can set the value between
    the limits (<b>min</b> and <b>max</b>). Each value change will generate a <code>msg.payload</code>.</p>
    <p>If <b>Topic</b> is specified, it will be added as <code>msg.topic</code>.<p>
    <p>Any input <code>msg.payload</code> will be converted to a number, the <b>min</b> value will be used if conversion fails,
    and it will update the user interface. If the value changes, it will also be passed to the output.</p>
    <p>The <b>Value Format</b> field can be used to change the displayed format. For example, a <b>Value Format</b>
    of <code>{{value}} %</code>
    with a value of <b>23</b> will show <b>23 %</b> on the user interface. The <b>Value Format</b> field can contain
    HTML or Angular filters to format the output (eg: <code>&amp;deg;</code> will show the degree symbol).</p>
    <p>Setting the Value Format field to <code>{{msg.payload}}</code> will make the input field editable so you can type in a number.</p>
    <p>The label can also be set by a message property by setting
    the field to the name of the property, for example <code>{{msg.topic}}</code>.</p>
    <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the widget output.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_text_input] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_text_input',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: ''},
            tooltip: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            passthru: {value: true},
            mode: {value: 'text', required: true},
            delay: {value: 300, validate: RED.validators.number()},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            sendOnBlur: {value: true},
	    className: {value: ''},
            topicType: {value: 'msg'}
        },
        inputs:1,
        outputs:1,
        outputLabels: function() { return this.mode; },
        icon: "ui_text.png",
        paletteLabel: 'text input',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || this.mode+' input'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });
        }
    });
</script>

<script type="text/html" data-template-name="ui_text_input">
	<div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-tooltip"><i class="fa fa-info-circle"></i> Tooltip</label>
        <input type="text" id="node-input-tooltip" placeholder="optional tooltip">
    </div>
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-keyboard-o"></i> Mode</label>
        <select style="width:128px" id="node-input-mode">
            <option value="text">text input</option>
            <option value="email">email address</option>
            <option value="password">password</option>
            <option value="number">number</option>
            <option value="tel">telephone input</option>
            <option value="color">color picker</option>
            <option value="time">time picker</option>
            <option value="datetime-local">datetime picker</option>
            <option value="week">week picker</option>
            <option value="month">month picker</option>
            <!-- <option value="date">date picker</option> -->
        </select>
        <label for="node-input-delay" style="text-align:right; width:100px"><i class="fa fa-clock-o"></i> Delay (ms)</label>
        <input type="text" style="width:58px" id="node-input-delay">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-sendOnBlur">Send value on focus leave: </label>
        <input type="checkbox" checked id="node-input-sendOnBlur" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-payload"><i class="fa fa-envelope-o"></i> When changed, send:</label>
    </div>
    <div class="form-row">
        <label style="padding-left: 25px; margin-right: -25px">Payload</label>
        <label style="width:auto">Current value</label>
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left: 25px; margin-right: -25px">Topic</label>
        <input type="text" id="node-input-topic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
    <div class="form-tips">Setting <b>Delay</b> to 0 waits for Enter or Tab key, to send input.</span></div>
</script>
<script type="text/html" data-help-name="ui_text_input">
  <p>Adds a text input field to the user interface. Mode can be regular text, email or color picker.</p>
  <p>Any input is sent as <code>msg.payload</code>. If set to pass through mode an arriving <code>msg.payload</code>
      will be used if it is different from the existing text in the input field. This allows you to preset
      the text of the input field.</p>
  <p>The <b>Delay</b> <i>(default : 300ms)</i> sets the amount of time in milliseconds before the output is sent.
  Setting to <code>0</code> waits for "Enter" or "Tab" key to send. Enter will send payload but remain in focus.
  Tab will send payload and move to next field. Clicking elsewhere will also send the payload.</p>
  <p>The email mode will color in red if it is not a valid address and will return undefined.</p>
  <p>The time input type returns a number of milliseconds from midnight.</p>
  <p>Not all browsers support the <i>week</i> and <i>month</i> input types, and may return <i>undefined</i>.
  Please test your target browser(s) before use.</p>
  <p>If a <b>Topic</b> is specified, it will be added as <code>msg.topic</code>.</p>
  <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the input.</p>
  <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_date_picker] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_date_picker',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: 'date'},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            passthru: {value: true},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        outputLabels: ["epoch mS"],
        icon: "ui_date_picker.png",
        paletteLabel: 'date picker',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'date picker'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });
        }
    });
</script>

<script type="text/html" data-template-name="ui_date_picker">
	<div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-payload"><i class="fa fa-envelope-o"></i> When changed, send:</label>
    </div>
    <div class="form-row">
        <label style="padding-left:25px; margin-right:-25px">Payload</label>
        <label style="width:auto">Current value</label>
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left:25px; margin-right:-25px">Topic</label>
        <input type="text" id="node-input-topic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>
<script type="text/html" data-help-name="ui_date_picker">
    <p>Adds a date picker widget to the user interface.</p>
    <p>The date display can be formatted in the Dashboard - Site tab using <a href="https://momentjs.com/docs/#/displaying/">
    moment.js</a> formatting. For example <code>MM/DD/YYYY</code>, <code>Do MMM YYYY</code> or <code>YYYY-MM-DD</code>.</p>
    <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the input.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_colour_picker] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_colour_picker',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: ''},
            group: {type: 'ui_group', required: true},
            format: {value: 'hex'},
            outformat: {value: 'string'},
            showSwatch: {value: true},
            showPicker: {value: false},
            showValue: {value: false},
            showHue: {value: false},
            showAlpha: {value: false},
            showLightness: {value: true},
            square: {value: "false"},
            dynOutput: {value: "false"},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            passthru: {value: true},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        outputLabels: function() { return this.format; },
        icon: "ui_colour_picker.png",
        paletteLabel: 'colour picker',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'colour picker'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            if (this.square === undefined) {
                this.square = "false";
                $("#node-input-square").val("false");
            }
            $("#node-input-square").on("change", function() {
                if ($("#node-input-square").val() === "false") {
                    $("#node-input-showLightness").prop('checked', true);
                    $("#node-input-showHue").prop('checked', false);
                }
                else {
                    $("#node-input-showLightness").prop('checked', false);
                    $("#node-input-showHue").prop('checked', true);
                }
            });
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $("#node-input-format").on("change", function() {
                if ($(this).val() === "hex") {
                    $("#node-alpha-control").hide();
                }
                else {
                    $("#node-alpha-control").show();
                }
            });
            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });
        },
        oneditsave: function() {
            if (!$("#node-input-showPicker").is(':checked') && !$("#node-input-showValue").is(':checked')) {
                $("#node-input-showSwatch").prop('checked', true);
                this.showSwatch = true;
            }
        }
    });
</script>

<script type="text/html" data-template-name="ui_colour_picker">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-format"><i class="fa fa-keyboard-o"></i> Format</label>
        <select id="node-input-format" style="width:156px;">
            <option value="hex">hex</option>
            <option value="hex8">hex8</option>
            <option value="hsl">hsl</option>
            <option value="hsv">hsv</option>
            <option value="rgb">rgb</option>
        </select>
        <select id="node-input-square" style="width:130px; margin-left:30px">
            <option value="false">round</option>
            <option value="true">square</option>
        </select>
    </div>
    <div class="form-row">
        <label>&nbsp;</label> Show hue slider : <input type="checkbox" id="node-input-showHue" style="display:inline-block; width:auto; vertical-align:baseline;">
        <br/>
        <label>&nbsp;</label> Show lightness slider : <input type="checkbox" id="node-input-showLightness" style="display:inline-block; width:auto; vertical-align:baseline;">
        <br/>
        <span id="node-alpha-control"><label>&nbsp;</label> Show transparency slider : <input type="checkbox" id="node-input-showAlpha" style="display:inline-block; width:auto; vertical-align:baseline;"></span>
    </div>
    <div class="form-row">
        If width is 4 or greater:<br/>
        <label>&nbsp;</label>
        Always show swatch : <input type="checkbox" checked id="node-input-showSwatch" style="display:inline-block; width:auto; vertical-align:top;">
        <br/>
        <label>&nbsp;</label>
        Always show picker : <input type="checkbox" checked id="node-input-showPicker" style="display:inline-block; width:auto; vertical-align:top;">
        <br/>
        <label>&nbsp;</label>
        Always show value field : <input type="checkbox" checked id="node-input-showValue" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label style="width:auto" for="node-input-passthru"><i class="fa fa-arrow-right"></i> If <code>msg</code> arrives on input, pass through to output: </label>
        <input type="checkbox" checked id="node-input-passthru" style="display:inline-block; width:auto; vertical-align:top;">
    </div>
    <div class="form-row">
        <label for="node-input-dynOutput"><i class="fa fa-envelope-o"></i> Send</label>
        <select id="node-input-dynOutput" style="width:60%">
            <option value="false">one value when released/closed</option>
            <option value="true">multiple values during editing</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-outformat" style="padding-left: 25px; margin-right: -25px">Payload</label>
        <select id="node-input-outformat" style="width:60%">
            <option value="string">current value as a string</option>
            <option value="object">current value as an object</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-topic" style="padding-left: 25px; margin-right: -25px">Topic</label>
        <input type="text" id="node-input-topic" placeholder="optional topic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>
<script type="text/html" data-help-name="ui_colour_picker">
    <p>Adds a colour picker to the dashboard.</p>
    <p>If the group width is 4 or greater then the picker can be set to be visible at all times.</p>
    <p><b>Format</b> can be rgb, hex, hex8, hsv, or hsl. Transparency is supported for all except hex.</p>
    <p>If a <b>Topic</b> is specified, it will be added as <code>msg.topic</code>.</p>
    <p>Setting <code>msg.enabled</code> to <code>false</code> will disable the input.</p>
    <p>If set to pass through mode a message arriving on the input will be evaluated for any colour format available
        as Format. If the conversion fails #000000 will be used.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_form] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_form',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(176, 223, 227)',
        defaults: {
            name: {value: ''},
            label: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            options: {value:[{value:'', label :'', type:'', required:true}], validate:function(value) {
                    if (value.length ) {
                        for (var i = 0; i < value.length; i++) {
                            if (!value[i].value) {
                                return false;
                            }
                        }
                    }
                    else {
                        return false;
                    }
                    return true;
                }, required:true},
            formValue:{value:{}},
            payload: {value: ''},
            submit: {value: "submit"},
            cancel: {value: "cancel"},
            topic: {value: 'topic', validate: (RED.validators.hasOwnProperty('typedInput')?RED.validators.typedInput('topicType'):function(v) { return true})},
            topicType: {value: 'msg'},
            splitLayout: {value:''},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        icon: "ui_form.png",
        paletteLabel: 'form',
        label: function() { return this.name || this.label || 'form'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            if ($("#node-input-submit").val() === null) { $("#node-input-submit").val("submit"); }
            if ($("#node-input-cancel").val() === null) { $("#node-input-cancel").val("cancel"); }
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });

            this.resizeRule = function(option,newWidth) {
                //option.find(".node-input-option-type").width(newWidth);
                //  option.find(".node-input-option-label").width(newWidth);
                //  option.find(".node-input-option-value").width(newWidth);
            }

            function generateOption(i, option) {
                var container = $('<li/>',{style:"margin:0; padding:8px 0px 0px; border-bottom:1px solid #ccc;"});
                var row = $('<div/>').appendTo(container);
                var row2 = $('<div/>',{style:"padding-top:5px; padding-left:175px;"}).appendTo(container);
                var row3 = $('<div/>',{style:"padding-top:5px; padding-left:120px;"}).appendTo(container);

                $('<i style="cursor:move; margin-left:3px;" class="node-input-option-handle fa fa-bars"></i>').appendTo(row);

                var labelField = $('<input/>',{class:"node-input-option-label", type:"text", style:"margin-left:7px; width:20%;", placeholder: RED._("node-red-dashboard/ui_form:ui_form.label.egName"), value:option.label}).appendTo(row);//.typedInput({default:'str',types:['str', 'num']});
                var valueClass ="node-input-option-value"
                if (!option.value) { valueClass ="node-input-option-value input-error"; }
                var valueField = $('<input/>',{class:valueClass, type:"text", style:"margin-left:7px; width:20%;", placeholder: RED._("node-red-dashboard/ui_form:ui_form.label.egName2"), value:option.value}).appendTo(row);//.typedInput({default:'str',types:['str','num','bool']});
                valueField.keyup(function() {
                    if ($(this).val() && $(this).hasClass('input-error')) {
                        $(this).removeClass('input-error')
                    }
                    else {
                        if (!$(this).val()) {
                            $(this).addClass('input-error')
                        }
                    }

                });
                // var typeField = $('<input/>',{class:"node-input-option-type",type:"text",style:"margin-left: 7px; width: 135px;", placeholder: 'Type', value:option.type}).appendTo(row).typedInput({default:'str',types:['str', 'num']});
                var typeField = $('<select/>',{class:"node-input-option-type",type:"text",style:"margin-left:7px; width:16%"}).appendTo(row);//.typedInput({default:'str',types:['str', 'num']});

                var arr = [
                  {val : "text", text: RED._("node-red-dashboard/ui_form:ui_form.label.text")},
                  {val : "multiline", text: RED._("node-red-dashboard/ui_form:ui_form.label.multiline")},
                  {val : "number", text: RED._("node-red-dashboard/ui_form:ui_form.label.number")},
                  {val : "email", text: RED._("node-red-dashboard/ui_form:ui_form.label.email")},
                  {val : "password", text: RED._("node-red-dashboard/ui_form:ui_form.label.password")},
                  {val : "checkbox", text: RED._("node-red-dashboard/ui_form:ui_form.label.checkbox")},
                  {val : "switch", text: RED._("node-red-dashboard/ui_form:ui_form.label.switch")},
                  {val : "date", text: RED._("node-red-dashboard/ui_form:ui_form.label.date")},
                  {val : "time", text: RED._("node-red-dashboard/ui_form:ui_form.label.time")}
                ];

                //var sel = $('<select>').appendTo('body');
                $(arr).each(function() {
                    var isSelected= false;
                    if (option.type == this.val) {
                        isSelected = true;
                    }
                    typeField.append($("<option>").attr('value',this.val).text(this.text).prop('selected',isSelected));
                });

                //var labelForRequried = $('<span/>',{style:"margin: 10px;"}).text('Required').appendTo(row);
                var requiredContainer= $('<div/>',{style:"display:inline-block; height:34px; width:13%; vertical-align: middle"}).appendTo(row);
                var requiredInnerContainer= $('<div/>',{style:"left:35%; position:relative; width:30px"}).appendTo(requiredContainer);
                var reqRow=$("<label />",{class:"switch",style:"top:10px; width:30px;"}).appendTo(requiredInnerContainer);
                //var required = $('<input/>',{class:"node-input-option-required",style:"margin: 5px;width:19%",type:"checkbox", checked:option.required}).appendTo(row);//labelForRequried);//.typedInput({default:'str',types:['str', 'num']});
                var required = $('<input/>',{class:"node-input-option-required", type:"checkbox", checked:option.required, style:"vertical-align:top;"}).appendTo(reqRow);//labelForRequried);//.typedInput({default:'str',types:['str', 'num']});
                var reqDiv=$("<div />",{class:"slider round"}).appendTo(reqRow);
                var vis = option.rows ? 'visible' : 'hidden';
                var rowsField = $('<input/>',{class:"node-input-option-rows", type:"number", style:"width:10%;", placeholder:'Rows', value:option.rows }).css('visibility',vis).appendTo(row);

                var finalspan = $('<div/>',{style:"display:inline-block; width:5%;"}).appendTo(row);
                var deleteButton = $('<a/>',{href:"#",class:"editor-button", style:"font-size:1.3em; left:45%; position:relative;"}).appendTo(finalspan);
                $('<i/>',{class:"fa fa-trash-o"}).appendTo(deleteButton);

                typeField.change(function(e){
                    if (e.target.value != 'multiline') {
                        rowsField.val(undefined)
                        option.rows = null;
                        rowsField.css('visibility','hidden')
                    } else {
                        rowsField.css('visibility','visible')
                        if (!rowsField[0].value) rowsField[0].value = 3;
                    }

                })

                deleteButton.click(function() {
                    container.find(".node-input-option-value").removeAttr('required')
                    container.css({"background":"#fee"});
                    container.fadeOut(300, function() {
                        $(this).remove();
                    });
                });

                $("#node-input-option-container").append(container);
            }

            $("#node-input-add-option").click(function() {
                generateOption($("#node-input-option-container").children().length+1, {});
                $("#node-input-option-container-div").scrollTop($("#node-input-option-container-div").get(0).scrollHeight);
            });

            for (var i=0; i<this.options.length; i++) {
                var option = this.options[i];
                generateOption(i+1,option);
            }

            $('#node-input-topic').typedInput({
                default: 'str',
                typeField: $("#node-input-topicType"),
                types: ['str','msg','flow','global']
            });

            $( "#node-input-option-container" ).sortable({
                axis: "y",
                handle:".node-input-option-handle",
                cursor: "move"
            });
        },
        oneditsave: function() {
            var options = $("#node-input-option-container").children();
            var node = this;
            node.options = [];
            node.formValue = {};
            options.each(function(i) {
                var option = $(this);
                var o = {
                    label: option.find(".node-input-option-label").val(),//typedInput('value'),
                    value: option.find(".node-input-option-value").val(),//typedInput('value'),
                    type: option.find(".node-input-option-type").val(),//typedInput('value')
                    required: option.find(".node-input-option-required").is(':checked'),
                    rows: parseInt(option.find(".node-input-option-rows").val())
                };
                // o.value= o.value||o.label||(o.type+"_"+i);
                node.formValue[o.value]= o.type == "checkbox" || o.type == "switch" ? false : "";
                node.options.push(o);
            });
        },
        oneditresize: function() {
            var options = $("#node-input-option-container").children();
            var newWidth = ($("#node-input-option-container").width() - 175)/2;
            var node = this;
            options.each(function(i) {
                node.resizeRule($(this),newWidth);
            });
        }
    });
</script>
<script type="text/html" data-template-name="ui_form">

<style>
.switch {
    position: relative;
    display: inline-block;
    width: 30px;
    height: 18px;
}

.switch input {display:none;}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    -webkit-transition: .4s;
    transition: .4s;
}

.slider:before {
    position: absolute;
    content: "";
    height: 15px;
    width: 15px;
    left: 2px;
    bottom: 2px;
    background-color: white;
    -webkit-transition: .4s;
    transition: .4s;
}

input:checked + .slider {
    background-color: #910000;
}

input:focus + .slider {
    box-shadow: 0 0 1px #2196F3;
}

input:checked + .slider:before {
    -webkit-transform: translateX(11px);
    -ms-transform: translateX(11px);
    transform: translateX(11px);
}

/* Rounded sliders */
.slider.round {
    border-radius: 34px;
}

.slider.round:before {
    border-radius: 50%;
}
</style>

    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui_form.label.group"></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui_form.label.size"></label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-tag"></i> <span data-i18n="ui_form.label.label"></label>
        <input type="text" id="node-input-label" data-i18n="[placeholder]ui_form.label.optionalLabel">
    </div>
    <div class="form-row node-input-option-container-row" style="margin-bottom:0px; width:100%; min-width:520px">
        <label style="vertical-align:top;"><i class="fa fa-list-alt"></i> <span data-i18n="ui_form.label.formElements"></label>
        <div style="display:inline-block; width:78%; border:1px solid #ccc; border-radius:5px; box-sizing:border-box;">
          <div class="red-ui-tray-header" style="width:100%; display: inline-block; padding-top:10px; padding-buttom:10px; border-top:0px solid; border-radius:5px 5px 0 0; border-bottom:1px solid #ccc;">
              <div style="width:94%; display:inline-block; margin-left:27px">
                <div style="width:20%; text-align:center; float:left;" data-i18n="ui_form.label.label"></span></div>
                <div style="width:20%; text-align:center; float:left; margin-left:9px" data-i18n="node-red:common.label.name"></div>
                <div style="margin-left:7px; width:16%; text-align:center; float:left; margin-left:9px" data-i18n="ui_form.label.type"></div>
                <div style="width:16%; text-align:center; float:left;" data-i18n="ui_form.label.required"></div>
                <div style="width:10%; text-align:center; float:left;" data-i18n="ui_form.label.rows"></div>
                <div style="width:12%; text-align:center; float:left;" data-i18n="ui_form.label.remove"></div>
              </div>
          </div>
          <div id="node-input-option-container-div" style=" height: 257px; padding: 5px; overflow-y:scroll;">
            <ol id="node-input-option-container" style=" list-style-type:none; margin: 0;"></ol>
          </div>
        </div>
    </div>
    <div class="form-row">
        <a href="#" class="editor-button editor-button-small" id="node-input-add-option" style="margin-top: 4px; margin-left: 103px;"><i class="fa fa-plus"></i> <span data-i18n="ui_form.label.element"></span></a>
    </div>
    <div class="form-row">
        <label for="node-input-submit"><i class="fa fa-square"></i> <span data-i18n="ui_form.label.buttons"></label>
        <i class="fa fa-thumbs-o-up"></i> <input type="text" id="node-input-submit" data-i18n="[placeholder]ui_form.label.submitButtonText" style="width:35%;">
        <span style="margin-left:16px"><i class="fa fa-thumbs-o-down"></i></span>
        <input type="text" id="node-input-cancel" data-i18n="[placeholder]ui_form.label.cancelButtonText" style="width:35%;">
    </div>
    <div class="form-row">
        <label for="node-input-splitLayout"></label>
        <input type="checkbox" id="node-input-splitLayout" style="display:inline-block; width:auto; vertical-align:top;">
        <span data-i18n="ui_form.label.splitLayout">
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> <span data-i18n="ui_form.label.topic"></label>
        <input type="text" id="node-input-topic" data-i18n="[placeholder]ui_form.label.optionalMsgTopic">
        <input type="hidden" id="node-input-topicType">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  <span data-i18n="ui_form.label.className"></label>
        <input type="text" id="node-input-className" data-i18n="[placeholder]ui_form.label.classNamePlaceholder"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script>
<script type="text/html" data-help-name="ui_form">
    <p>Adds a form to user interface.</p>
    <p>Helps to collect multiple value from the user on submit button click as an object in <code>msg.payload</code> </p>
    <p>Multiple input elements can be added using add elements button</p>
    <p>Each element contains following components:</p>
    <ul>
        <li> <b>Label</b> : Value that will be the label of the element in the user interface</li>
        <li> <b>Name</b> : Represents the key (variable name) in the <code>msg.payload</code> in which the value of the corresponding element present</li>
        <li> <b>Type</b> : Drop down option to select the type of input element</li>
        <li> <b>Required</b> : On switching on the user has to supply the value before submitting</li>
        <li> <b>Rows</b> : number of UI rows for multiline text input</li>
        <li> <b>Delete</b> : To remove the current element from the form</li>
    </ul>
    <p>Optionally the <b>Topic</b> field can be used to set the <code>msg.topic</code> property.</p>
    <p>The Cancel button can be hidden by setting it's value to be blank "".</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_text] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_text',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(119, 198, 204)',
        defaults: {
            group: {type: 'ui_group', required:true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            name: {value: ''},
            label: {value: 'text'},
            format: {value: '{{msg.payload}}'},
            layout: {value:'row-spread'},
            className: {value: ''}
        },
        inputs:1,
        outputs:0,
        align: "right",
        icon: "ui_text.png",
        paletteLabel: 'text',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'text'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });

            $(".nr-db-text-layout-"+(this.layout||'row-spread')).addClass('selected');

            [ ".nr-db-text-layout-row-left",".nr-db-text-layout-row-center",".nr-db-text-layout-row-right",
              ".nr-db-text-layout-row-spread",".nr-db-text-layout-col-center"].forEach(function(id) {
                    $(id).click(function(e) {
                        $(".nr-db-text-layout").removeClass('selected');
                        $(this).addClass('selected');
                        $('#node-input-layout').val(id.substring(".nr-db-text-layout-".length));
                        e.preventDefault();
                    })
                })
        }
    });
</script>

<script type="text/html" data-template-name="ui_text">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> Label</label>
        <input type="text" id="node-input-label">
    </div>
    <div class="form-row">
        <label for="node-input-format"><i class="fa fa-i-cursor"></i> Value format</label>
        <input type="text" id="node-input-format" placeholder="{{msg.payload}}">
    </div>
    <div class="form-row">
        <label style="vertical-align: top"><i class="fa fa-th-large"></i> Layout</label>
        <div style="display:inline-block">
        <input type="hidden" id="node-input-layout"><input type="hidden" id="node-input-layoutAlign">
        <div>
            <a href="#" class="nr-db-text-layout nr-db-text-layout-row nr-db-text-layout-row-left">
                <span class="nr-db-text-layout-label">label</span>
                <span class="nr-db-text-layout-value">value</span>
                <div class="nr-db-text-layout-checkbox"></div>
            </a>
            <a href="#" class="nr-db-text-layout nr-db-text-layout-row nr-db-text-layout-row-center">
                <span class="nr-db-text-layout-label">label</span>
                <span class="nr-db-text-layout-value">value</span>
                <div class="nr-db-text-layout-checkbox"></div>
            </a>
            <a href="#" class="nr-db-text-layout nr-db-text-layout-row nr-db-text-layout-row-right">
                <span class="nr-db-text-layout-label">label</span>
                <span class="nr-db-text-layout-value">value</span>
                <div class="nr-db-text-layout-checkbox"></div>
            </a>
        </div>
        <div>
            <a href="#" class="nr-db-text-layout nr-db-text-layout-row nr-db-text-layout-row-spread">
                <span class="nr-db-text-layout-label">label</span>
                <span class="nr-db-text-layout-value">value</span>
                <div class="nr-db-text-layout-checkbox"></div>
            </a>
            <a href="#" class="nr-db-text-layout nr-db-text-layout-col nr-db-text-layout-col-center">
                <span class="nr-db-text-layout-label">label</span>
                <span class="nr-db-text-layout-value">value</span>
                <div class="nr-db-text-layout-checkbox"></div>
            </a>
        </div>
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>


</script>
<style>
    .nr-db-text-layout {
        position:relative;
        display: inline-block;
        width: 90px;
        height: 60px;
        border-radius:3px;
        border:1px solid #bbb;
        cursor:pointer;
        color: #666;
        margin-right: 10px;
        margin-bottom: 10px;
    }
    .nr-db-text-layout.selected, .nr-db-text-layout:hover {
        border-color: #333;
        color: #333;
    }
    .nr-db-text-layout span {
        position: absolute;
    }
    .nr-db-text-layout-value {
        font-weight: bold;
    }
    .nr-db-text-layout-row span { top: 20px; }
    .nr-db-text-layout-row-left .nr-db-text-layout-label { left: 2px; }
    .nr-db-text-layout-row-left .nr-db-text-layout-value { left: 34px; }
    .nr-db-text-layout-row-spread .nr-db-text-layout-label { left: 2px; }
    .nr-db-text-layout-row-spread .nr-db-text-layout-value { right: 2px; }
    .nr-db-text-layout-row-center .nr-db-text-layout-label { left: 11px; }
    .nr-db-text-layout-row-center .nr-db-text-layout-value { right: 11px; }
    .nr-db-text-layout-row-right .nr-db-text-layout-label { right: 40px; }
    .nr-db-text-layout-row-right .nr-db-text-layout-value { right: 2px; }

    .nr-db-text-layout-col span { width: 90px;  text-align: center; left: 0px;}
    .nr-db-text-layout-col-center .nr-db-text-layout-label { top: 12px; }
    .nr-db-text-layout-col-center .nr-db-text-layout-value { top: 26px; }
    .nr-db-text-layout-checkbox {
        display: none;
        width: 10px;
        height: 10px;
        border-radius: 10px;
        border: 1px solid #bbb;
        position: absolute;
        right: -5px;
        top: -5px;
        background: #fff;
    }
    .nr-db-text-layout.selected .nr-db-text-layout-checkbox {
        display:inline-block;
        box-shadow: inset 0px 0px 0px 2px #fff;
        background: #333;
        border-color: #333;
    }

</style>
<script type="text/html" data-help-name="ui_text">
    <p>Will display a non-editable text field on the user interface.</p>
    <p>Each received <code>msg.payload</code> will update the text based on the provided <b>Value Format</b>.</p>
    <p>The <b>Value Format</b> field can be used to change the displayed format and can contain valid HTML and
    <a href="https://scotch.io/tutorials/all-about-the-built-in-angularjs-filters" target="_blank">Angular filters</a>.</p>
    <p>For example: <code>{{value | uppercase}} &amp;deg;</code> will uppercase the payload text and add the degree symbol.</p>
    <p>The label can also be set by a message property by setting
    the field to the name of the property, for example <code>{{msg.topic}}</code>.</p>
    <p>The following icon fonts are also available: <a href="https://klarsys.github.io/angular-material-icons/" target="_blank">Material Design icon</a>
        <i>(e.g. 'check', 'close')</i> or a <a href="https://fontawesome.com/v4.7.0/icons/" target="_blank">Font Awesome icon</a>
        <i>(e.g. 'fa-fire')</i>, or a <a href="https://github.com/Paul-Reed/weather-icons-lite/blob/master/css_mappings.md">Weather icon</a>.
        You can use the full set of google material icons if you add 'mi-' to the icon name. e.g. 'mi-videogame_asset'.</p>
    <p>The widget also has a class of <code>nr-dashboard-widget-{the_widget_label_with_underscores}</code> which can be used for additional 
        styling if required. You may need to use the <i>!important</i> flag to override the theme.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_gauge] --- -->
<style>
    input.gauge-color {
        width: 100px;
        text-align: center;
    }
    input.gauge-color::-webkit-color-swatch {
        border: none;
    }
</style>
<script type="text/javascript">
    RED.nodes.registerType('ui_gauge',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(119, 198, 204)',
        defaults: {
            name: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v || 0;
                    var currentGroup = $('#node-input-group').val() || this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            gtype: {value: 'gage'},
            title: {value: 'gauge'},
            label: {value: 'units'},
            format: {value: '{{value}}'},
            min: {value: 0, required: true, validate: RED.validators.number()},
            max: {value: 10, required: true, validate: RED.validators.number()},
            colors: {value: ["#00B500","#E6E600","#CA3838"]},
            seg1: {value: ""},
            seg2: {value: ""},
            className: {value: ''}
        },
        inputs:1,
        outputs:0,
        inputLabels: function() { return this.min+" - "+this.max; },
        align: "right",
        icon: "ui_gauge.png",
        paletteLabel: 'gauge',
        label: function() { return this.name || (~this.title.indexOf("{{") ? null : this.title) || ((this.gtype === "gage") ? "gauge" : this.gtype) || 'gauge'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            var setColour = function(id, value) {
                $(id).val(value);
                $(id).css("background-color", value);
                var rgb = tinycolor(value).toRgb();
                var level = ((rgb.r*299) + (rgb.g*587) + (rgb.b*114))/1000;
                var textColor = (level >= 128) ? '#111111' : '#eeeeee';
                $(id).css("color", textColor);
            }
            $(".gauge-color").on("change", function() {
                setColour("#"+$(this).attr("id"), $(this).val());
            });

            var defaultColors = ['#00B500', '#E6E600', '#CA3838'];

            if (this.colors) {
                for (var i=0; i<this.colors.length; i++) {
                    var value = this.colors[i] || defaultColors[i];
                    setColour("#node-input-color"+(i+1), value);
                }
            }
            else {
                for (var j=0; j<defaultColors.length; j++) {
                    setColour("#node-input-color"+(j+1), defaultColors[j]);
                }
            }
            if (this.gtype === undefined) {
                this.gtype = "gage";
                $("#node-input-gtype").val("gage");
            }
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $("#node-input-gtype").on("change", function() {
                if (($(this).val() === "compass") || ($(this).val() === "wave")) {
                    $("#ui-gauge-colours").hide();
                    $("#ui-gauge-segments").hide();
                }
                else {
                    $("#ui-gauge-colours").show();
                    $("#ui-gauge-segments").show();
                }
            });
            $("#node-input-min").on("change", function() {
                $("#seg-min").text($(this).val());
            });
            $("#node-input-max").on("change", function() {
                $("#seg-max").text($(this).val());
            });
        },
        oneditsave: function() {
            this.colors = [$("#node-input-color1").val(),$("#node-input-color2").val(),$("#node-input-color3").val()];
        }
    });
</script>

<script type="text/html" data-template-name="ui_gauge">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-gtype"><i class="fa fa-list"></i> Type</label>
        <select id="node-input-gtype" style="width:150px">
            <option value="gage">Gauge</option>
            <option value="donut">Donut</option>
            <option value="compass">Compass</option>
            <option value="wave">Level</option>
        </select>
    </div>
    <div id="ui-gauge-labels">
        <div class="form-row">
            <label for="node-input-title"><i class="fa fa-i-cursor"></i> Label</label>
            <input type="text" id="node-input-title">
        </div>
        <div class="form-row" id="ui-gauge-format">
            <label for="node-input-format"><i class="fa fa-i-cursor"></i> Value format</label>
            <input type="text" id="node-input-format" placeholder="{{value}}">
        </div>
        <div class="form-row" id="ui-gauge-units">
            <label for="node-input-label"><i class="fa fa-i-cursor"></i> Units</label>
            <input type="text" id="node-input-label" placeholder="optional sub-label">
        </div>
    </div>
    <div class="form-row">
        <label for="node-input-min">Range</label>
        <span for="node-input-min">min</span>
        <input type="text" id="node-input-min" style="width:80px">
        <span for="node-input-max" style="margin-left:20px;">max</span>
        <input type="text" id="node-input-max" style="width:80px">
    </div>
    <div class="form-row" id="ui-gauge-colours">
        <label for="node-input-color1">Colour gradient</label>
        <input type="color" id="node-input-color1" class="gauge-color" style="width:100px;"/>
        <input type="color" id="node-input-color2" class="gauge-color" style="width:100px;"/>
        <input type="color" id="node-input-color3" class="gauge-color" style="width:100px;"/>
    </div>
    <div class="form-row" id="ui-gauge-segments">
        <label>Sectors</label>
        <span id="seg-min" style="display:inline-block; width:40px;">0</span>...
        <input type="text" id="node-input-seg1" style="text-align:center; width:87px;" placeholder="optional"> ...
        <input type="text" id="node-input-seg2" style="text-align:center; width:87px;" placeholder="optional"> ...
        <span id="seg-max" style="display:inline-block; width:40px; text-align:right">10</span>
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>    
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name">
    </div>
</script>
<script type="text/html" data-help-name="ui_gauge">
    <p>Adds a gauge type widget to the user interface.</p>
    <p>The <code>msg.payload</code> is searched for a numeric <i>value</i> and is formatted in accordance with
    the defined <b>Value Format</b>, which can then be formatted using
    <a href="https://scotch.io/tutorials/all-about-the-built-in-angularjs-filters" target="_blank">Angular filters</a>.</p>
    <p>For example : <code>{{value | number:1}}%</code> will round the value to one decimal place and append a % sign.</p>
    <p>The colours of each of 3 sectors can be specified and the gauge will blend between them.
    The colours should be specified in hex (#rrggbb) format.</p>
    <p>If you specify numbers for the sectors then the colours changes per sector.
    If not specified the colours are blended across the total range.</p>
    <p>The gauge has several modes. Regular gauge, donut, compass and wave.</p>
    <p>The label can also be set by a message property by setting
    the field to the name of the property, for example <code>{{msg.topic}}</code>.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_chart] --- -->
<style>
    input.series-color {
        width: 100px;
        text-align: center;
    }
    input.series-color::-webkit-color-swatch {
        border: none;
    }
</style>
<script type="text/javascript">
    RED.nodes.registerType('ui_chart',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(119, 198, 204)',
        defaults: {
            name: {value: ''},
            group: {type: 'ui_group', required: true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }},
            height: {value: 0},
            label: {value: 'chart'},
            chartType: {value: 'line'},
            legend: {value: 'false'},
            xformat: {value: 'HH:mm:ss'},
            interpolate: {value: 'linear', required:true},
            nodata: {value: ''},
            dot: {value: false},
            ymin: {value: '', validate:function(value) { return value === '' || RED.validators.number(); }},
            ymax: {value: '', validate:function(value) { return value === '' || RED.validators.number(); }},
            removeOlder: {value: 1, validate:RED.validators.number(), required:true},
            removeOlderPoints: {value: '', validate:function(value) { return value === '' || RED.validators.number(); }},
            removeOlderUnit: {value: '3600', required:true},
            cutout: {value: 0},
            useOneColor: {value: false},
            useUTC: {value: false},
            colors: {value: ['#1F77B4', '#AEC7E8', '#FF7F0E', '#2CA02C', '#98DF8A', '#D62728', '#FF9896', '#9467BD', '#C5B0D5']},
            outputs: {value: 1},
            useDifferentColor: {value: false},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        inputLabels: function() { return this.chartType; },
        outputLabels: ["chart state"],
        align: "right",
        icon: "ui_chart.png",
        paletteLabel: 'chart',
        label: function() { return this.name || (~this.label.indexOf("{{") ? null : this.label) || 'chart'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            var oldouts = this.outputs;
            if (RED.nodes.filterLinks({source:{id:this.id},sourcePort:1}).length > 0) { this.outputs = 2; }
            else { this.outputs = 1; }
            if (this.outputs !== oldouts) { this.changed = true; }
            if (!$("#node-input-chartType").val()) {
                $("#node-input-chartType").val("line");
            }
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
            $("#node-input-chartType").on("change", function() {
                $("#legend-show").hide();
                $("#show-useDifferentColor").hide();
                if ($(this).val() === "horizontalBar") {
                    $("#y-label-show").hide();
                    $("#x-label-show").show();
                }
                else {
                    $("#y-label-show").show();
                    $("#x-label-show").hide();
                }
                if ($(this).val() === "line") {
                    $("#x-axis-show").show();
                    $("#x-axis-label-show").show();
                    $("#interpolate-show").show();
                    $("#legend-show").show();
                    $("#y-axis-show").show();
                    $("#hole-size-show").hide();
                    $("#show-dot-field").show();
                    $("#show-useOneColor").hide();
                }
                else {
                    $("#x-axis-show").hide();
                    $("#x-axis-label-show").hide();
                    $("#interpolate-show").hide();
                    $("#show-dot-field").hide();
                    if (($(this).val() === "bar")||($(this).val() === "horizontalBar")) {
                        $("#show-useOneColor").show();
                        $("#legend-show").show();
                    }
                    else {
                        $("#show-useOneColor").hide();
                    }
                    if ($(this).val() === "pie") {
                        $("#y-axis-show").hide();
                        $("#legend-show").show();
                        $("#hole-size-show").show();
                    }
                    else if ($(this).val() === "polar-area") {
                        $("#y-axis-show").show();
                        $("#legend-show").show();
                        $("#hole-size-show").hide();
                        $("#show-useDifferentColor").show();
                    }
                    else if ($(this).val() === "radar") {
                        $("#y-axis-show").show();
                        $("#legend-show").show();
                        $("#hole-size-show").hide();
                    }
                    else {
                        $("#y-axis-show").show();
                        $("#hole-size-show").hide();
                    }
                }

            });
            var setColour = function(id, value) {
                $(id).val(value);
                $(id).css("background-color", value);
                var rgb = tinycolor(value).toRgb();
                var level = ((rgb.r*299) + (rgb.g*587) + (rgb.b*114))/1000;
                var textColor = (level >= 128) ? '#111111' : '#eeeeee';
                $(id).css("color", textColor);
            }
            $(".series-color").on("change", function() {
                setColour("#"+$(this).attr("id"), $(this).val());
            });
            var oval = $("#node-input-xformat").val();
            if (!oval) { $("#node-input-xformat").val("HH:mm:ss"); }
            var odef = 'custom';
            if (oval === "HH:mm:ss") { odef = oval; }
            if (oval === "HH:mm") { odef = oval; }
            if (oval === "Y-M-D") { odef = oval; }
            if (oval === "D/M") { odef = oval; }
            if (oval === "dd HH:mm") { odef = oval; }
            if (oval === "auto") { odef = oval; }
            var ohms = {value: "HH:mm:ss", label: RED._("node-red-dashboard/ui_chart:ui_chart.label.HHmmss"), hasValue: false};
            var ohm = {value: "HH:mm", label: RED._("node-red-dashboard/ui_chart:ui_chart.label.HHmm"), hasValue: false};
            var oymd = {value: "Y-M-D", label: RED._("node-red-dashboard/ui_chart:ui_chart.label.yearMonthDate"), hasValue: false};
            var odm = {value: "D/M", label: RED._("node-red-dashboard/ui_chart:ui_chart.label.dateMonth"), hasValue: false};
            var oahm = {value: "dd HH:mm", label: RED._("node-red-dashboard/ui_chart:ui_chart.label.dayHHmm"), hasValue: false};
            var ocus = {value: "custom", label: RED._("node-red-dashboard/ui_chart:ui_chart.label.custom"), icon: "red/images/typedInput/az.png"};
            var oaut = {value: "auto", label: RED._("node-red-dashboard/ui_chart:ui_chart.label.automatic"), hasValue: false};
            $("#node-input-xformat").typedInput({
                default: odef,
                types:[ ohms, ohm, oahm, odm, oymd, ocus, oaut ]
            });
            var defaultColors = ['#1F77B4', '#AEC7E8', '#FF7F0E', '#2CA02C', '#98DF8A', '#D62728', '#FF9896', '#9467BD', '#C5B0D5'];

            if (this.colors) {
                for (var i=0; i<this.colors.length; i++) {
                    var value = this.colors[i] || defaultColors[i];
                    setColour("#node-input-color"+(i+1), value);
                }
            }
            else {
                for (var c=0; c<defaultColors.length; c++) {
                    setColour("#node-input-color"+(c+1), defaultColors[c]);
                }
            }

        },
        oneditsave: function() {
            if ($("#node-input-xformat").typedInput('type') !== 'custom') {
                $("#node-input-xformat").val($("#node-input-xformat").typedInput('type'));
            }
            this.colors = [$("#node-input-color1").val(),$("#node-input-color2").val(),$("#node-input-color3").val(),
            $("#node-input-color4").val(),$("#node-input-color5").val(),$("#node-input-color6").val(),
            $("#node-input-color7").val(),$("#node-input-color8").val(),$("#node-input-color9").val()];
        }
    });
</script>

<script type="text/html" data-template-name="ui_chart">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui_chart.label.group"></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui_chart.label.size"></label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-label"><i class="fa fa-i-cursor"></i> <span data-i18n="ui_chart.label.label"></label>
        <input type="text" id="node-input-label" data-i18n="[placeholder]ui_chart.label.optionalChartTitle">
    </div>
    <div class="form-row">
        <label for="node-input-removeOlder"><i class="fa fa-line-chart"></i> <span data-i18n="ui_chart.label.type"></label>
        <select id="node-input-chartType" style="width:159px; font-family:'FontAwesome','Helvetica Neue', Helvetica, Arial, sans-serif">
            <option value="line" data-i18n="[html]ui_chart.label.lineChart"></option>
            <option value="bar" data-i18n="[html]ui_chart.label.barChart"></option>
            <option value="horizontalBar" data-i18n="[html]ui_chart.label.barChartH"></option>
            <option value="pie" data-i18n="[html]ui_chart.label.pieChart"></option>
            <option value="polar-area" data-i18n="[html]ui_chart.label.polarAreaChart"></option>
            <option value="radar" data-i18n="[html]ui_chart.label.radarChart"></option>
        </select>
        <div id="show-dot-field" style="display:inline-block;">
            <input type="checkbox" id="node-input-dot" style="display:inline-block; width:auto; vertical-align:baseline; margin-left:40px; margin-right:5px;"><span data-i18n="ui_chart.label.enlargePoints">
        </div>
    </div>
    <div class="form-row" id="x-axis-show">
        <label for="node-input-removeOlder" data-i18n="ui_chart.label.xAxis"></label>
        <label for="node-input-removeOlder" style="width:auto" data-i18n="ui_chart.label.last"></label>
        <input type="text" id="node-input-removeOlder" style="width:50px;">
        <select id="node-input-removeOlderUnit" style="width:80px;">
            <option value="1" data-i18n="ui_chart.label.seconds"></option>
            <option value="60" data-i18n="ui_chart.label.minutes"></option>
            <option value="3600" data-i18n="ui_chart.label.hours"></option>
            <option value="86400" data-i18n="ui_chart.label.days"></option>
            <option value="604800" data-i18n="ui_chart.label.weeks"></option>
        </select>
        <label for="node-input-removeOlderPoints" style="width:auto; margin-left:10px; margin-right:10px;" data-i18n="ui_chart.label.or"></label>
        <input type="text" id="node-input-removeOlderPoints" style="width:60px;" placeholder="1000">
        <span style="margin-left:5px;" data-i18n="ui_chart.label.points"></span>
    </div>
    <div class="form-row" id="x-axis-label-show">
        <label for="node-input-xformat" data-i18n="ui_chart.label.xAxisLabel"></label>
        <input type="text" id="node-input-xformat" style="width:250px;">
        <input type="checkbox" id="node-input-useUTC" style="display:inline-block; width:auto; vertical-align:baseline; margin-left:8px; margin-right:4px;"> <span data-i18n="ui_chart.label.asUTC"></span>
    </div>
    <div class="form-row" id="y-axis-show">
        <label id="y-label-show" for="node-input-ymin" data-i18n="ui_chart.label.yAxis"></label>
        <label id="x-label-show" for="node-input-ymin" data-i18n="ui_chart.label.xAxis"></label>
        <label for="node-input-ymin" style="width:auto" data-i18n="ui_chart.label.min"></label>
        <input type="text" id="node-input-ymin" style="width:92px">
        <label for="node-input-ymax" style="width:auto; margin-left:20px;" data-i18n="ui_chart.label.max"></label>
        <input type="text" id="node-input-ymax" style="width:92px">
    </div>
    <div class="form-row" id="legend-show">
        <label for="node-input-legend" data-i18n="ui_chart.label.legend"></label>
        <select id="node-input-legend" style="width:120px;">
            <option value="false" data-i18n="ui_chart.label.none"></option>
            <option value="true" data-i18n="ui_chart.label.show"></option>
        </select>
        <span id="interpolate-show">&nbsp;&nbsp;&nbsp;&nbsp;<span data-i18n="ui_chart.label.interpolate"></span>
            <select id="node-input-interpolate" style="width:120px;">
                <option value="linear" data-i18n="ui_chart.label.linear"></option>
                <option value="step" data-i18n="ui_chart.label.step"></option>
                <option value="bezier" data-i18n="ui_chart.label.bezier"></option>
                <option value="cubic" data-i18n="ui_chart.label.cubic"></option>
                <option value="monotone" data-i18n="ui_chart.label.cubicMono"></option>
            </select>
        </span>
        <span id="hole-size-show">&nbsp;&nbsp;&nbsp;&nbsp;<span data-i18n="ui_chart.label.cutout"></span>
            <input type="text" id="node-input-cutout" style="width:35px"> %
        </span>
    </div>
    <div id="show-useOneColor" style="display:none; height:24px;">
        <input type="checkbox" id="node-input-useOneColor" style="display:inline-block; width:auto; vertical-align:baseline; margin-left:105px; margin-right:5px;"><span data-i18n="ui_chart.label.useFirstColourForAllBars"></span>
    </div>
    <div class="form-row" id="ui-chart-colours">
        <label for="node-input-color1" data-i18n="ui_chart.label.seriesColours"></label>
        <input type="color" id="node-input-color1" class="series-color" style="width:100px;"/>
        <input type="color" id="node-input-color2" class="series-color" style="width:100px;"/>
        <input type="color" id="node-input-color3" class="series-color" style="width:100px;"/>
        <div style="margin-top:5px; margin-left:104px;">
            <input type="color" id="node-input-color4" class="series-color" style="width:100px;"/>
            <input type="color" id="node-input-color5" class="series-color" style="width:100px;"/>
            <input type="color" id="node-input-color6" class="series-color" style="width:100px;"/>
        </div>
        <div style="margin-top:5px; margin-left:104px;">
            <input type="color" id="node-input-color7" class="series-color" style="width:100px;"/>
            <input type="color" id="node-input-color8" class="series-color" style="width:100px;"/>
            <input type="color" id="node-input-color9" class="series-color" style="width:100px;"/>
        </div>
    </div>
    <div id="show-useDifferentColor" class="form-row">
         <label></label>
         <input type="checkbox" id="node-input-useDifferentColor" style="display:inline-block; width:auto; vertical-align:top;">
             <span data-i18n="ui_chart.label.useDifferentColor"></span>
         </input>
    </div>
    <div class="form-row">
        <label for="node-input-nodata" data-i18n="ui_chart.label.blankLabel"></label>
        <input type="text" id="node-input-nodata" data-i18n="[placeholder]ui_chart.label.displayThisTextBeforeValidDataArrives">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  <span data-i18n="ui_chart.label.className"></span></label>
        <input type="text" id="node-input-className" data-i18n="[placeholder]ui_chart.label.classNamePlaceholder"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script>
<script type="text/html" data-help-name="ui_chart">
    <p>Plots the input values on a chart. This can either be a time based line chart, a bar chart (vertical or horizontal),
    or a pie chart.</p>
    <p>Each input <code>msg.payload</code> value will be converted to a number. If the
    conversion fails, the message is ignored.</p>
    <p>Minimum and Maximum <b>Y</b> axis values are optional. The graph will auto-scale to any values received.</p>
    <p>Multiple series can be shown on the same chart by using a different <code>msg.topic</code>
    value on each input message. Multiple bars of the same series can be shown by using the <code>msg.label</code> property.</p>
    <p>The <b>X</b> axis defines a time window or a maximum number of points to display. Older data will be automatically removed from the graph.
    The axis labels can be formatted using a <a href="https://momentjs.com/docs/#/displaying/format/" target="_blank">
    Moment.js time formatted</a> string.</p>
    <p>Inputting a <code>msg.payload</code> containing a blank array <code>[]</code> will clear the chart.</p>
    <p>See <b><a href="https://github.com/node-red/node-red-dashboard/blob/master/Charts.md" target="_new">this information</a></b>
    for how to pre-format data to be passed in as a complete chart.</p>
    <p>The <b>Blank label</b> field can be used to display some text before any valid data is received.</p>
    <p>The label can also be set by a message property by setting
    the field to the name of the property, for example <code>{{msg.topic}}</code>.</p>
    <p>The node output contains an array of the chart state that can be persisted if needed. This can be passed
    into the chart node to re-display the persisted data.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_audio] --- -->


<script type="text/javascript">
(function() {
    var myvoice = 0;
    var voices;
    RED.nodes.registerType('ui_audio',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        paletteLabel: 'audio out',
        color: 'rgb(119, 198, 204)',
        defaults: {
            name: {value:""},
            group: {type: 'ui_group', required: true},
            voice: {value:""},
            always: {value:""}
        },
        inputs:1,
        outputs:0,
        icon: "feed.png",
        align: "right",
        label: function() { return this.name||"audio out"; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        onpaletteadd: function() {
            if ('speechSynthesis' in window) { voices = window.speechSynthesis.getVoices(); }
        },
        oneditprepare: function() {
            if ('speechSynthesis' in window) {
                voices = window.speechSynthesis.getVoices();
                for (i = 0; i < voices.length ; i++) {
                    //console.log(i,voices[i].name,voices[i].lang,voices[i].voiceURI,voices[i].default);
                    var option = document.createElement('option');
                    option.textContent = i + " : " + voices[i].name + ' (' + voices[i].lang + ')';
                    if (voices[i].default) { option.textContent += ' -- DEFAULT'; }
                    option.setAttribute('value', voices[i].voiceURI);
                    document.getElementById("node-input-voice").appendChild(option);
                }
                $('#node-input-voice').val(this.voice || 0);
            }
            else {
                $('#voice-input-row').hide();
            }

            $("#node-input-voice").on("change", function() {
                myvoice = this.voice = $("#node-input-voice").val();
            });
        }
    });
})();
</script>

<script type="text/html" data-template-name="ui_audio">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row" id="voice-input-row">
        <label for="node-input-voice"><i class="fa fa-language"></i> TTS Voice</label>
        <select id="node-input-voice" style="width:70%"></select>
    </div>
    <div class="form-row">
        <label for="node-input-always"></label>
        <input type="checkbox" checked id="node-input-always" style="display:inline-block; width:auto; vertical-align:top;">
        Play audio when window not in focus.
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>
<script type="text/html" data-help-name="ui_audio">
    <p>Plays audio or text to speech (TTS) in the dashboard.</p>
    <p>To work the dashboard web page must be open.</p>
    <p>Expects <code>msg.payload</code> to contain a buffer of a <b>wav</b> or <b>mp3</b> file.</p>
    <p>If your browser has native support for Text-to-Speech then a <code>msg.payload</code>
    can also be a <b>string</b> to be read aloud.</p>
    <p>Optionally setting <code>msg.level</code> from 0 to 100 will change the volume from 0 to 100%. Default is 100%.
    In audio mode you can go up to 300, but you may get distortion.</p>
    <p>When a <code>msg.reset</code> is available with value <code>true</code>, then playback of the current audio fragment will be stopped.</p>
    <p>The <b>node status</b> reflects the current playback status:
    <ul>
        <li><b>started:</b> the audio fragment playback has been started.</li>
        <li><b>reset:</b> the audio fragment playback has been reset (i.e. stopped before completed).</li>
    </ul>
    As soon as the audio fragment playback is completed, the node status will be cleared automatically.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_toast] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_toast', {
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb(119, 198, 204)',
        defaults: {
            position: {value: 'top right'},
            displayTime: {value: '3'},
            highlight: {value: ''},
            sendall: {value: true},
            outputs: {value: 0},
            ok: {value: 'OK', required: true},
            cancel: {value: ''},
            raw: {value: false},
            className: {value: ''},
            topic: {value: ''},
            name: {value: ''}
        },
        inputs:1,
        outputs:0,
        align: "right",
        icon: "ui_toast.png",
        paletteLabel: 'notification',
        label: function() { return this.name || (this.position==="prompt" ? "show dialog" : (this.position==="dialog" ? "show dialog" : "show notification")); },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-position").on("change", function() {
                if ($("#node-input-position option:selected").val() === 'dialog') {
                    $("#node-toast-displaytime").hide();
                    $("#node-toast-highlightcolor").hide();
                    $("#node-toast-sendall").hide();
                    $("#node-dialog-displayok").show();
                    $("#node-dialog-displaycancel").show();
                    $("#node-dialog-topic").show();
                }
                else if ($("#node-input-position option:selected").val() === 'prompt') {
                    $("#node-toast-displaytime").hide();
                    $("#node-toast-highlightcolor").hide();
                    $("#node-toast-sendall").hide();
                    $("#node-dialog-displayok").show();
                    $("#node-dialog-displaycancel").show();
                    $("#node-dialog-topic").show();
                    if (typeof $("#node-input-cancel").val() !== "string" || $("#node-input-cancel").val() === "" ) {
                        $("#node-input-cancel").val("Cancel");
                    }
                }
                else {
                    $("#node-toast-displaytime").show();
                    $("#node-toast-highlightcolor").show();
                    $("#node-toast-sendall").show();
                    $("#node-dialog-displayok").hide();
                    $("#node-dialog-displaycancel").hide();
                    $("#node-dialog-topic").show();
                }
            });
        },
        oneditsave: function() {
            if ($("#node-input-position option:selected").val() === 'dialog') { this.outputs = 1; }
            else if ($("#node-input-position option:selected").val() === 'prompt') { this.outputs = 1; }
            else { this.outputs = 0; }
        }
    });
</script>

<script type="text/html" data-template-name="ui_toast">
    <div class="form-row">
        <label for="node-input-position"><i class="fa fa-th-large"></i> Layout</label>
        <select type="text" id="node-input-position" style="display:inline-block; width:70%; vertical-align:baseline;">
            <option value="top right">Top Right</option>
            <option value="bottom right">Bottom Right</option>
            <option value="top left">Top Left</option>
            <option value="bottom left">Bottom Left</option>
            <option value="dialog">OK / Cancel Dialog</option>
            <option value="prompt">OK / Cancel Dialog with Input</option>
        </select>
    </div>
    <div class="form-row" id="node-toast-displaytime">
        <label for="node-input-displayTime"><i class="fa fa-clock-o"></i> Timeout (S)</label>
        <input type="text" id="node-input-displayTime" placeholder="[msg.timeout]">
    </div>
    <div class="form-row" id="node-toast-highlightcolor">
        <label for="node-input-highlight"><i class="fa fa-square-o"></i> Border</label>
        <input type="text" id="node-input-highlight" placeholder="(optional) border highlight colour">
    </div>
    <div class="form-row" id="node-toast-sendtoall">
        <label style="width:auto" for="node-input-sendall"><i class="fa fa-arrow-right"></i> Send to all browser sessions. </label>
        <input type="checkbox" checked id="node-input-sendall" style="display:inline-block; width:auto; vertical-align:baseline;">
    </div>
    <div class="form-row" id="node-dialog-displayok">
        <label for="node-input-ok"><i class="fa fa-check"></i> Default action label</label>
        <input type="text" id="node-input-ok" placeholder="label for OK button">
    </div>
    <div class="form-row" id="node-dialog-displaycancel">
        <label for="node-input-cancel"><i class="fa fa-times"></i> Secondary action label</label>
        <input type="text" id="node-input-cancel" placeholder="(optional label for Cancel button)">
    </div>
    <div class="form-row" id="node-toast-raw">
        <label style="width:auto" for="node-input-raw"><i class="fa fa-exclamation-triangle"></i> Accept raw HTML/JavaScript input in msg.payload to format popup.</label>
        <input type="checkbox" id="node-input-raw" style="display:inline-block; width:auto; vertical-align:baseline;">
    </div>
    <div class="form-row" id="node-dialog-className">
        <label for="node-input-className"><i class="fa fa-code"></i> Class</label>
        <input type="text" id="node-input-className" placeholder="[msg.className]">
    </div>
    <div class="form-row" id="node-dialog-topic">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Topic</label>
        <input type="text" id="node-input-topic" placeholder="[msg.topic]">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-tips"><b>Note</b>: checking <i>Accept raw HTML/JavaScript</i> can allow injection of code.
    Ensure the input comes from trusted sources.</span></div>
</script>
<script type="text/html" data-help-name="ui_toast">
    <p>Shows <code>msg.payload</code> as a popup notification or OK / Cancel dialog
    message on the user interface.</p>
    <p>If a <code>msg.topic</code> is available it will be used as the title.</p>
    <p>If you do not set an optional border highlight colour, then it can be set dynamically by <code>msg.highlight</code>.</p>
    <p>You may also configure the position and duration of the toast notifications. If you leave the timeout blank
    it can be set by <code>msg.timeout</code>. This does not apply to OK/Cancel dialogs.
    <p>The dialog returns a <code>msg.payload</code> string of whatever you configure
    the button label(s) to be. The second (cancel) button is optional, as is the return
    value of <code>msg.topic</code>.</p>
    <p>If you select 'OK, Cancel and Input' mode then <code>msg.payload</code> will contain
    any text input by the user, rather than the OK button text.</p>
    <p>Sending a blank payload will remove any active dialog without sending any data.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent element. This way you can style the card and the elements inside it with custom CSS.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_ui_control] --- -->
<script type="text/javascript">
    // convert to i18 text
    function c_(x) {
        return RED._("node-red-dashboard/ui_ui_control:ui_ui_control."+x);
    }

    RED.nodes.registerType('ui_ui_control', {
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb( 63, 173, 181)',
        defaults: {
            name: {value:""},
            events: {value:"all"}
        },
        inputs:1,
        outputs:1,
        align: "right",
        icon: "ui_link.png",
        paletteLabel: 'ui control',
        label: function() { return this.name || "ui control"; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        outputLabels: function() { return this.events; },
    });
</script>

<script type="text/html" data-template-name="ui_ui_control">
    <div class="form-row">
        <label for="node-input-events"><i class="fa fa-sign-out"></i> Output</label>
        <select id="node-input-events" style="width:70%;">
            <option value="all">Connect, lost, change tab or group events</option>
            <option value="change">Change tab or group events only</option>
            <option value="connect">Connect event only</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="ui_ui_control.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]ui_ui_control.placeholder.name">
    </div>
</script>
<script type="text/html" data-help-name="ui_ui_control">
    <p>Allows dynamic control of the Dashboard.</p>
    <p>The default function is to change the currently displayed tab. <code>msg.payload</code>
    should either be an object of the form <code>{"tab":"my_tab_name"}</code>, or just be the <b>tab name</b>
    or <b>numeric index</b> (from 0) of the tab or link to be displayed.</p>
    <p>Sending a blank tab name "" will refresh the current page.
    You can also send "+1" for next tab and "-1" for previous tab.</p>
    <p>Dashboard pages (i.e. "tabs") can be controlled by sending a <code>msg.payload</code> object with the format
    <pre>{"tabs": {"hide": "tab_name_to_hide", "disable": ["secret_tab", "unused_stuff"]}}</pre>.
    There are 2 toggle states available: <b>show</b>/<b>hide</b> and <b>enable</b>/<b>disable</b></p>
    <p>Visibility of individual groups of widgets can controlled by a payload like
    <pre>{"group": {"hide": ["tab_name_group_name_with_underscores"], "show": ["reveal_another_group"], "focus": true}}</pre>
    where <b>focus</b> is optional and will cause the screen to scroll to show that group if required. 
    You can also use properties `open` and `close` to set the state of a group that can be controlled by the user. The group
    names are the IDs of the groups and are typically formed from the <i>tab name</i> plus <i>group name</i> joined with
    underscores replacing all spaces.</p>
    <p>When any browser client connects or loses connection, changes tab, or expands or collapses a group this node will emit a <code>msg</code> containing:</p>
    <ul>
    <li><code>payload</code> - <i>connect</i>, <i>lost</i>, <i>change</i>, or <i>group</i>.
    <li><code>socketid</code> - the ID of the socket (this will change every time the browser reloads the page).
    <li><code>socketip</code> - the ip address from where the connection originated.
    <li><code>tab</code> - the number of the tab. (only for 'change' event).
    <li><code>name</code> - the name of the tab. (only for 'change' event).
    <li><code>group</code> - the name of the group. (only for 'group' event).
    <li><code>open</code> - the state of the group. (only for 'group' event).
    </ul>
    <p>Optional - report only connect events - useful to use to trigger a resend of data to a new client without needing to filter out other events.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_template] --- -->
<script type="text/javascript">
    // convert to i18 text
    function c_(x) {
        return RED._("node-red-dashboard/ui_template:ui_template."+x);
    }

    RED.nodes.registerType('ui_template',{
        category: RED._("node-red-dashboard/ui_base:ui_base.label.category"),
        color: 'rgb( 63, 173, 181)',
        defaults: {
            group: {type: 'ui_group', required:false},
            name: {value: ''},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var valid = true
                    if (this.templateScope !== 'global') {
                        var width = v||0;
                        var currentGroup = $('#node-input-group').val()||this.group;
                        var groupNode = RED.nodes.node(currentGroup);
                        valid = !groupNode || +width <= +groupNode.width;
                        $("#node-input-size").toggleClass("input-error",!valid);
                    }
                    return valid;
                }},
            height: {value: 0},
            format: {value: '<div ng-bind-html="msg.payload"></div>'},
            storeOutMessages: {value: true},
            fwdInMessages: {value: true},
            resendOnRefresh: {value: true},
            templateScope: {value: 'local'},
            className: {value: ''}
        },
        inputs:1,
        outputs:1,
        icon: "ui_template.png",
        paletteLabel: 'template',
        label: function() { return this.name || 'template'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            if (RED.editor.hasOwnProperty("editText") && typeof RED.editor.editText === "function") {
                $("#node-template-expand-editor").show();
            }
            else {
                $("#node-template-expand-editor").hide();
            }
            var that = this;
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });

            if (typeof this.storeOutMessages === 'undefined') {
                this.storeOutMessages = true;
                $('#node-input-storeOutMessages').prop('checked', true);
            }

            if (typeof this.fwdInMessages === 'undefined') {
                this.fwdInMessages = true;
                $('#node-input-fwdInMessages').prop('checked', true);
            }

            if (typeof this.templateScope === 'undefined') {
                this.templateScope = 'local';
                $('#node-input-templateScope').val(this.templateScope);
            }

            $('#node-input-templateScope').on('change', function() {
                if ($('#node-input-templateScope').val() === 'global') {
                    $('#template-row-group, #template-row-size, #template-pass-store, #template-row-class').hide();
                    that._def.defaults.group.required = false;
                }
                else {
                    $('#template-row-group, #template-row-size, #template-pass-store, #template-row-class').show();
                    that._def.defaults.group.required = true;
                }

                var rows = $("#dialog-form>div:not(.node-text-editor-row)");
                var height = $("#dialog-form").height();
                for (var i=0; i<rows.size(); i++) {
                    height = height - $(rows[i]).outerHeight(true);
                }
                if ($('#node-input-templateScope').val() === "global") { height += 240; }
                var editorRow = $("#dialog-form>div.node-text-editor-row");
                height -= (parseInt(editorRow.css("marginTop")) + parseInt(editorRow.css("marginBottom")));
                $(".node-text-editor").css("height",height+"px");
                if (this.editor) { this.editor.resize(); }
            })

            this.editor = RED.editor.createEditor({
                id: 'node-input-format-editor',
                mode: 'ace/mode/html',
                value: $("#node-input-format").val()
            });

            RED.library.create({
                url:"uitemplates", // where to get the data from
                type:"ui_template", // the type of object the library is for
                editor:this.editor, // the field name the main text body goes to
                mode:"ace/mode/html",
                fields:['name']
            });

            this.editor.focus();

            RED.popover.tooltip($("#node-template-expand-editor"),c_("label.expand"));

            $("#node-template-expand-editor").on("click", function(e) {
                e.preventDefault();
                var value = that.editor.getValue();
                RED.editor.editText({
                    mode: 'html',
                    value: value,
                    width: "Infinity",
                    cursor: that.editor.getCursorPosition(),
                    complete: function(v,cursor) {
                        that.editor.setValue(v, -1);
                        that.editor.gotoLine(cursor.row+1,cursor.column,false);
                        setTimeout(function() { that.editor.focus(); },300);
                    }
                })
            })
        },
        oneditsave: function() {
            var annot = this.editor.getSession().getAnnotations();
            this.noerr = 0;
            $("#node-input-noerr").val(0);
            for (var k=0; k < annot.length; k++) {
                if (annot[k].type === "error") {
                    $("#node-input-noerr").val(annot.length);
                    this.noerr = annot.length;
                }
            }
            $("#node-input-format").val(this.editor.getValue());
            this.editor.destroy();
            delete this.editor;
        },
        oneditcancel: function() {
            this.editor.destroy();
            delete this.editor;
        },
        oneditresize: function(size) {
            var rows = $("#dialog-form>div:not(.node-text-editor-row)");
            var height = $("#dialog-form").height();
            for (var i=0; i<rows.size(); i++) {
                height = height - $(rows[i]).outerHeight(true);
            }
            if ($('#node-input-templateScope').val() === "global") { height += 232; }
            var editorRow = $("#dialog-form>div.node-text-editor-row");
            height -= (parseInt(editorRow.css("marginTop")) + parseInt(editorRow.css("marginBottom")));
            $(".node-text-editor").css("height",height+"px");
            this.editor.resize();
        }
    });
</script>

<script type="text/html" data-template-name="ui_template">
    <div class="form-row">
        <label for="node-input-format"><span data-i18n="ui_template.label.type"></span></label>
        <select style="width:76%" id="node-input-templateScope">
            <option value="local" data-i18n="ui_template.label.local"></option>
            <option value="global" data-i18n="ui_template.label.global"></option>
        </select>
    </div>
	<div class="form-row" id="template-row-group">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui_template.label.group"></span></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row" id="template-row-size">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui_template.label.size"></span></label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row" id="template-row-class">
        <label for="node-input-className"><i class="fa fa-code"></i>  <span data-i18n="ui_template.label.className"></label>
        <input type="text" id="node-input-className" data-i18n="[placeholder]ui_template.label.classNamePlaceholder"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <div style="display:inline-block; width:calc(100% - 105px)">
            <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
        </div>
    </div>
    <div class="form-row" style="margin-bottom:0px;">
        <label for="node-input-format"><i class="fa fa-copy"></i> <span data-i18n="ui_template.label.template"></span></label>
        <input type="hidden" id="node-input-format">
        <button id="node-template-expand-editor" class="red-ui-button red-ui-button-small" style="float:right"><i class="fa fa-expand"></i></button>
    </div>
    <div class="form-row node-text-editor-row">
        <div style="height:250px; min-height:100px" class="node-text-editor" id="node-input-format-editor" ></div>
    </div>
    <div id="template-pass-store">
        <div class="form-row" style="margin-bottom:0px;">
            <input type="checkbox" id="node-input-fwdInMessages" style="display:inline-block; margin-left:8px; width:auto; vertical-align:top;">
            <label for="node-input-fwdInMessages" style="width:70%;"> <span data-i18n="ui_template.label.pass-through"></span></label>
        </div>
        <div class="form-row" style="margin-bottom:0px;">
            <input type="checkbox" id="node-input-storeOutMessages" style="display:inline-block; margin-left:8px; width:auto; vertical-align:top;">
            <label for="node-input-storeOutMessages" style="width:70%;"> <span data-i18n="ui_template.label.store-state"></span></label>
        </div>
        <div class="form-row" style="margin-bottom:0px;">
            <input type="checkbox" id="node-input-resendOnRefresh" style="display:inline-block; margin-left:8px; width:auto; vertical-align:top;">
            <label for="node-input-resendOnRefresh" style="width:70%;"> <span data-i18n="ui_template.label.resend"></span></label>
        </div>
    </div>
</script>
<script type="text/html" data-help-name="ui_template">
    <p>The template widget can contain any valid html and Angular/Angular-Material directives.</p>
    <p>This node can be used to create a dynamic user interface element that changes its appearance
    based on the input message and can send back messages to Node-RED.</p>
    <p><b>For example:</b><br>
    <pre style="font-size:smaller;">&lt;div layout=&quot;row&quot; layout-align=&quot;space-between&quot;&gt;
  &lt;p&gt;The number is&lt;/p&gt;
  &lt;font color=&quot;{{((msg.payload || 0) % 2 === 0) ? 'green' : 'red'}}&quot;&gt;
    {{(msg.payload || 0) % 2 === 0 ? 'even' : 'odd'}}
  &lt;/font&gt;
&lt;/div&gt;</pre>
    Will display if the number received as <code>msg.payload</code> is even or odd. It will also
    change the color of the text to green if the number is even or red if odd.<br/>
    The next example shows how to set a unique id for your template, pick up the default theme colour,
    and watch for any incoming message.</p>
    <pre style="font-size:smaller;">
&lt;div id="{{'my_'+$id}}" style="{{'color:'+theme.base_color}}"&gt;Some text&lt;/div&gt;
&lt;script&gt;
(function(scope) {
  scope.$watch('msg', function(msg) {
    if (msg) {
      // Do something when msg arrives
      $("#my_"+scope.$id).html(msg.payload);
    }
  });
})(scope);
&lt;/script&gt;</pre>
    <p>Templates made in this way can be copied and remain independent of each other.</p>
    <p><b>Sending a message:</b><br>
    <pre style="font-size:smaller;">
&lt;script&gt;
var value = "hello world";
// or overwrite value in your callback function ...
this.scope.action = function() { return value; }
&lt;/script&gt;
&lt;md-button ng-click=&quot;send({payload:action()})&quot;&gt;
    Click me to send a hello world
&lt;/md-button&gt;</pre>
    Will display a button that when clicked will send a message with the payload <code>'Hello world'</code>.</p>
    <p><b>Using <code>msg.template</code>:</b><br>
    You can also define the template content via <code>msg.template</code>, so you can use external files for example.<br>
    Template will be reloaded on input if it has changed.<br>
    Code written in the Template field will be ignored when <code>msg.template</code> is present.</p>
    <p>The following icon fonts are available: <a href="https://klarsys.github.io/angular-material-icons/" target="_blank">Material Design icon</a>
    <i>(e.g. 'check', 'close')</i> or a <a href="https://fontawesome.com/v4.7.0/icons/" target="_blank">Font Awesome icon</a>
    <i>(e.g. 'fa-fire')</i>, or a <a href="https://github.com/Paul-Reed/weather-icons-lite/blob/master/css_mappings.md">Weather icon</a>.
    You can use the full set of Google material icons if you add 'mi-' to the icon name. e.g. 'mi-videogame_asset'.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_link] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_link',{
        category: 'config',
        color: 'rgb( 63, 173, 181)',
        defaults: {
            name: {value: 'Google'},
            link: {value: 'https://www.google.com'},
            icon: {value: 'open_in_browser'},
            target: {value: 'newtab', validate :function() { return true; }},
            order: {value: 0},
            className: {value: ''}
        },
        inputs:0,
        outputs:0,
        hasUsers: false,
        align: "right",
        icon: "ui_link.png",
        paletteLabel: 'link',
        label: function() { return this.name || 'link'; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            document.getElementById('node-config-input-target-opentab').checked = (this.target === 'newtab');
            document.getElementById('node-config-input-target-openiframe').checked = (this.target === 'iframe');
            document.getElementById('node-config-input-target-openthis').checked = (this.target === 'thistab');
        },
        oneditsave : function () {
            var t = 'iframe';
            if (document.getElementById('node-config-input-target-opentab').checked) { t = 'newtab'; }
            if (document.getElementById('node-config-input-target-openthis').checked) { t = 'thistab'; }
            this.target = t;
        },
        onadd: function() {
            //console.log("PING");
        }
    });
</script>

<script type="text/html" data-template-name="ui_link">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="ui_link.label.name"></span></label>
        <input type="text" id="node-config-input-name">
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  <span data-i18n="ui_link.label.className"></label>
        <input type="text" id="node-input-className" data-i18n="[placeholder]ui_link.label.classNamePlaceholder"/>
    </div>
    <div class="form-row">
        <label for="node-config-input-link"><i class="fa fa-link"></i> <span data-i18n="ui_link.label.link"></span></label>
        <input type="text" id="node-config-input-link">
    </div>
    <div class="form-row">
        <label for="node-config-input-icon"><i class="fa fa-image"></i> <span data-i18n="ui_link.label.icon"></span></label>
        <input type="text" id="node-config-input-icon">
    </div>
    <div class="form-row">
        <label><i class="fa fa-link"></i> <span data-i18n="ui_link.label.open-in"></span></label>
        <input type="radio" id="node-config-input-target-opentab" name="open-link-method" style="width:20px; margin-top:0px; margin-bottom:5px" checked>
        <label for="node-config-input-target-opentab" data-i18n="ui_link.label.new-tab"></label><br/>
        <input type="radio" id="node-config-input-target-openthis" name="open-link-method" style="width:20px; margin-left:104px; margin-top:0px; margin-bottom:5px">
        <label for="node-config-input-target-openthis" data-i18n="ui_link.label.this-tab"></label><br/>
        <input type="radio" id="node-config-input-target-openiframe" name="open-link-method" style="width:20px; margin-left:104px; margin-top:0px; margin-bottom:5px">
        <label for="node-config-input-target-openiframe" data-i18n="ui_link.label.iframe"></label>
    </div>
    <div class="form-tips" data-i18n="[html]ui_link.tip"></div>
</script>
<script type="text/html" data-help-name="ui_link">
    <p>The <b>Icon</b> can be defined, as either a <a href="https://klarsys.github.io/angular-material-icons/" target="_blank">Material Design icon</a>
    <i>(e.g. 'check', 'close')</i> or a <a href="https://fontawesome.com/v4.7.0/icons/" target="_blank">Font Awesome icon</a>
    <i>(e.g. 'fa-fire')</i>, or a <a href="https://github.com/Paul-Reed/weather-icons-lite/blob/master/css_mappings.md">Weather icon</a>.
    You can use the full set of google material icons if you add 'mi-' to the icon name. e.g. 'mi-videogame_asset'.</p>
    <p>The <b>Open in</b> field controls whether the link opens in a <i>New Tab</i>, or if the link is opened within an <i>iframe</i> on the same page. Some sites, including Google, do not allow the rendering of their page inside an iframe. If you select the <i>iframe</i> option and the site does not show, this is simply because that site forbids the use of it inside an iframe.</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_tab] --- -->
<script type="text/javascript">
    // convert to i18 text
    function c_ui_tab(x) {
        return RED._("node-red-dashboard/ui_tab:ui_tab."+x);
    }

    RED.nodes.registerType('ui_tab',{
        category: 'config',
        defaults: {
            name: {value: c_ui_tab("label.home")},
            icon: {value: 'dashboard'},
            order: {value: 0},
            disabled: {value: false},
            hidden: {value: false}
        },
        paletteLabel: 'dashboard tab',
        label: function() { return this.name || c_ui_tab("label.tab"); },
        sort: function(A,B) {
            return A.order - B.order;
        },
        oneditprepare: function() {
            $("#node-config-input-disabled-btn").on("click", function(e) {
                var i = $(this).find("i");
                var active = i.hasClass("fa-toggle-on");
                var newCls = "fa fa-toggle-" + (active ? "off" : "on");
                i.attr("class", newCls);
                $("#node-config-input-disabled").prop('checked',active);

                var newTxt = c_ui_tab(active ? "label.disabled" : "label.enabled");
                $("#node-config-input-disabled-label").text(newTxt);

                var info = $("#node-config-input-disabled-info");
                var done = active ? info.show() : info.hide();
            });
            if (this.disabled) {
                $("#node-config-input-disabled-btn").click();
            }
            else {
                $("#node-config-input-disabled-label").text(c_ui_tab("label.enabled"));
            }

            $("#node-config-input-hidden-btn").on("click", function(e) {
                var i = $(this).find("i");
                var active = i.hasClass("fa-toggle-on");
                var newCls = "fa fa-toggle-" + (active ? "off" : "on");
                i.attr("class", newCls);
                $("#node-config-input-hidden").prop('checked',active);

                var newTxt = c_ui_tab(active ? "label.hidden" : "label.visible");
                $("#node-config-input-hidden-label").text(newTxt);

                var info = $("#node-config-input-hidden-info");
                var done = active ? info.show() : info.hide();
            });
            if (this.hidden) {
                $("#node-config-input-hidden-btn").click();
            }
            else {
                $("#node-config-input-hidden-label").text(c_ui_tab("label.visible"));
            }
        },
        oneditsave: function() {
            this.disabled = $("#node-config-input-disabled").prop("checked");
            this.hidden = $("#node-config-input-hidden").prop("checked");
        }
    });
</script>

<script type="text/html" data-template-name="ui_tab">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="ui_tab.label.name"></span></label>
        <input type="text" id="node-config-input-name">
    </div>
    <div class="form-row">
        <label for="node-config-input-icon"><i class="fa fa-file-image-o"></i> <span data-i18n="ui_tab.label.icon"></span></label>
        <input type="text" id="node-config-input-icon">
    </div>
    <div class="form-row">
        <label for="node-config-input-disabled-btn"><i class="fa fa-ban"></i> <span data-i18n="ui_tab.label.state"></span></label>
        <button id="node-config-input-disabled-btn" class="editor-button" style="width:100px; margin-right:6px;"><i class="fa fa-toggle-on"></i> <span id="node-config-input-disabled-label"></span></button>
        <input type="checkbox" id="node-config-input-disabled" style="display:none;"/>
        <span id="node-config-input-disabled-info" data-i18n="[html]ui_tab.info.disabled" style="display:none;"></span>
    </div>
    <div class="form-row">
        <label for="node-config-input-hidden-btn"><i class="fa fa-eye-slash"></i> <span data-i18n="ui_tab.label.navmenu"></span></label>
        <button id="node-config-input-hidden-btn" class="editor-button" style="width:100px; margin-right:6px;"><i class="fa fa-toggle-on"></i> <span id="node-config-input-hidden-label"></span></button>
        <input type="checkbox" id="node-config-input-hidden" style="display:none;"/>
        <span id="node-config-input-hidden-info" data-i18n="[html]ui_tab.info.hidden" style="display:none;"></span>
    </div>
    <div class="form-tips" data-i18n="[html]ui_tab.tip"></div>
</script>
<script type="text/html" data-help-name="ui_tab">
    <p>Tab configuration for Dashboard</p>
    <p><b>Disabled</b> pages are not included in the Dashboard app, and are therefore not functional.
       The tab name still appears in the Navigation Menu (unless it is also hidden).
    </p>
    <p><b>Hidden</b> pages are not listed in the Left-hand Navigation Menu.
       However, they are still active in the Dashboard, and can be shown by using a `ui_control` msg.
    </p>
    <p>The <b>Icon</b> field can be either a <a href="https://klarsys.github.io/angular-material-icons/" target="_blank">Material Design icon</a>
    <i>(e.g. 'check', 'close')</i> or a <a href="https://fontawesome.com/v4.7.0/icons/" target="_blank">Font Awesome icon</a>
    <i>(e.g. 'fa-fire')</i>, or a <a href="https://github.com/Paul-Reed/weather-icons-lite/blob/master/css_mappings.md">Weather icon</a>.
    You can use the full set of google material icons if you add 'mi-' to the icon name. e.g. 'mi-videogame_asset'.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_group] --- -->
<script type="text/javascript">
    // convert to i18 text
    function c_ui_group(x) {
        return RED._("node-red-dashboard/ui_group:ui_group."+x);
    }

    RED.nodes.registerType('ui_group',{
        category: 'config',
        defaults: {
            name: {value: c_ui_group("label.default")},
            tab: {type:"ui_tab", required: true },
            order: {value: 0},
            disp: {value: true},
            width: {value: 6},
            collapse: {value: false},
            disabled: {value: false},
            hidden: {value: false},
            className: {value: ''},
        },
        sort: function(A,B) {
            if (A.tab !== B.tab) {
                var tabA = RED.nodes.node(A.tab);
                var tabB = RED.nodes.node(B.tab);
                if (!tabA && tabB) {
                    return -1;
                }
                else if (tabA && !tabB) {
                    return 1;
                }
                else {
                    return tabA.order - tabB.order;
                }
            }
            return A.order - B.order;
        },
        paletteLabel: 'dashboard group',
        label: function() {
            var tabNode = RED.nodes.node(this.tab);
            if (tabNode) {
                return "["+(tabNode.name||c_ui_group("label.tab"))+"] " + (this.name || c_ui_group("label.group"));
            }
            return "["+c_ui_group("label.unassigned")+"] " + (this.name || c_ui_group("label.group"));
        },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-config-input-width",
                auto: false
            });
            $("#node-config-input-disp").on("change", function() {
                if ($("#node-config-input-disp").is(":checked")) {
                    $("#group-collapse-flag").show();
                }
                else {
                    $("#group-collapse-flag").hide();
                    $("#node-config-input-collapse").prop("checked",false);
                }
            });
        }
    });
</script>

<script type="text/html" data-template-name="ui_group">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="ui_group.label.name"></span></label>
        <input type="text" id="node-config-input-name">
    </div>
    <div class="form-row">
        <label for="node-config-input-tab"><i class="fa fa-table"></i> <span data-i18n="ui_group.label.tab"></span></label>
        <input type="text" id="node-config-input-tab">
    </div>
    <div class="form-row">
        <label for="node-config-input-className"><i class="fa fa-code"></i>  <span data-i18n="ui_group.label.className"></label>
        <input type="text" id="node-config-input-className" data-i18n="[placeholder]ui_group.label.classNamePlaceholder"/>
    </div>
    <div class="form-row">
        <label for="node-config-input-width"><i class="fa fa-arrows-h"></i> <span data-i18n="ui_group.label.width"></span></label>
        <input type="hidden" id="node-config-input-width">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <input style="margin:8px 0 10px 102px; width:20px;" type="checkbox" checked id="node-config-input-disp"> <label style="width:auto" for="node-config-input-disp"><span data-i18n="ui_group.display-name"></span></label>
    </div>
    <div class="form-row" id="group-collapse-flag">
        <input style="margin:8px 0 10px 102px; width:20px;" type="checkbox" id="node-config-input-collapse"> <label style="width:auto" for="node-config-input-collapse"><span data-i18n="ui_group.collapse-name"></span></label>
    </div>
</script>
<script type="text/html" data-help-name="ui_group">
    <p>Group</p>
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-dashboard/ui_spacer] --- -->
<script type="text/javascript">
    RED.nodes.registerType('ui_spacer', {
        category: 'config',
        color: '#D4F0F8',
        defaults: {
            name: {value: "spacer"},
            group: {type: 'ui_group', required:true},
            order: {value: 0},
            width: {value: 0, validate: function(v) {
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()||this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    var valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }
            },
            height: {value: 0},
            className: {value: ''}
        },
        z: RED.workspaces.active(),
        inputs:0,
        outputs:0,
        hasUsers: false,
        icon: "ui_spacer.png",
        paletteLabel: 'spacer',
        label: function() { return this.name + " " + this.width + "x" + this.height; },
        labelStyle: function() { return this.name?"node_label_italic":""; },
        oneditprepare: function() {
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });
        },
        oneditsave: function() {
            this.width = $("#node-input-width").val();
            this.height = $("#node-input-height").val();
        }
    });
</script>

<script type="text/html" data-template-name="ui_spacer">
    <div class="form-row">
        <label for="node-input-group"><i class="fa fa-table"></i> Group</label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row">
        <label><i class="fa fa-object-group"></i> Size</label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>
    <div class="form-row">
        <label for="node-input-className"><i class="fa fa-code"></i>  Class</label>
        <input type="text" id="node-input-className" placeholder="Optional CSS class name(s) for widget"/>
    </div>
</script>
<script type="text/html" data-help-name="ui_spacer">
    <p>If a <b>Class</b> is specified, it will be added to the parent card. This way you can style the card and the elements inside it with custom CSS. The Class can be set at runtime by setting a <code>msg.className</code> string property.</p>
</script>

</div><div><!-- --- [red-module:node-red-node-email/email] --- -->
<script type="text/html" data-template-name="e-mail">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-envelope"></i> <span data-i18n="email.label.to"></span></label>
        <input type="text" id="node-input-name" placeholder="email@address.com">
    </div>
    <!-- <div class="form-row">
        <label for="node-input-pin"><i class="fa fa-asterisk"></i> Service</label>
        <select type="text" id="node-input-pin" style="width: 150px;">
            <option value="-" disabled> </option>
            <option value="DynectEmail">DynectEmail</option>
            <option value="Gmail">Gmail</option>
            <option value="hot.ee">hot.ee</option>
            <option value="Hotmail">Hotmail</option>
            <option value="iCloud">iCloud</option>
            <option value="mail.ee">mail.ee</option>
            <option value="Mail.Ru">Mail.Ru</option>
            <option value="Mailgun">Mailgun</option>
            <option value="Mailjet">Mailjet</option>
            <option value="Mandrill">Mandrill</option>
            <option value="Postmark">Postmark</option>
            <option value="QQ">QQ</option>
            <option value="QQex">QQex</option>
            <option value="SendGrid">SendGrid</option>
            <option value="SendCloud">SendCloud</option>
            <option value="SES">SES</option>
            <option value="Yahoo">Yahoo</option>
            <option value="yandex">yandex</option>
            <option value="Zoho">Zoho</option>
         </select>
    </div> -->
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-globe"></i> <span data-i18n="email.label.server"></span></label>
        <input type="text" id="node-input-server" placeholder="smtp.gmail.com">
    </div>
    <div class="form-row">
        <label for="node-input-port"><i class="fa fa-random"></i> <span data-i18n="email.label.port"></span></label>
        <input type="text" id="node-input-port" placeholder="465" style="width:100px">
        <label style="width:40px"> </label>
        <input type="checkbox" id="node-input-secure" style="display:inline-block; width:20px; vertical-align:baseline;">
        <span data-i18n="email.label.useSecureConnection"></span>
    </div>
    <div class="form-row">
        <label for="node-input-userid"><i class="fa fa-user"></i> <span data-i18n="email.label.userid"></span></label>
        <input type="text" id="node-input-userid">
    </div>
    <div class="form-row">
        <label for="node-input-password"><i class="fa fa-lock"></i> <span data-i18n="email.label.password"></span></label>
        <input type="password" id="node-input-password">
    </div>
    <br/>
    <div class="form-row">
        <label for="node-input-useTLS"><i class="fa fa-lock"></i> <span data-i18n="email.label.useTLS"></label>
        <input type="checkbox" id="node-input-tls" style="display:inline-block; width:20px; vertical-align:baseline;">
        <span data-i18n="email.label.rejectUnauthorised"></span>
    </div>
    <div class="form-row">
        <label for="node-input-dname"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-dname" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-tips" id="node-tip"><span data-i18n="[html]email.tip.cred"></span></div>
</script>

<script type="text/javascript">
(function() {
    RED.nodes.registerType('e-mail',{
        category: 'social-output',
        color:"#c7e9c0",
        defaults: {
            server: {value:"smtp.gmail.com",required:true},
            port: {value:"465",required:true},
            secure: {value: true},
            tls: {value: true},
            name: {value:""},
            dname: {value:""}
        },
        credentials: {
            userid: {type:"text"},
            password: {type: "password"},
            global: { type:"boolean"}
        },
        inputs:1,
        outputs:0,
        icon: "envelope.png",
        align: "right",
        paletteLabel: function() {
            return this._("email.email");
        },
        label: function() {
            return this.dname||this.name||this._("email.email");
        },
        labelStyle: function() {
            return (this.dname)?"node_label_italic":"";
        },
        oneditprepare: function() {
            if (this.credentials.global) {
                $('#node-tip').show();
            } else {
                $('#node-tip').hide();
            }
        }
    });
})();
</script>


<script type="text/html" data-template-name="e-mail in">
    <div class="form-row">
        <label for="node-input-fetch"><i class="fa fa-hourglass-half"></i> <span data-i18n="email.label.getmail"></span></label>
        <select type="text" id="node-input-fetch" style="width:130px;">
            <option value="auto" data-i18n="email.label.auto"></option>
            <option value="trigger" data-i18n="email.label.trigger"></option>
        </select>
        <span id="node-repeatTime">
            <span style="margin-left:20px;" data-i18n="email.label.repeat"></span>
            <input type="text" id="node-input-repeat" style="width:80px"> <span data-i18n="email.label.seconds">seconds</span>
        </span>
    </div>
    <div class="form-row">
        <label for="node-input-protocol"><i class="fa fa-envelope"></i> <span data-i18n="email.label.protocol"></span></label>
        <select type="text" id="node-input-protocol">
            <option value="IMAP">IMAP</option>
            <option value="POP3">POP3</option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-useSSL"><i class="fa fa-lock"></i> <span data-i18n="email.label.useSSL"></span></label>
        <input type="checkbox" id="node-input-useSSL" style="width: auto;">
    </div>
    <div class="form-row">
        <label for="node-input-autotls"><i class="fa fa-lock"></i> <span data-i18n="email.label.autotls"></label>
        <select type="text" id="node-input-autotls" style="width: 150px;">
            <option value="never" data-i18n="email.label.never"></option>
            <option value="required" data-i18n="email.label.required"></option>
            <option value="always" data-i18n="email.label.always"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-globe"></i> <span data-i18n="email.label.server"></span></label>
        <input type="text" id="node-input-server" placeholder="imap.gmail.com">
    </div>
    <div class="form-row">
        <label for="node-input-port"><i class="fa fa-random"></i> <span data-i18n="email.label.port"></span></label>
        <input type="text" id="node-input-port" placeholder="993">
    </div>
    <div class="form-row">
        <label for="node-input-userid"><i class="fa fa-user"></i> <span data-i18n="email.label.userid"></span></label>
        <input type="text" id="node-input-userid">
    </div>
    <div class="form-row">
        <label for="node-input-password"><i class="fa fa-lock"></i> <span data-i18n="email.label.password"></span></label>
        <input type="password" id="node-input-password">
    </div>
    <div class="form-row node-input-box">
        <label for="node-input-box"><i class="fa fa-inbox"></i> <span data-i18n="email.label.folder"></span></label>
        <input type="text" id="node-input-box">
    </div>
    <div class="form-row node-input-disposition">
            <label for="node-input-disposition"><i class="fa fa-trash"></i> <span data-i18n="email.label.disposition"></span></label>
        <select type="text" id="node-input-disposition">
            <option value="None" selected="selected" data-i18n="email.label.none"></option>
            <option value="Read" data-i18n="email.label.read"></option>
            <option value="Delete" data-i18n="email.label.delete"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-criteria"><i class="fa fa-search"></i> <span data-i18n="email.label.criteria"></span></label>
        <select type="text" id="node-input-criteria">
            <option value="ALL" data-i18n="email.label.all"></option>
            <option value="ANSWERED" data-i18n="email.label.answered"></option>
            <option value="FLAGGED" data-i18n="email.label.flagged"></option>
            <option value="SEEN" data-i18n="email.label.seen"></option>
            <option value="UNANSWERED" data-i18n="email.label.unanswered"></option>
            <option value="UNFLAGGED" data-i18n="email.label.unflagged"></option>
            <option value="UNSEEN" selected="selected" data-i18n="email.label.unseen"></option>
            <option value="_msg_" data-i18n="email.label.criteriaFromMsg"></option>
            <!--
            <option value="DELETED" data-i18n="email.label.delete"></option>
            <option value="DRAFT" data-i18n="email.label.none"></option>
            <option value="NEW" data-i18n="email.label.delete"></option>
            <option value="UNDELETED" data-i18n="email.label.read"></option>
            <option value="UNDRAFT" data-i18n="email.label.delete"></option>
            <option value="RECENT" data-i18n="email.label.read"></option>
            <option value="OLD" data-i18n="email.label.delete"></option>
            -->
        </select>
    </div>
    <br/>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <script>
        var checkPorts = function() {
            var currentPort = $("#node-input-port").val();
            if (currentPort === "143" || currentPort === "993" || currentPort === "110" || currentPort == "995") {
                if ($("#node-input-useSSL").prop("checked") === true) {
                    $("#node-input-port").val($("#node-input-protocol").val() === "IMAP"?"993":"995");
                } else {
                    $("#node-input-port").val($("#node-input-protocol").val() === "IMAP"?"143":"110");
                }
            }
        };

        $("#node-input-useSSL").change(function(x, y) {
          // console.log("useSSL: x="+ JSON.stringify(x) + ", y=" + y);
          // console.log("Value: " + $("#node-input-useSSL").prop("checked"));
          checkPorts();
        });

        $("#node-input-protocol").change(function() {
            var protocol = $("#node-input-protocol").val();
            if (protocol === "IMAP") {
                $(".node-input-autotls").show();
                $(".node-input-box").show();
                $(".node-input-disposition").show();
                $(".node-input-criteria").show();
            } else {
                $(".node-input-autotls").hide();
                $(".node-input-box").hide();
                $(".node-input-disposition").hide();
                $(".node-input-criteria").hide();
            }
            checkPorts();
        });
    </script>


<script type="text/javascript">
(function() {
    RED.nodes.registerType('e-mail in',{
        category: 'social-input',
        color:"#c7e9c0",
        defaults: {
            name: {value:""},
            protocol: {value: "IMAP", required:true}, // Which protocol to use to connect to the mail server ("IMAP" or "POP3")
            server: {value:"imap.gmail.com",required:true},
            useSSL: {value: true},
            autotls: {value: "never"},
            port: {value:"993",required:true},
            box: {value:"INBOX"}, // For IMAP, The mailbox to process
            disposition: { value: "Read" }, // For IMAP, the disposition of the read email
	        criteria: {value: "UNSEEN"},
            repeat: {value:"300",required:true},
            fetch: {value:"auto"},
            inputs: {value:0}
        },
        credentials: {
            userid: {type:"text"},
            password: {type: "password"},
            global: { type:"boolean"}
        },
        inputs: 0,
        outputs: 1,
        icon: "envelope.png",
        paletteLabel: function() {
            return this._("email.email");
        },
        label: function() {
            return this.name||this._("email.email");
        },
        labelStyle: function() {
            return (this.name)?"node_label_italic":"";
        },
        oneditprepare: function() {
            var that = this;
            if (this.credentials.global) {
                $('#node-tip').show();
            } else {
                $('#node-tip').hide();
            }
            if (typeof this.box === 'undefined') {
                $("#node-input-box").val("INBOX");
                this.box = "INBOX";
            }
            if (typeof this.criteria === 'undefined') {
                $("#node-input-criteria").val("UNSEEN");
                this.criteria = "UNSEEN";
            }
            if (typeof this.autotls === 'undefined') {
                $("#node-input-autotls").val("never");
                this.autotls = "never";
            }
            if ($("#node-input-fetch").val() === null) { $("#node-input-fetch").val("auto"); }
            $("#node-input-fetch").change(function() {
                if ($("#node-input-fetch").val() === "trigger") {
                    $('#node-repeatTime').hide();
                    that.inputs = 1;
                }
                else  {
                    $('#node-repeatTime').show();
                    that.inputs = 0;
                }
            });
            $("#node-input-criteria").change(function() {
                if ($("#node-input-criteria").val() === "_msg_") {
                    $("#node-input-fetch").val("trigger");
                    $("#node-input-fetch").change();
                }
            });
        }
    });
})();
</script>


<script type="text/html" data-template-name="e-mail mta">
    <div class="form-row">
        <label for="node-input-port"><i class="fa fa-random"></i> <span data-i18n="email.label.port"></span></label>
        <input type="text" id="node-input-port" style="width:70%;"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-tips" id="node-tip"><span data-i18n="[html]email.tip.mta"></span></div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('e-mail mta',{
        category: 'social',
        color:"#c7e9c0",
        defaults: {
            name: {value:""},
            port: {value:"1025",required:true},
        },
        inputs:0,
        outputs:1,
        icon: "envelope.png",
        paletteLabel: function() { return this._("email.email") + " MTA" },
        label: function() {
            return this.name||this._("email.email") + " MTA";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>
<script type="text/html" data-help-name="e-mail">
    <p>Sends the <code>msg.payload</code> as an email, with a subject of <code>msg.topic</code>.</p>
    <p>The default message recipient can be configured in the node, if it is left
    blank it should be set using the <code>msg.to</code> property of the incoming message. If left blank
    you can also specify any or all of: <code>msg.cc</code>, <code>msg.bcc</code>, <code>msg.replyTo</code>,
    <code>msg.inReplyTo</code>, <code>msg.references</code>, <code>msg.headers</code>, or <code>msg.priority</code> properties.</p>
    <p>You may optionally set <code>msg.from</code> in the payload which will override the <code>userid</code>
    default value.</p>
    <h3>Gmail users</h3>
    <p>If you are accessing Gmail you may need to either enable <a target="_new" href="https://support.google.com/mail/answer/185833?hl=en">an application password</a>,
    or enable <a target="_new" href="https://support.google.com/accounts/answer/6010255?hl=en">less secure access</a> via your Google account settings.</p>
    <h3>Details</h3>
    <p>The payload can be html format. You may supply a separate plaintext version using <code>msg.plaintext</code>.
    If you don't and <code>msg.payload</code> contains html, it will also be used for the plaintext.
    <code>msg.plaintext</code> will be ignored if <code>msg.payload</code> doesn't contain html.</p>
    <p>If the payload is a binary buffer then it will be converted to an attachment.
    The filename should be set using <code>msg.filename</code>. Optionally <code>msg.description</code> can be added for the body text.</p>
    <p>Alternatively you may provide <code>msg.attachments</code> which should contain an array of one or
    more attachments in <a href="https://nodemailer.com/message/attachments/" target="_new">nodemailer</a> format.</p>
    <p>If required by your recipient you may also pass in a <code>msg.envelope</code> object, typically containing extra from and to properties.</p>
    <p>If you have own signed certificates, Nodemailer can complain about that and refuse sending the message. In this case you can try switching off TLS.</p>
    <p><b>Note</b>: uses SMTP with SSL to port 465.</p>
    <h3>Use secure connection</h3>
    <p>If enabled the connection will use TLS when connecting to server. If disabled then TLS is used if server supports the STARTTLS extension. In most cases set this to enabled if you are connecting to port 465. For port 587 or 25 keep it disabled.</p>

</script>

<script type="text/html" data-help-name="e-mail in">
    <p>Repeatedly gets emails from a POP3 or IMAP server and forwards on as a msg if not already seen.</p>
    <p>The subject is loaded into <code>msg.topic</code> and <code>msg.payload</code> is the plain text body.
       If there is text/html then that is returned in <code>msg.html</code>. <code>msg.from</code> and <code>msg.date</code> are also set if you need them.</p>
    <p>Additionally <code>msg.header</code> contains the complete header object including
    <i>to</i>, <i>cc</i> and other potentially useful properties.</p>
    <p>It can optionally mark the message as Read (default), Delete it, or leave unmarked (None).</p>
    <p>Uses the <a href="https://github.com/mscdex/node-imap/blob/master/README.md" target="_new">node-imap module</a> - see that page for
        information on the <code>msg.criteria</code> format if needed.</p>
    <p>Any attachments supplied in the incoming email can be found in the <code>msg.attachments</code> property. This will be an array of objects where
    each object represents a specific attachments.  The format of the object is:</p>
<pre>
{
  contentType:        // The MIME content description
  fileName:           // A suggested file name associated with this attachment
  transferEncoding:   // How was the original email attachment encodded?
  contentDisposition: // Unknown
  generatedFileName:  // A suggested file name associated with this attachment
  contentId:          // A unique generated ID for this attachment
  checksum:           // A checksum against the data
  length:             // Size of data in bytes
  content:            // The actual content of the data contained in a Node.js Buffer object
                      // We can turn this into a base64 data string with content.toString('base64')
}
</pre>
<p><b>Note</b>: For POP3, the default port numbers are 110 for plain TCP and 995 for SSL.  For IMAP the port numbers are 143 for plain TCP and 993 for SSL.</p>
<p><b>Note</b>: With option 'STARTTLS' an established plain connection is upgraded to an encrypted one. Set to 'always' to always attempt connection upgrades via STARTTLS, 'required' only if upgrading is required, or 'never' to never attempt upgrading.</p>
<p><b>Note</b>: The maximum refresh interval is 2147483 seconds (24.8 days).</p>

</script>

<script type="text/html" data-help-name="e-mail mta">
    <p>Mail Transfer Agent - listens on a port for incoming SMTP mails.</p>
    <p><b>Note</b>: "NOT for production use" as there is no security built in.
    This is primarily for local testing of outbound mail sending, but could be used
    as a mail forwarder to a real email service if required.</p>
    <p>To use ports below 1024, for example 25 or 465, you may need to get privileged access.
    On linux systems this can be done by running
    <pre>sudo setcap 'cap_net_bind_service=+eip' $(which node)</pre>
    and restarting Node-RED. Be aware - this gives all node applications access to all ports.</p>
</script>

</div><div><!-- --- [red-module:node-red-node-exif/exif] --- -->

<script type="text/html" data-template-name="exif">
    <div class="form-row">
        <label for="node-input-mode"><i class="fa fa-dot-circle-o"></i><span data-i18n="exif.label.mode"></span></label>
        <select style="width:70%" id="node-input-mode">
            <option value="normal">Standard node</option>
            <option value="worldmap">Use with Worldmap-in node</option>
        </select>
    </div>
    <div class="form-row" id="node-exif-prop-select">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="node-red:common.label.property"></span></label>
        <input type="text" id="node-input-property" style="width:70%;"/>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i><span data-i18n="node-red:common.label.name"></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('exif',{
        category: 'utility',
        color:"#f1c2f0",
        defaults: {
            name: {value:""},
            mode: {value:"normal"},
            property: {value:"payload",required:true}
        },
        inputs:1,
        outputs:1,
        icon: "watch.png",
        label: function() {
            return this.name||"exif";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            if (this.property === undefined) { $("#node-input-property").val("payload"); }
            $("#node-input-property").typedInput({default:'msg',types:['msg']});

            $("#node-input-mode").change(function() {
                if ($("#node-input-mode").val() === "worldmap") {
                    $("#node-exif-prop-select").hide();
                }
                else { $("#node-exif-prop-select").show(); }
            });
        }
    });
</script>

<script type="text/html" data-help-name="exif">
    <p>Extract <a href="http://en.wikipedia.org/wiki/Exchangeable_image_file_format">Exif</a> information from JPEG images.</p>
    <p>This node expects an incoming JPEG image buffer in the selected property. If Exif data is present,
    it extracts the data into the <code>msg.exif</code> object.</p>
    <p>The node then adds location data as <code>msg.location</code>, should the Exif data carry this information.
    This also includes an icon, bearing and field of view arc suitable for use in the worldmap node.
    The selected input property retains the original, unmodified image buffer.</p>
    <p>If configured to use the worldmap in node then the existing image payload will be replaced by the location
    object so that it can be fed back to the map directly.</p>
</script>

</div><div><!-- --- [red-module:node-red-node-mongodb/mongo] --- -->

<script type="text/html" data-template-name="mongodb">
    <div class="form-row">
        <label for="node-config-input-hostname"><i class="fa fa-bookmark"></i><span data-i18n="mongodb.label.host"></span></label>
        <input class="input-append-left" type="text" id="node-config-input-hostname" placeholder="localhost">
    </div>

    <div class="form-row node-config-input-topology">
      <label for="node-config-input-topology"><span data-i18n="mongodb.label.topology"></span></label>
          <select id="node-config-input-topology">
            <option type="button" class="red-ui-button toggle topology-group" selected  value="direct">Direct (mongodb://)</button>
            <option type="button" class="red-ui-button toggle topology-group" value="replicaset">RelicaSet/Cluster (mongodb://)</button>
            <option type="button" class="red-ui-button toggle topology-group" value="dnscluster">DNS Cluster (mongodb+srv://)</button>
          </select>
    </div>

    <div class="form-row node-config-connectOptions">
        <label for="node-config-input-connectOptions"><i class="fa fa-wrench"></i><span data-i18n="mongodb.label.connectOptions"></span></label>
        <input type="text" id="node-config-input-connectOptions">
    </div>

    <div class="form-row node-config-input-port">
        <label for="node-config-input-port"><i class="fa fa-plug"></i><span data-i18n="mongodb.label.port"></span></label>
        <input type="text" id="node-config-input-port" style="width:55px;">
    </div>

    <div class="form-row">
        <label for="node-config-input-db"><i class="fa fa-database"></i> <span data-i18n="mongodb.label.database"></span></label>
        <input type="text" id="node-config-input-db">
    </div>
    <div class="form-row">
        <label for="node-config-input-user"><i class="fa fa-user"></i> <span data-i18n="mongodb.label.username"></span></label>
        <input type="text" id="node-config-input-user">
    </div>
    <div class="form-row">
        <label for="node-config-input-password"><i class="fa fa-lock"></i> <span data-i18n="mongodb.label.password"></span></label>
        <input type="password" id="node-config-input-password">
    </div>
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-config-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('mongodb', {
        category: 'config',
        color: "rgb(218, 196, 180)",
        defaults: {
            hostname: {value: "127.0.0.1", required: true},
            topology: {value: "direct", required: true},
            connectOptions: {value: "", required: false},
            port: {value: 27017, required: true},
            db: {value: "", required: true},
            name: {value: ""}
        },
        credentials: {
            user: {type: "text"},
            password: {type: "password"}
        },
        label: function() {
            return this.name || this.db + "@" + this.hostname;
        },
        oneditprepare: function() {
          $("#node-config-input-topology").on("change", function() {
            var topology = $("#node-config-input-topology option:selected").val();
            if (topology === "direct") {
              $(".node-config-input-port").show();
            } else {
              $(".node-config-input-port").hide();
            }
          });
        },
    });
</script>



<script type="text/html" data-template-name="mongodb out">
    <div class="form-row">
        <label for="node-input-mongodb"><i class="fa fa-bookmark"></i> <span data-i18n="mongodb.label.server"></span></label>
        <input type="text" id="node-input-mongodb">
    </div>
    <div class="form-row">
        <label for="node-input-collection"><i class="fa fa-briefcase"></i> <span data-i18n="mongodb.label.collection"></span></label>
        <input type="text" id="node-input-collection">
    </div>
    <div class="form-row">
        <label for="node-input-operation"><i class="fa fa-wrench"></i> <span data-i18n="mongodb.label.operation"></span></label>
        <select type="text" id="node-input-operation" style="display: inline-block; vertical-align: top;">
            <option value="store" data-i18n="mongodb.operation.save"></option>
            <option value="insert" data-i18n="mongodb.operation.insert"></option>
            <option value="update" data-i18n="mongodb.operation.update"></option>
            <option value="delete" data-i18n="mongodb.operation.remove"></option>
        </select>
    </div>
    <div class="form-row node-input-payonly">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-payonly" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-payonly" style="width: 70%;"><span data-i18n="mongodb.label.onlystore"></span></label>
    </div>
    <div class="form-row node-input-upsert">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-upsert" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-upsert" style="width: 70%;"><span data-i18n="mongodb.label.createnew"></span></label>
    </div>
    <div class="form-row node-input-multi">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-multi" style="display: inline-block; width: auto; vertical-align: top;;">
        <label for="node-input-multi" style="width: 70%;"><span data-i18n="mongodb.label.updateall"></span></label>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-tips" id="node-warning" style="display: none"><span data-i18n="[html]mongodb.tip"></span></div>
</script>



<script type="text/javascript">
    function oneditprepare() {
        $("#node-input-operation").change(function () {
            var id = $("#node-input-operation option:selected").val();

            if (id === "update") {
                $(".node-input-payonly").hide();
                $(".node-input-upsert, .node-input-multi").show();
            } else if (id === "delete") {
                $(".node-input-payonly, .node-input-upsert, .node-input-multi").hide();
            } else {
                $(".node-input-payonly").show();
                $(".node-input-upsert, .node-input-multi").hide();
            }
        });

        $("#node-input-collection").change(function () {
            if($("#node-input-collection").val() === "") {
                $("#node-warning").show();
            } else {
                $("#node-warning").hide();
            }
        });
    }

    RED.nodes.registerType('mongodb out', {
        category: 'storage-output',
        color: "rgb(218, 196, 180)",
        defaults: {
            mongodb: {type: "mongodb", required: true},
            name: {value: ""},
            collection: {value: ""},
            payonly: {value: false},
            upsert: {value: false},
            multi: {value: false},
            operation: {value: "store"}
        },
        inputs: 1,
        outputs: 0,
        icon: "mongodb.png",
        align: "right",
        label: function() {
            var mongoNode = RED.nodes.node(this.mongodb);
            return this.name || (mongoNode ? mongoNode.label() + " " + this.collection : "mongodb");
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: oneditprepare
    });
</script>


<script type="text/html" data-template-name="mongodb in">
    <div class="form-row">
        <label for="node-input-mongodb"><i class="fa fa-bookmark"></i> <span data-i18n="mongodb.label.server"></span></label>
        <input type="text" id="node-input-mongodb">
    </div>
    <div class="form-row">
        <label for="node-input-collection"><i class="fa fa-briefcase"></i> <span data-i18n="mongodb.label.collection"></span></label>
        <input type="text" id="node-input-collection">
    </div>
    <div class="form-row">
        <label for="node-input-operation"><i class="fa fa-wrench"></i> <span data-i18n="mongodb.label.operation"></span></label>
        <select type="text" id="node-input-operation" style="display: inline-block; vertical-align: top;">
            <option value="find" data-i18n="mongodb.operation.find"></option>
            <option value="count" data-i18n="mongodb.operation.count"></option>
            <option value="aggregate" data-i18n="mongodb.operation.aggregate"></option>
        </select>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-tips" id="node-warning" style="display: none"><span data-i18n="[html]mongodb.tip"></span></div>
</script>



<script type="text/javascript">
    RED.nodes.registerType('mongodb in', {
        category: 'storage-input',
        color: "rgb(218, 196, 180)",
        defaults: {
            mongodb: {type: "mongodb", required: true},
            name: {value: ""},
            collection: {value: ""},
            operation: {value: "find"}
        },
        inputs: 1,
        outputs: 1,
        icon: "mongodb.png",
        label: function() {
            var mongoNode = RED.nodes.node(this.mongodb);
            return this.name || (mongoNode ? mongoNode.label() + " " + this.collection : "mongodb");
        },
        labelStyle: function() {
            return this.name ? "node_label_italic" : "";
        },
        oneditprepare: oneditprepare
    });
</script>
<script type="text/html" data-help-name="mongodb">
    <p>Define a connection method to your MongoDB server instance.</p>
    <p>There are 3 supported options:
        <details><summary>Standard/direct</summary>
            For databases that request connections in the form
            <code>
              mongodb://[username]:[password]@[hostname]:[port]/[dbname]
            </code>
            Most often used for local MongoDB instances (localhost:27017), and other stand-alone instances.
        </details>
        <details><summary>Standard/replicaset</summary>
            For databases that request connections in the form
            <code>
            mongodb://[username]:[password]@[hostnameA]:[port],[hostnameB]:[port]/[dbname]?replicaSet=[replsetname]
            </code>
            Often used with <q>database as a service</q> offerings,
            or on-premises instances that have been configured for availability and resilience
        </details>
        <details><summary>Clustered by DNS seedlist</summary>
            For databases that request connections in the form
            <code>
            mongodb+srv://[username]:[password]@[clustername]/[dbname]?retryWrites=true&w=majority
            </code>
            A configuration of MongoDB instances that provide availability and performance
            through replication and sharding, accessed through a cluster alias name, rather than
            by specific host:port connections. This is the default for MongoDB instances in the
            <a href="https://www.mongodb.com/cloud/atlas" target="_blank">Atlas cloud service</a>.
        </details>
      <p><strong>Connect options</strong> is where you add the optional parameters required by your MongoDB instance.
        This might include:
        <ul><li>w=majority</li><li>replicaSet=replset</li><li>authSource=admin</li></ul> and any other options appropriate -
        full set available at <a href="https://docs.mongodb.com/manual/reference/connection-string/" target="_blank">
        Connection String URI Format  MongoDB Manual</a>.
      <p>If you are connecting to <a href="https://cloud.ibm.com/catalog/services/databases-for-mongodb-group" target="_blank">
        IBM Databases for MongoDB</a>, as a replica-set, be sure to append <code>ssl=true&tlsAllowInvalidCertificates=true </code>
        to the <strong>Connect options</strong>.
</script><script type="text/html" data-help-name="mongodb out">
    <p>A simple MongoDB output node. Can save, insert, update and remove objects from a chosen collection.</p>
    <p>Save will update an existing object or insert a new object if one does not already exist.</p>
    <p>Insert will insert a new object.</p>
    <p>Save and insert either store <code>msg</code> or <code>msg.payload</code>.</p>
    <p>Update will modify an existing object or objects. The query to select objects to update uses <code>msg.query</code>
    and the update to the element uses <code>msg.payload</code>. If <code>msg.query._id</code> is
    a valid mongo ObjectId string it will be converted to an ObjectId type.</p>
    <p>Update can add a object if it does not exist or update multiple objects.</p>
    <p>Remove will remove objects that match the query passed in on <code>msg.payload</code>. A blank query will delete
    <i>all of the objects</i> in the collection.</p>
    <p>You can either set the collection method in the node config or on <code>msg.collection</code>. Setting it in the
    node will override <code>msg.collection</code>.</p>
    <p>By default MongoDB creates an <i>_id</i> property as the primary key - so repeated injections of the
    same <code>msg</code> will result in many database entries.</p>
    <p>If this is NOT the desired behaviour - ie. you want repeated entries to overwrite, then you must set
    the <code>msg._id</code> property to be a constant by the use of a previous function node.</p>
    <p>This could be a unique constant or you could create one based on some other msg property.</p>
    <p>Currently we do not limit or cap the collection size at all... this may well change.</p>
</script><script type="text/html" data-help-name="mongodb in">
    <p>Calls a MongoDB collection method based on the selected operator.</p>
    <p>Find queries a collection using the <code>msg.payload</code> as the query statement as per the .find() function.
    Optionally, you may also (via a function) set a <code>msg.projection</code> object to constrain the returned
    fields, a <code>msg.sort</code> object, a <code>msg.limit</code> number and a <code>msg.skip</code> number.</p>
    <p>Count returns a count of the number of documents in a collection or matching a query using the
    <code>msg.payload</code> as the query statement.</p>
    <p>Aggregate provides access to the aggregation pipeline using the <code>msg.payload</code> as the pipeline array.</p>
    <p>You can either set the collection method in the node config or on <code>msg.collection</code>. Setting it in
    the node will override <code>msg.collection</code>.</p>
    <p>See the <a href="http://docs.mongodb.org/manual/reference/method/db.collection.find/" target="new"><i>MongoDB
    collection methods docs</i></a> for examples.</p>
    <p>The result is returned in <code>msg.payload</code>.</p>
</script>
</div><div><!-- --- [red-module:node-red-node-pi-gpio/rpi-gpio] --- -->
<style>
    .rpi-gpio-pinTable {
        width: 340px;
        display: inline-table;
        font-size: 13px;
        height: 380px;
        min-height: 380px;
        max-height: 380px;
    }
    .rpi-gpio-pinTable input[type="radio"] {
        width: auto;
        margin: 3px 2px;
        vertical-align: top;
    }
    .rpi-gpio-pinTable label {
        width: auto;
        margin: 0;
        display: block;
    }
    .rpi-gpio-pinTable .pinTableBody {
        width: 340px;
        display: table-row-group;
        line-height: 12px;
    }
    .rpi-gpio-pinTable .pinTableRow {
        width: 340px;
        display: table-row;
        height: 20px;
    }
    .rpi-gpio-pinTable .pinTableCellL {
        width: 170px;
        height: 20px;
        display: table-cell;
        text-align: right;
        padding-right: 4px;
        vertical-align: middle;
        border: 1px solid #444;
    }
    .rpi-gpio-pinTable .pinTableCellL label {
        width: 170px;
    }
    .rpi-gpio-pinTable .pinTableCellR {
        width: 170px;
        height: 22px;
        display: table-cell;
        text-align: left;
        padding-left: 4px;
        vertical-align: middle;
        border: 1px solid #000;
    }
    .rpi-gpio-pinTable .pinTableCellR label {
        width: 170px;
    }
    .rpi-gpio-pinTable .pinColorPower {
        background-color:#FECBCE;
    }
    .rpi-gpio-pinTable .pinColorGround {
        background-color:#DDDDDD;
    }
    .rpi-gpio-pinTable .pinColorGPIO {
        background-color:#BFEBBF;
    }
    .rpi-gpio-pinTable .pinColorDual {
        background-color:#D0E6F4;
    }
    .rpi-gpio-pinTable .pinColorSD {
        background-color:#FFFDD0;
    }
</style>
<script type="text/html" data-template-name="rpi-gpio in">

    <div class="form-row" style="min-width: 540px">
		<label><i class="fa fa-circle"></i> <span data-i18n="rpi-gpio.pinname"></span></label>
        <div class="rpi-gpio-pinTable">
            <div class="pinTableBody" id="pinform">
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorPower"><label>3.3V Power - 1 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorPower"><label><input disabled type="radio" name="pins" value=""> 2 - 5V Power</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-3">SDA1 - GPIO02 - 3 <input id="pinTable-pin-3" type="radio" name="pins" value="3"></label></div>
                    <div class="pinTableCellR pinColorPower"><label><input disabled type="radio" name="pins" value=""> 4 - 5V Power</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-5">SCL1 - GPIO03 - 5 <input id="pinTable-pin-5" type="radio" name="pins" value="5"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 6 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-7">GPIO04 - 7 <input id="pinTable-pin-7" type="radio" name="pins" value="7"></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-8"><input id="pinTable-pin-8" type="radio" name="pins" value="8"> 8 - GPIO14 - TxD</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGround"><label>Ground - 9 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-10"><input id="pinTable-pin-10" type="radio" name="pins" value="10"> 10 - GPIO15 - RxD</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-11">GPIO17 - 11 <input id="pinTable-pin-11" type="radio" name="pins" value="11"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-12"><input id="pinTable-pin-12" type="radio" name="pins" value="12"> 12 - GPIO18</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-13">GPIO27 - 13 <input id="pinTable-pin-13" type="radio" name="pins" value="13"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 14 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-15">GPIO22 - 15 <input id="pinTable-pin-15" type="radio" name="pins" value="15"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-16"><input id="pinTable-pin-16" type="radio" name="pins" value="16"> 16 - GPIO23</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorPower"><label>3.3V Power - 17 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-18"><input id="pinTable-pin-18" type="radio" name="pins" value="18"> 18 - GPIO24</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-19">MOSI - GPIO10 - 19 <input id="pinTable-pin-19" type="radio" name="pins" value="19"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 20 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-21">MISO - GPIO09 - 21 <input id="pinTable-pin-21" type="radio" name="pins" value="21"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-22"><input id="pinTable-pin-22" type="radio" name="pins" value="22"> 22 - GPIO25</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-23">SCLK - GPIO11 - 23 <input id="pinTable-pin-23" type="radio" name="pins" value="23"></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-24"><input id="pinTable-pin-24" type="radio" name="pins" value="24"> 24 - GPIO8 - CE0</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGround"><label>Ground - 25 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-26"><input id="pinTable-pin-26" type="radio" name="pins" value="26"> 26 - GPIO7 - CE1</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorSD"><label>SD - 27 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorSD"><label><input disabled type="radio" name="pins" value=""> 28 - SC</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-29">GPIO05 - 29 <input id="pinTable-pin-29" type="radio" name="pins" value="29"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 30 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-31">GPIO06 - 31 <input id="pinTable-pin-31" type="radio" name="pins" value="31"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-32"><input id="pinTable-pin-32" type="radio" name="pins" value="32"> 32 - GPIO12</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-33">GPIO13 - 33 <input id="pinTable-pin-33" type="radio" name="pins" value="33"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 34 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-35">GPIO19 - 35 <input id="pinTable-pin-35" type="radio" name="pins" value="35"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-36"><input id="pinTable-pin-36" type="radio" name="pins" value="36"> 36 - GPIO16</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-37">GPIO26 - 37 <input id="pinTable-pin-37" type="radio" name="pins" value="37"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-38"><input id="pinTable-pin-38" type="radio" name="pins" value="38"> 38 - GPIO20</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGround"><label>Ground - 39 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-40"><input id="pinTable-pin-40" type="radio" name="pins" value="40"> 40 - GPIO21</label></div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-row">
        <label>&nbsp;&nbsp;&nbsp;&nbsp;</label>
        <input type="text" id="node-input-pin" style="width: 352px">
    </div>
    <div class="form-row">
        <label for="node-input-intype"><i class="fa fa-level-up"></i> <span data-i18n="rpi-gpio.label.resistor"></span></label>
        <select type="text" id="node-input-intype" style="width:100px;">
        <option value="tri" data-i18n="rpi-gpio.resistor.none"></option>
        <option value="up" data-i18n="rpi-gpio.resistor.pullup"></option>
        <option value="down" data-i18n="rpi-gpio.resistor.pulldown"></option>
        </select>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-i18n="rpi-gpio.label.debounce"></span>
        <input type="text" id="node-input-debounce" style="width:47px; text-align:right"/>&nbsp;mS
    </div>
    <div class="form-row">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-read" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-read" style="width:70%;"><span data-i18n="rpi-gpio.label.readinitial"></span></label>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-tips" id="pin-tip"><span data-i18n="[html]rpi-gpio.tip.pin"></span></div>
    <div class="form-tips"><span data-i18n="[html]rpi-gpio.tip.in"></span></div>
</script>

<script type="text/javascript">
    var bcm2pin = {
        "2":"3", "3":"5", "4":"7", "14":"8", "15":"10", "17":"11", "18":"12", "27":"13", "22":"15",
        "23":"16", "24":"18", "10":"19", "9":"21", "25":"22", "11":"23", "8":"24", "7":"26",
        "5":"29", "6":"31", "12":"32", "13":"33", "19":"35", "16":"36", "26":"37", "20":"38", "21":"40"
    };
    var pinsInUse = {};
    var validPinValues = Object.values(bcm2pin);
    var isEnvVar = function (value) {
        var re = /^\${([0-9a-zA-Z_]+)}$/;
        var match = value.match(re);
        return Boolean(match);
    };
    var isInt = function (value) {
        return parseInt(value).toString() === value.trim();
    };
    var uncheckAll = function() {
        for (var i=0; i< validPinValues.length; i++) {
            $("#pinform input[value="+validPinValues[i]+"]").prop('checked', false);
        }
    }
    var validatePin = function (value) {
        return isEnvVar(value) || (isInt(value) && validPinValues.includes(value));
    };
    RED.nodes.registerType('rpi-gpio in',{
        category: 'Raspberry Pi',
        color:"#c6dbef",
        defaults: {
            name: { value:"" },
            pin: { value:"tri",required:true,validate:validatePin },
            intype: { value:"tri" },
            debounce: { value:"25" },
            read: { value:false }
        },
        inputs:0,
        outputs:1,
        icon: "rpi.png",
        info: function() {
            if ( Object.keys(pinsInUse).length !== 0 ) {
                return "**Pins in use** : "+Object.keys(pinsInUse);
            }
            else { return ""; }
        },
        label: function() {
            var suf = "";
            if (this.intype === "up") { suf = " "}
            if (this.intype === "down") { suf = " "}
            return this.name || "PIN: "+suf+this.pin ;
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        outputLabels: function() { return "GPIO"+this.pin; },
        oneditprepare: function() {
            var pinnow = this.pin;
            var pintip = this._("rpi-gpio.tip.pin");
            var pinname = this._("rpi-gpio.pinname");
            var alreadyuse = this._("rpi-gpio.alreadyuse");
            var alreadyset = this._("rpi-gpio.alreadyset");

            $.getJSON('rpi-pins/'+this.id,function(data) {
                pinsInUse = data || {};
                $('#pin-tip').html(pintip + Object.keys(data));
            });

            for (var i=0; i< validPinValues.length; i++) {
                $("#pinform input[value="+validPinValues[i]+"]").on("change", function (evt) {
                    $("#node-input-pin").val(evt.currentTarget.value);
                    $("#node-input-pin").removeClass("input-error");
                });
            }
            $("#node-input-pin").on("change", function() {
                var pinnew = $("#node-input-pin").val();
                if (pinnew && isInt(pinnew) && validPinValues.includes(pinnew)) {
                    $("#pinform input[value="+pinnew+"]").prop('checked', true);
                } else {
                    uncheckAll();
                }
                if ((pinnew) && (pinnew !== pinnow)) {
                    if (pinsInUse.hasOwnProperty(pinnew)) {
                        RED.notify(pinname+" "+pinnew+" "+alreadyuse,"warn");
                    }
                    pinnow = pinnew;
                }
            });
            $("#node-input-intype").on("change", function() {
                var newtype = $("#node-input-intype").val();
                if ((pinsInUse.hasOwnProperty(pinnow)) && (pinsInUse[pinnow] !== newtype)) {
                    RED.notify(pinname+" "+pinnow+" "+alreadyset+" "+pinsInUse[pinnow],"error");
                }
            });
            $('#pinform input').on('change', function() {
                this.pin = $("#pinform input[type='radio']:checked").val();
                $("#node-input-pin").val(this.pin);
            });
        }
    });
</script>

<script type="text/html" data-template-name="rpi-gpio out">
    <div class="form-row" style="min-width: 540px">
        <label><i class="fa fa-circle"></i> <span data-i18n="rpi-gpio.pinname"></span></label>
        <div class="rpi-gpio-pinTable">
            <div class="pinTableBody" id="pinform">
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorPower"><label>3.3V Power - 1 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorPower"><label><input disabled type="radio" name="pins" value=""> 2 - 5V Power</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-3">SDA1 - GPIO02 - 3 <input id="pinTable-pin-3" type="radio" name="pins" value="3"></label></div>
                    <div class="pinTableCellR pinColorPower"><label><input disabled type="radio" name="pins" value=""> 4 - 5V Power</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-5">SCL1 - GPIO03 - 5 <input id="pinTable-pin-5" type="radio" name="pins" value="5"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 6 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-7">GPIO04 - 7 <input id="pinTable-pin-7" type="radio" name="pins" value="7"></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-8"><input id="pinTable-pin-8" type="radio" name="pins" value="8"> 8 - GPIO14 - TxD</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGround"><label>Ground - 9 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-10"><input id="pinTable-pin-10" type="radio" name="pins" value="10"> 10 - GPIO15 - RxD</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-11">GPIO17 - 11 <input id="pinTable-pin-11" type="radio" name="pins" value="11"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-12"><input id="pinTable-pin-12" type="radio" name="pins" value="12"> 12 - GPIO18</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-13">GPIO27 - 13 <input id="pinTable-pin-13" type="radio" name="pins" value="13"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 14 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-15">GPIO22 - 15 <input id="pinTable-pin-15" type="radio" name="pins" value="15"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-16"><input id="pinTable-pin-16" type="radio" name="pins" value="16"> 16 - GPIO23</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorPower"><label>3.3V Power - 17 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-18"><input id="pinTable-pin-18" type="radio" name="pins" value="18"> 18 - GPIO24</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-19">MOSI - GPIO10 - 19 <input id="pinTable-pin-19" type="radio" name="pins" value="19"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 20 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-21">MISO - GPIO09 - 21 <input id="pinTable-pin-21" type="radio" name="pins" value="21"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-22"><input id="pinTable-pin-22" type="radio" name="pins" value="22"> 22 - GPIO25</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorDual"><label for="pinTable-pin-23">SCLK - GPIO11 - 23 <input id="pinTable-pin-23" type="radio" name="pins" value="23"></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-24"><input id="pinTable-pin-24" type="radio" name="pins" value="24"> 24 - GPIO8 - CE0</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGround"><label>Ground - 25 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorDual"><label for="pinTable-pin-26"><input id="pinTable-pin-26" type="radio" name="pins" value="26"> 26 - GPIO7 - CE1</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorSD"><label>SD - 27 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorSD"><label><input disabled type="radio" name="pins" value=""> 28 - SC</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-29">GPIO05 - 29 <input id="pinTable-pin-29" type="radio" name="pins" value="29"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 30 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-31">GPIO06 - 31 <input id="pinTable-pin-31" type="radio" name="pins" value="31"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-32"><input id="pinTable-pin-32" type="radio" name="pins" value="32"> 32 - GPIO12</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-33">GPIO13 - 33 <input id="pinTable-pin-33" type="radio" name="pins" value="33"></label></div>
                    <div class="pinTableCellR pinColorGround"><label><input disabled type="radio" name="pins" value=""> 34 - Ground</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-35">GPIO19 - 35 <input id="pinTable-pin-35" type="radio" name="pins" value="35"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-36"><input id="pinTable-pin-36" type="radio" name="pins" value="36"> 36 - GPIO16</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGPIO"><label for="pinTable-pin-37">GPIO26 - 37 <input id="pinTable-pin-37" type="radio" name="pins" value="37"></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-38"><input id="pinTable-pin-38" type="radio" name="pins" value="38"> 38 - GPIO20</label></div>
                </div>
                <div class="pinTableRow">
                    <div class="pinTableCellL pinColorGround"><label>Ground - 39 <input disabled type="radio" name="pins" value=""></label></div>
                    <div class="pinTableCellR pinColorGPIO"><label for="pinTable-pin-40"><input id="pinTable-pin-40" type="radio" name="pins" value="40"> 40 - GPIO21</label></div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-row">
        <label>&nbsp;&nbsp;&nbsp;&nbsp;</label>
        <input type="text" id="node-input-pin" style="width: 352px">
    </div>
    <div class="form-row" id="node-set-pwm">
        <label>&nbsp;&nbsp;&nbsp;&nbsp;<span data-i18n="rpi-gpio.label.type"></span></label>
        <select id="node-input-out" style="width: 250px;">
            <option value="out" data-i18n="rpi-gpio.digout"></option>
            <option value="pwm" data-i18n="rpi-gpio.pwmout"></option>
        </select>
    </div>
    <div class="form-row" id="node-set-tick">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-set" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-set" style="width: 70%;"><span data-i18n="rpi-gpio.label.initpin"></span></label>
    </div>
    <div class="form-row" id="node-set-state">
        <label for="node-input-level">&nbsp;</label>
        <select id="node-input-level" style="width: 250px;">
            <option value="0" data-i18n="rpi-gpio.initpin0"></option>
            <option value="1" data-i18n="rpi-gpio.initpin1"></option>
        </select>
    </div>
    <div class="form-row" id="node-set-freq">
        <label for="node-input-freq"> <span data-i18n="rpi-gpio.label.freq"></span></label>
        <input type="text" id="node-input-freq" placeholder="100"> Hz
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
    <div class="form-tips" id="pin-tip"><span data-i18n="[html]rpi-gpio.tip.pin"></span></div>
    <div class="form-tips" id="dig-tip"><span data-i18n="[html]rpi-gpio.tip.dig"></span></div>
    <div class="form-tips" id="pwm-tip"><span data-i18n="[html]rpi-gpio.tip.pwm"></span></div>
</script>

<script type="text/javascript">
    var bcm2pin = {
        "2":"3", "3":"5", "4":"7", "14":"8", "15":"10", "17":"11", "18":"12", "27":"13", "22":"15",
        "23":"16", "24":"18", "10":"19", "9":"21", "25":"22", "11":"23", "8":"24", "7":"26",
        "5":"29", "6":"31", "12":"32", "13":"33", "19":"35", "16":"36", "26":"37", "20":"38", "21":"40"
    };
    var pinsInUse = {};
    var validPinValues = Object.values(bcm2pin);
    var isEnvVar = function (value) {
        var re = /^\${([0-9a-zA-Z_]+)}$/;
        var match = value.match(re);
        return Boolean(match);
    };
    var isInt = function (value) {
        return parseInt(value).toString() === value.trim();
    };
    var uncheckAll = function() {
        for (var i=0; i< validPinValues.length; i++) {
            $("#pinform input[value="+validPinValues[i]+"]").prop('checked', false);
        }
    }
    var validatePin = function (value) {
        return isEnvVar(value) || (isInt(value) && validPinValues.includes(value));
    };
    RED.nodes.registerType('rpi-gpio out',{
        category: 'Raspberry Pi',
        color:"#c6dbef",
        defaults: {
            name: { value:"" },
            pin: { value:"",required:true,validate:validatePin },
            set: { value:"" },
            level: { value:"0" },
            freq: {value:""},
            out: { value:"out" }
        },
        inputs:1,
        outputs:0,
        icon: "rpi.png",
        info: function() {
            if ( Object.keys(pinsInUse).length !== 0 ) {
                return "**Pins in use** : "+Object.keys(pinsInUse);
            }
            else { return ""; }
        },
        align: "right",
        label: function() {
            if (this.out === "pwm") { return this.name || "PWM: "+this.pin; }
            else if (this.out === "ser") { return this.name || "Servo: "+this.pin; }
            else {
                var suf = "";
                if (this.set == true) { suf = (this.level === "1") ? " " : " "; }
                return this.name||"PIN: "+ this.pin + suf ;
            }
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        inputLabels: function() { return "GPIO"+this.pin; },
        oneditprepare: function() {
            var pinnow = this.pin;
            var pintip = this._("rpi-gpio.tip.pin");
            var pinname = this._("rpi-gpio.pinname");
            var alreadyuse = this._("rpi-gpio.alreadyuse");
            var alreadyset = this._("rpi-gpio.alreadyset");
            if (!$("#node-input-out").val()) { $("#node-input-out").val("out"); }

            $.getJSON('rpi-pins/'+this.id,function(data) {
                pinsInUse = data || {};
                $('#pin-tip').html(pintip + Object.keys(data));
            });

            for (var i=0; i< validPinValues.length; i++) {
                $("#pinform input[value="+validPinValues[i]+"]").on("change", function (evt) {
                    $("#node-input-pin").val(evt.currentTarget.value);
                    $("#node-input-pin").removeClass("input-error");
                });
            }
            $("#node-input-pin").on("change", function() {
                var pinnew = $("#node-input-pin").val();
                if (pinnew && isInt(pinnew) && validPinValues.includes(pinnew)) {
                    $("#pinform input[value="+pinnew+"]").prop('checked', true);
                } else {
                    uncheckAll();
                }
                if ((pinnew) && (pinnew !== pinnow)) {
                    if (pinsInUse.hasOwnProperty(pinnew)) {
                        RED.notify(pinname+" "+pinnew+" "+alreadyuse,"warn");
                    }
                    pinnow = pinnew;
                }
            });

            $("#node-input-out").on("change", function() {
                var newtype = $("#node-input-out").val();
                if ((pinsInUse.hasOwnProperty(pinnow)) && (pinsInUse[pinnow] !== newtype)) {
                    RED.notify(pinname+" "+pinnow+" "+alreadyset+" "+pinsInUse[pinnow],"error");
                }
            });

            var hidestate = function () {
                if ($("#node-input-out").val() === "pwm") {
                    $('#node-set-tick').hide();
                    $('#node-set-state').hide();
                    $('#node-input-set').prop('checked', false);
                    $("#dig-tip").hide();
                    $("#pwm-tip").show();
                    $('#node-set-freq').show();
                }
                else {
                    $('#node-set-tick').show();
                    $("#dig-tip").show();
                    $("#pwm-tip").hide();
                    $('#node-set-freq').hide();
                }
            };
            $("#node-input-out").on("change", function () { hidestate(); });
            hidestate();

            var setstate = function () {
                if ($('#node-input-set').is(":checked")) {
                    $("#node-set-state").show();
                } else {
                    $("#node-set-state").hide();
                }
            };
            $("#node-input-set").on("change", function () { setstate(); });
            setstate();

            $('#pinform input').on('change', function() {
                this.pin = $("#pinform input[type='radio']:checked").val();
                $("#node-input-pin").val(this.pin);
            });
        }
    });
</script>

<script type="text/html" data-template-name="rpi-mouse">
    <div class="form-row">
        <label for="node-input-butt"><i class="fa fa-circle"></i> <span data-i18n="rpi-gpio.label.button"></span></label>
        <select type="text" id="node-input-butt" style="width: 250px;">
            <option value="1" data-i18n="rpi-gpio.left"></option>
            <option value="2" data-i18n="rpi-gpio.right"></option>
            <option value="4" data-i18n="rpi-gpio.middle"></option>
            <option value="7" data-i18n="rpi-gpio.any"></option>
         </select>
    </div>
    <br/>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('rpi-mouse',{
        category: 'Raspberry Pi',
        color:"#c6dbef",
        defaults: {
            name: { value:"" },
            butt: { value:"1",required:true }
        },
        inputs:0,
        outputs:1,
        icon: "rpi.png",
        label: function() {
            var na = this._("rpi-gpio.label.pimouse");
            if (this.butt === "1") { na += " "+this._("rpi-gpio.label.left"); }
            if (this.butt === "2") { na += " "+this._("rpi-gpio.label.right"); }
            if (this.butt === "4") { na += " "+this._("rpi-gpio.label.middle"); }
            return this.name||na;
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>

<script type="text/html" data-template-name="rpi-keyboard">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="node-red:common.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('rpi-keyboard',{
        category: 'Raspberry Pi',
        color:"#c6dbef",
        defaults: {
            name: { value:"" }
        },
        inputs:0,
        outputs:1,
        icon: "rpi.png",
        label: function() {
            return this.name || this._("rpi-gpio.label.pikeyboard");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="rpi-gpio in">
    <p>Raspberry Pi input node. Generates a <code>msg.payload</code> with either a
    0 or 1 depending on the state of the input pin.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">number</span></dt>
        <dd>the payload will be a 1 or a 0.</dd>
        <dt>topic <span class="property-type">string</span></dt>
        <dd>the topic will be set to <code>pi/{the pin number}</code>.</dd>
    </dl>
    <h3>Details</h3>
    <p>You may also enable the input pullup resistor or the pulldown resistor.</p>
    <p>Requires the RPi.GPIO python library version 0.5.10 (or better) in order to work.</p>
</script>

<script type="text/html" data-help-name="rpi-gpio out">
    <p>Raspberry Pi output node. Can be used in Digital or PWM modes.</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">number | string | boolean</span></dt>
    </dl>
    <h3>Details</h3>
    <p>Digital mode - expects a <code>msg.payload</code> with either a 0 or 1 (or true or false),
    and will set the selected physical pin high or low depending on the value passed in.</p>
    <p>The initial value of the pin at deploy time can also be set to 0 or 1.</p>
    <p>PWM mode - expects an input value of a number 0 - 100. It can be floating point.</p>
    <p>PWM mode can be used to drive a servo using input values between 10 and 20 only,
    but will accept floating point values.
    The GPIO2 pin is best for this as it uses hardware to do the PWM. For better servo support
    consider the alternative node-red-node-pi-gpiod node.</p>
    <p>Requires the RPi.GPIO python library version 0.5.10 (or better) in order to work.</p>
</script>

<script type="text/html" data-help-name="rpi-mouse">
    <p>Raspberry Pi mouse button node. Requires a USB mouse.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">number</span></dt>
        <dd>1 or 0 when the selected mouse button is pressed and released.</dd>
        <dt>button <span class="property-type">number</span></dt>
        <dd>1, 2, 4 corresponding to left, right and middle buttons, so you
        can work out which button or combination was pressed.</dd>
        <dt>topic <span class="property-type">string</span></dt>
        <dd>set to <code>pi/mouse</code></dd>
    </dl>
</script>

<script type="text/html" data-help-name="rpi-keyboard">
    <p>Raspberry Pi keyboard handling node. Requires a USB keyboard.</p>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">number</span></dt>
        <dd>contains the keycode value</dd>
        <dt>action <span class="property-type">string</span></dt>
        <dd>set to "up", "down", or "repeat"</dd>
        <dt>topic <span class="property-type">string</span></dt>
        <dd>set to <code>pi/key</code></dd>
    </dl>
</script>

</div><div><!-- --- [red-module:node-red-node-ui-list/ui_list] --- -->
<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-template-name="ui_list">  <!-- type MUST start with ui_ -->
    <!-- common input elements for dashboard widget -->
    <div class="form-row" id="template-row-group">
        <label for="node-input-group"><i class="fa fa-table"></i> <span data-i18n="ui_list.label.group"></span></label>
        <input type="text" id="node-input-group">
    </div>
    <div class="form-row" id="template-row-size">
        <label><i class="fa fa-object-group"></i> <span data-i18n="ui_list.label.size"></span></label>
        <input type="hidden" id="node-input-width">
        <input type="hidden" id="node-input-height">
        <button class="editor-button" id="node-input-size"></button>
    </div>

    <!-- widget specific input elements for ui_list widget -->
    <div class="form-row">
        <label for="type-select"><i class="fa fa-bars"></i> <span data-i18n="ui_list.label.list"></span></label>
        <select id="type-select">
            <option value="one" data-i18n="ui_list.type.one"></option>
            <option value="two" data-i18n="ui_list.type.two"></option>
            <option value="three" data-i18n="ui_list.type.three"></option>
        </select>
        <input type="hidden" id="node-input-lineType">
    </div>
    <div class="form-row">
        <label for="action-select"><i class="fa fa-hand-pointer-o"></i> <span data-i18n="ui_list.label.action"></span></label>
        <select id="action-select">
            <option value="none" data-i18n="ui_list.action.none"></option>
            <option value="click" data-i18n="ui_list.action.click"></option>
            <option value="check" data-i18n="ui_list.action.check"></option>
            <option value="switch" data-i18n="ui_list.action.switch"></option>
            <option value="menu" data-i18n="ui_list.action.menu"></option>
        </select>
        <input type="hidden" id="node-input-actionType">
    </div>
    <div class="form-row">
        <label>&nbsp;</label>
        <input type="checkbox" id="node-input-allowHTML" style="display: inline-block; width: auto; vertical-align: top;">
        <label for="node-input-allowHTML" style="width: 70%;"><span data-i18n="ui_list.label.html"></span></label>
    </div>
    <div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> <span data-i18n="ui_list.label.topic"></span></label>
        <input type="text" id="node-input-topic">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="ui_list.label.name"></span></label>
        <input type="text" id="node-input-name">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType("ui_list", {
        category: 'dashboard',
        color: 'rgb( 63, 173, 181)',
        defaults: {
            // belonging dashboard group
            group: {type: 'ui_group', required:true},
            name: {value: ''},
            order: {value: 0},
            // width and height of widget
            width: {
                value: 0,
                validate: function(v) {
                    var valid = true
                    var width = v||0;
                    var currentGroup = $('#node-input-group').val()|| this.group;
                    var groupNode = RED.nodes.node(currentGroup);
                    valid = !groupNode || +width <= +groupNode.width;
                    $("#node-input-size").toggleClass("input-error",!valid);
                    return valid;
                }},
            height: {value: 0},
            lineType: {value: "two" },
            actionType: {value: "none" },
            allowHTML: {value: false},
            outputs: {value: 1},
            topic: {value: ''}
        },
        inputs:1,
        outputs:1,
        icon: "icon.png",
        paletteLabel: "list",
        label: function() { return this.name || "list"; },
        oneditprepare: function() {
            // use elementSizer to input common widget parameters
            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                group: "#node-input-group"
            });

            $("#type-select").change(function() {
                var val = $("#type-select").val();
                $("#node-input-lineType").val(val);
            });
            $("#type-select").val(this.lineType);
            $("#type-select").change();

            $("#action-select").change(function() {
                var val = $("#action-select").val();
                $("#node-input-actionType").val(val);
            });
            $("#action-select").val(this.actionType);
            $("#action-select").change();
        },
        oneditsave: function() {
            var that = this;
            if ($("#node-input-actionType").val() === "none") { that.outputs = 0; }
            else { that.outputs = 1; }
        },
        oneditresize: function(size) {
        }
    });
</script>
<script type="text/html" data-help-name="ui_list">
    <p>Node-RED widget node for displaying items list</p>

    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">array</span></dt>
        <dd>Array of objects containing following properties:
            <ul>
                <li><b>title</b> - title of the item,</li>
                <li><b>description</b> - description of the item. Optional if line type is <b>Single-line</b> or action type is <b>menu</b>,</li>
                <li><b>menu</b> - list of menu items (optional),</li>
                <li><b>icon</b> - URL of icon (optional),</li>
                <li><b>icon_name</b> - font icon name (optional).</li>
                <li><b>icon_unicode</b> - alternative to icon name - uses text characters (optional).</li>
                <li><b>isChecked</b> - boolean, set the item checked or on (optional).</li>
            </ul>
        </dd>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">object</span></dt>
        <dd>When item or menu item is clicked or checked, the corresponding object is send to output port.</dd>
    </dl>

    <h3>Details</h3>
    <p>This UI widget can be used to display an items array in Node-RED dashboard.</p>
    <p>Items array is passed by <code>msg.payload</code>.  It consists of object containing <code>title</code>, <code>description</code>, <code>icon</code>, and <code>icon_name</code> properties.
    <code>description</code>, <code>menu</code>, <code>icon</code> and <code>icon_name</code> properties are optional.</p>
    <p>Type of item display can be selected by <code>List Type</code> selector.</p>
    <p>An action to be taken for an item can be selected by <code>Action</code> selector:</p>
    <ul>
        <li><b>none</b> - No action is performed,</li>
        <li><b>click to send an item</b> - sends an item to output port if clicked,</li>
        <li><b>checkbox to send changed item</b> - sends an item to output port if checkbox is changed.  Checkbox state is included in <code>isChecked</code> flag of the output payload object,</li>
        <li><b>switch to send changed item</b> - sends an item to output port if switch is changed.  Switch state is included in <code>isChecked</code> flag of the output payload object,</li>
        <li><b>menu to send selected item</b> - sends an item to output port if item in menu is selected.  Selected item is included in <code>selected</code> property of the output payload object.</li>
    </ul>
    <p>If <b>Allow HTML in displayed text</b> checkbox is selected, HTML tags can be used in the <code>title</code> and <code>description</code>.</p>
    <p>Icon can be specified by <code>icon</code> or <code>icon_name</code> propeety.  <code>icon</code> specifies URL of icon file.  If <code>icon</code> is <code>null</code>, blank icon is displayed.
    <code>icon_name</code> specifies icon name of font icons. <code>icon_unicode</code> specifies text to use as an icon - useful for unicode symbols like flags, etc. 
    <code>icon</code> has precedence over <code>icon_name</code> and <code>icon_unicode</code>.</p>
</script>

</div><div><!-- --- [red-module:node-red-node-rbe/rbe] --- -->

<script type="text/html" data-template-name="rbe">
    <div class="form-row">
        <label for="node-input-func"><i class="fa fa-wrench"></i> <span data-i18n="rbe.label.func"></span></label>
        <select type="text" id="node-input-func" style="width:70%;">
            <option value="rbe" data-i18n="rbe.opts.rbe"></option>
            <option value="rbei" data-i18n="rbe.opts.rbei"></option>
            <option value="deadbandEq" data-i18n="rbe.opts.deadbandEq"></option>
            <option value="deadband" data-i18n="rbe.opts.deadband"></option>
            <option value="narrowbandEq" data-i18n="rbe.opts.narrowbandEq"></option>
            <option value="narrowband" data-i18n="rbe.opts.narrowband"></option>
        </select>
    </div>
    <div class="form-row" id="node-bandgap">
        <label for="node-input-gap">&nbsp;</label>
        <input type="text" id="node-input-gap" data-i18n="[placeholder]rbe.placeholder.bandgap" style="width:95px;">
        <select type="text" id="node-input-inout" style="width:54%;">
            <option value="out" data-i18n="rbe.opts.out"></option>
            <option value="in" data-i18n="rbe.opts.in"></option>
        </select>
    </div>
    <div class="form-row" id="node-startvalue">
        <label for="node-input-start"><i class="fa fa-thumb-tack"></i> <span data-i18n="rbe.label.start"></span></label>
        <input type="text" id="node-input-start" data-i18n="[placeholder]rbe.placeholder.start" style="width:70%;">
    </div>
    <div class="form-row">
        <label for="node-input-property"><i class="fa fa-ellipsis-h"></i> <span data-i18n="node-red:common.label.property"></span></label>
        <input type="text" id="node-input-property" style="width:70%;"/>
    </div>
    <div class="form-row">
        <label> </label>
        <input type="checkbox" id="node-input-septopics" style="display:inline-block; width:20px; vertical-align:baseline;">
        <span data-i18n="rbe.label.septopics"></span>
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> <span data-i18n="rbe.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]rbe.label.name" style="width:70%;">
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType("rbe", {
        color:"#E2D96E",
        category: 'function',
        defaults: {
            name: {value:""},
            func: {value:"rbe"},
            gap: {value:"",validate:RED.validators.regex(/^(\d*[.]*\d*|)(%|)$/)},
            start: {value:""},
            inout: {value:"out"},
            septopics: {value:true},
            property: {value:"payload",required:true}
        },
        inputs:1,
        outputs:1,
        icon: "rbe.png",
        label: function() {
            var ll = (this.func||"").replace("Eq","").replace("rbei","rbe")||this._("rbe.rbe");
            return this.name||ll||this._("rbe.rbe");
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        },
        oneditprepare: function() {
            if (this.property === undefined) {
                $("#node-input-property").val("payload");
            }
            if (this.septopics === undefined) {
                $("#node-input-septopics").prop('checked', true);
            }
            $("#node-input-property").typedInput({default:'msg',types:['msg']});
            //$( "#node-input-gap" ).spinner({min:0});
            if ($("#node-input-inout").val() === null) {
                $("#node-input-inout").val("out");
            }
            $("#node-input-func").on("change",function() {
                if (($("#node-input-func").val() === "rbe")||($("#node-input-func").val() === "rbei")) {
                    $("#node-bandgap").hide();
                } else {
                    $("#node-bandgap").show();
                }
                if (($("#node-input-func").val() === "narrowband")||($("#node-input-func").val() === "narrowbandEq")) {
                    $("#node-startvalue").show();
                } else {
                    $("#node-startvalue").hide();
                }
            });
        }
    });
</script>
<script type="text/html" data-help-name="rbe">
    <p>Report by Exception (RBE) node - only passes on data if the payload has changed.
       It can also block unless, or ignore if the value changes by a specified amount (Dead- and Narrowband mode).</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
        <dt>payload
            <span class="property-type">number | string | (object)</span>
        </dt>
        <dd>RBE mode will accept numbers, strings, and simple objects.
            Other modes must provide a parseable number.</dd>
        <dt class="optional">topic <span class="property-type">string</span>
        </dt>
        <dd>if specified the function will work on a per topic basis.</dd>
        <dt class="optional">reset<span class="property-type">any</span></dt>
        <dd>if set clears the stored value for the specified msg.topic, or
            all topics if msg.topic is not specified.</dd>
    </dl>
    <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload
            <span class="property-type">as per input</span>
        </dt>
        <dd>If triggered the output will be the same as the input.</dd>
    </dl>
    <h3>Details</h3>
    <p>In RBE mode this node will block until the <code>msg.payload</code>,
       (or selected property) value is different to the previous one.
       If required it can ignore the intial value, so as not to send anything at start.</p>
    <p>The <a href="https://en.wikipedia.org/wiki/Deadband" target="_blank">Deadband</a> modes will block the incoming value 
       <i>unless</i> its change is greater or greater-equal than &plusmn; the band gap away from a previous value.</p>
    <p>The Narrowband modes will block the incoming value,
       <i>if</i> its change is greater or greater-equal than &plusmn; the band gap away from the previous value.
       It is useful for ignoring outliers from a faulty sensor for example.</p>
    <p>Both in Deadband and Narrowband modes the incoming value must contain a parseable number and
       both also supports % - only sends if/unless the input differs by more than x% of the original value.</p>
    <p>Both Deadband and Narrowband allow comparison against either the previous valid output value, thus
    ignoring any values out of range, or the previous input value, which resets the set point, thus allowing
    gradual drift (deadband), or a step change (narrowband).</p>
    <p><b>Note:</b> This works on a per <code>msg.topic</code> basis.
       This means that a single rbe node can handle multiple different topics at the same time.</p>
</script></div></div><div id="red-ui-full-shade" class="hide"></div><div id="red-ui-notifications"></div><textarea type="text" id="red-ui-clipboard-hidden" tabindex="-1"></textarea><div id="red-ui-drop-target"><div data-i18n="[append]workspace.dropFlowHere"><i class="fa fa-download"></i><br>Drop the flow here</div></div><span class="red-ui-palette-label" style="position: absolute; top: -1000px;">Subflow   3</span><span class="red-ui-flow-node-label" style="position: absolute; top: -1000px;">Count:</span><span class="red-ui-flow-group-label" style="position: absolute; top: -1000px;">Opname module</span></div>
<script src="Node-RED_files/vendor.js"></script>
<script src="Node-RED_files/red.min.js"></script>
<script src="Node-RED_files/main.min.js"></script>



<div style="display: none;" tabindex="-1" role="dialog" class="ui-dialog red-ui-editor-dialog ui-widget ui-widget-content ui-front ui-dialog-buttons ui-draggable" aria-describedby="red-ui-library-dialog-save" aria-labelledby="ui-id-1"><div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle"><span id="ui-id-1" class="ui-dialog-title">Save to Library...</span><button type="button" class="ui-button ui-corner-all ui-widget ui-button-icon-only ui-dialog-titlebar-close hide" title="Close"><span class="ui-button-icon ui-icon ui-icon-closethick"></span><span class="ui-button-icon-space"> </span>Close</button></div><div id="red-ui-library-dialog-save" class="hide ui-dialog-content ui-widget-content" style="display: block;"><form class="form-horizontal"><div class="red-ui-library-dialog-box" style="height: 400px; position:relative; "><div id="red-ui-library-dialog-save-browser"><div class="red-ui-library-browser"><div style="width: 100%; height: 100%;" class="red-ui-treeList" tabindex="0"><div class="red-ui-treeList-container"><div class="red-ui-editableList" style="inset: 0px; position: absolute;"><div style="inset: 0px; position: absolute; max-height: none; overflow-y: scroll;" class="red-ui-editableList-border red-ui-editableList-container"><ol class="red-ui-treeList-list red-ui-editableList-list" style="position: static; inset: auto; height: auto;"></ol></div></div></div></div></div></div><div class="form-row"><label data-i18n="clipboard.export.exportAs">Export as</label><input id="red-ui-library-dialog-save-filename" type="text"></div></div></form></div><div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"><div class="ui-dialog-buttonset"><button type="button" class="ui-button ui-corner-all ui-widget">Cancel</button><button type="button" id="red-ui-library-dialog-save-button" class="primary ui-button ui-corner-all ui-widget">Save</button></div></div></div><div style="display: none;" tabindex="-1" role="dialog" class="ui-dialog red-ui-editor-dialog ui-widget ui-widget-content ui-front ui-dialog-buttons ui-draggable" aria-describedby="red-ui-library-dialog-load" aria-labelledby="ui-id-2"><div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle"><span id="ui-id-2" class="ui-dialog-title">&nbsp;</span><button type="button" class="ui-button ui-corner-all ui-widget ui-button-icon-only ui-dialog-titlebar-close hide" title="Close"><span class="ui-button-icon ui-icon ui-icon-closethick"></span><span class="ui-button-icon-space"> </span>Close</button></div><div id="red-ui-library-dialog-load" class="hide ui-dialog-content ui-widget-content" style="display: block;"><form class="form-horizontal"><div class="red-ui-library-dialog-box" style="height: 400px; position:relative; "><div id="red-ui-library-dialog-load-panes" class="red-ui-panels red-ui-panels-horizontal"><div class="red-ui-panel" id="red-ui-library-dialog-load-browser"><div class="red-ui-library-browser"><div style="width: 100%; height: 100%;" class="red-ui-treeList" tabindex="0"><div class="red-ui-treeList-container"><div class="red-ui-editableList" style="inset: 0px; position: absolute;"><div style="inset: 0px; position: absolute; max-height: none; overflow-y: scroll;" class="red-ui-editableList-border red-ui-editableList-container"><ol class="red-ui-treeList-list red-ui-editableList-list" style="position: static; inset: auto; height: auto;"></ol></div></div></div></div></div></div><div class="red-ui-panels-separator ui-draggable ui-draggable-handle" style="position: relative;"></div><div class="red-ui-panel"><div id="red-ui-library-dialog-load-preview" class="red-ui-panels"><div class="red-ui-panel" id="red-ui-library-dialog-load-preview-text"></div><div class="red-ui-panels-separator ui-draggable ui-draggable-handle" style="position: relative;"></div><div class="red-ui-panel" id="red-ui-library-dialog-load-preview-details"><table id="red-ui-library-dialog-load-preview-details-table" class="red-ui-info-table"></table></div></div></div></div></div></form></div><div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"><div class="ui-dialog-buttonset"><button type="button" class="ui-button ui-corner-all ui-widget">Cancel</button><button type="button" class="primary ui-button ui-corner-all ui-widget">Load</button></div></div></div><div class="red-ui-editor-dialog red-ui-popover-panel" style="display: none;"><ul class="red-ui-menu red-ui-menu-compact"><li><a href="#">Configuration nodes</a></li><li><a href="#">Unused configuration nodes</a></li><li><a href="#">Invalid nodes</a></li><li><a href="#">Unknown nodes</a></li><li><a href="#">Unused subflows</a></li></ul></div><div style="display: none;" tabindex="-1" role="dialog" class="ui-dialog red-ui-editor-dialog ui-widget ui-widget-content ui-front ui-draggable" aria-describedby="red-ui-projects-dialog" aria-labelledby="ui-id-3"><div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle"><span id="ui-id-3" class="ui-dialog-title">&nbsp;</span><button type="button" class="ui-button ui-corner-all ui-widget ui-button-icon-only ui-dialog-titlebar-close hide" title="Close"><span class="ui-button-icon ui-icon ui-icon-closethick"></span><span class="ui-button-icon-space"> </span>Close</button></div><div id="red-ui-projects-dialog" class="hide red-ui-projects-edit-form ui-dialog-content ui-widget-content" style="display: block;"><div class="red-ui-projects-dialog-box"><form class="form-horizontal"></form><div class="red-ui-component-spinner hide" style="display: none;"><img src="Node-RED_files/spin.svg"></div></div></div></div><div style="display: none;" tabindex="-1" role="dialog" class="ui-dialog red-ui-editor-dialog ui-widget ui-widget-content ui-front ui-dialog-buttons ui-draggable" aria-describedby="red-ui-clipboard-dialog" aria-labelledby="ui-id-4"><div class="ui-dialog-titlebar ui-corner-all ui-widget-header ui-helper-clearfix ui-draggable-handle"><span id="ui-id-4" class="ui-dialog-title">&nbsp;</span><button type="button" class="ui-button ui-corner-all ui-widget ui-button-icon-only ui-dialog-titlebar-close hide" title="Close"><span class="ui-button-icon ui-icon ui-icon-closethick"></span><span class="ui-button-icon-space"> </span>Close</button></div><div id="red-ui-clipboard-dialog" class="hide ui-dialog-content ui-widget-content" style="display: block;"><form class="dialog-form form-horizontal"></form></div><div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"><div class="ui-dialog-buttonset"><button type="button" id="red-ui-clipboard-dialog-cancel" class="ui-button ui-corner-all ui-widget">Cancel</button><button type="button" id="red-ui-clipboard-dialog-download" class="primary ui-button ui-corner-all ui-widget">Download</button><button type="button" id="red-ui-clipboard-dialog-export" class="primary ui-button ui-corner-all ui-widget">Copy to clipboard</button><button type="button" id="red-ui-clipboard-dialog-ok" class="primary ui-button ui-corner-all ui-widget">Import</button><button type="button" id="red-ui-clipboard-dialog-import-conflict" class="primary ui-button ui-corner-all ui-widget">Import selected</button></div></div></div><script type="application/javascript" src="Node-RED_files/tinycolor-min.js"></script><script type="application/javascript" src="Node-RED_files/gridstack.min.js"></script><script type="application/javascript" src="Node-RED_files/gridstack.jQueryUI.min.js"></script><script type="text/javascript" src="Node-RED_files/installHook.js"></script></body></html>